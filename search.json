[{"title":"Numpy  API函数用法","url":"https://suool.net/2018/12/14/Numpy-Where/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><p>此部分主要是学习过程中的一些函数笔记. <a id=\"more\"></a></p>\n<h2 id=\"where函数\">Where函数</h2>\n<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" target=\"_blank\" rel=\"noopener\">官方文档的解释</a></p>\n<p><img src=\"https://suool-bolg.b0.upaiyun.com/2018/12/14/9D71420E-7E75-4B4F-AA0A-63E3F8EAA0B3.png\"></p>\n<p>然而看的没怎么明白。</p>\n<p>numpy.where() 有两种用法：</p>\n<ol type=\"1\">\n<li><code>np.where(condition, x, y)</code> 满足条件<code>(condition)</code>，输出<code>x</code>，不满足输出<code>y</code>。</li>\n<li><code>np.where(condition)</code> 只有条件 <code>(condition)</code>，没有<code>x</code>和<code>y</code>，则输出满足条件 (即非0) 元素的坐标 (等价于<code>numpy.nonzero</code>)。这里的坐标以<code>tuple</code>的形式给出，通常原数组有多少维，输出的<code>tuple</code>中就包含几个数组，分别对应符合条件元素的各维坐标。</li>\n</ol>\n<p>看到<a href=\"https://www.zhihu.com/question/62844162/answer/300561552\" target=\"_blank\" rel=\"noopener\">知乎回答</a>的图示非常清晰，如下</p>\n<p>第一种用法的图示:</p>\n<p>输出位置的对应如下： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/12/14/15447692455357.jpg\"></p>\n<p>同理： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/12/14/15447691065494.jpg\"></p>\n<p>第二种用法的图示： 只有条件 (condition)，没有x和y，则输出满足条件 (即非0) 元素的坐标 (等价于numpy.nonzero)。这里的坐标以tuple的形式给出，通常原数组有多少维，输出的tuple中就包含几个数组，分别对应符合条件元素的各维坐标。即是第一组为第一维度的坐标，依次对应，每列对应一个元素完整的坐标，如下: <img src=\"https://suool-bolg.b0.upaiyun.com/2018/12/14/15447691689662.jpg\"> 即有: <img src=\"https://suool-bolg.b0.upaiyun.com/2018/12/14/15447691891533.jpg\"></p>\n<h2 id=\"numpy.random.multinomial函数\">numpy.random.multinomial函数</h2>\n<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.multinomial.html\" target=\"_blank\" rel=\"noopener\">官方文档地址</a></p>\n<figure>\n<img src=\"https://suool-bolg.b0.upaiyun.com/2018/12/14/D3481F88-A58F-429F-A43C-A09F515DB3DF.png\" alt=\"官方介绍\"><figcaption>官方介绍</figcaption>\n</figure>\n<p>这是 numpy 提供的随机二项式分布实现，二项式分布(<code>binomial distribution</code>)如下表示: <span class=\"math display\">\\[\nP(N)=\\begin{pmatrix}n \\\\\n N\n\\end{pmatrix}p^N(1-p)^{n-N}\n\\]</span> 函数原型如下： <figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">numpy<span class=\"selector-class\">.random</span><span class=\"selector-class\">.RandomState</span><span class=\"selector-class\">.binomial</span>(n, <span class=\"selector-tag\">p</span>, size=None)</span><br></pre></td></tr></table></figure></p>\n<p>表示对一个二项分布进行采样，<code>size</code>表示采样的次数，参数中的<code>n, p</code>分别对应于公式中的<span class=\"math inline\">\\(n,p\\)</span>，函数的返回值表示<code>n</code>中<code>成功（success）</code>的次数（也即<span class=\"math inline\">\\(N\\)</span>）。 举个例子，比如掷骰子，一共3个硬币，每个都投一次，三个都是正面朝上的概率是多少？</p>\n<p>这个使用简单的概率统计知识很容易计算得到： <span class=\"math display\">\\[\n P=\\begin{pmatrix}n \\\\ N\\end{pmatrix}p^N(1-p)^{n-N}=\\begin{pmatrix}3 \\\\ 0\\end{pmatrix}0.5^0(1-0.5)^3=0.5^3 = 0.125\n\\]</span></p>\n<p>使用上述函数计算大概值则是做足够多次的试验，统计其中全为正面朝上的概率，通过频率计算概率，如下： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/12/14/4B6FFD2C-82EC-4C9C-82E2-9808FA9560F4.png\" alt=\"实验结果\"></p>\n<h2 id=\"numpy中矩阵乘法星乘和点乘.dot的区别\">numpy中矩阵乘法，星乘(*)和点乘(.dot)的区别</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy</span><br><span class=\"line\">a = numpy.array([[<span class=\"number\">1</span>,<span class=\"number\">2</span>],</span><br><span class=\"line\">                 [<span class=\"number\">3</span>,<span class=\"number\">4</span>]])</span><br><span class=\"line\">b = numpy.array([[<span class=\"number\">5</span>,<span class=\"number\">6</span>],</span><br><span class=\"line\">                 [<span class=\"number\">7</span>,<span class=\"number\">8</span>]])</span><br></pre></td></tr></table></figure>\n<p>计算结果</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a*b</span><br><span class=\"line\">&gt;&gt;&gt;array([[ <span class=\"number\">5</span>, <span class=\"number\">12</span>],</span><br><span class=\"line\">          [<span class=\"number\">21</span>, <span class=\"number\">32</span>]])</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a.dot(b)</span><br><span class=\"line\">&gt;&gt;&gt;array([[<span class=\"number\">19</span>, <span class=\"number\">22</span>],</span><br><span class=\"line\">          [<span class=\"number\">43</span>, <span class=\"number\">50</span>]])</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">numpy.dot(a,b)</span><br><span class=\"line\">&gt;&gt;&gt;array([[<span class=\"number\">19</span>, <span class=\"number\">22</span>],</span><br><span class=\"line\">          [<span class=\"number\">43</span>, <span class=\"number\">50</span>]])</span><br><span class=\"line\">          </span><br><span class=\"line\">numpy.dot(b,a)</span><br><span class=\"line\">&gt;&gt;&gt;array([[<span class=\"number\">23</span>, <span class=\"number\">34</span>],</span><br><span class=\"line\">          [<span class=\"number\">31</span>, <span class=\"number\">46</span>]])</span><br></pre></td></tr></table></figure>\n<p><strong>星乘表示矩阵内各对应位置相乘，保证矩阵size 相同。 点乘表示求矩阵内积，遵循矩阵乘法的规则。</strong></p>\n","categories":["基础学习"],"tags":["Python"]},{"title":"“熵”不起：从熵、最大熵原理到最大熵模型","url":"https://suool.net/2018/11/27/maximum-entropy-model/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"引言\">引言</h2>\n<p>“熵”最初是热力学中的一个概念，之前关于<a href=\"https://suool.net/2018/07/19/Mnist-With-Decision-Tree-ID3/\">决策树算法</a>的部分涉及到一部分熵的知识，\b上世纪40年代，香农首先在信息论中引入了信息熵的概念。信息熵用来表示不确定度的度量，不确定度越大，熵值越大。极限情况，当一个随机变量均匀分布时，熵值最大；完全确定时，熵值为0。</p>\n<p>什么是最大熵原理呢？我们常常讲不要把所有鸡蛋放在一个篮子里，这样可以降低风险，这其实就是最大熵原理的一个朴素说法，因为当我们遇到不确定性时，就要保留各种可能性。在信息处理中，这个原理同样适用。在数学上，这个原理被称为<code>最大熵原理</code>（<code>the maximum entropy principle</code>）。同样的，当我们在回答，扔一个色子的时候，每个面朝上的概率分别是多少？所有人都会回答说是<span class=\"math inline\">\\(\\frac{1}{6}\\)</span>。这个回答是正确的，但是为什么是<span class=\"math inline\">\\(\\frac{1}{6}\\)</span>而不是其他呢？这里就应用到最大熵原理。对这个“一无所知”的色子，假定每一面朝上的概率相同是最保险的做法。从信息论的角度来解释，就是保留了最大的不确定性，也就是让熵达到最大。</p>\n<a id=\"more\"></a>\n<p>最大熵原理指出，当我们需要对一个随机事件的概率分布进行预测的时候，我们的预测应当满足已知的条件，而对未知的情况不做任何主观的假设。在这种情况下，概率分布最均匀，预测的风险最小。因为这时候概率分布的信息熵最大，所以人们称这种模型为“最大熵模型”。</p>\n<p>最大熵模型是由最大熵原理推导实现。在这篇文章中的提纲如下：</p>\n<ol type=\"1\">\n<li>预备知识\n<ul>\n<li>什么是熵 ( Entropy )</li>\n<li>常见的「熵」</li>\n<li>贝叶斯定理</li>\n<li>拉格朗日乘数</li>\n<li>最大似然估计</li>\n</ul></li>\n<li>最大熵原理</li>\n<li>最大熵模型</li>\n<li>最大熵模型求解</li>\n<li>最大熵模型算法实战</li>\n<li>最大熵模型小结</li>\n</ol>\n<h2 id=\"预备知识\">预备知识</h2>\n<h3 id=\"什么是熵\">什么是熵</h3>\n<p>熵的概念最早起源于物理学，用于度量一个热力学系统的无序程度。后由香农引入到信息论中，在信息论和概率统计中，熵用来表示随机变量不确定性的度量。</p>\n<p>熵是根据已知的\b知识进行建模，而对未知的的不作任何假设。熵是对「不确定性」的量度，比较不可能发生的事情，当它发生了，会提供更多的信息。也就是说，当信息源越随机，它的「熵」越大。</p>\n<p>这部分其实在前面的文章中有过<a href=\"https://suool.net/2018/06/21/%E4%BF%A1%E6%81%AF%E8%AE%BA%E5%92%8C%E8%B4%9D%E5%8F%B6%E6%96%AF/\">形象化的说明</a>，这里不再细说。</p>\n<p>具体的，随机变量X的熵的表达式如下： <span class=\"math display\">\\[\nH(X) = -\\sum\\limits_{i=1}^{n}p_i logp_i\n\\]</span></p>\n<p>其中<span class=\"math inline\">\\(n\\)</span>代表<span class=\"math inline\">\\(X\\)</span>的<span class=\"math inline\">\\(n\\)</span>种不同的离散取值。而<span class=\"math inline\">\\(p_i\\)</span>代表了<span class=\"math inline\">\\(X\\)</span>取值为<span class=\"math inline\">\\(i\\)</span>的概率，<span class=\"math inline\">\\(log\\)</span>为以2或者<span class=\"math inline\">\\(e\\)</span>为底的对数。当<span class=\"math inline\">\\(p_i=0\\)</span>时，定义<span class=\"math inline\">\\(0log0=0\\)</span>。</p>\n<p>连续变量的表达式如下： <span class=\"math display\">\\[\nS=-\\sum_x p(x)\\log p(x)\n\\]</span> 或： <span class=\"math display\">\\[\nS=-\\int p(x)\\log p(x) dx\n\\]</span></p>\n<h3 id=\"常见的熵\">常见的熵</h3>\n<p><strong>联合熵</strong> 熟悉了一个变量X的熵，很容易推广到多个变量的联合熵，这里给出两个变量X和Y的联合熵表达式： <span class=\"math display\">\\[\nH(X,Y) = -\\sum\\limits_{i=1}^{n}p(x_i,y_i)logp(x_i,y_i)\n\\]</span></p>\n<p><strong>条件熵</strong> 有了联合熵，又可以得到条件熵的表达式<span class=\"math inline\">\\(H(Y|X)\\)</span>，条件熵类似于条件概率，描述了在已知第二个随机变量 <span class=\"math inline\">\\(X\\)</span>的值的前提下，随机变量 <span class=\"math inline\">\\(Y\\)</span>的信息熵还有多少。。表达式如下： <span class=\"math display\">\\[\nH(Y|X) = -\\sum\\limits_{i=1}^{n}p(x_i,y_i)logp(y_i|x_i) = \\sum\\limits_{j=1}^{n}p(x_j)H(Y|x_j)\n\\]</span></p>\n<p><strong>交叉熵</strong></p>\n<p><strong>相对熵与互信息</strong></p>\n","categories":["机器学习"],"tags":["机器学习"]},{"title":"NLP 之关键词提取算法概述","url":"https://suool.net/2018/11/19/keywords-extract-1/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"前言\">前言</h2>\n","categories":["机器学习","NLP"],"tags":["NLP"]},{"title":"隐马尔科夫模型（HMM）","url":"https://suool.net/2018/11/18/HMM-Viterbi/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"前言\">前言</h2>\n<p>同时在<a href=\"https://suool.net/2018/11/16/Text-Segmentation-1/\">LP 之分词技术概述</a>中有提到 HMM 模型，虽然此方法在现代的作用和地位有所下降，但是依然是非常值得了解的学习机器学习经典算法\b。 <a id=\"more\"></a> 本文的基本提纲如下： 1. 基础知识 1. 定义 2. 适用场景 3. 隐马尔科夫模型的两个基本假设 4. 实例 2. HMM模型的三个基本问题 1. 前向后向算法评估观察序列概率 2. 鲍姆-韦尔奇算法求解HMM参数 3. 维特比算法解码隐藏状态序列 3. 分词实战</p>\n<h2 id=\"基础知识\">基础知识</h2>\n<h3 id=\"定义\">定义</h3>\n<p><strong>直观定义</strong> 首先看一个图： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/12/14/15439271020806.jpg\" alt=\"状态序列图\"></p>\n<p>该图的文字描述是其分成两排，第一排是<span class=\"math inline\">\\(y\\)</span>序列，第二排是<span class=\"math inline\">\\(x\\)</span>序列。每个<span class=\"math inline\">\\(x\\)</span>都只有一个<span class=\"math inline\">\\(y\\)</span>指向它，每个<span class=\"math inline\">\\(y\\)</span>也都有另一个<span class=\"math inline\">\\(y\\)</span>指向它。</p>\n<p>下面按照上述描述给出一个定义：</p>\n<ul>\n<li><strong>状态序列（上图中的<span class=\"math inline\">\\(y\\)</span>，下面的<span class=\"math inline\">\\(I\\)</span>）</strong>：隐藏的马尔科夫链随机生成的状态序列，称为状态序列（state sequence）</li>\n<li><strong>观测序列（上图中的<span class=\"math inline\">\\(x\\)</span>，下面的<span class=\"math inline\">\\(O\\)</span>）</strong>: 每个状态生成一个观测，而由此产生的观测的随机序列，称为观测序列（obeservation sequence）</li>\n<li><strong>隐马尔科夫模型</strong>：隐马尔科夫模型是关于时序的概率模型，描述由一个隐藏的马尔科夫链随机生成不可观测的状态随机序列，再由各个状态生成一个观测而产生观测随机序列的过程。</li>\n</ul>\n<p>序列的每一个位置可以看做是一个时刻，HMM 由初始概率分布、状态转移概率分布和观测概率分布确定。</p>\n<p>形式化的定义如下：</p>\n<p><strong>形式化定义</strong></p>\n<p>设<span class=\"math inline\">\\(Q\\)</span>是所有可能的状态的集合，<span class=\"math inline\">\\(V\\)</span>是所有可能的观测的集合，如下:</p>\n<p><span class=\"math display\">\\[Q={q_1,q_2,...,q_N},V={v_1,v_2,...,v_M}\\]</span> 其中，<span class=\"math inline\">\\(N\\)</span>是可能的状态数，<span class=\"math inline\">\\(M\\)</span>是可能的观测数。</p>\n<p><span class=\"math inline\">\\(I\\)</span>是长度为<span class=\"math inline\">\\(T\\)</span>的状态序列，<span class=\"math inline\">\\(O\\)</span>是对应的观测序列。 <span class=\"math display\">\\[I=(i_1,i_2,...,i_T),O=(o_1,o_2,...,o_T)\\]</span></p>\n<p>A是状态转移概率矩阵： <span class=\"math display\">\\[A=[a_{ij}]_{N×N}\\]</span></p>\n<p>在时刻<span class=\"math inline\">\\(t\\)</span>，处于<span class=\"math inline\">\\(q_i\\)</span> 状态的条件下在时刻<span class=\"math inline\">\\(t+1\\)</span>转移到状态<span class=\"math inline\">\\(q_j\\)</span> 的概率【<strong>齐次马尔科夫链假设,下面的第一个假设</strong>】： <span class=\"math display\">\\[a_{ij}=P(i_{t+1}=q_j|i_t=q_i)\\]</span></p>\n<p>B是观测概率矩阵: <span class=\"math display\">\\[B=[b_j(k)]_{N×M}\\]</span> 其中<span class=\"math inline\">\\(k=1,2,...,M; j=1,2,...,N\\)</span> 其中，在时刻<span class=\"math inline\">\\(t\\)</span>处于状态<span class=\"math inline\">\\(q_j\\)</span> 的条件下生成观测<span class=\"math inline\">\\(v_k\\)</span> 的概率【<strong>观测独立性假设，下面第二个假设</strong>】： <span class=\"math display\">\\[b_j(k)=P(o_t=v_k|i_t=q_j)\\]</span></p>\n<p>π是初始状态概率向量: <span class=\"math display\">\\[π=(π_i)\\]</span> 其中，<span class=\"math inline\">\\(π_i=P(i_1=q_i)\\)</span> 隐马尔科夫模型由初始状态概率向量<span class=\"math inline\">\\(π\\)</span>、状态转移概率矩阵A和观测概率矩阵<span class=\"math inline\">\\(B\\)</span>决定。<span class=\"math inline\">\\(π\\)</span>和<span class=\"math inline\">\\(A\\)</span>决定状态序列，<span class=\"math inline\">\\(B\\)</span>决定观测序列。因此，隐马尔科夫模型<span class=\"math inline\">\\(λ\\)</span>可以由三元符号表示，即：<span class=\"math inline\">\\(λ=(A,B,π)\\)</span>。<span class=\"math inline\">\\(A,B,π\\)</span>称为隐马尔科夫模型的<strong>三要素</strong>。</p>\n<h3 id=\"适用场景\">适用场景</h3>\n<p>有了上述的定义可以看出使用HMM模型时我们的问题一般有这两个特征：</p>\n<ul>\n<li>我们的问题是基于序列的，比如时间序列，或者状态序列。</li>\n<li>我们的问题中有两类数据，一类序列数据是可以观测到的，即观测序列；而另一类数据是不能观察到的，即隐藏状态序列，简称状态序列。</li>\n</ul>\n<p>比如语言转文字的问题，发出的一串连续的声音就是观测序列，而实际要表达的一段话的文字就是状态序列，机器的任务，就是从这一串连续的声音中判断出最可能要表达的文字的内容。</p>\n<h3 id=\"隐马尔科夫模型的两个基本假设\">隐马尔科夫模型的两个基本假设</h3>\n<ol type=\"1\">\n<li>设隐马尔科夫链在任意时刻<span class=\"math inline\">\\(t\\)</span>的状态只依赖于其前一时刻的状态，与其他时刻的状态及观测无关，也与时刻<span class=\"math inline\">\\(t\\)</span>无关。（齐次马尔科夫性假设）</li>\n<li>假设任意时刻的观测只依赖于该时刻的马尔科夫链的状态，与其他观测和状态无关。（观测独立性假设）</li>\n</ol>\n<h3 id=\"一个例子\">一个例子</h3>\n<p>李航的《统计学习方法》的例子，假设我们有3个盒子，每个盒子里都有红色和白色两种球，这三个盒子里球的数量分别是：</p>\n<table>\n<thead>\n<tr class=\"header\">\n<th>盒子</th>\n<th>1</th>\n<th>2</th>\n<th>3</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>红球数</td>\n<td>5</td>\n<td>4</td>\n<td>7</td>\n</tr>\n<tr class=\"even\">\n<td>白球数</td>\n<td>5</td>\n<td>6</td>\n<td>3</td>\n</tr>\n</tbody>\n</table>\n<p>按照下面的方法从盒子里抽球: 1. 开始的时候，从第一个盒子抽球的概率是0.2，从第二个盒子抽球的概率是0.4，从第三个盒子抽球的概率是0.4。以这个概率抽一次球后，将球放回。 2. 从当前盒子转移到下一个盒子进行抽球。规则是： 1. 如果当前抽球的盒子是第一个盒子，则以0.5的概率仍然留在第一个盒子继续抽球，以0.2的概率去第二个盒子抽球，以0.3的概率去第三个盒子抽球。 2. 如果当前抽球的盒子是第二个盒子，则以0.5的概率仍然留在第二个盒子继续抽球，以0.3的概率去第一个盒子抽球，以0.2的概率去第三个盒子抽球。 3. 如果当前抽球的盒子是第三个盒子，则以0.5的概率仍然留在第三个盒子继续抽球，以0.2的概率去第一个盒子抽球，以0.3的概率去第二个盒子抽球。 4. 如此下去，直到重复三次.</p>\n<p>得到一个球的颜色的观测序列: <img src=\"https://suool-bolg.b0.upaiyun.com/2018/12/14/D5B700EB-22B4-487C-9C7D-1AC101E2E7BD.png\" alt=\"参数\"></p>\n<p><strong>HMM观测序列的生成</strong> 从上面的例子，我们也可以抽象出HMM观测序列生成的过程。 输入的模型是<span class=\"math inline\">\\(\\lambda = (A, B, \\Pi)\\)</span>，观测序列长度是<span class=\"math inline\">\\(T\\)</span>. 输出是观测序列：<span class=\"math inline\">\\(O =\\{o_1,o_2,...o_T\\}\\)</span></p>\n<p>以下代码是 HMM 一个模拟，</p>\n<script text=\"text/javascript\" src=\"/lib/jquery/index.js\"></script>\n\n<iframe id=\"ipynb\" marginheight=\"0\" frameborder=\"0\" width=\"824px\" srcdoc=\"<!DOCTYPE html>\n<html>\n<head><meta charset='utf-8' />\n\n<!-- hexo-inject:begin --><!-- hexo-inject:end --><title>HMMBall</title>\n\n<script src='https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js'></script>\n<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js'></script>\n\n\n\n<style type='text/css'>\n    /*!\n*\n* Twitter Bootstrap\n*\n*/\n/*!\n * Bootstrap v3.3.7 (http://getbootstrap.com)\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n */\n/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */\nhtml {\n  font-family: sans-serif;\n  -ms-text-size-adjust: 100%;\n  -webkit-text-size-adjust: 100%;\n}\nbody {\n  margin: 0;\n}\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmain,\nmenu,\nnav,\nsection,\nsummary {\n  display: block;\n}\naudio,\ncanvas,\nprogress,\nvideo {\n  display: inline-block;\n  vertical-align: baseline;\n}\naudio:not([controls]) {\n  display: none;\n  height: 0;\n}\n[hidden],\ntemplate {\n  display: none;\n}\na {\n  background-color: transparent;\n}\na:active,\na:hover {\n  outline: 0;\n}\nabbr[title] {\n  border-bottom: 1px dotted;\n}\nb,\nstrong {\n  font-weight: bold;\n}\ndfn {\n  font-style: italic;\n}\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\nmark {\n  background: #ff0;\n  color: #000;\n}\nsmall {\n  font-size: 80%;\n}\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\nsup {\n  top: -0.5em;\n}\nsub {\n  bottom: -0.25em;\n}\nimg {\n  border: 0;\n}\nsvg:not(:root) {\n  overflow: hidden;\n}\nfigure {\n  margin: 1em 40px;\n}\nhr {\n  box-sizing: content-box;\n  height: 0;\n}\npre {\n  overflow: auto;\n}\ncode,\nkbd,\npre,\nsamp {\n  font-family: monospace, monospace;\n  font-size: 1em;\n}\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  color: inherit;\n  font: inherit;\n  margin: 0;\n}\nbutton {\n  overflow: visible;\n}\nbutton,\nselect {\n  text-transform: none;\n}\nbutton,\nhtml input[type='button'],\ninput[type='reset'],\ninput[type='submit'] {\n  -webkit-appearance: button;\n  cursor: pointer;\n}\nbutton[disabled],\nhtml input[disabled] {\n  cursor: default;\n}\nbutton::-moz-focus-inner,\ninput::-moz-focus-inner {\n  border: 0;\n  padding: 0;\n}\ninput {\n  line-height: normal;\n}\ninput[type='checkbox'],\ninput[type='radio'] {\n  box-sizing: border-box;\n  padding: 0;\n}\ninput[type='number']::-webkit-inner-spin-button,\ninput[type='number']::-webkit-outer-spin-button {\n  height: auto;\n}\ninput[type='search'] {\n  -webkit-appearance: textfield;\n  box-sizing: content-box;\n}\ninput[type='search']::-webkit-search-cancel-button,\ninput[type='search']::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\nfieldset {\n  border: 1px solid #c0c0c0;\n  margin: 0 2px;\n  padding: 0.35em 0.625em 0.75em;\n}\nlegend {\n  border: 0;\n  padding: 0;\n}\ntextarea {\n  overflow: auto;\n}\noptgroup {\n  font-weight: bold;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\ntd,\nth {\n  padding: 0;\n}\n/*! Source: https://github.com/h5bp/html5-boilerplate/blob/master/src/css/main.css */\n@media print {\n  *,\n  *:before,\n  *:after {\n    background: transparent !important;\n    box-shadow: none !important;\n    text-shadow: none !important;\n  }\n  a,\n  a:visited {\n    text-decoration: underline;\n  }\n  a[href]:after {\n    content: ' (' attr(href) ')';\n  }\n  abbr[title]:after {\n    content: ' (' attr(title) ')';\n  }\n  a[href^='#']:after,\n  a[href^='javascript:']:after {\n    content: '';\n  }\n  pre,\n  blockquote {\n    border: 1px solid #999;\n    page-break-inside: avoid;\n  }\n  thead {\n    display: table-header-group;\n  }\n  tr,\n  img {\n    page-break-inside: avoid;\n  }\n  img {\n    max-width: 100% !important;\n  }\n  p,\n  h2,\n  h3 {\n    orphans: 3;\n    widows: 3;\n  }\n  h2,\n  h3 {\n    page-break-after: avoid;\n  }\n  .navbar {\n    display: none;\n  }\n  .btn > .caret,\n  .dropup > .btn > .caret {\n    border-top-color: #000 !important;\n  }\n  .label {\n    border: 1px solid #000;\n  }\n  .table {\n    border-collapse: collapse !important;\n  }\n  .table td,\n  .table th {\n    background-color: #fff !important;\n  }\n  .table-bordered th,\n  .table-bordered td {\n    border: 1px solid #ddd !important;\n  }\n}\n@font-face {\n  font-family: 'Glyphicons Halflings';\n  src: url('../components/bootstrap/fonts/glyphicons-halflings-regular.eot');\n  src: url('../components/bootstrap/fonts/glyphicons-halflings-regular.eot?#iefix') format('embedded-opentype'), url('../components/bootstrap/fonts/glyphicons-halflings-regular.woff2') format('woff2'), url('../components/bootstrap/fonts/glyphicons-halflings-regular.woff') format('woff'), url('../components/bootstrap/fonts/glyphicons-halflings-regular.ttf') format('truetype'), url('../components/bootstrap/fonts/glyphicons-halflings-regular.svg#glyphicons_halflingsregular') format('svg');\n}\n.glyphicon {\n  position: relative;\n  top: 1px;\n  display: inline-block;\n  font-family: 'Glyphicons Halflings';\n  font-style: normal;\n  font-weight: normal;\n  line-height: 1;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.glyphicon-asterisk:before {\n  content: '\\002a';\n}\n.glyphicon-plus:before {\n  content: '\\002b';\n}\n.glyphicon-euro:before,\n.glyphicon-eur:before {\n  content: '\\20ac';\n}\n.glyphicon-minus:before {\n  content: '\\2212';\n}\n.glyphicon-cloud:before {\n  content: '\\2601';\n}\n.glyphicon-envelope:before {\n  content: '\\2709';\n}\n.glyphicon-pencil:before {\n  content: '\\270f';\n}\n.glyphicon-glass:before {\n  content: '\\e001';\n}\n.glyphicon-music:before {\n  content: '\\e002';\n}\n.glyphicon-search:before {\n  content: '\\e003';\n}\n.glyphicon-heart:before {\n  content: '\\e005';\n}\n.glyphicon-star:before {\n  content: '\\e006';\n}\n.glyphicon-star-empty:before {\n  content: '\\e007';\n}\n.glyphicon-user:before {\n  content: '\\e008';\n}\n.glyphicon-film:before {\n  content: '\\e009';\n}\n.glyphicon-th-large:before {\n  content: '\\e010';\n}\n.glyphicon-th:before {\n  content: '\\e011';\n}\n.glyphicon-th-list:before {\n  content: '\\e012';\n}\n.glyphicon-ok:before {\n  content: '\\e013';\n}\n.glyphicon-remove:before {\n  content: '\\e014';\n}\n.glyphicon-zoom-in:before {\n  content: '\\e015';\n}\n.glyphicon-zoom-out:before {\n  content: '\\e016';\n}\n.glyphicon-off:before {\n  content: '\\e017';\n}\n.glyphicon-signal:before {\n  content: '\\e018';\n}\n.glyphicon-cog:before {\n  content: '\\e019';\n}\n.glyphicon-trash:before {\n  content: '\\e020';\n}\n.glyphicon-home:before {\n  content: '\\e021';\n}\n.glyphicon-file:before {\n  content: '\\e022';\n}\n.glyphicon-time:before {\n  content: '\\e023';\n}\n.glyphicon-road:before {\n  content: '\\e024';\n}\n.glyphicon-download-alt:before {\n  content: '\\e025';\n}\n.glyphicon-download:before {\n  content: '\\e026';\n}\n.glyphicon-upload:before {\n  content: '\\e027';\n}\n.glyphicon-inbox:before {\n  content: '\\e028';\n}\n.glyphicon-play-circle:before {\n  content: '\\e029';\n}\n.glyphicon-repeat:before {\n  content: '\\e030';\n}\n.glyphicon-refresh:before {\n  content: '\\e031';\n}\n.glyphicon-list-alt:before {\n  content: '\\e032';\n}\n.glyphicon-lock:before {\n  content: '\\e033';\n}\n.glyphicon-flag:before {\n  content: '\\e034';\n}\n.glyphicon-headphones:before {\n  content: '\\e035';\n}\n.glyphicon-volume-off:before {\n  content: '\\e036';\n}\n.glyphicon-volume-down:before {\n  content: '\\e037';\n}\n.glyphicon-volume-up:before {\n  content: '\\e038';\n}\n.glyphicon-qrcode:before {\n  content: '\\e039';\n}\n.glyphicon-barcode:before {\n  content: '\\e040';\n}\n.glyphicon-tag:before {\n  content: '\\e041';\n}\n.glyphicon-tags:before {\n  content: '\\e042';\n}\n.glyphicon-book:before {\n  content: '\\e043';\n}\n.glyphicon-bookmark:before {\n  content: '\\e044';\n}\n.glyphicon-print:before {\n  content: '\\e045';\n}\n.glyphicon-camera:before {\n  content: '\\e046';\n}\n.glyphicon-font:before {\n  content: '\\e047';\n}\n.glyphicon-bold:before {\n  content: '\\e048';\n}\n.glyphicon-italic:before {\n  content: '\\e049';\n}\n.glyphicon-text-height:before {\n  content: '\\e050';\n}\n.glyphicon-text-width:before {\n  content: '\\e051';\n}\n.glyphicon-align-left:before {\n  content: '\\e052';\n}\n.glyphicon-align-center:before {\n  content: '\\e053';\n}\n.glyphicon-align-right:before {\n  content: '\\e054';\n}\n.glyphicon-align-justify:before {\n  content: '\\e055';\n}\n.glyphicon-list:before {\n  content: '\\e056';\n}\n.glyphicon-indent-left:before {\n  content: '\\e057';\n}\n.glyphicon-indent-right:before {\n  content: '\\e058';\n}\n.glyphicon-facetime-video:before {\n  content: '\\e059';\n}\n.glyphicon-picture:before {\n  content: '\\e060';\n}\n.glyphicon-map-marker:before {\n  content: '\\e062';\n}\n.glyphicon-adjust:before {\n  content: '\\e063';\n}\n.glyphicon-tint:before {\n  content: '\\e064';\n}\n.glyphicon-edit:before {\n  content: '\\e065';\n}\n.glyphicon-share:before {\n  content: '\\e066';\n}\n.glyphicon-check:before {\n  content: '\\e067';\n}\n.glyphicon-move:before {\n  content: '\\e068';\n}\n.glyphicon-step-backward:before {\n  content: '\\e069';\n}\n.glyphicon-fast-backward:before {\n  content: '\\e070';\n}\n.glyphicon-backward:before {\n  content: '\\e071';\n}\n.glyphicon-play:before {\n  content: '\\e072';\n}\n.glyphicon-pause:before {\n  content: '\\e073';\n}\n.glyphicon-stop:before {\n  content: '\\e074';\n}\n.glyphicon-forward:before {\n  content: '\\e075';\n}\n.glyphicon-fast-forward:before {\n  content: '\\e076';\n}\n.glyphicon-step-forward:before {\n  content: '\\e077';\n}\n.glyphicon-eject:before {\n  content: '\\e078';\n}\n.glyphicon-chevron-left:before {\n  content: '\\e079';\n}\n.glyphicon-chevron-right:before {\n  content: '\\e080';\n}\n.glyphicon-plus-sign:before {\n  content: '\\e081';\n}\n.glyphicon-minus-sign:before {\n  content: '\\e082';\n}\n.glyphicon-remove-sign:before {\n  content: '\\e083';\n}\n.glyphicon-ok-sign:before {\n  content: '\\e084';\n}\n.glyphicon-question-sign:before {\n  content: '\\e085';\n}\n.glyphicon-info-sign:before {\n  content: '\\e086';\n}\n.glyphicon-screenshot:before {\n  content: '\\e087';\n}\n.glyphicon-remove-circle:before {\n  content: '\\e088';\n}\n.glyphicon-ok-circle:before {\n  content: '\\e089';\n}\n.glyphicon-ban-circle:before {\n  content: '\\e090';\n}\n.glyphicon-arrow-left:before {\n  content: '\\e091';\n}\n.glyphicon-arrow-right:before {\n  content: '\\e092';\n}\n.glyphicon-arrow-up:before {\n  content: '\\e093';\n}\n.glyphicon-arrow-down:before {\n  content: '\\e094';\n}\n.glyphicon-share-alt:before {\n  content: '\\e095';\n}\n.glyphicon-resize-full:before {\n  content: '\\e096';\n}\n.glyphicon-resize-small:before {\n  content: '\\e097';\n}\n.glyphicon-exclamation-sign:before {\n  content: '\\e101';\n}\n.glyphicon-gift:before {\n  content: '\\e102';\n}\n.glyphicon-leaf:before {\n  content: '\\e103';\n}\n.glyphicon-fire:before {\n  content: '\\e104';\n}\n.glyphicon-eye-open:before {\n  content: '\\e105';\n}\n.glyphicon-eye-close:before {\n  content: '\\e106';\n}\n.glyphicon-warning-sign:before {\n  content: '\\e107';\n}\n.glyphicon-plane:before {\n  content: '\\e108';\n}\n.glyphicon-calendar:before {\n  content: '\\e109';\n}\n.glyphicon-random:before {\n  content: '\\e110';\n}\n.glyphicon-comment:before {\n  content: '\\e111';\n}\n.glyphicon-magnet:before {\n  content: '\\e112';\n}\n.glyphicon-chevron-up:before {\n  content: '\\e113';\n}\n.glyphicon-chevron-down:before {\n  content: '\\e114';\n}\n.glyphicon-retweet:before {\n  content: '\\e115';\n}\n.glyphicon-shopping-cart:before {\n  content: '\\e116';\n}\n.glyphicon-folder-close:before {\n  content: '\\e117';\n}\n.glyphicon-folder-open:before {\n  content: '\\e118';\n}\n.glyphicon-resize-vertical:before {\n  content: '\\e119';\n}\n.glyphicon-resize-horizontal:before {\n  content: '\\e120';\n}\n.glyphicon-hdd:before {\n  content: '\\e121';\n}\n.glyphicon-bullhorn:before {\n  content: '\\e122';\n}\n.glyphicon-bell:before {\n  content: '\\e123';\n}\n.glyphicon-certificate:before {\n  content: '\\e124';\n}\n.glyphicon-thumbs-up:before {\n  content: '\\e125';\n}\n.glyphicon-thumbs-down:before {\n  content: '\\e126';\n}\n.glyphicon-hand-right:before {\n  content: '\\e127';\n}\n.glyphicon-hand-left:before {\n  content: '\\e128';\n}\n.glyphicon-hand-up:before {\n  content: '\\e129';\n}\n.glyphicon-hand-down:before {\n  content: '\\e130';\n}\n.glyphicon-circle-arrow-right:before {\n  content: '\\e131';\n}\n.glyphicon-circle-arrow-left:before {\n  content: '\\e132';\n}\n.glyphicon-circle-arrow-up:before {\n  content: '\\e133';\n}\n.glyphicon-circle-arrow-down:before {\n  content: '\\e134';\n}\n.glyphicon-globe:before {\n  content: '\\e135';\n}\n.glyphicon-wrench:before {\n  content: '\\e136';\n}\n.glyphicon-tasks:before {\n  content: '\\e137';\n}\n.glyphicon-filter:before {\n  content: '\\e138';\n}\n.glyphicon-briefcase:before {\n  content: '\\e139';\n}\n.glyphicon-fullscreen:before {\n  content: '\\e140';\n}\n.glyphicon-dashboard:before {\n  content: '\\e141';\n}\n.glyphicon-paperclip:before {\n  content: '\\e142';\n}\n.glyphicon-heart-empty:before {\n  content: '\\e143';\n}\n.glyphicon-link:before {\n  content: '\\e144';\n}\n.glyphicon-phone:before {\n  content: '\\e145';\n}\n.glyphicon-pushpin:before {\n  content: '\\e146';\n}\n.glyphicon-usd:before {\n  content: '\\e148';\n}\n.glyphicon-gbp:before {\n  content: '\\e149';\n}\n.glyphicon-sort:before {\n  content: '\\e150';\n}\n.glyphicon-sort-by-alphabet:before {\n  content: '\\e151';\n}\n.glyphicon-sort-by-alphabet-alt:before {\n  content: '\\e152';\n}\n.glyphicon-sort-by-order:before {\n  content: '\\e153';\n}\n.glyphicon-sort-by-order-alt:before {\n  content: '\\e154';\n}\n.glyphicon-sort-by-attributes:before {\n  content: '\\e155';\n}\n.glyphicon-sort-by-attributes-alt:before {\n  content: '\\e156';\n}\n.glyphicon-unchecked:before {\n  content: '\\e157';\n}\n.glyphicon-expand:before {\n  content: '\\e158';\n}\n.glyphicon-collapse-down:before {\n  content: '\\e159';\n}\n.glyphicon-collapse-up:before {\n  content: '\\e160';\n}\n.glyphicon-log-in:before {\n  content: '\\e161';\n}\n.glyphicon-flash:before {\n  content: '\\e162';\n}\n.glyphicon-log-out:before {\n  content: '\\e163';\n}\n.glyphicon-new-window:before {\n  content: '\\e164';\n}\n.glyphicon-record:before {\n  content: '\\e165';\n}\n.glyphicon-save:before {\n  content: '\\e166';\n}\n.glyphicon-open:before {\n  content: '\\e167';\n}\n.glyphicon-saved:before {\n  content: '\\e168';\n}\n.glyphicon-import:before {\n  content: '\\e169';\n}\n.glyphicon-export:before {\n  content: '\\e170';\n}\n.glyphicon-send:before {\n  content: '\\e171';\n}\n.glyphicon-floppy-disk:before {\n  content: '\\e172';\n}\n.glyphicon-floppy-saved:before {\n  content: '\\e173';\n}\n.glyphicon-floppy-remove:before {\n  content: '\\e174';\n}\n.glyphicon-floppy-save:before {\n  content: '\\e175';\n}\n.glyphicon-floppy-open:before {\n  content: '\\e176';\n}\n.glyphicon-credit-card:before {\n  content: '\\e177';\n}\n.glyphicon-transfer:before {\n  content: '\\e178';\n}\n.glyphicon-cutlery:before {\n  content: '\\e179';\n}\n.glyphicon-header:before {\n  content: '\\e180';\n}\n.glyphicon-compressed:before {\n  content: '\\e181';\n}\n.glyphicon-earphone:before {\n  content: '\\e182';\n}\n.glyphicon-phone-alt:before {\n  content: '\\e183';\n}\n.glyphicon-tower:before {\n  content: '\\e184';\n}\n.glyphicon-stats:before {\n  content: '\\e185';\n}\n.glyphicon-sd-video:before {\n  content: '\\e186';\n}\n.glyphicon-hd-video:before {\n  content: '\\e187';\n}\n.glyphicon-subtitles:before {\n  content: '\\e188';\n}\n.glyphicon-sound-stereo:before {\n  content: '\\e189';\n}\n.glyphicon-sound-dolby:before {\n  content: '\\e190';\n}\n.glyphicon-sound-5-1:before {\n  content: '\\e191';\n}\n.glyphicon-sound-6-1:before {\n  content: '\\e192';\n}\n.glyphicon-sound-7-1:before {\n  content: '\\e193';\n}\n.glyphicon-copyright-mark:before {\n  content: '\\e194';\n}\n.glyphicon-registration-mark:before {\n  content: '\\e195';\n}\n.glyphicon-cloud-download:before {\n  content: '\\e197';\n}\n.glyphicon-cloud-upload:before {\n  content: '\\e198';\n}\n.glyphicon-tree-conifer:before {\n  content: '\\e199';\n}\n.glyphicon-tree-deciduous:before {\n  content: '\\e200';\n}\n.glyphicon-cd:before {\n  content: '\\e201';\n}\n.glyphicon-save-file:before {\n  content: '\\e202';\n}\n.glyphicon-open-file:before {\n  content: '\\e203';\n}\n.glyphicon-level-up:before {\n  content: '\\e204';\n}\n.glyphicon-copy:before {\n  content: '\\e205';\n}\n.glyphicon-paste:before {\n  content: '\\e206';\n}\n.glyphicon-alert:before {\n  content: '\\e209';\n}\n.glyphicon-equalizer:before {\n  content: '\\e210';\n}\n.glyphicon-king:before {\n  content: '\\e211';\n}\n.glyphicon-queen:before {\n  content: '\\e212';\n}\n.glyphicon-pawn:before {\n  content: '\\e213';\n}\n.glyphicon-bishop:before {\n  content: '\\e214';\n}\n.glyphicon-knight:before {\n  content: '\\e215';\n}\n.glyphicon-baby-formula:before {\n  content: '\\e216';\n}\n.glyphicon-tent:before {\n  content: '\\26fa';\n}\n.glyphicon-blackboard:before {\n  content: '\\e218';\n}\n.glyphicon-bed:before {\n  content: '\\e219';\n}\n.glyphicon-apple:before {\n  content: '\\f8ff';\n}\n.glyphicon-erase:before {\n  content: '\\e221';\n}\n.glyphicon-hourglass:before {\n  content: '\\231b';\n}\n.glyphicon-lamp:before {\n  content: '\\e223';\n}\n.glyphicon-duplicate:before {\n  content: '\\e224';\n}\n.glyphicon-piggy-bank:before {\n  content: '\\e225';\n}\n.glyphicon-scissors:before {\n  content: '\\e226';\n}\n.glyphicon-bitcoin:before {\n  content: '\\e227';\n}\n.glyphicon-btc:before {\n  content: '\\e227';\n}\n.glyphicon-xbt:before {\n  content: '\\e227';\n}\n.glyphicon-yen:before {\n  content: '\\00a5';\n}\n.glyphicon-jpy:before {\n  content: '\\00a5';\n}\n.glyphicon-ruble:before {\n  content: '\\20bd';\n}\n.glyphicon-rub:before {\n  content: '\\20bd';\n}\n.glyphicon-scale:before {\n  content: '\\e230';\n}\n.glyphicon-ice-lolly:before {\n  content: '\\e231';\n}\n.glyphicon-ice-lolly-tasted:before {\n  content: '\\e232';\n}\n.glyphicon-education:before {\n  content: '\\e233';\n}\n.glyphicon-option-horizontal:before {\n  content: '\\e234';\n}\n.glyphicon-option-vertical:before {\n  content: '\\e235';\n}\n.glyphicon-menu-hamburger:before {\n  content: '\\e236';\n}\n.glyphicon-modal-window:before {\n  content: '\\e237';\n}\n.glyphicon-oil:before {\n  content: '\\e238';\n}\n.glyphicon-grain:before {\n  content: '\\e239';\n}\n.glyphicon-sunglasses:before {\n  content: '\\e240';\n}\n.glyphicon-text-size:before {\n  content: '\\e241';\n}\n.glyphicon-text-color:before {\n  content: '\\e242';\n}\n.glyphicon-text-background:before {\n  content: '\\e243';\n}\n.glyphicon-object-align-top:before {\n  content: '\\e244';\n}\n.glyphicon-object-align-bottom:before {\n  content: '\\e245';\n}\n.glyphicon-object-align-horizontal:before {\n  content: '\\e246';\n}\n.glyphicon-object-align-left:before {\n  content: '\\e247';\n}\n.glyphicon-object-align-vertical:before {\n  content: '\\e248';\n}\n.glyphicon-object-align-right:before {\n  content: '\\e249';\n}\n.glyphicon-triangle-right:before {\n  content: '\\e250';\n}\n.glyphicon-triangle-left:before {\n  content: '\\e251';\n}\n.glyphicon-triangle-bottom:before {\n  content: '\\e252';\n}\n.glyphicon-triangle-top:before {\n  content: '\\e253';\n}\n.glyphicon-console:before {\n  content: '\\e254';\n}\n.glyphicon-superscript:before {\n  content: '\\e255';\n}\n.glyphicon-subscript:before {\n  content: '\\e256';\n}\n.glyphicon-menu-left:before {\n  content: '\\e257';\n}\n.glyphicon-menu-right:before {\n  content: '\\e258';\n}\n.glyphicon-menu-down:before {\n  content: '\\e259';\n}\n.glyphicon-menu-up:before {\n  content: '\\e260';\n}\n* {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\n*:before,\n*:after {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\nhtml {\n  font-size: 10px;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\nbody {\n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  font-size: 13px;\n  line-height: 1.42857143;\n  color: #000;\n  background-color: #fff;\n}\ninput,\nbutton,\nselect,\ntextarea {\n  font-family: inherit;\n  font-size: inherit;\n  line-height: inherit;\n}\na {\n  color: #337ab7;\n  text-decoration: none;\n}\na:hover,\na:focus {\n  color: #23527c;\n  text-decoration: underline;\n}\na:focus {\n  outline: 5px auto -webkit-focus-ring-color;\n  outline-offset: -2px;\n}\nfigure {\n  margin: 0;\n}\nimg {\n  vertical-align: middle;\n}\n.img-responsive,\n.thumbnail > img,\n.thumbnail a > img,\n.carousel-inner > .item > img,\n.carousel-inner > .item > a > img {\n  display: block;\n  max-width: 100%;\n  height: auto;\n}\n.img-rounded {\n  border-radius: 3px;\n}\n.img-thumbnail {\n  padding: 4px;\n  line-height: 1.42857143;\n  background-color: #fff;\n  border: 1px solid #ddd;\n  border-radius: 2px;\n  -webkit-transition: all 0.2s ease-in-out;\n  -o-transition: all 0.2s ease-in-out;\n  transition: all 0.2s ease-in-out;\n  display: inline-block;\n  max-width: 100%;\n  height: auto;\n}\n.img-circle {\n  border-radius: 50%;\n}\nhr {\n  margin-top: 18px;\n  margin-bottom: 18px;\n  border: 0;\n  border-top: 1px solid #eeeeee;\n}\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  margin: -1px;\n  padding: 0;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  border: 0;\n}\n.sr-only-focusable:active,\n.sr-only-focusable:focus {\n  position: static;\n  width: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  clip: auto;\n}\n[role='button'] {\n  cursor: pointer;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\n.h1,\n.h2,\n.h3,\n.h4,\n.h5,\n.h6 {\n  font-family: inherit;\n  font-weight: 500;\n  line-height: 1.1;\n  color: inherit;\n}\nh1 small,\nh2 small,\nh3 small,\nh4 small,\nh5 small,\nh6 small,\n.h1 small,\n.h2 small,\n.h3 small,\n.h4 small,\n.h5 small,\n.h6 small,\nh1 .small,\nh2 .small,\nh3 .small,\nh4 .small,\nh5 .small,\nh6 .small,\n.h1 .small,\n.h2 .small,\n.h3 .small,\n.h4 .small,\n.h5 .small,\n.h6 .small {\n  font-weight: normal;\n  line-height: 1;\n  color: #777777;\n}\nh1,\n.h1,\nh2,\n.h2,\nh3,\n.h3 {\n  margin-top: 18px;\n  margin-bottom: 9px;\n}\nh1 small,\n.h1 small,\nh2 small,\n.h2 small,\nh3 small,\n.h3 small,\nh1 .small,\n.h1 .small,\nh2 .small,\n.h2 .small,\nh3 .small,\n.h3 .small {\n  font-size: 65%;\n}\nh4,\n.h4,\nh5,\n.h5,\nh6,\n.h6 {\n  margin-top: 9px;\n  margin-bottom: 9px;\n}\nh4 small,\n.h4 small,\nh5 small,\n.h5 small,\nh6 small,\n.h6 small,\nh4 .small,\n.h4 .small,\nh5 .small,\n.h5 .small,\nh6 .small,\n.h6 .small {\n  font-size: 75%;\n}\nh1,\n.h1 {\n  font-size: 33px;\n}\nh2,\n.h2 {\n  font-size: 27px;\n}\nh3,\n.h3 {\n  font-size: 23px;\n}\nh4,\n.h4 {\n  font-size: 17px;\n}\nh5,\n.h5 {\n  font-size: 13px;\n}\nh6,\n.h6 {\n  font-size: 12px;\n}\np {\n  margin: 0 0 9px;\n}\n.lead {\n  margin-bottom: 18px;\n  font-size: 14px;\n  font-weight: 300;\n  line-height: 1.4;\n}\n@media (min-width: 768px) {\n  .lead {\n    font-size: 19.5px;\n  }\n}\nsmall,\n.small {\n  font-size: 92%;\n}\nmark,\n.mark {\n  background-color: #fcf8e3;\n  padding: .2em;\n}\n.text-left {\n  text-align: left;\n}\n.text-right {\n  text-align: right;\n}\n.text-center {\n  text-align: center;\n}\n.text-justify {\n  text-align: justify;\n}\n.text-nowrap {\n  white-space: nowrap;\n}\n.text-lowercase {\n  text-transform: lowercase;\n}\n.text-uppercase {\n  text-transform: uppercase;\n}\n.text-capitalize {\n  text-transform: capitalize;\n}\n.text-muted {\n  color: #777777;\n}\n.text-primary {\n  color: #337ab7;\n}\na.text-primary:hover,\na.text-primary:focus {\n  color: #286090;\n}\n.text-success {\n  color: #3c763d;\n}\na.text-success:hover,\na.text-success:focus {\n  color: #2b542c;\n}\n.text-info {\n  color: #31708f;\n}\na.text-info:hover,\na.text-info:focus {\n  color: #245269;\n}\n.text-warning {\n  color: #8a6d3b;\n}\na.text-warning:hover,\na.text-warning:focus {\n  color: #66512c;\n}\n.text-danger {\n  color: #a94442;\n}\na.text-danger:hover,\na.text-danger:focus {\n  color: #843534;\n}\n.bg-primary {\n  color: #fff;\n  background-color: #337ab7;\n}\na.bg-primary:hover,\na.bg-primary:focus {\n  background-color: #286090;\n}\n.bg-success {\n  background-color: #dff0d8;\n}\na.bg-success:hover,\na.bg-success:focus {\n  background-color: #c1e2b3;\n}\n.bg-info {\n  background-color: #d9edf7;\n}\na.bg-info:hover,\na.bg-info:focus {\n  background-color: #afd9ee;\n}\n.bg-warning {\n  background-color: #fcf8e3;\n}\na.bg-warning:hover,\na.bg-warning:focus {\n  background-color: #f7ecb5;\n}\n.bg-danger {\n  background-color: #f2dede;\n}\na.bg-danger:hover,\na.bg-danger:focus {\n  background-color: #e4b9b9;\n}\n.page-header {\n  padding-bottom: 8px;\n  margin: 36px 0 18px;\n  border-bottom: 1px solid #eeeeee;\n}\nul,\nol {\n  margin-top: 0;\n  margin-bottom: 9px;\n}\nul ul,\nol ul,\nul ol,\nol ol {\n  margin-bottom: 0;\n}\n.list-unstyled {\n  padding-left: 0;\n  list-style: none;\n}\n.list-inline {\n  padding-left: 0;\n  list-style: none;\n  margin-left: -5px;\n}\n.list-inline > li {\n  display: inline-block;\n  padding-left: 5px;\n  padding-right: 5px;\n}\ndl {\n  margin-top: 0;\n  margin-bottom: 18px;\n}\ndt,\ndd {\n  line-height: 1.42857143;\n}\ndt {\n  font-weight: bold;\n}\ndd {\n  margin-left: 0;\n}\n@media (min-width: 541px) {\n  .dl-horizontal dt {\n    float: left;\n    width: 160px;\n    clear: left;\n    text-align: right;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  .dl-horizontal dd {\n    margin-left: 180px;\n  }\n}\nabbr[title],\nabbr[data-original-title] {\n  cursor: help;\n  border-bottom: 1px dotted #777777;\n}\n.initialism {\n  font-size: 90%;\n  text-transform: uppercase;\n}\nblockquote {\n  padding: 9px 18px;\n  margin: 0 0 18px;\n  font-size: inherit;\n  border-left: 5px solid #eeeeee;\n}\nblockquote p:last-child,\nblockquote ul:last-child,\nblockquote ol:last-child {\n  margin-bottom: 0;\n}\nblockquote footer,\nblockquote small,\nblockquote .small {\n  display: block;\n  font-size: 80%;\n  line-height: 1.42857143;\n  color: #777777;\n}\nblockquote footer:before,\nblockquote small:before,\nblockquote .small:before {\n  content: '\\2014 \\00A0';\n}\n.blockquote-reverse,\nblockquote.pull-right {\n  padding-right: 15px;\n  padding-left: 0;\n  border-right: 5px solid #eeeeee;\n  border-left: 0;\n  text-align: right;\n}\n.blockquote-reverse footer:before,\nblockquote.pull-right footer:before,\n.blockquote-reverse small:before,\nblockquote.pull-right small:before,\n.blockquote-reverse .small:before,\nblockquote.pull-right .small:before {\n  content: '';\n}\n.blockquote-reverse footer:after,\nblockquote.pull-right footer:after,\n.blockquote-reverse small:after,\nblockquote.pull-right small:after,\n.blockquote-reverse .small:after,\nblockquote.pull-right .small:after {\n  content: '\\00A0 \\2014';\n}\naddress {\n  margin-bottom: 18px;\n  font-style: normal;\n  line-height: 1.42857143;\n}\ncode,\nkbd,\npre,\nsamp {\n  font-family: monospace;\n}\ncode {\n  padding: 2px 4px;\n  font-size: 90%;\n  color: #c7254e;\n  background-color: #f9f2f4;\n  border-radius: 2px;\n}\nkbd {\n  padding: 2px 4px;\n  font-size: 90%;\n  color: #888;\n  background-color: transparent;\n  border-radius: 1px;\n  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.25);\n}\nkbd kbd {\n  padding: 0;\n  font-size: 100%;\n  font-weight: bold;\n  box-shadow: none;\n}\npre {\n  display: block;\n  padding: 8.5px;\n  margin: 0 0 9px;\n  font-size: 12px;\n  line-height: 1.42857143;\n  word-break: break-all;\n  word-wrap: break-word;\n  color: #333333;\n  background-color: #f5f5f5;\n  border: 1px solid #ccc;\n  border-radius: 2px;\n}\npre code {\n  padding: 0;\n  font-size: inherit;\n  color: inherit;\n  white-space: pre-wrap;\n  background-color: transparent;\n  border-radius: 0;\n}\n.pre-scrollable {\n  max-height: 340px;\n  overflow-y: scroll;\n}\n.container {\n  margin-right: auto;\n  margin-left: auto;\n  padding-left: 0px;\n  padding-right: 0px;\n}\n@media (min-width: 768px) {\n  .container {\n    width: 768px;\n  }\n}\n@media (min-width: 992px) {\n  .container {\n    width: 940px;\n  }\n}\n@media (min-width: 1200px) {\n  .container {\n    width: 1140px;\n  }\n}\n.container-fluid {\n  margin-right: auto;\n  margin-left: auto;\n  padding-left: 0px;\n  padding-right: 0px;\n}\n.row {\n  margin-left: 0px;\n  margin-right: 0px;\n}\n.col-xs-1, .col-sm-1, .col-md-1, .col-lg-1, .col-xs-2, .col-sm-2, .col-md-2, .col-lg-2, .col-xs-3, .col-sm-3, .col-md-3, .col-lg-3, .col-xs-4, .col-sm-4, .col-md-4, .col-lg-4, .col-xs-5, .col-sm-5, .col-md-5, .col-lg-5, .col-xs-6, .col-sm-6, .col-md-6, .col-lg-6, .col-xs-7, .col-sm-7, .col-md-7, .col-lg-7, .col-xs-8, .col-sm-8, .col-md-8, .col-lg-8, .col-xs-9, .col-sm-9, .col-md-9, .col-lg-9, .col-xs-10, .col-sm-10, .col-md-10, .col-lg-10, .col-xs-11, .col-sm-11, .col-md-11, .col-lg-11, .col-xs-12, .col-sm-12, .col-md-12, .col-lg-12 {\n  position: relative;\n  min-height: 1px;\n  padding-left: 0px;\n  padding-right: 0px;\n}\n.col-xs-1, .col-xs-2, .col-xs-3, .col-xs-4, .col-xs-5, .col-xs-6, .col-xs-7, .col-xs-8, .col-xs-9, .col-xs-10, .col-xs-11, .col-xs-12 {\n  float: left;\n}\n.col-xs-12 {\n  width: 100%;\n}\n.col-xs-11 {\n  width: 91.66666667%;\n}\n.col-xs-10 {\n  width: 83.33333333%;\n}\n.col-xs-9 {\n  width: 75%;\n}\n.col-xs-8 {\n  width: 66.66666667%;\n}\n.col-xs-7 {\n  width: 58.33333333%;\n}\n.col-xs-6 {\n  width: 50%;\n}\n.col-xs-5 {\n  width: 41.66666667%;\n}\n.col-xs-4 {\n  width: 33.33333333%;\n}\n.col-xs-3 {\n  width: 25%;\n}\n.col-xs-2 {\n  width: 16.66666667%;\n}\n.col-xs-1 {\n  width: 8.33333333%;\n}\n.col-xs-pull-12 {\n  right: 100%;\n}\n.col-xs-pull-11 {\n  right: 91.66666667%;\n}\n.col-xs-pull-10 {\n  right: 83.33333333%;\n}\n.col-xs-pull-9 {\n  right: 75%;\n}\n.col-xs-pull-8 {\n  right: 66.66666667%;\n}\n.col-xs-pull-7 {\n  right: 58.33333333%;\n}\n.col-xs-pull-6 {\n  right: 50%;\n}\n.col-xs-pull-5 {\n  right: 41.66666667%;\n}\n.col-xs-pull-4 {\n  right: 33.33333333%;\n}\n.col-xs-pull-3 {\n  right: 25%;\n}\n.col-xs-pull-2 {\n  right: 16.66666667%;\n}\n.col-xs-pull-1 {\n  right: 8.33333333%;\n}\n.col-xs-pull-0 {\n  right: auto;\n}\n.col-xs-push-12 {\n  left: 100%;\n}\n.col-xs-push-11 {\n  left: 91.66666667%;\n}\n.col-xs-push-10 {\n  left: 83.33333333%;\n}\n.col-xs-push-9 {\n  left: 75%;\n}\n.col-xs-push-8 {\n  left: 66.66666667%;\n}\n.col-xs-push-7 {\n  left: 58.33333333%;\n}\n.col-xs-push-6 {\n  left: 50%;\n}\n.col-xs-push-5 {\n  left: 41.66666667%;\n}\n.col-xs-push-4 {\n  left: 33.33333333%;\n}\n.col-xs-push-3 {\n  left: 25%;\n}\n.col-xs-push-2 {\n  left: 16.66666667%;\n}\n.col-xs-push-1 {\n  left: 8.33333333%;\n}\n.col-xs-push-0 {\n  left: auto;\n}\n.col-xs-offset-12 {\n  margin-left: 100%;\n}\n.col-xs-offset-11 {\n  margin-left: 91.66666667%;\n}\n.col-xs-offset-10 {\n  margin-left: 83.33333333%;\n}\n.col-xs-offset-9 {\n  margin-left: 75%;\n}\n.col-xs-offset-8 {\n  margin-left: 66.66666667%;\n}\n.col-xs-offset-7 {\n  margin-left: 58.33333333%;\n}\n.col-xs-offset-6 {\n  margin-left: 50%;\n}\n.col-xs-offset-5 {\n  margin-left: 41.66666667%;\n}\n.col-xs-offset-4 {\n  margin-left: 33.33333333%;\n}\n.col-xs-offset-3 {\n  margin-left: 25%;\n}\n.col-xs-offset-2 {\n  margin-left: 16.66666667%;\n}\n.col-xs-offset-1 {\n  margin-left: 8.33333333%;\n}\n.col-xs-offset-0 {\n  margin-left: 0%;\n}\n@media (min-width: 768px) {\n  .col-sm-1, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-sm-10, .col-sm-11, .col-sm-12 {\n    float: left;\n  }\n  .col-sm-12 {\n    width: 100%;\n  }\n  .col-sm-11 {\n    width: 91.66666667%;\n  }\n  .col-sm-10 {\n    width: 83.33333333%;\n  }\n  .col-sm-9 {\n    width: 75%;\n  }\n  .col-sm-8 {\n    width: 66.66666667%;\n  }\n  .col-sm-7 {\n    width: 58.33333333%;\n  }\n  .col-sm-6 {\n    width: 50%;\n  }\n  .col-sm-5 {\n    width: 41.66666667%;\n  }\n  .col-sm-4 {\n    width: 33.33333333%;\n  }\n  .col-sm-3 {\n    width: 25%;\n  }\n  .col-sm-2 {\n    width: 16.66666667%;\n  }\n  .col-sm-1 {\n    width: 8.33333333%;\n  }\n  .col-sm-pull-12 {\n    right: 100%;\n  }\n  .col-sm-pull-11 {\n    right: 91.66666667%;\n  }\n  .col-sm-pull-10 {\n    right: 83.33333333%;\n  }\n  .col-sm-pull-9 {\n    right: 75%;\n  }\n  .col-sm-pull-8 {\n    right: 66.66666667%;\n  }\n  .col-sm-pull-7 {\n    right: 58.33333333%;\n  }\n  .col-sm-pull-6 {\n    right: 50%;\n  }\n  .col-sm-pull-5 {\n    right: 41.66666667%;\n  }\n  .col-sm-pull-4 {\n    right: 33.33333333%;\n  }\n  .col-sm-pull-3 {\n    right: 25%;\n  }\n  .col-sm-pull-2 {\n    right: 16.66666667%;\n  }\n  .col-sm-pull-1 {\n    right: 8.33333333%;\n  }\n  .col-sm-pull-0 {\n    right: auto;\n  }\n  .col-sm-push-12 {\n    left: 100%;\n  }\n  .col-sm-push-11 {\n    left: 91.66666667%;\n  }\n  .col-sm-push-10 {\n    left: 83.33333333%;\n  }\n  .col-sm-push-9 {\n    left: 75%;\n  }\n  .col-sm-push-8 {\n    left: 66.66666667%;\n  }\n  .col-sm-push-7 {\n    left: 58.33333333%;\n  }\n  .col-sm-push-6 {\n    left: 50%;\n  }\n  .col-sm-push-5 {\n    left: 41.66666667%;\n  }\n  .col-sm-push-4 {\n    left: 33.33333333%;\n  }\n  .col-sm-push-3 {\n    left: 25%;\n  }\n  .col-sm-push-2 {\n    left: 16.66666667%;\n  }\n  .col-sm-push-1 {\n    left: 8.33333333%;\n  }\n  .col-sm-push-0 {\n    left: auto;\n  }\n  .col-sm-offset-12 {\n    margin-left: 100%;\n  }\n  .col-sm-offset-11 {\n    margin-left: 91.66666667%;\n  }\n  .col-sm-offset-10 {\n    margin-left: 83.33333333%;\n  }\n  .col-sm-offset-9 {\n    margin-left: 75%;\n  }\n  .col-sm-offset-8 {\n    margin-left: 66.66666667%;\n  }\n  .col-sm-offset-7 {\n    margin-left: 58.33333333%;\n  }\n  .col-sm-offset-6 {\n    margin-left: 50%;\n  }\n  .col-sm-offset-5 {\n    margin-left: 41.66666667%;\n  }\n  .col-sm-offset-4 {\n    margin-left: 33.33333333%;\n  }\n  .col-sm-offset-3 {\n    margin-left: 25%;\n  }\n  .col-sm-offset-2 {\n    margin-left: 16.66666667%;\n  }\n  .col-sm-offset-1 {\n    margin-left: 8.33333333%;\n  }\n  .col-sm-offset-0 {\n    margin-left: 0%;\n  }\n}\n@media (min-width: 992px) {\n  .col-md-1, .col-md-2, .col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8, .col-md-9, .col-md-10, .col-md-11, .col-md-12 {\n    float: left;\n  }\n  .col-md-12 {\n    width: 100%;\n  }\n  .col-md-11 {\n    width: 91.66666667%;\n  }\n  .col-md-10 {\n    width: 83.33333333%;\n  }\n  .col-md-9 {\n    width: 75%;\n  }\n  .col-md-8 {\n    width: 66.66666667%;\n  }\n  .col-md-7 {\n    width: 58.33333333%;\n  }\n  .col-md-6 {\n    width: 50%;\n  }\n  .col-md-5 {\n    width: 41.66666667%;\n  }\n  .col-md-4 {\n    width: 33.33333333%;\n  }\n  .col-md-3 {\n    width: 25%;\n  }\n  .col-md-2 {\n    width: 16.66666667%;\n  }\n  .col-md-1 {\n    width: 8.33333333%;\n  }\n  .col-md-pull-12 {\n    right: 100%;\n  }\n  .col-md-pull-11 {\n    right: 91.66666667%;\n  }\n  .col-md-pull-10 {\n    right: 83.33333333%;\n  }\n  .col-md-pull-9 {\n    right: 75%;\n  }\n  .col-md-pull-8 {\n    right: 66.66666667%;\n  }\n  .col-md-pull-7 {\n    right: 58.33333333%;\n  }\n  .col-md-pull-6 {\n    right: 50%;\n  }\n  .col-md-pull-5 {\n    right: 41.66666667%;\n  }\n  .col-md-pull-4 {\n    right: 33.33333333%;\n  }\n  .col-md-pull-3 {\n    right: 25%;\n  }\n  .col-md-pull-2 {\n    right: 16.66666667%;\n  }\n  .col-md-pull-1 {\n    right: 8.33333333%;\n  }\n  .col-md-pull-0 {\n    right: auto;\n  }\n  .col-md-push-12 {\n    left: 100%;\n  }\n  .col-md-push-11 {\n    left: 91.66666667%;\n  }\n  .col-md-push-10 {\n    left: 83.33333333%;\n  }\n  .col-md-push-9 {\n    left: 75%;\n  }\n  .col-md-push-8 {\n    left: 66.66666667%;\n  }\n  .col-md-push-7 {\n    left: 58.33333333%;\n  }\n  .col-md-push-6 {\n    left: 50%;\n  }\n  .col-md-push-5 {\n    left: 41.66666667%;\n  }\n  .col-md-push-4 {\n    left: 33.33333333%;\n  }\n  .col-md-push-3 {\n    left: 25%;\n  }\n  .col-md-push-2 {\n    left: 16.66666667%;\n  }\n  .col-md-push-1 {\n    left: 8.33333333%;\n  }\n  .col-md-push-0 {\n    left: auto;\n  }\n  .col-md-offset-12 {\n    margin-left: 100%;\n  }\n  .col-md-offset-11 {\n    margin-left: 91.66666667%;\n  }\n  .col-md-offset-10 {\n    margin-left: 83.33333333%;\n  }\n  .col-md-offset-9 {\n    margin-left: 75%;\n  }\n  .col-md-offset-8 {\n    margin-left: 66.66666667%;\n  }\n  .col-md-offset-7 {\n    margin-left: 58.33333333%;\n  }\n  .col-md-offset-6 {\n    margin-left: 50%;\n  }\n  .col-md-offset-5 {\n    margin-left: 41.66666667%;\n  }\n  .col-md-offset-4 {\n    margin-left: 33.33333333%;\n  }\n  .col-md-offset-3 {\n    margin-left: 25%;\n  }\n  .col-md-offset-2 {\n    margin-left: 16.66666667%;\n  }\n  .col-md-offset-1 {\n    margin-left: 8.33333333%;\n  }\n  .col-md-offset-0 {\n    margin-left: 0%;\n  }\n}\n@media (min-width: 1200px) {\n  .col-lg-1, .col-lg-2, .col-lg-3, .col-lg-4, .col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-lg-10, .col-lg-11, .col-lg-12 {\n    float: left;\n  }\n  .col-lg-12 {\n    width: 100%;\n  }\n  .col-lg-11 {\n    width: 91.66666667%;\n  }\n  .col-lg-10 {\n    width: 83.33333333%;\n  }\n  .col-lg-9 {\n    width: 75%;\n  }\n  .col-lg-8 {\n    width: 66.66666667%;\n  }\n  .col-lg-7 {\n    width: 58.33333333%;\n  }\n  .col-lg-6 {\n    width: 50%;\n  }\n  .col-lg-5 {\n    width: 41.66666667%;\n  }\n  .col-lg-4 {\n    width: 33.33333333%;\n  }\n  .col-lg-3 {\n    width: 25%;\n  }\n  .col-lg-2 {\n    width: 16.66666667%;\n  }\n  .col-lg-1 {\n    width: 8.33333333%;\n  }\n  .col-lg-pull-12 {\n    right: 100%;\n  }\n  .col-lg-pull-11 {\n    right: 91.66666667%;\n  }\n  .col-lg-pull-10 {\n    right: 83.33333333%;\n  }\n  .col-lg-pull-9 {\n    right: 75%;\n  }\n  .col-lg-pull-8 {\n    right: 66.66666667%;\n  }\n  .col-lg-pull-7 {\n    right: 58.33333333%;\n  }\n  .col-lg-pull-6 {\n    right: 50%;\n  }\n  .col-lg-pull-5 {\n    right: 41.66666667%;\n  }\n  .col-lg-pull-4 {\n    right: 33.33333333%;\n  }\n  .col-lg-pull-3 {\n    right: 25%;\n  }\n  .col-lg-pull-2 {\n    right: 16.66666667%;\n  }\n  .col-lg-pull-1 {\n    right: 8.33333333%;\n  }\n  .col-lg-pull-0 {\n    right: auto;\n  }\n  .col-lg-push-12 {\n    left: 100%;\n  }\n  .col-lg-push-11 {\n    left: 91.66666667%;\n  }\n  .col-lg-push-10 {\n    left: 83.33333333%;\n  }\n  .col-lg-push-9 {\n    left: 75%;\n  }\n  .col-lg-push-8 {\n    left: 66.66666667%;\n  }\n  .col-lg-push-7 {\n    left: 58.33333333%;\n  }\n  .col-lg-push-6 {\n    left: 50%;\n  }\n  .col-lg-push-5 {\n    left: 41.66666667%;\n  }\n  .col-lg-push-4 {\n    left: 33.33333333%;\n  }\n  .col-lg-push-3 {\n    left: 25%;\n  }\n  .col-lg-push-2 {\n    left: 16.66666667%;\n  }\n  .col-lg-push-1 {\n    left: 8.33333333%;\n  }\n  .col-lg-push-0 {\n    left: auto;\n  }\n  .col-lg-offset-12 {\n    margin-left: 100%;\n  }\n  .col-lg-offset-11 {\n    margin-left: 91.66666667%;\n  }\n  .col-lg-offset-10 {\n    margin-left: 83.33333333%;\n  }\n  .col-lg-offset-9 {\n    margin-left: 75%;\n  }\n  .col-lg-offset-8 {\n    margin-left: 66.66666667%;\n  }\n  .col-lg-offset-7 {\n    margin-left: 58.33333333%;\n  }\n  .col-lg-offset-6 {\n    margin-left: 50%;\n  }\n  .col-lg-offset-5 {\n    margin-left: 41.66666667%;\n  }\n  .col-lg-offset-4 {\n    margin-left: 33.33333333%;\n  }\n  .col-lg-offset-3 {\n    margin-left: 25%;\n  }\n  .col-lg-offset-2 {\n    margin-left: 16.66666667%;\n  }\n  .col-lg-offset-1 {\n    margin-left: 8.33333333%;\n  }\n  .col-lg-offset-0 {\n    margin-left: 0%;\n  }\n}\ntable {\n  background-color: transparent;\n}\ncaption {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  color: #777777;\n  text-align: left;\n}\nth {\n  text-align: left;\n}\n.table {\n  width: 100%;\n  max-width: 100%;\n  margin-bottom: 18px;\n}\n.table > thead > tr > th,\n.table > tbody > tr > th,\n.table > tfoot > tr > th,\n.table > thead > tr > td,\n.table > tbody > tr > td,\n.table > tfoot > tr > td {\n  padding: 8px;\n  line-height: 1.42857143;\n  vertical-align: top;\n  border-top: 1px solid #ddd;\n}\n.table > thead > tr > th {\n  vertical-align: bottom;\n  border-bottom: 2px solid #ddd;\n}\n.table > caption + thead > tr:first-child > th,\n.table > colgroup + thead > tr:first-child > th,\n.table > thead:first-child > tr:first-child > th,\n.table > caption + thead > tr:first-child > td,\n.table > colgroup + thead > tr:first-child > td,\n.table > thead:first-child > tr:first-child > td {\n  border-top: 0;\n}\n.table > tbody + tbody {\n  border-top: 2px solid #ddd;\n}\n.table .table {\n  background-color: #fff;\n}\n.table-condensed > thead > tr > th,\n.table-condensed > tbody > tr > th,\n.table-condensed > tfoot > tr > th,\n.table-condensed > thead > tr > td,\n.table-condensed > tbody > tr > td,\n.table-condensed > tfoot > tr > td {\n  padding: 5px;\n}\n.table-bordered {\n  border: 1px solid #ddd;\n}\n.table-bordered > thead > tr > th,\n.table-bordered > tbody > tr > th,\n.table-bordered > tfoot > tr > th,\n.table-bordered > thead > tr > td,\n.table-bordered > tbody > tr > td,\n.table-bordered > tfoot > tr > td {\n  border: 1px solid #ddd;\n}\n.table-bordered > thead > tr > th,\n.table-bordered > thead > tr > td {\n  border-bottom-width: 2px;\n}\n.table-striped > tbody > tr:nth-of-type(odd) {\n  background-color: #f9f9f9;\n}\n.table-hover > tbody > tr:hover {\n  background-color: #f5f5f5;\n}\ntable col[class*='col-'] {\n  position: static;\n  float: none;\n  display: table-column;\n}\ntable td[class*='col-'],\ntable th[class*='col-'] {\n  position: static;\n  float: none;\n  display: table-cell;\n}\n.table > thead > tr > td.active,\n.table > tbody > tr > td.active,\n.table > tfoot > tr > td.active,\n.table > thead > tr > th.active,\n.table > tbody > tr > th.active,\n.table > tfoot > tr > th.active,\n.table > thead > tr.active > td,\n.table > tbody > tr.active > td,\n.table > tfoot > tr.active > td,\n.table > thead > tr.active > th,\n.table > tbody > tr.active > th,\n.table > tfoot > tr.active > th {\n  background-color: #f5f5f5;\n}\n.table-hover > tbody > tr > td.active:hover,\n.table-hover > tbody > tr > th.active:hover,\n.table-hover > tbody > tr.active:hover > td,\n.table-hover > tbody > tr:hover > .active,\n.table-hover > tbody > tr.active:hover > th {\n  background-color: #e8e8e8;\n}\n.table > thead > tr > td.success,\n.table > tbody > tr > td.success,\n.table > tfoot > tr > td.success,\n.table > thead > tr > th.success,\n.table > tbody > tr > th.success,\n.table > tfoot > tr > th.success,\n.table > thead > tr.success > td,\n.table > tbody > tr.success > td,\n.table > tfoot > tr.success > td,\n.table > thead > tr.success > th,\n.table > tbody > tr.success > th,\n.table > tfoot > tr.success > th {\n  background-color: #dff0d8;\n}\n.table-hover > tbody > tr > td.success:hover,\n.table-hover > tbody > tr > th.success:hover,\n.table-hover > tbody > tr.success:hover > td,\n.table-hover > tbody > tr:hover > .success,\n.table-hover > tbody > tr.success:hover > th {\n  background-color: #d0e9c6;\n}\n.table > thead > tr > td.info,\n.table > tbody > tr > td.info,\n.table > tfoot > tr > td.info,\n.table > thead > tr > th.info,\n.table > tbody > tr > th.info,\n.table > tfoot > tr > th.info,\n.table > thead > tr.info > td,\n.table > tbody > tr.info > td,\n.table > tfoot > tr.info > td,\n.table > thead > tr.info > th,\n.table > tbody > tr.info > th,\n.table > tfoot > tr.info > th {\n  background-color: #d9edf7;\n}\n.table-hover > tbody > tr > td.info:hover,\n.table-hover > tbody > tr > th.info:hover,\n.table-hover > tbody > tr.info:hover > td,\n.table-hover > tbody > tr:hover > .info,\n.table-hover > tbody > tr.info:hover > th {\n  background-color: #c4e3f3;\n}\n.table > thead > tr > td.warning,\n.table > tbody > tr > td.warning,\n.table > tfoot > tr > td.warning,\n.table > thead > tr > th.warning,\n.table > tbody > tr > th.warning,\n.table > tfoot > tr > th.warning,\n.table > thead > tr.warning > td,\n.table > tbody > tr.warning > td,\n.table > tfoot > tr.warning > td,\n.table > thead > tr.warning > th,\n.table > tbody > tr.warning > th,\n.table > tfoot > tr.warning > th {\n  background-color: #fcf8e3;\n}\n.table-hover > tbody > tr > td.warning:hover,\n.table-hover > tbody > tr > th.warning:hover,\n.table-hover > tbody > tr.warning:hover > td,\n.table-hover > tbody > tr:hover > .warning,\n.table-hover > tbody > tr.warning:hover > th {\n  background-color: #faf2cc;\n}\n.table > thead > tr > td.danger,\n.table > tbody > tr > td.danger,\n.table > tfoot > tr > td.danger,\n.table > thead > tr > th.danger,\n.table > tbody > tr > th.danger,\n.table > tfoot > tr > th.danger,\n.table > thead > tr.danger > td,\n.table > tbody > tr.danger > td,\n.table > tfoot > tr.danger > td,\n.table > thead > tr.danger > th,\n.table > tbody > tr.danger > th,\n.table > tfoot > tr.danger > th {\n  background-color: #f2dede;\n}\n.table-hover > tbody > tr > td.danger:hover,\n.table-hover > tbody > tr > th.danger:hover,\n.table-hover > tbody > tr.danger:hover > td,\n.table-hover > tbody > tr:hover > .danger,\n.table-hover > tbody > tr.danger:hover > th {\n  background-color: #ebcccc;\n}\n.table-responsive {\n  overflow-x: auto;\n  min-height: 0.01%;\n}\n@media screen and (max-width: 767px) {\n  .table-responsive {\n    width: 100%;\n    margin-bottom: 13.5px;\n    overflow-y: hidden;\n    -ms-overflow-style: -ms-autohiding-scrollbar;\n    border: 1px solid #ddd;\n  }\n  .table-responsive > .table {\n    margin-bottom: 0;\n  }\n  .table-responsive > .table > thead > tr > th,\n  .table-responsive > .table > tbody > tr > th,\n  .table-responsive > .table > tfoot > tr > th,\n  .table-responsive > .table > thead > tr > td,\n  .table-responsive > .table > tbody > tr > td,\n  .table-responsive > .table > tfoot > tr > td {\n    white-space: nowrap;\n  }\n  .table-responsive > .table-bordered {\n    border: 0;\n  }\n  .table-responsive > .table-bordered > thead > tr > th:first-child,\n  .table-responsive > .table-bordered > tbody > tr > th:first-child,\n  .table-responsive > .table-bordered > tfoot > tr > th:first-child,\n  .table-responsive > .table-bordered > thead > tr > td:first-child,\n  .table-responsive > .table-bordered > tbody > tr > td:first-child,\n  .table-responsive > .table-bordered > tfoot > tr > td:first-child {\n    border-left: 0;\n  }\n  .table-responsive > .table-bordered > thead > tr > th:last-child,\n  .table-responsive > .table-bordered > tbody > tr > th:last-child,\n  .table-responsive > .table-bordered > tfoot > tr > th:last-child,\n  .table-responsive > .table-bordered > thead > tr > td:last-child,\n  .table-responsive > .table-bordered > tbody > tr > td:last-child,\n  .table-responsive > .table-bordered > tfoot > tr > td:last-child {\n    border-right: 0;\n  }\n  .table-responsive > .table-bordered > tbody > tr:last-child > th,\n  .table-responsive > .table-bordered > tfoot > tr:last-child > th,\n  .table-responsive > .table-bordered > tbody > tr:last-child > td,\n  .table-responsive > .table-bordered > tfoot > tr:last-child > td {\n    border-bottom: 0;\n  }\n}\nfieldset {\n  padding: 0;\n  margin: 0;\n  border: 0;\n  min-width: 0;\n}\nlegend {\n  display: block;\n  width: 100%;\n  padding: 0;\n  margin-bottom: 18px;\n  font-size: 19.5px;\n  line-height: inherit;\n  color: #333333;\n  border: 0;\n  border-bottom: 1px solid #e5e5e5;\n}\nlabel {\n  display: inline-block;\n  max-width: 100%;\n  margin-bottom: 5px;\n  font-weight: bold;\n}\ninput[type='search'] {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\ninput[type='radio'],\ninput[type='checkbox'] {\n  margin: 4px 0 0;\n  margin-top: 1px \\9;\n  line-height: normal;\n}\ninput[type='file'] {\n  display: block;\n}\ninput[type='range'] {\n  display: block;\n  width: 100%;\n}\nselect[multiple],\nselect[size] {\n  height: auto;\n}\ninput[type='file']:focus,\ninput[type='radio']:focus,\ninput[type='checkbox']:focus {\n  outline: 5px auto -webkit-focus-ring-color;\n  outline-offset: -2px;\n}\noutput {\n  display: block;\n  padding-top: 7px;\n  font-size: 13px;\n  line-height: 1.42857143;\n  color: #555555;\n}\n.form-control {\n  display: block;\n  width: 100%;\n  height: 32px;\n  padding: 6px 12px;\n  font-size: 13px;\n  line-height: 1.42857143;\n  color: #555555;\n  background-color: #fff;\n  background-image: none;\n  border: 1px solid #ccc;\n  border-radius: 2px;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;\n  -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;\n  transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;\n}\n.form-control:focus {\n  border-color: #66afe9;\n  outline: 0;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);\n  box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);\n}\n.form-control::-moz-placeholder {\n  color: #999;\n  opacity: 1;\n}\n.form-control:-ms-input-placeholder {\n  color: #999;\n}\n.form-control::-webkit-input-placeholder {\n  color: #999;\n}\n.form-control::-ms-expand {\n  border: 0;\n  background-color: transparent;\n}\n.form-control[disabled],\n.form-control[readonly],\nfieldset[disabled] .form-control {\n  background-color: #eeeeee;\n  opacity: 1;\n}\n.form-control[disabled],\nfieldset[disabled] .form-control {\n  cursor: not-allowed;\n}\ntextarea.form-control {\n  height: auto;\n}\ninput[type='search'] {\n  -webkit-appearance: none;\n}\n@media screen and (-webkit-min-device-pixel-ratio: 0) {\n  input[type='date'].form-control,\n  input[type='time'].form-control,\n  input[type='datetime-local'].form-control,\n  input[type='month'].form-control {\n    line-height: 32px;\n  }\n  input[type='date'].input-sm,\n  input[type='time'].input-sm,\n  input[type='datetime-local'].input-sm,\n  input[type='month'].input-sm,\n  .input-group-sm input[type='date'],\n  .input-group-sm input[type='time'],\n  .input-group-sm input[type='datetime-local'],\n  .input-group-sm input[type='month'] {\n    line-height: 30px;\n  }\n  input[type='date'].input-lg,\n  input[type='time'].input-lg,\n  input[type='datetime-local'].input-lg,\n  input[type='month'].input-lg,\n  .input-group-lg input[type='date'],\n  .input-group-lg input[type='time'],\n  .input-group-lg input[type='datetime-local'],\n  .input-group-lg input[type='month'] {\n    line-height: 45px;\n  }\n}\n.form-group {\n  margin-bottom: 15px;\n}\n.radio,\n.checkbox {\n  position: relative;\n  display: block;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n.radio label,\n.checkbox label {\n  min-height: 18px;\n  padding-left: 20px;\n  margin-bottom: 0;\n  font-weight: normal;\n  cursor: pointer;\n}\n.radio input[type='radio'],\n.radio-inline input[type='radio'],\n.checkbox input[type='checkbox'],\n.checkbox-inline input[type='checkbox'] {\n  position: absolute;\n  margin-left: -20px;\n  margin-top: 4px \\9;\n}\n.radio + .radio,\n.checkbox + .checkbox {\n  margin-top: -5px;\n}\n.radio-inline,\n.checkbox-inline {\n  position: relative;\n  display: inline-block;\n  padding-left: 20px;\n  margin-bottom: 0;\n  vertical-align: middle;\n  font-weight: normal;\n  cursor: pointer;\n}\n.radio-inline + .radio-inline,\n.checkbox-inline + .checkbox-inline {\n  margin-top: 0;\n  margin-left: 10px;\n}\ninput[type='radio'][disabled],\ninput[type='checkbox'][disabled],\ninput[type='radio'].disabled,\ninput[type='checkbox'].disabled,\nfieldset[disabled] input[type='radio'],\nfieldset[disabled] input[type='checkbox'] {\n  cursor: not-allowed;\n}\n.radio-inline.disabled,\n.checkbox-inline.disabled,\nfieldset[disabled] .radio-inline,\nfieldset[disabled] .checkbox-inline {\n  cursor: not-allowed;\n}\n.radio.disabled label,\n.checkbox.disabled label,\nfieldset[disabled] .radio label,\nfieldset[disabled] .checkbox label {\n  cursor: not-allowed;\n}\n.form-control-static {\n  padding-top: 7px;\n  padding-bottom: 7px;\n  margin-bottom: 0;\n  min-height: 31px;\n}\n.form-control-static.input-lg,\n.form-control-static.input-sm {\n  padding-left: 0;\n  padding-right: 0;\n}\n.input-sm {\n  height: 30px;\n  padding: 5px 10px;\n  font-size: 12px;\n  line-height: 1.5;\n  border-radius: 1px;\n}\nselect.input-sm {\n  height: 30px;\n  line-height: 30px;\n}\ntextarea.input-sm,\nselect[multiple].input-sm {\n  height: auto;\n}\n.form-group-sm .form-control {\n  height: 30px;\n  padding: 5px 10px;\n  font-size: 12px;\n  line-height: 1.5;\n  border-radius: 1px;\n}\n.form-group-sm select.form-control {\n  height: 30px;\n  line-height: 30px;\n}\n.form-group-sm textarea.form-control,\n.form-group-sm select[multiple].form-control {\n  height: auto;\n}\n.form-group-sm .form-control-static {\n  height: 30px;\n  min-height: 30px;\n  padding: 6px 10px;\n  font-size: 12px;\n  line-height: 1.5;\n}\n.input-lg {\n  height: 45px;\n  padding: 10px 16px;\n  font-size: 17px;\n  line-height: 1.3333333;\n  border-radius: 3px;\n}\nselect.input-lg {\n  height: 45px;\n  line-height: 45px;\n}\ntextarea.input-lg,\nselect[multiple].input-lg {\n  height: auto;\n}\n.form-group-lg .form-control {\n  height: 45px;\n  padding: 10px 16px;\n  font-size: 17px;\n  line-height: 1.3333333;\n  border-radius: 3px;\n}\n.form-group-lg select.form-control {\n  height: 45px;\n  line-height: 45px;\n}\n.form-group-lg textarea.form-control,\n.form-group-lg select[multiple].form-control {\n  height: auto;\n}\n.form-group-lg .form-control-static {\n  height: 45px;\n  min-height: 35px;\n  padding: 11px 16px;\n  font-size: 17px;\n  line-height: 1.3333333;\n}\n.has-feedback {\n  position: relative;\n}\n.has-feedback .form-control {\n  padding-right: 40px;\n}\n.form-control-feedback {\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 2;\n  display: block;\n  width: 32px;\n  height: 32px;\n  line-height: 32px;\n  text-align: center;\n  pointer-events: none;\n}\n.input-lg + .form-control-feedback,\n.input-group-lg + .form-control-feedback,\n.form-group-lg .form-control + .form-control-feedback {\n  width: 45px;\n  height: 45px;\n  line-height: 45px;\n}\n.input-sm + .form-control-feedback,\n.input-group-sm + .form-control-feedback,\n.form-group-sm .form-control + .form-control-feedback {\n  width: 30px;\n  height: 30px;\n  line-height: 30px;\n}\n.has-success .help-block,\n.has-success .control-label,\n.has-success .radio,\n.has-success .checkbox,\n.has-success .radio-inline,\n.has-success .checkbox-inline,\n.has-success.radio label,\n.has-success.checkbox label,\n.has-success.radio-inline label,\n.has-success.checkbox-inline label {\n  color: #3c763d;\n}\n.has-success .form-control {\n  border-color: #3c763d;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n}\n.has-success .form-control:focus {\n  border-color: #2b542c;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168;\n}\n.has-success .input-group-addon {\n  color: #3c763d;\n  border-color: #3c763d;\n  background-color: #dff0d8;\n}\n.has-success .form-control-feedback {\n  color: #3c763d;\n}\n.has-warning .help-block,\n.has-warning .control-label,\n.has-warning .radio,\n.has-warning .checkbox,\n.has-warning .radio-inline,\n.has-warning .checkbox-inline,\n.has-warning.radio label,\n.has-warning.checkbox label,\n.has-warning.radio-inline label,\n.has-warning.checkbox-inline label {\n  color: #8a6d3b;\n}\n.has-warning .form-control {\n  border-color: #8a6d3b;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n}\n.has-warning .form-control:focus {\n  border-color: #66512c;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b;\n}\n.has-warning .input-group-addon {\n  color: #8a6d3b;\n  border-color: #8a6d3b;\n  background-color: #fcf8e3;\n}\n.has-warning .form-control-feedback {\n  color: #8a6d3b;\n}\n.has-error .help-block,\n.has-error .control-label,\n.has-error .radio,\n.has-error .checkbox,\n.has-error .radio-inline,\n.has-error .checkbox-inline,\n.has-error.radio label,\n.has-error.checkbox label,\n.has-error.radio-inline label,\n.has-error.checkbox-inline label {\n  color: #a94442;\n}\n.has-error .form-control {\n  border-color: #a94442;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n}\n.has-error .form-control:focus {\n  border-color: #843534;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483;\n}\n.has-error .input-group-addon {\n  color: #a94442;\n  border-color: #a94442;\n  background-color: #f2dede;\n}\n.has-error .form-control-feedback {\n  color: #a94442;\n}\n.has-feedback label ~ .form-control-feedback {\n  top: 23px;\n}\n.has-feedback label.sr-only ~ .form-control-feedback {\n  top: 0;\n}\n.help-block {\n  display: block;\n  margin-top: 5px;\n  margin-bottom: 10px;\n  color: #404040;\n}\n@media (min-width: 768px) {\n  .form-inline .form-group {\n    display: inline-block;\n    margin-bottom: 0;\n    vertical-align: middle;\n  }\n  .form-inline .form-control {\n    display: inline-block;\n    width: auto;\n    vertical-align: middle;\n  }\n  .form-inline .form-control-static {\n    display: inline-block;\n  }\n  .form-inline .input-group {\n    display: inline-table;\n    vertical-align: middle;\n  }\n  .form-inline .input-group .input-group-addon,\n  .form-inline .input-group .input-group-btn,\n  .form-inline .input-group .form-control {\n    width: auto;\n  }\n  .form-inline .input-group > .form-control {\n    width: 100%;\n  }\n  .form-inline .control-label {\n    margin-bottom: 0;\n    vertical-align: middle;\n  }\n  .form-inline .radio,\n  .form-inline .checkbox {\n    display: inline-block;\n    margin-top: 0;\n    margin-bottom: 0;\n    vertical-align: middle;\n  }\n  .form-inline .radio label,\n  .form-inline .checkbox label {\n    padding-left: 0;\n  }\n  .form-inline .radio input[type='radio'],\n  .form-inline .checkbox input[type='checkbox'] {\n    position: relative;\n    margin-left: 0;\n  }\n  .form-inline .has-feedback .form-control-feedback {\n    top: 0;\n  }\n}\n.form-horizontal .radio,\n.form-horizontal .checkbox,\n.form-horizontal .radio-inline,\n.form-horizontal .checkbox-inline {\n  margin-top: 0;\n  margin-bottom: 0;\n  padding-top: 7px;\n}\n.form-horizontal .radio,\n.form-horizontal .checkbox {\n  min-height: 25px;\n}\n.form-horizontal .form-group {\n  margin-left: 0px;\n  margin-right: 0px;\n}\n@media (min-width: 768px) {\n  .form-horizontal .control-label {\n    text-align: right;\n    margin-bottom: 0;\n    padding-top: 7px;\n  }\n}\n.form-horizontal .has-feedback .form-control-feedback {\n  right: 0px;\n}\n@media (min-width: 768px) {\n  .form-horizontal .form-group-lg .control-label {\n    padding-top: 11px;\n    font-size: 17px;\n  }\n}\n@media (min-width: 768px) {\n  .form-horizontal .form-group-sm .control-label {\n    padding-top: 6px;\n    font-size: 12px;\n  }\n}\n.btn {\n  display: inline-block;\n  margin-bottom: 0;\n  font-weight: normal;\n  text-align: center;\n  vertical-align: middle;\n  touch-action: manipulation;\n  cursor: pointer;\n  background-image: none;\n  border: 1px solid transparent;\n  white-space: nowrap;\n  padding: 6px 12px;\n  font-size: 13px;\n  line-height: 1.42857143;\n  border-radius: 2px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.btn:focus,\n.btn:active:focus,\n.btn.active:focus,\n.btn.focus,\n.btn:active.focus,\n.btn.active.focus {\n  outline: 5px auto -webkit-focus-ring-color;\n  outline-offset: -2px;\n}\n.btn:hover,\n.btn:focus,\n.btn.focus {\n  color: #333;\n  text-decoration: none;\n}\n.btn:active,\n.btn.active {\n  outline: 0;\n  background-image: none;\n  -webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);\n  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);\n}\n.btn.disabled,\n.btn[disabled],\nfieldset[disabled] .btn {\n  cursor: not-allowed;\n  opacity: 0.65;\n  filter: alpha(opacity=65);\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\na.btn.disabled,\nfieldset[disabled] a.btn {\n  pointer-events: none;\n}\n.btn-default {\n  color: #333;\n  background-color: #fff;\n  border-color: #ccc;\n}\n.btn-default:focus,\n.btn-default.focus {\n  color: #333;\n  background-color: #e6e6e6;\n  border-color: #8c8c8c;\n}\n.btn-default:hover {\n  color: #333;\n  background-color: #e6e6e6;\n  border-color: #adadad;\n}\n.btn-default:active,\n.btn-default.active,\n.open > .dropdown-toggle.btn-default {\n  color: #333;\n  background-color: #e6e6e6;\n  border-color: #adadad;\n}\n.btn-default:active:hover,\n.btn-default.active:hover,\n.open > .dropdown-toggle.btn-default:hover,\n.btn-default:active:focus,\n.btn-default.active:focus,\n.open > .dropdown-toggle.btn-default:focus,\n.btn-default:active.focus,\n.btn-default.active.focus,\n.open > .dropdown-toggle.btn-default.focus {\n  color: #333;\n  background-color: #d4d4d4;\n  border-color: #8c8c8c;\n}\n.btn-default:active,\n.btn-default.active,\n.open > .dropdown-toggle.btn-default {\n  background-image: none;\n}\n.btn-default.disabled:hover,\n.btn-default[disabled]:hover,\nfieldset[disabled] .btn-default:hover,\n.btn-default.disabled:focus,\n.btn-default[disabled]:focus,\nfieldset[disabled] .btn-default:focus,\n.btn-default.disabled.focus,\n.btn-default[disabled].focus,\nfieldset[disabled] .btn-default.focus {\n  background-color: #fff;\n  border-color: #ccc;\n}\n.btn-default .badge {\n  color: #fff;\n  background-color: #333;\n}\n.btn-primary {\n  color: #fff;\n  background-color: #337ab7;\n  border-color: #2e6da4;\n}\n.btn-primary:focus,\n.btn-primary.focus {\n  color: #fff;\n  background-color: #286090;\n  border-color: #122b40;\n}\n.btn-primary:hover {\n  color: #fff;\n  background-color: #286090;\n  border-color: #204d74;\n}\n.btn-primary:active,\n.btn-primary.active,\n.open > .dropdown-toggle.btn-primary {\n  color: #fff;\n  background-color: #286090;\n  border-color: #204d74;\n}\n.btn-primary:active:hover,\n.btn-primary.active:hover,\n.open > .dropdown-toggle.btn-primary:hover,\n.btn-primary:active:focus,\n.btn-primary.active:focus,\n.open > .dropdown-toggle.btn-primary:focus,\n.btn-primary:active.focus,\n.btn-primary.active.focus,\n.open > .dropdown-toggle.btn-primary.focus {\n  color: #fff;\n  background-color: #204d74;\n  border-color: #122b40;\n}\n.btn-primary:active,\n.btn-primary.active,\n.open > .dropdown-toggle.btn-primary {\n  background-image: none;\n}\n.btn-primary.disabled:hover,\n.btn-primary[disabled]:hover,\nfieldset[disabled] .btn-primary:hover,\n.btn-primary.disabled:focus,\n.btn-primary[disabled]:focus,\nfieldset[disabled] .btn-primary:focus,\n.btn-primary.disabled.focus,\n.btn-primary[disabled].focus,\nfieldset[disabled] .btn-primary.focus {\n  background-color: #337ab7;\n  border-color: #2e6da4;\n}\n.btn-primary .badge {\n  color: #337ab7;\n  background-color: #fff;\n}\n.btn-success {\n  color: #fff;\n  background-color: #5cb85c;\n  border-color: #4cae4c;\n}\n.btn-success:focus,\n.btn-success.focus {\n  color: #fff;\n  background-color: #449d44;\n  border-color: #255625;\n}\n.btn-success:hover {\n  color: #fff;\n  background-color: #449d44;\n  border-color: #398439;\n}\n.btn-success:active,\n.btn-success.active,\n.open > .dropdown-toggle.btn-success {\n  color: #fff;\n  background-color: #449d44;\n  border-color: #398439;\n}\n.btn-success:active:hover,\n.btn-success.active:hover,\n.open > .dropdown-toggle.btn-success:hover,\n.btn-success:active:focus,\n.btn-success.active:focus,\n.open > .dropdown-toggle.btn-success:focus,\n.btn-success:active.focus,\n.btn-success.active.focus,\n.open > .dropdown-toggle.btn-success.focus {\n  color: #fff;\n  background-color: #398439;\n  border-color: #255625;\n}\n.btn-success:active,\n.btn-success.active,\n.open > .dropdown-toggle.btn-success {\n  background-image: none;\n}\n.btn-success.disabled:hover,\n.btn-success[disabled]:hover,\nfieldset[disabled] .btn-success:hover,\n.btn-success.disabled:focus,\n.btn-success[disabled]:focus,\nfieldset[disabled] .btn-success:focus,\n.btn-success.disabled.focus,\n.btn-success[disabled].focus,\nfieldset[disabled] .btn-success.focus {\n  background-color: #5cb85c;\n  border-color: #4cae4c;\n}\n.btn-success .badge {\n  color: #5cb85c;\n  background-color: #fff;\n}\n.btn-info {\n  color: #fff;\n  background-color: #5bc0de;\n  border-color: #46b8da;\n}\n.btn-info:focus,\n.btn-info.focus {\n  color: #fff;\n  background-color: #31b0d5;\n  border-color: #1b6d85;\n}\n.btn-info:hover {\n  color: #fff;\n  background-color: #31b0d5;\n  border-color: #269abc;\n}\n.btn-info:active,\n.btn-info.active,\n.open > .dropdown-toggle.btn-info {\n  color: #fff;\n  background-color: #31b0d5;\n  border-color: #269abc;\n}\n.btn-info:active:hover,\n.btn-info.active:hover,\n.open > .dropdown-toggle.btn-info:hover,\n.btn-info:active:focus,\n.btn-info.active:focus,\n.open > .dropdown-toggle.btn-info:focus,\n.btn-info:active.focus,\n.btn-info.active.focus,\n.open > .dropdown-toggle.btn-info.focus {\n  color: #fff;\n  background-color: #269abc;\n  border-color: #1b6d85;\n}\n.btn-info:active,\n.btn-info.active,\n.open > .dropdown-toggle.btn-info {\n  background-image: none;\n}\n.btn-info.disabled:hover,\n.btn-info[disabled]:hover,\nfieldset[disabled] .btn-info:hover,\n.btn-info.disabled:focus,\n.btn-info[disabled]:focus,\nfieldset[disabled] .btn-info:focus,\n.btn-info.disabled.focus,\n.btn-info[disabled].focus,\nfieldset[disabled] .btn-info.focus {\n  background-color: #5bc0de;\n  border-color: #46b8da;\n}\n.btn-info .badge {\n  color: #5bc0de;\n  background-color: #fff;\n}\n.btn-warning {\n  color: #fff;\n  background-color: #f0ad4e;\n  border-color: #eea236;\n}\n.btn-warning:focus,\n.btn-warning.focus {\n  color: #fff;\n  background-color: #ec971f;\n  border-color: #985f0d;\n}\n.btn-warning:hover {\n  color: #fff;\n  background-color: #ec971f;\n  border-color: #d58512;\n}\n.btn-warning:active,\n.btn-warning.active,\n.open > .dropdown-toggle.btn-warning {\n  color: #fff;\n  background-color: #ec971f;\n  border-color: #d58512;\n}\n.btn-warning:active:hover,\n.btn-warning.active:hover,\n.open > .dropdown-toggle.btn-warning:hover,\n.btn-warning:active:focus,\n.btn-warning.active:focus,\n.open > .dropdown-toggle.btn-warning:focus,\n.btn-warning:active.focus,\n.btn-warning.active.focus,\n.open > .dropdown-toggle.btn-warning.focus {\n  color: #fff;\n  background-color: #d58512;\n  border-color: #985f0d;\n}\n.btn-warning:active,\n.btn-warning.active,\n.open > .dropdown-toggle.btn-warning {\n  background-image: none;\n}\n.btn-warning.disabled:hover,\n.btn-warning[disabled]:hover,\nfieldset[disabled] .btn-warning:hover,\n.btn-warning.disabled:focus,\n.btn-warning[disabled]:focus,\nfieldset[disabled] .btn-warning:focus,\n.btn-warning.disabled.focus,\n.btn-warning[disabled].focus,\nfieldset[disabled] .btn-warning.focus {\n  background-color: #f0ad4e;\n  border-color: #eea236;\n}\n.btn-warning .badge {\n  color: #f0ad4e;\n  background-color: #fff;\n}\n.btn-danger {\n  color: #fff;\n  background-color: #d9534f;\n  border-color: #d43f3a;\n}\n.btn-danger:focus,\n.btn-danger.focus {\n  color: #fff;\n  background-color: #c9302c;\n  border-color: #761c19;\n}\n.btn-danger:hover {\n  color: #fff;\n  background-color: #c9302c;\n  border-color: #ac2925;\n}\n.btn-danger:active,\n.btn-danger.active,\n.open > .dropdown-toggle.btn-danger {\n  color: #fff;\n  background-color: #c9302c;\n  border-color: #ac2925;\n}\n.btn-danger:active:hover,\n.btn-danger.active:hover,\n.open > .dropdown-toggle.btn-danger:hover,\n.btn-danger:active:focus,\n.btn-danger.active:focus,\n.open > .dropdown-toggle.btn-danger:focus,\n.btn-danger:active.focus,\n.btn-danger.active.focus,\n.open > .dropdown-toggle.btn-danger.focus {\n  color: #fff;\n  background-color: #ac2925;\n  border-color: #761c19;\n}\n.btn-danger:active,\n.btn-danger.active,\n.open > .dropdown-toggle.btn-danger {\n  background-image: none;\n}\n.btn-danger.disabled:hover,\n.btn-danger[disabled]:hover,\nfieldset[disabled] .btn-danger:hover,\n.btn-danger.disabled:focus,\n.btn-danger[disabled]:focus,\nfieldset[disabled] .btn-danger:focus,\n.btn-danger.disabled.focus,\n.btn-danger[disabled].focus,\nfieldset[disabled] .btn-danger.focus {\n  background-color: #d9534f;\n  border-color: #d43f3a;\n}\n.btn-danger .badge {\n  color: #d9534f;\n  background-color: #fff;\n}\n.btn-link {\n  color: #337ab7;\n  font-weight: normal;\n  border-radius: 0;\n}\n.btn-link,\n.btn-link:active,\n.btn-link.active,\n.btn-link[disabled],\nfieldset[disabled] .btn-link {\n  background-color: transparent;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n.btn-link,\n.btn-link:hover,\n.btn-link:focus,\n.btn-link:active {\n  border-color: transparent;\n}\n.btn-link:hover,\n.btn-link:focus {\n  color: #23527c;\n  text-decoration: underline;\n  background-color: transparent;\n}\n.btn-link[disabled]:hover,\nfieldset[disabled] .btn-link:hover,\n.btn-link[disabled]:focus,\nfieldset[disabled] .btn-link:focus {\n  color: #777777;\n  text-decoration: none;\n}\n.btn-lg,\n.btn-group-lg > .btn {\n  padding: 10px 16px;\n  font-size: 17px;\n  line-height: 1.3333333;\n  border-radius: 3px;\n}\n.btn-sm,\n.btn-group-sm > .btn {\n  padding: 5px 10px;\n  font-size: 12px;\n  line-height: 1.5;\n  border-radius: 1px;\n}\n.btn-xs,\n.btn-group-xs > .btn {\n  padding: 1px 5px;\n  font-size: 12px;\n  line-height: 1.5;\n  border-radius: 1px;\n}\n.btn-block {\n  display: block;\n  width: 100%;\n}\n.btn-block + .btn-block {\n  margin-top: 5px;\n}\ninput[type='submit'].btn-block,\ninput[type='reset'].btn-block,\ninput[type='button'].btn-block {\n  width: 100%;\n}\n.fade {\n  opacity: 0;\n  -webkit-transition: opacity 0.15s linear;\n  -o-transition: opacity 0.15s linear;\n  transition: opacity 0.15s linear;\n}\n.fade.in {\n  opacity: 1;\n}\n.collapse {\n  display: none;\n}\n.collapse.in {\n  display: block;\n}\ntr.collapse.in {\n  display: table-row;\n}\ntbody.collapse.in {\n  display: table-row-group;\n}\n.collapsing {\n  position: relative;\n  height: 0;\n  overflow: hidden;\n  -webkit-transition-property: height, visibility;\n  transition-property: height, visibility;\n  -webkit-transition-duration: 0.35s;\n  transition-duration: 0.35s;\n  -webkit-transition-timing-function: ease;\n  transition-timing-function: ease;\n}\n.caret {\n  display: inline-block;\n  width: 0;\n  height: 0;\n  margin-left: 2px;\n  vertical-align: middle;\n  border-top: 4px dashed;\n  border-top: 4px solid \\9;\n  border-right: 4px solid transparent;\n  border-left: 4px solid transparent;\n}\n.dropup,\n.dropdown {\n  position: relative;\n}\n.dropdown-toggle:focus {\n  outline: 0;\n}\n.dropdown-menu {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  z-index: 1000;\n  display: none;\n  float: left;\n  min-width: 160px;\n  padding: 5px 0;\n  margin: 2px 0 0;\n  list-style: none;\n  font-size: 13px;\n  text-align: left;\n  background-color: #fff;\n  border: 1px solid #ccc;\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  border-radius: 2px;\n  -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n  background-clip: padding-box;\n}\n.dropdown-menu.pull-right {\n  right: 0;\n  left: auto;\n}\n.dropdown-menu .divider {\n  height: 1px;\n  margin: 8px 0;\n  overflow: hidden;\n  background-color: #e5e5e5;\n}\n.dropdown-menu > li > a {\n  display: block;\n  padding: 3px 20px;\n  clear: both;\n  font-weight: normal;\n  line-height: 1.42857143;\n  color: #333333;\n  white-space: nowrap;\n}\n.dropdown-menu > li > a:hover,\n.dropdown-menu > li > a:focus {\n  text-decoration: none;\n  color: #262626;\n  background-color: #f5f5f5;\n}\n.dropdown-menu > .active > a,\n.dropdown-menu > .active > a:hover,\n.dropdown-menu > .active > a:focus {\n  color: #fff;\n  text-decoration: none;\n  outline: 0;\n  background-color: #337ab7;\n}\n.dropdown-menu > .disabled > a,\n.dropdown-menu > .disabled > a:hover,\n.dropdown-menu > .disabled > a:focus {\n  color: #777777;\n}\n.dropdown-menu > .disabled > a:hover,\n.dropdown-menu > .disabled > a:focus {\n  text-decoration: none;\n  background-color: transparent;\n  background-image: none;\n  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);\n  cursor: not-allowed;\n}\n.open > .dropdown-menu {\n  display: block;\n}\n.open > a {\n  outline: 0;\n}\n.dropdown-menu-right {\n  left: auto;\n  right: 0;\n}\n.dropdown-menu-left {\n  left: 0;\n  right: auto;\n}\n.dropdown-header {\n  display: block;\n  padding: 3px 20px;\n  font-size: 12px;\n  line-height: 1.42857143;\n  color: #777777;\n  white-space: nowrap;\n}\n.dropdown-backdrop {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  z-index: 990;\n}\n.pull-right > .dropdown-menu {\n  right: 0;\n  left: auto;\n}\n.dropup .caret,\n.navbar-fixed-bottom .dropdown .caret {\n  border-top: 0;\n  border-bottom: 4px dashed;\n  border-bottom: 4px solid \\9;\n  content: '';\n}\n.dropup .dropdown-menu,\n.navbar-fixed-bottom .dropdown .dropdown-menu {\n  top: auto;\n  bottom: 100%;\n  margin-bottom: 2px;\n}\n@media (min-width: 541px) {\n  .navbar-right .dropdown-menu {\n    left: auto;\n    right: 0;\n  }\n  .navbar-right .dropdown-menu-left {\n    left: 0;\n    right: auto;\n  }\n}\n.btn-group,\n.btn-group-vertical {\n  position: relative;\n  display: inline-block;\n  vertical-align: middle;\n}\n.btn-group > .btn,\n.btn-group-vertical > .btn {\n  position: relative;\n  float: left;\n}\n.btn-group > .btn:hover,\n.btn-group-vertical > .btn:hover,\n.btn-group > .btn:focus,\n.btn-group-vertical > .btn:focus,\n.btn-group > .btn:active,\n.btn-group-vertical > .btn:active,\n.btn-group > .btn.active,\n.btn-group-vertical > .btn.active {\n  z-index: 2;\n}\n.btn-group .btn + .btn,\n.btn-group .btn + .btn-group,\n.btn-group .btn-group + .btn,\n.btn-group .btn-group + .btn-group {\n  margin-left: -1px;\n}\n.btn-toolbar {\n  margin-left: -5px;\n}\n.btn-toolbar .btn,\n.btn-toolbar .btn-group,\n.btn-toolbar .input-group {\n  float: left;\n}\n.btn-toolbar > .btn,\n.btn-toolbar > .btn-group,\n.btn-toolbar > .input-group {\n  margin-left: 5px;\n}\n.btn-group > .btn:not(:first-child):not(:last-child):not(.dropdown-toggle) {\n  border-radius: 0;\n}\n.btn-group > .btn:first-child {\n  margin-left: 0;\n}\n.btn-group > .btn:first-child:not(:last-child):not(.dropdown-toggle) {\n  border-bottom-right-radius: 0;\n  border-top-right-radius: 0;\n}\n.btn-group > .btn:last-child:not(:first-child),\n.btn-group > .dropdown-toggle:not(:first-child) {\n  border-bottom-left-radius: 0;\n  border-top-left-radius: 0;\n}\n.btn-group > .btn-group {\n  float: left;\n}\n.btn-group > .btn-group:not(:first-child):not(:last-child) > .btn {\n  border-radius: 0;\n}\n.btn-group > .btn-group:first-child:not(:last-child) > .btn:last-child,\n.btn-group > .btn-group:first-child:not(:last-child) > .dropdown-toggle {\n  border-bottom-right-radius: 0;\n  border-top-right-radius: 0;\n}\n.btn-group > .btn-group:last-child:not(:first-child) > .btn:first-child {\n  border-bottom-left-radius: 0;\n  border-top-left-radius: 0;\n}\n.btn-group .dropdown-toggle:active,\n.btn-group.open .dropdown-toggle {\n  outline: 0;\n}\n.btn-group > .btn + .dropdown-toggle {\n  padding-left: 8px;\n  padding-right: 8px;\n}\n.btn-group > .btn-lg + .dropdown-toggle {\n  padding-left: 12px;\n  padding-right: 12px;\n}\n.btn-group.open .dropdown-toggle {\n  -webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);\n  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);\n}\n.btn-group.open .dropdown-toggle.btn-link {\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n.btn .caret {\n  margin-left: 0;\n}\n.btn-lg .caret {\n  border-width: 5px 5px 0;\n  border-bottom-width: 0;\n}\n.dropup .btn-lg .caret {\n  border-width: 0 5px 5px;\n}\n.btn-group-vertical > .btn,\n.btn-group-vertical > .btn-group,\n.btn-group-vertical > .btn-group > .btn {\n  display: block;\n  float: none;\n  width: 100%;\n  max-width: 100%;\n}\n.btn-group-vertical > .btn-group > .btn {\n  float: none;\n}\n.btn-group-vertical > .btn + .btn,\n.btn-group-vertical > .btn + .btn-group,\n.btn-group-vertical > .btn-group + .btn,\n.btn-group-vertical > .btn-group + .btn-group {\n  margin-top: -1px;\n  margin-left: 0;\n}\n.btn-group-vertical > .btn:not(:first-child):not(:last-child) {\n  border-radius: 0;\n}\n.btn-group-vertical > .btn:first-child:not(:last-child) {\n  border-top-right-radius: 2px;\n  border-top-left-radius: 2px;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.btn-group-vertical > .btn:last-child:not(:first-child) {\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n  border-bottom-right-radius: 2px;\n  border-bottom-left-radius: 2px;\n}\n.btn-group-vertical > .btn-group:not(:first-child):not(:last-child) > .btn {\n  border-radius: 0;\n}\n.btn-group-vertical > .btn-group:first-child:not(:last-child) > .btn:last-child,\n.btn-group-vertical > .btn-group:first-child:not(:last-child) > .dropdown-toggle {\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.btn-group-vertical > .btn-group:last-child:not(:first-child) > .btn:first-child {\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n}\n.btn-group-justified {\n  display: table;\n  width: 100%;\n  table-layout: fixed;\n  border-collapse: separate;\n}\n.btn-group-justified > .btn,\n.btn-group-justified > .btn-group {\n  float: none;\n  display: table-cell;\n  width: 1%;\n}\n.btn-group-justified > .btn-group .btn {\n  width: 100%;\n}\n.btn-group-justified > .btn-group .dropdown-menu {\n  left: auto;\n}\n[data-toggle='buttons'] > .btn input[type='radio'],\n[data-toggle='buttons'] > .btn-group > .btn input[type='radio'],\n[data-toggle='buttons'] > .btn input[type='checkbox'],\n[data-toggle='buttons'] > .btn-group > .btn input[type='checkbox'] {\n  position: absolute;\n  clip: rect(0, 0, 0, 0);\n  pointer-events: none;\n}\n.input-group {\n  position: relative;\n  display: table;\n  border-collapse: separate;\n}\n.input-group[class*='col-'] {\n  float: none;\n  padding-left: 0;\n  padding-right: 0;\n}\n.input-group .form-control {\n  position: relative;\n  z-index: 2;\n  float: left;\n  width: 100%;\n  margin-bottom: 0;\n}\n.input-group .form-control:focus {\n  z-index: 3;\n}\n.input-group-lg > .form-control,\n.input-group-lg > .input-group-addon,\n.input-group-lg > .input-group-btn > .btn {\n  height: 45px;\n  padding: 10px 16px;\n  font-size: 17px;\n  line-height: 1.3333333;\n  border-radius: 3px;\n}\nselect.input-group-lg > .form-control,\nselect.input-group-lg > .input-group-addon,\nselect.input-group-lg > .input-group-btn > .btn {\n  height: 45px;\n  line-height: 45px;\n}\ntextarea.input-group-lg > .form-control,\ntextarea.input-group-lg > .input-group-addon,\ntextarea.input-group-lg > .input-group-btn > .btn,\nselect[multiple].input-group-lg > .form-control,\nselect[multiple].input-group-lg > .input-group-addon,\nselect[multiple].input-group-lg > .input-group-btn > .btn {\n  height: auto;\n}\n.input-group-sm > .form-control,\n.input-group-sm > .input-group-addon,\n.input-group-sm > .input-group-btn > .btn {\n  height: 30px;\n  padding: 5px 10px;\n  font-size: 12px;\n  line-height: 1.5;\n  border-radius: 1px;\n}\nselect.input-group-sm > .form-control,\nselect.input-group-sm > .input-group-addon,\nselect.input-group-sm > .input-group-btn > .btn {\n  height: 30px;\n  line-height: 30px;\n}\ntextarea.input-group-sm > .form-control,\ntextarea.input-group-sm > .input-group-addon,\ntextarea.input-group-sm > .input-group-btn > .btn,\nselect[multiple].input-group-sm > .form-control,\nselect[multiple].input-group-sm > .input-group-addon,\nselect[multiple].input-group-sm > .input-group-btn > .btn {\n  height: auto;\n}\n.input-group-addon,\n.input-group-btn,\n.input-group .form-control {\n  display: table-cell;\n}\n.input-group-addon:not(:first-child):not(:last-child),\n.input-group-btn:not(:first-child):not(:last-child),\n.input-group .form-control:not(:first-child):not(:last-child) {\n  border-radius: 0;\n}\n.input-group-addon,\n.input-group-btn {\n  width: 1%;\n  white-space: nowrap;\n  vertical-align: middle;\n}\n.input-group-addon {\n  padding: 6px 12px;\n  font-size: 13px;\n  font-weight: normal;\n  line-height: 1;\n  color: #555555;\n  text-align: center;\n  background-color: #eeeeee;\n  border: 1px solid #ccc;\n  border-radius: 2px;\n}\n.input-group-addon.input-sm {\n  padding: 5px 10px;\n  font-size: 12px;\n  border-radius: 1px;\n}\n.input-group-addon.input-lg {\n  padding: 10px 16px;\n  font-size: 17px;\n  border-radius: 3px;\n}\n.input-group-addon input[type='radio'],\n.input-group-addon input[type='checkbox'] {\n  margin-top: 0;\n}\n.input-group .form-control:first-child,\n.input-group-addon:first-child,\n.input-group-btn:first-child > .btn,\n.input-group-btn:first-child > .btn-group > .btn,\n.input-group-btn:first-child > .dropdown-toggle,\n.input-group-btn:last-child > .btn:not(:last-child):not(.dropdown-toggle),\n.input-group-btn:last-child > .btn-group:not(:last-child) > .btn {\n  border-bottom-right-radius: 0;\n  border-top-right-radius: 0;\n}\n.input-group-addon:first-child {\n  border-right: 0;\n}\n.input-group .form-control:last-child,\n.input-group-addon:last-child,\n.input-group-btn:last-child > .btn,\n.input-group-btn:last-child > .btn-group > .btn,\n.input-group-btn:last-child > .dropdown-toggle,\n.input-group-btn:first-child > .btn:not(:first-child),\n.input-group-btn:first-child > .btn-group:not(:first-child) > .btn {\n  border-bottom-left-radius: 0;\n  border-top-left-radius: 0;\n}\n.input-group-addon:last-child {\n  border-left: 0;\n}\n.input-group-btn {\n  position: relative;\n  font-size: 0;\n  white-space: nowrap;\n}\n.input-group-btn > .btn {\n  position: relative;\n}\n.input-group-btn > .btn + .btn {\n  margin-left: -1px;\n}\n.input-group-btn > .btn:hover,\n.input-group-btn > .btn:focus,\n.input-group-btn > .btn:active {\n  z-index: 2;\n}\n.input-group-btn:first-child > .btn,\n.input-group-btn:first-child > .btn-group {\n  margin-right: -1px;\n}\n.input-group-btn:last-child > .btn,\n.input-group-btn:last-child > .btn-group {\n  z-index: 2;\n  margin-left: -1px;\n}\n.nav {\n  margin-bottom: 0;\n  padding-left: 0;\n  list-style: none;\n}\n.nav > li {\n  position: relative;\n  display: block;\n}\n.nav > li > a {\n  position: relative;\n  display: block;\n  padding: 10px 15px;\n}\n.nav > li > a:hover,\n.nav > li > a:focus {\n  text-decoration: none;\n  background-color: #eeeeee;\n}\n.nav > li.disabled > a {\n  color: #777777;\n}\n.nav > li.disabled > a:hover,\n.nav > li.disabled > a:focus {\n  color: #777777;\n  text-decoration: none;\n  background-color: transparent;\n  cursor: not-allowed;\n}\n.nav .open > a,\n.nav .open > a:hover,\n.nav .open > a:focus {\n  background-color: #eeeeee;\n  border-color: #337ab7;\n}\n.nav .nav-divider {\n  height: 1px;\n  margin: 8px 0;\n  overflow: hidden;\n  background-color: #e5e5e5;\n}\n.nav > li > a > img {\n  max-width: none;\n}\n.nav-tabs {\n  border-bottom: 1px solid #ddd;\n}\n.nav-tabs > li {\n  float: left;\n  margin-bottom: -1px;\n}\n.nav-tabs > li > a {\n  margin-right: 2px;\n  line-height: 1.42857143;\n  border: 1px solid transparent;\n  border-radius: 2px 2px 0 0;\n}\n.nav-tabs > li > a:hover {\n  border-color: #eeeeee #eeeeee #ddd;\n}\n.nav-tabs > li.active > a,\n.nav-tabs > li.active > a:hover,\n.nav-tabs > li.active > a:focus {\n  color: #555555;\n  background-color: #fff;\n  border: 1px solid #ddd;\n  border-bottom-color: transparent;\n  cursor: default;\n}\n.nav-tabs.nav-justified {\n  width: 100%;\n  border-bottom: 0;\n}\n.nav-tabs.nav-justified > li {\n  float: none;\n}\n.nav-tabs.nav-justified > li > a {\n  text-align: center;\n  margin-bottom: 5px;\n}\n.nav-tabs.nav-justified > .dropdown .dropdown-menu {\n  top: auto;\n  left: auto;\n}\n@media (min-width: 768px) {\n  .nav-tabs.nav-justified > li {\n    display: table-cell;\n    width: 1%;\n  }\n  .nav-tabs.nav-justified > li > a {\n    margin-bottom: 0;\n  }\n}\n.nav-tabs.nav-justified > li > a {\n  margin-right: 0;\n  border-radius: 2px;\n}\n.nav-tabs.nav-justified > .active > a,\n.nav-tabs.nav-justified > .active > a:hover,\n.nav-tabs.nav-justified > .active > a:focus {\n  border: 1px solid #ddd;\n}\n@media (min-width: 768px) {\n  .nav-tabs.nav-justified > li > a {\n    border-bottom: 1px solid #ddd;\n    border-radius: 2px 2px 0 0;\n  }\n  .nav-tabs.nav-justified > .active > a,\n  .nav-tabs.nav-justified > .active > a:hover,\n  .nav-tabs.nav-justified > .active > a:focus {\n    border-bottom-color: #fff;\n  }\n}\n.nav-pills > li {\n  float: left;\n}\n.nav-pills > li > a {\n  border-radius: 2px;\n}\n.nav-pills > li + li {\n  margin-left: 2px;\n}\n.nav-pills > li.active > a,\n.nav-pills > li.active > a:hover,\n.nav-pills > li.active > a:focus {\n  color: #fff;\n  background-color: #337ab7;\n}\n.nav-stacked > li {\n  float: none;\n}\n.nav-stacked > li + li {\n  margin-top: 2px;\n  margin-left: 0;\n}\n.nav-justified {\n  width: 100%;\n}\n.nav-justified > li {\n  float: none;\n}\n.nav-justified > li > a {\n  text-align: center;\n  margin-bottom: 5px;\n}\n.nav-justified > .dropdown .dropdown-menu {\n  top: auto;\n  left: auto;\n}\n@media (min-width: 768px) {\n  .nav-justified > li {\n    display: table-cell;\n    width: 1%;\n  }\n  .nav-justified > li > a {\n    margin-bottom: 0;\n  }\n}\n.nav-tabs-justified {\n  border-bottom: 0;\n}\n.nav-tabs-justified > li > a {\n  margin-right: 0;\n  border-radius: 2px;\n}\n.nav-tabs-justified > .active > a,\n.nav-tabs-justified > .active > a:hover,\n.nav-tabs-justified > .active > a:focus {\n  border: 1px solid #ddd;\n}\n@media (min-width: 768px) {\n  .nav-tabs-justified > li > a {\n    border-bottom: 1px solid #ddd;\n    border-radius: 2px 2px 0 0;\n  }\n  .nav-tabs-justified > .active > a,\n  .nav-tabs-justified > .active > a:hover,\n  .nav-tabs-justified > .active > a:focus {\n    border-bottom-color: #fff;\n  }\n}\n.tab-content > .tab-pane {\n  display: none;\n}\n.tab-content > .active {\n  display: block;\n}\n.nav-tabs .dropdown-menu {\n  margin-top: -1px;\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n}\n.navbar {\n  position: relative;\n  min-height: 30px;\n  margin-bottom: 18px;\n  border: 1px solid transparent;\n}\n@media (min-width: 541px) {\n  .navbar {\n    border-radius: 2px;\n  }\n}\n@media (min-width: 541px) {\n  .navbar-header {\n    float: left;\n  }\n}\n.navbar-collapse {\n  overflow-x: visible;\n  padding-right: 0px;\n  padding-left: 0px;\n  border-top: 1px solid transparent;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);\n  -webkit-overflow-scrolling: touch;\n}\n.navbar-collapse.in {\n  overflow-y: auto;\n}\n@media (min-width: 541px) {\n  .navbar-collapse {\n    width: auto;\n    border-top: 0;\n    box-shadow: none;\n  }\n  .navbar-collapse.collapse {\n    display: block !important;\n    height: auto !important;\n    padding-bottom: 0;\n    overflow: visible !important;\n  }\n  .navbar-collapse.in {\n    overflow-y: visible;\n  }\n  .navbar-fixed-top .navbar-collapse,\n  .navbar-static-top .navbar-collapse,\n  .navbar-fixed-bottom .navbar-collapse {\n    padding-left: 0;\n    padding-right: 0;\n  }\n}\n.navbar-fixed-top .navbar-collapse,\n.navbar-fixed-bottom .navbar-collapse {\n  max-height: 340px;\n}\n@media (max-device-width: 540px) and (orientation: landscape) {\n  .navbar-fixed-top .navbar-collapse,\n  .navbar-fixed-bottom .navbar-collapse {\n    max-height: 200px;\n  }\n}\n.container > .navbar-header,\n.container-fluid > .navbar-header,\n.container > .navbar-collapse,\n.container-fluid > .navbar-collapse {\n  margin-right: 0px;\n  margin-left: 0px;\n}\n@media (min-width: 541px) {\n  .container > .navbar-header,\n  .container-fluid > .navbar-header,\n  .container > .navbar-collapse,\n  .container-fluid > .navbar-collapse {\n    margin-right: 0;\n    margin-left: 0;\n  }\n}\n.navbar-static-top {\n  z-index: 1000;\n  border-width: 0 0 1px;\n}\n@media (min-width: 541px) {\n  .navbar-static-top {\n    border-radius: 0;\n  }\n}\n.navbar-fixed-top,\n.navbar-fixed-bottom {\n  position: fixed;\n  right: 0;\n  left: 0;\n  z-index: 1030;\n}\n@media (min-width: 541px) {\n  .navbar-fixed-top,\n  .navbar-fixed-bottom {\n    border-radius: 0;\n  }\n}\n.navbar-fixed-top {\n  top: 0;\n  border-width: 0 0 1px;\n}\n.navbar-fixed-bottom {\n  bottom: 0;\n  margin-bottom: 0;\n  border-width: 1px 0 0;\n}\n.navbar-brand {\n  float: left;\n  padding: 6px 0px;\n  font-size: 17px;\n  line-height: 18px;\n  height: 30px;\n}\n.navbar-brand:hover,\n.navbar-brand:focus {\n  text-decoration: none;\n}\n.navbar-brand > img {\n  display: block;\n}\n@media (min-width: 541px) {\n  .navbar > .container .navbar-brand,\n  .navbar > .container-fluid .navbar-brand {\n    margin-left: 0px;\n  }\n}\n.navbar-toggle {\n  position: relative;\n  float: right;\n  margin-right: 0px;\n  padding: 9px 10px;\n  margin-top: -2px;\n  margin-bottom: -2px;\n  background-color: transparent;\n  background-image: none;\n  border: 1px solid transparent;\n  border-radius: 2px;\n}\n.navbar-toggle:focus {\n  outline: 0;\n}\n.navbar-toggle .icon-bar {\n  display: block;\n  width: 22px;\n  height: 2px;\n  border-radius: 1px;\n}\n.navbar-toggle .icon-bar + .icon-bar {\n  margin-top: 4px;\n}\n@media (min-width: 541px) {\n  .navbar-toggle {\n    display: none;\n  }\n}\n.navbar-nav {\n  margin: 3px 0px;\n}\n.navbar-nav > li > a {\n  padding-top: 10px;\n  padding-bottom: 10px;\n  line-height: 18px;\n}\n@media (max-width: 540px) {\n  .navbar-nav .open .dropdown-menu {\n    position: static;\n    float: none;\n    width: auto;\n    margin-top: 0;\n    background-color: transparent;\n    border: 0;\n    box-shadow: none;\n  }\n  .navbar-nav .open .dropdown-menu > li > a,\n  .navbar-nav .open .dropdown-menu .dropdown-header {\n    padding: 5px 15px 5px 25px;\n  }\n  .navbar-nav .open .dropdown-menu > li > a {\n    line-height: 18px;\n  }\n  .navbar-nav .open .dropdown-menu > li > a:hover,\n  .navbar-nav .open .dropdown-menu > li > a:focus {\n    background-image: none;\n  }\n}\n@media (min-width: 541px) {\n  .navbar-nav {\n    float: left;\n    margin: 0;\n  }\n  .navbar-nav > li {\n    float: left;\n  }\n  .navbar-nav > li > a {\n    padding-top: 6px;\n    padding-bottom: 6px;\n  }\n}\n.navbar-form {\n  margin-left: 0px;\n  margin-right: 0px;\n  padding: 10px 0px;\n  border-top: 1px solid transparent;\n  border-bottom: 1px solid transparent;\n  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.1);\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.1);\n  margin-top: -1px;\n  margin-bottom: -1px;\n}\n@media (min-width: 768px) {\n  .navbar-form .form-group {\n    display: inline-block;\n    margin-bottom: 0;\n    vertical-align: middle;\n  }\n  .navbar-form .form-control {\n    display: inline-block;\n    width: auto;\n    vertical-align: middle;\n  }\n  .navbar-form .form-control-static {\n    display: inline-block;\n  }\n  .navbar-form .input-group {\n    display: inline-table;\n    vertical-align: middle;\n  }\n  .navbar-form .input-group .input-group-addon,\n  .navbar-form .input-group .input-group-btn,\n  .navbar-form .input-group .form-control {\n    width: auto;\n  }\n  .navbar-form .input-group > .form-control {\n    width: 100%;\n  }\n  .navbar-form .control-label {\n    margin-bottom: 0;\n    vertical-align: middle;\n  }\n  .navbar-form .radio,\n  .navbar-form .checkbox {\n    display: inline-block;\n    margin-top: 0;\n    margin-bottom: 0;\n    vertical-align: middle;\n  }\n  .navbar-form .radio label,\n  .navbar-form .checkbox label {\n    padding-left: 0;\n  }\n  .navbar-form .radio input[type='radio'],\n  .navbar-form .checkbox input[type='checkbox'] {\n    position: relative;\n    margin-left: 0;\n  }\n  .navbar-form .has-feedback .form-control-feedback {\n    top: 0;\n  }\n}\n@media (max-width: 540px) {\n  .navbar-form .form-group {\n    margin-bottom: 5px;\n  }\n  .navbar-form .form-group:last-child {\n    margin-bottom: 0;\n  }\n}\n@media (min-width: 541px) {\n  .navbar-form {\n    width: auto;\n    border: 0;\n    margin-left: 0;\n    margin-right: 0;\n    padding-top: 0;\n    padding-bottom: 0;\n    -webkit-box-shadow: none;\n    box-shadow: none;\n  }\n}\n.navbar-nav > li > .dropdown-menu {\n  margin-top: 0;\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n}\n.navbar-fixed-bottom .navbar-nav > li > .dropdown-menu {\n  margin-bottom: 0;\n  border-top-right-radius: 2px;\n  border-top-left-radius: 2px;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.navbar-btn {\n  margin-top: -1px;\n  margin-bottom: -1px;\n}\n.navbar-btn.btn-sm {\n  margin-top: 0px;\n  margin-bottom: 0px;\n}\n.navbar-btn.btn-xs {\n  margin-top: 4px;\n  margin-bottom: 4px;\n}\n.navbar-text {\n  margin-top: 6px;\n  margin-bottom: 6px;\n}\n@media (min-width: 541px) {\n  .navbar-text {\n    float: left;\n    margin-left: 0px;\n    margin-right: 0px;\n  }\n}\n@media (min-width: 541px) {\n  .navbar-left {\n    float: left !important;\n    float: left;\n  }\n  .navbar-right {\n    float: right !important;\n    float: right;\n    margin-right: 0px;\n  }\n  .navbar-right ~ .navbar-right {\n    margin-right: 0;\n  }\n}\n.navbar-default {\n  background-color: #f8f8f8;\n  border-color: #e7e7e7;\n}\n.navbar-default .navbar-brand {\n  color: #777;\n}\n.navbar-default .navbar-brand:hover,\n.navbar-default .navbar-brand:focus {\n  color: #5e5e5e;\n  background-color: transparent;\n}\n.navbar-default .navbar-text {\n  color: #777;\n}\n.navbar-default .navbar-nav > li > a {\n  color: #777;\n}\n.navbar-default .navbar-nav > li > a:hover,\n.navbar-default .navbar-nav > li > a:focus {\n  color: #333;\n  background-color: transparent;\n}\n.navbar-default .navbar-nav > .active > a,\n.navbar-default .navbar-nav > .active > a:hover,\n.navbar-default .navbar-nav > .active > a:focus {\n  color: #555;\n  background-color: #e7e7e7;\n}\n.navbar-default .navbar-nav > .disabled > a,\n.navbar-default .navbar-nav > .disabled > a:hover,\n.navbar-default .navbar-nav > .disabled > a:focus {\n  color: #ccc;\n  background-color: transparent;\n}\n.navbar-default .navbar-toggle {\n  border-color: #ddd;\n}\n.navbar-default .navbar-toggle:hover,\n.navbar-default .navbar-toggle:focus {\n  background-color: #ddd;\n}\n.navbar-default .navbar-toggle .icon-bar {\n  background-color: #888;\n}\n.navbar-default .navbar-collapse,\n.navbar-default .navbar-form {\n  border-color: #e7e7e7;\n}\n.navbar-default .navbar-nav > .open > a,\n.navbar-default .navbar-nav > .open > a:hover,\n.navbar-default .navbar-nav > .open > a:focus {\n  background-color: #e7e7e7;\n  color: #555;\n}\n@media (max-width: 540px) {\n  .navbar-default .navbar-nav .open .dropdown-menu > li > a {\n    color: #777;\n  }\n  .navbar-default .navbar-nav .open .dropdown-menu > li > a:hover,\n  .navbar-default .navbar-nav .open .dropdown-menu > li > a:focus {\n    color: #333;\n    background-color: transparent;\n  }\n  .navbar-default .navbar-nav .open .dropdown-menu > .active > a,\n  .navbar-default .navbar-nav .open .dropdown-menu > .active > a:hover,\n  .navbar-default .navbar-nav .open .dropdown-menu > .active > a:focus {\n    color: #555;\n    background-color: #e7e7e7;\n  }\n  .navbar-default .navbar-nav .open .dropdown-menu > .disabled > a,\n  .navbar-default .navbar-nav .open .dropdown-menu > .disabled > a:hover,\n  .navbar-default .navbar-nav .open .dropdown-menu > .disabled > a:focus {\n    color: #ccc;\n    background-color: transparent;\n  }\n}\n.navbar-default .navbar-link {\n  color: #777;\n}\n.navbar-default .navbar-link:hover {\n  color: #333;\n}\n.navbar-default .btn-link {\n  color: #777;\n}\n.navbar-default .btn-link:hover,\n.navbar-default .btn-link:focus {\n  color: #333;\n}\n.navbar-default .btn-link[disabled]:hover,\nfieldset[disabled] .navbar-default .btn-link:hover,\n.navbar-default .btn-link[disabled]:focus,\nfieldset[disabled] .navbar-default .btn-link:focus {\n  color: #ccc;\n}\n.navbar-inverse {\n  background-color: #222;\n  border-color: #080808;\n}\n.navbar-inverse .navbar-brand {\n  color: #9d9d9d;\n}\n.navbar-inverse .navbar-brand:hover,\n.navbar-inverse .navbar-brand:focus {\n  color: #fff;\n  background-color: transparent;\n}\n.navbar-inverse .navbar-text {\n  color: #9d9d9d;\n}\n.navbar-inverse .navbar-nav > li > a {\n  color: #9d9d9d;\n}\n.navbar-inverse .navbar-nav > li > a:hover,\n.navbar-inverse .navbar-nav > li > a:focus {\n  color: #fff;\n  background-color: transparent;\n}\n.navbar-inverse .navbar-nav > .active > a,\n.navbar-inverse .navbar-nav > .active > a:hover,\n.navbar-inverse .navbar-nav > .active > a:focus {\n  color: #fff;\n  background-color: #080808;\n}\n.navbar-inverse .navbar-nav > .disabled > a,\n.navbar-inverse .navbar-nav > .disabled > a:hover,\n.navbar-inverse .navbar-nav > .disabled > a:focus {\n  color: #444;\n  background-color: transparent;\n}\n.navbar-inverse .navbar-toggle {\n  border-color: #333;\n}\n.navbar-inverse .navbar-toggle:hover,\n.navbar-inverse .navbar-toggle:focus {\n  background-color: #333;\n}\n.navbar-inverse .navbar-toggle .icon-bar {\n  background-color: #fff;\n}\n.navbar-inverse .navbar-collapse,\n.navbar-inverse .navbar-form {\n  border-color: #101010;\n}\n.navbar-inverse .navbar-nav > .open > a,\n.navbar-inverse .navbar-nav > .open > a:hover,\n.navbar-inverse .navbar-nav > .open > a:focus {\n  background-color: #080808;\n  color: #fff;\n}\n@media (max-width: 540px) {\n  .navbar-inverse .navbar-nav .open .dropdown-menu > .dropdown-header {\n    border-color: #080808;\n  }\n  .navbar-inverse .navbar-nav .open .dropdown-menu .divider {\n    background-color: #080808;\n  }\n  .navbar-inverse .navbar-nav .open .dropdown-menu > li > a {\n    color: #9d9d9d;\n  }\n  .navbar-inverse .navbar-nav .open .dropdown-menu > li > a:hover,\n  .navbar-inverse .navbar-nav .open .dropdown-menu > li > a:focus {\n    color: #fff;\n    background-color: transparent;\n  }\n  .navbar-inverse .navbar-nav .open .dropdown-menu > .active > a,\n  .navbar-inverse .navbar-nav .open .dropdown-menu > .active > a:hover,\n  .navbar-inverse .navbar-nav .open .dropdown-menu > .active > a:focus {\n    color: #fff;\n    background-color: #080808;\n  }\n  .navbar-inverse .navbar-nav .open .dropdown-menu > .disabled > a,\n  .navbar-inverse .navbar-nav .open .dropdown-menu > .disabled > a:hover,\n  .navbar-inverse .navbar-nav .open .dropdown-menu > .disabled > a:focus {\n    color: #444;\n    background-color: transparent;\n  }\n}\n.navbar-inverse .navbar-link {\n  color: #9d9d9d;\n}\n.navbar-inverse .navbar-link:hover {\n  color: #fff;\n}\n.navbar-inverse .btn-link {\n  color: #9d9d9d;\n}\n.navbar-inverse .btn-link:hover,\n.navbar-inverse .btn-link:focus {\n  color: #fff;\n}\n.navbar-inverse .btn-link[disabled]:hover,\nfieldset[disabled] .navbar-inverse .btn-link:hover,\n.navbar-inverse .btn-link[disabled]:focus,\nfieldset[disabled] .navbar-inverse .btn-link:focus {\n  color: #444;\n}\n.breadcrumb {\n  padding: 8px 15px;\n  margin-bottom: 18px;\n  list-style: none;\n  background-color: #f5f5f5;\n  border-radius: 2px;\n}\n.breadcrumb > li {\n  display: inline-block;\n}\n.breadcrumb > li + li:before {\n  content: '/\\00a0';\n  padding: 0 5px;\n  color: #5e5e5e;\n}\n.breadcrumb > .active {\n  color: #777777;\n}\n.pagination {\n  display: inline-block;\n  padding-left: 0;\n  margin: 18px 0;\n  border-radius: 2px;\n}\n.pagination > li {\n  display: inline;\n}\n.pagination > li > a,\n.pagination > li > span {\n  position: relative;\n  float: left;\n  padding: 6px 12px;\n  line-height: 1.42857143;\n  text-decoration: none;\n  color: #337ab7;\n  background-color: #fff;\n  border: 1px solid #ddd;\n  margin-left: -1px;\n}\n.pagination > li:first-child > a,\n.pagination > li:first-child > span {\n  margin-left: 0;\n  border-bottom-left-radius: 2px;\n  border-top-left-radius: 2px;\n}\n.pagination > li:last-child > a,\n.pagination > li:last-child > span {\n  border-bottom-right-radius: 2px;\n  border-top-right-radius: 2px;\n}\n.pagination > li > a:hover,\n.pagination > li > span:hover,\n.pagination > li > a:focus,\n.pagination > li > span:focus {\n  z-index: 2;\n  color: #23527c;\n  background-color: #eeeeee;\n  border-color: #ddd;\n}\n.pagination > .active > a,\n.pagination > .active > span,\n.pagination > .active > a:hover,\n.pagination > .active > span:hover,\n.pagination > .active > a:focus,\n.pagination > .active > span:focus {\n  z-index: 3;\n  color: #fff;\n  background-color: #337ab7;\n  border-color: #337ab7;\n  cursor: default;\n}\n.pagination > .disabled > span,\n.pagination > .disabled > span:hover,\n.pagination > .disabled > span:focus,\n.pagination > .disabled > a,\n.pagination > .disabled > a:hover,\n.pagination > .disabled > a:focus {\n  color: #777777;\n  background-color: #fff;\n  border-color: #ddd;\n  cursor: not-allowed;\n}\n.pagination-lg > li > a,\n.pagination-lg > li > span {\n  padding: 10px 16px;\n  font-size: 17px;\n  line-height: 1.3333333;\n}\n.pagination-lg > li:first-child > a,\n.pagination-lg > li:first-child > span {\n  border-bottom-left-radius: 3px;\n  border-top-left-radius: 3px;\n}\n.pagination-lg > li:last-child > a,\n.pagination-lg > li:last-child > span {\n  border-bottom-right-radius: 3px;\n  border-top-right-radius: 3px;\n}\n.pagination-sm > li > a,\n.pagination-sm > li > span {\n  padding: 5px 10px;\n  font-size: 12px;\n  line-height: 1.5;\n}\n.pagination-sm > li:first-child > a,\n.pagination-sm > li:first-child > span {\n  border-bottom-left-radius: 1px;\n  border-top-left-radius: 1px;\n}\n.pagination-sm > li:last-child > a,\n.pagination-sm > li:last-child > span {\n  border-bottom-right-radius: 1px;\n  border-top-right-radius: 1px;\n}\n.pager {\n  padding-left: 0;\n  margin: 18px 0;\n  list-style: none;\n  text-align: center;\n}\n.pager li {\n  display: inline;\n}\n.pager li > a,\n.pager li > span {\n  display: inline-block;\n  padding: 5px 14px;\n  background-color: #fff;\n  border: 1px solid #ddd;\n  border-radius: 15px;\n}\n.pager li > a:hover,\n.pager li > a:focus {\n  text-decoration: none;\n  background-color: #eeeeee;\n}\n.pager .next > a,\n.pager .next > span {\n  float: right;\n}\n.pager .previous > a,\n.pager .previous > span {\n  float: left;\n}\n.pager .disabled > a,\n.pager .disabled > a:hover,\n.pager .disabled > a:focus,\n.pager .disabled > span {\n  color: #777777;\n  background-color: #fff;\n  cursor: not-allowed;\n}\n.label {\n  display: inline;\n  padding: .2em .6em .3em;\n  font-size: 75%;\n  font-weight: bold;\n  line-height: 1;\n  color: #fff;\n  text-align: center;\n  white-space: nowrap;\n  vertical-align: baseline;\n  border-radius: .25em;\n}\na.label:hover,\na.label:focus {\n  color: #fff;\n  text-decoration: none;\n  cursor: pointer;\n}\n.label:empty {\n  display: none;\n}\n.btn .label {\n  position: relative;\n  top: -1px;\n}\n.label-default {\n  background-color: #777777;\n}\n.label-default[href]:hover,\n.label-default[href]:focus {\n  background-color: #5e5e5e;\n}\n.label-primary {\n  background-color: #337ab7;\n}\n.label-primary[href]:hover,\n.label-primary[href]:focus {\n  background-color: #286090;\n}\n.label-success {\n  background-color: #5cb85c;\n}\n.label-success[href]:hover,\n.label-success[href]:focus {\n  background-color: #449d44;\n}\n.label-info {\n  background-color: #5bc0de;\n}\n.label-info[href]:hover,\n.label-info[href]:focus {\n  background-color: #31b0d5;\n}\n.label-warning {\n  background-color: #f0ad4e;\n}\n.label-warning[href]:hover,\n.label-warning[href]:focus {\n  background-color: #ec971f;\n}\n.label-danger {\n  background-color: #d9534f;\n}\n.label-danger[href]:hover,\n.label-danger[href]:focus {\n  background-color: #c9302c;\n}\n.badge {\n  display: inline-block;\n  min-width: 10px;\n  padding: 3px 7px;\n  font-size: 12px;\n  font-weight: bold;\n  color: #fff;\n  line-height: 1;\n  vertical-align: middle;\n  white-space: nowrap;\n  text-align: center;\n  background-color: #777777;\n  border-radius: 10px;\n}\n.badge:empty {\n  display: none;\n}\n.btn .badge {\n  position: relative;\n  top: -1px;\n}\n.btn-xs .badge,\n.btn-group-xs > .btn .badge {\n  top: 0;\n  padding: 1px 5px;\n}\na.badge:hover,\na.badge:focus {\n  color: #fff;\n  text-decoration: none;\n  cursor: pointer;\n}\n.list-group-item.active > .badge,\n.nav-pills > .active > a > .badge {\n  color: #337ab7;\n  background-color: #fff;\n}\n.list-group-item > .badge {\n  float: right;\n}\n.list-group-item > .badge + .badge {\n  margin-right: 5px;\n}\n.nav-pills > li > a > .badge {\n  margin-left: 3px;\n}\n.jumbotron {\n  padding-top: 30px;\n  padding-bottom: 30px;\n  margin-bottom: 30px;\n  color: inherit;\n  background-color: #eeeeee;\n}\n.jumbotron h1,\n.jumbotron .h1 {\n  color: inherit;\n}\n.jumbotron p {\n  margin-bottom: 15px;\n  font-size: 20px;\n  font-weight: 200;\n}\n.jumbotron > hr {\n  border-top-color: #d5d5d5;\n}\n.container .jumbotron,\n.container-fluid .jumbotron {\n  border-radius: 3px;\n  padding-left: 0px;\n  padding-right: 0px;\n}\n.jumbotron .container {\n  max-width: 100%;\n}\n@media screen and (min-width: 768px) {\n  .jumbotron {\n    padding-top: 48px;\n    padding-bottom: 48px;\n  }\n  .container .jumbotron,\n  .container-fluid .jumbotron {\n    padding-left: 60px;\n    padding-right: 60px;\n  }\n  .jumbotron h1,\n  .jumbotron .h1 {\n    font-size: 59px;\n  }\n}\n.thumbnail {\n  display: block;\n  padding: 4px;\n  margin-bottom: 18px;\n  line-height: 1.42857143;\n  background-color: #fff;\n  border: 1px solid #ddd;\n  border-radius: 2px;\n  -webkit-transition: border 0.2s ease-in-out;\n  -o-transition: border 0.2s ease-in-out;\n  transition: border 0.2s ease-in-out;\n}\n.thumbnail > img,\n.thumbnail a > img {\n  margin-left: auto;\n  margin-right: auto;\n}\na.thumbnail:hover,\na.thumbnail:focus,\na.thumbnail.active {\n  border-color: #337ab7;\n}\n.thumbnail .caption {\n  padding: 9px;\n  color: #000;\n}\n.alert {\n  padding: 15px;\n  margin-bottom: 18px;\n  border: 1px solid transparent;\n  border-radius: 2px;\n}\n.alert h4 {\n  margin-top: 0;\n  color: inherit;\n}\n.alert .alert-link {\n  font-weight: bold;\n}\n.alert > p,\n.alert > ul {\n  margin-bottom: 0;\n}\n.alert > p + p {\n  margin-top: 5px;\n}\n.alert-dismissable,\n.alert-dismissible {\n  padding-right: 35px;\n}\n.alert-dismissable .close,\n.alert-dismissible .close {\n  position: relative;\n  top: -2px;\n  right: -21px;\n  color: inherit;\n}\n.alert-success {\n  background-color: #dff0d8;\n  border-color: #d6e9c6;\n  color: #3c763d;\n}\n.alert-success hr {\n  border-top-color: #c9e2b3;\n}\n.alert-success .alert-link {\n  color: #2b542c;\n}\n.alert-info {\n  background-color: #d9edf7;\n  border-color: #bce8f1;\n  color: #31708f;\n}\n.alert-info hr {\n  border-top-color: #a6e1ec;\n}\n.alert-info .alert-link {\n  color: #245269;\n}\n.alert-warning {\n  background-color: #fcf8e3;\n  border-color: #faebcc;\n  color: #8a6d3b;\n}\n.alert-warning hr {\n  border-top-color: #f7e1b5;\n}\n.alert-warning .alert-link {\n  color: #66512c;\n}\n.alert-danger {\n  background-color: #f2dede;\n  border-color: #ebccd1;\n  color: #a94442;\n}\n.alert-danger hr {\n  border-top-color: #e4b9c0;\n}\n.alert-danger .alert-link {\n  color: #843534;\n}\n@-webkit-keyframes progress-bar-stripes {\n  from {\n    background-position: 40px 0;\n  }\n  to {\n    background-position: 0 0;\n  }\n}\n@keyframes progress-bar-stripes {\n  from {\n    background-position: 40px 0;\n  }\n  to {\n    background-position: 0 0;\n  }\n}\n.progress {\n  overflow: hidden;\n  height: 18px;\n  margin-bottom: 18px;\n  background-color: #f5f5f5;\n  border-radius: 2px;\n  -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n.progress-bar {\n  float: left;\n  width: 0%;\n  height: 100%;\n  font-size: 12px;\n  line-height: 18px;\n  color: #fff;\n  text-align: center;\n  background-color: #337ab7;\n  -webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);\n  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);\n  -webkit-transition: width 0.6s ease;\n  -o-transition: width 0.6s ease;\n  transition: width 0.6s ease;\n}\n.progress-striped .progress-bar,\n.progress-bar-striped {\n  background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n  background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n  background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n  background-size: 40px 40px;\n}\n.progress.active .progress-bar,\n.progress-bar.active {\n  -webkit-animation: progress-bar-stripes 2s linear infinite;\n  -o-animation: progress-bar-stripes 2s linear infinite;\n  animation: progress-bar-stripes 2s linear infinite;\n}\n.progress-bar-success {\n  background-color: #5cb85c;\n}\n.progress-striped .progress-bar-success {\n  background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n  background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n  background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n}\n.progress-bar-info {\n  background-color: #5bc0de;\n}\n.progress-striped .progress-bar-info {\n  background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n  background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n  background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n}\n.progress-bar-warning {\n  background-color: #f0ad4e;\n}\n.progress-striped .progress-bar-warning {\n  background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n  background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n  background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n}\n.progress-bar-danger {\n  background-color: #d9534f;\n}\n.progress-striped .progress-bar-danger {\n  background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n  background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n  background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\n}\n.media {\n  margin-top: 15px;\n}\n.media:first-child {\n  margin-top: 0;\n}\n.media,\n.media-body {\n  zoom: 1;\n  overflow: hidden;\n}\n.media-body {\n  width: 10000px;\n}\n.media-object {\n  display: block;\n}\n.media-object.img-thumbnail {\n  max-width: none;\n}\n.media-right,\n.media > .pull-right {\n  padding-left: 10px;\n}\n.media-left,\n.media > .pull-left {\n  padding-right: 10px;\n}\n.media-left,\n.media-right,\n.media-body {\n  display: table-cell;\n  vertical-align: top;\n}\n.media-middle {\n  vertical-align: middle;\n}\n.media-bottom {\n  vertical-align: bottom;\n}\n.media-heading {\n  margin-top: 0;\n  margin-bottom: 5px;\n}\n.media-list {\n  padding-left: 0;\n  list-style: none;\n}\n.list-group {\n  margin-bottom: 20px;\n  padding-left: 0;\n}\n.list-group-item {\n  position: relative;\n  display: block;\n  padding: 10px 15px;\n  margin-bottom: -1px;\n  background-color: #fff;\n  border: 1px solid #ddd;\n}\n.list-group-item:first-child {\n  border-top-right-radius: 2px;\n  border-top-left-radius: 2px;\n}\n.list-group-item:last-child {\n  margin-bottom: 0;\n  border-bottom-right-radius: 2px;\n  border-bottom-left-radius: 2px;\n}\na.list-group-item,\nbutton.list-group-item {\n  color: #555;\n}\na.list-group-item .list-group-item-heading,\nbutton.list-group-item .list-group-item-heading {\n  color: #333;\n}\na.list-group-item:hover,\nbutton.list-group-item:hover,\na.list-group-item:focus,\nbutton.list-group-item:focus {\n  text-decoration: none;\n  color: #555;\n  background-color: #f5f5f5;\n}\nbutton.list-group-item {\n  width: 100%;\n  text-align: left;\n}\n.list-group-item.disabled,\n.list-group-item.disabled:hover,\n.list-group-item.disabled:focus {\n  background-color: #eeeeee;\n  color: #777777;\n  cursor: not-allowed;\n}\n.list-group-item.disabled .list-group-item-heading,\n.list-group-item.disabled:hover .list-group-item-heading,\n.list-group-item.disabled:focus .list-group-item-heading {\n  color: inherit;\n}\n.list-group-item.disabled .list-group-item-text,\n.list-group-item.disabled:hover .list-group-item-text,\n.list-group-item.disabled:focus .list-group-item-text {\n  color: #777777;\n}\n.list-group-item.active,\n.list-group-item.active:hover,\n.list-group-item.active:focus {\n  z-index: 2;\n  color: #fff;\n  background-color: #337ab7;\n  border-color: #337ab7;\n}\n.list-group-item.active .list-group-item-heading,\n.list-group-item.active:hover .list-group-item-heading,\n.list-group-item.active:focus .list-group-item-heading,\n.list-group-item.active .list-group-item-heading > small,\n.list-group-item.active:hover .list-group-item-heading > small,\n.list-group-item.active:focus .list-group-item-heading > small,\n.list-group-item.active .list-group-item-heading > .small,\n.list-group-item.active:hover .list-group-item-heading > .small,\n.list-group-item.active:focus .list-group-item-heading > .small {\n  color: inherit;\n}\n.list-group-item.active .list-group-item-text,\n.list-group-item.active:hover .list-group-item-text,\n.list-group-item.active:focus .list-group-item-text {\n  color: #c7ddef;\n}\n.list-group-item-success {\n  color: #3c763d;\n  background-color: #dff0d8;\n}\na.list-group-item-success,\nbutton.list-group-item-success {\n  color: #3c763d;\n}\na.list-group-item-success .list-group-item-heading,\nbutton.list-group-item-success .list-group-item-heading {\n  color: inherit;\n}\na.list-group-item-success:hover,\nbutton.list-group-item-success:hover,\na.list-group-item-success:focus,\nbutton.list-group-item-success:focus {\n  color: #3c763d;\n  background-color: #d0e9c6;\n}\na.list-group-item-success.active,\nbutton.list-group-item-success.active,\na.list-group-item-success.active:hover,\nbutton.list-group-item-success.active:hover,\na.list-group-item-success.active:focus,\nbutton.list-group-item-success.active:focus {\n  color: #fff;\n  background-color: #3c763d;\n  border-color: #3c763d;\n}\n.list-group-item-info {\n  color: #31708f;\n  background-color: #d9edf7;\n}\na.list-group-item-info,\nbutton.list-group-item-info {\n  color: #31708f;\n}\na.list-group-item-info .list-group-item-heading,\nbutton.list-group-item-info .list-group-item-heading {\n  color: inherit;\n}\na.list-group-item-info:hover,\nbutton.list-group-item-info:hover,\na.list-group-item-info:focus,\nbutton.list-group-item-info:focus {\n  color: #31708f;\n  background-color: #c4e3f3;\n}\na.list-group-item-info.active,\nbutton.list-group-item-info.active,\na.list-group-item-info.active:hover,\nbutton.list-group-item-info.active:hover,\na.list-group-item-info.active:focus,\nbutton.list-group-item-info.active:focus {\n  color: #fff;\n  background-color: #31708f;\n  border-color: #31708f;\n}\n.list-group-item-warning {\n  color: #8a6d3b;\n  background-color: #fcf8e3;\n}\na.list-group-item-warning,\nbutton.list-group-item-warning {\n  color: #8a6d3b;\n}\na.list-group-item-warning .list-group-item-heading,\nbutton.list-group-item-warning .list-group-item-heading {\n  color: inherit;\n}\na.list-group-item-warning:hover,\nbutton.list-group-item-warning:hover,\na.list-group-item-warning:focus,\nbutton.list-group-item-warning:focus {\n  color: #8a6d3b;\n  background-color: #faf2cc;\n}\na.list-group-item-warning.active,\nbutton.list-group-item-warning.active,\na.list-group-item-warning.active:hover,\nbutton.list-group-item-warning.active:hover,\na.list-group-item-warning.active:focus,\nbutton.list-group-item-warning.active:focus {\n  color: #fff;\n  background-color: #8a6d3b;\n  border-color: #8a6d3b;\n}\n.list-group-item-danger {\n  color: #a94442;\n  background-color: #f2dede;\n}\na.list-group-item-danger,\nbutton.list-group-item-danger {\n  color: #a94442;\n}\na.list-group-item-danger .list-group-item-heading,\nbutton.list-group-item-danger .list-group-item-heading {\n  color: inherit;\n}\na.list-group-item-danger:hover,\nbutton.list-group-item-danger:hover,\na.list-group-item-danger:focus,\nbutton.list-group-item-danger:focus {\n  color: #a94442;\n  background-color: #ebcccc;\n}\na.list-group-item-danger.active,\nbutton.list-group-item-danger.active,\na.list-group-item-danger.active:hover,\nbutton.list-group-item-danger.active:hover,\na.list-group-item-danger.active:focus,\nbutton.list-group-item-danger.active:focus {\n  color: #fff;\n  background-color: #a94442;\n  border-color: #a94442;\n}\n.list-group-item-heading {\n  margin-top: 0;\n  margin-bottom: 5px;\n}\n.list-group-item-text {\n  margin-bottom: 0;\n  line-height: 1.3;\n}\n.panel {\n  margin-bottom: 18px;\n  background-color: #fff;\n  border: 1px solid transparent;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);\n}\n.panel-body {\n  padding: 15px;\n}\n.panel-heading {\n  padding: 10px 15px;\n  border-bottom: 1px solid transparent;\n  border-top-right-radius: 1px;\n  border-top-left-radius: 1px;\n}\n.panel-heading > .dropdown .dropdown-toggle {\n  color: inherit;\n}\n.panel-title {\n  margin-top: 0;\n  margin-bottom: 0;\n  font-size: 15px;\n  color: inherit;\n}\n.panel-title > a,\n.panel-title > small,\n.panel-title > .small,\n.panel-title > small > a,\n.panel-title > .small > a {\n  color: inherit;\n}\n.panel-footer {\n  padding: 10px 15px;\n  background-color: #f5f5f5;\n  border-top: 1px solid #ddd;\n  border-bottom-right-radius: 1px;\n  border-bottom-left-radius: 1px;\n}\n.panel > .list-group,\n.panel > .panel-collapse > .list-group {\n  margin-bottom: 0;\n}\n.panel > .list-group .list-group-item,\n.panel > .panel-collapse > .list-group .list-group-item {\n  border-width: 1px 0;\n  border-radius: 0;\n}\n.panel > .list-group:first-child .list-group-item:first-child,\n.panel > .panel-collapse > .list-group:first-child .list-group-item:first-child {\n  border-top: 0;\n  border-top-right-radius: 1px;\n  border-top-left-radius: 1px;\n}\n.panel > .list-group:last-child .list-group-item:last-child,\n.panel > .panel-collapse > .list-group:last-child .list-group-item:last-child {\n  border-bottom: 0;\n  border-bottom-right-radius: 1px;\n  border-bottom-left-radius: 1px;\n}\n.panel > .panel-heading + .panel-collapse > .list-group .list-group-item:first-child {\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n}\n.panel-heading + .list-group .list-group-item:first-child {\n  border-top-width: 0;\n}\n.list-group + .panel-footer {\n  border-top-width: 0;\n}\n.panel > .table,\n.panel > .table-responsive > .table,\n.panel > .panel-collapse > .table {\n  margin-bottom: 0;\n}\n.panel > .table caption,\n.panel > .table-responsive > .table caption,\n.panel > .panel-collapse > .table caption {\n  padding-left: 15px;\n  padding-right: 15px;\n}\n.panel > .table:first-child,\n.panel > .table-responsive:first-child > .table:first-child {\n  border-top-right-radius: 1px;\n  border-top-left-radius: 1px;\n}\n.panel > .table:first-child > thead:first-child > tr:first-child,\n.panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child,\n.panel > .table:first-child > tbody:first-child > tr:first-child,\n.panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child {\n  border-top-left-radius: 1px;\n  border-top-right-radius: 1px;\n}\n.panel > .table:first-child > thead:first-child > tr:first-child td:first-child,\n.panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child td:first-child,\n.panel > .table:first-child > tbody:first-child > tr:first-child td:first-child,\n.panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child td:first-child,\n.panel > .table:first-child > thead:first-child > tr:first-child th:first-child,\n.panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child th:first-child,\n.panel > .table:first-child > tbody:first-child > tr:first-child th:first-child,\n.panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child th:first-child {\n  border-top-left-radius: 1px;\n}\n.panel > .table:first-child > thead:first-child > tr:first-child td:last-child,\n.panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child td:last-child,\n.panel > .table:first-child > tbody:first-child > tr:first-child td:last-child,\n.panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child td:last-child,\n.panel > .table:first-child > thead:first-child > tr:first-child th:last-child,\n.panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child th:last-child,\n.panel > .table:first-child > tbody:first-child > tr:first-child th:last-child,\n.panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child th:last-child {\n  border-top-right-radius: 1px;\n}\n.panel > .table:last-child,\n.panel > .table-responsive:last-child > .table:last-child {\n  border-bottom-right-radius: 1px;\n  border-bottom-left-radius: 1px;\n}\n.panel > .table:last-child > tbody:last-child > tr:last-child,\n.panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child,\n.panel > .table:last-child > tfoot:last-child > tr:last-child,\n.panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child {\n  border-bottom-left-radius: 1px;\n  border-bottom-right-radius: 1px;\n}\n.panel > .table:last-child > tbody:last-child > tr:last-child td:first-child,\n.panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child td:first-child,\n.panel > .table:last-child > tfoot:last-child > tr:last-child td:first-child,\n.panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child td:first-child,\n.panel > .table:last-child > tbody:last-child > tr:last-child th:first-child,\n.panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child th:first-child,\n.panel > .table:last-child > tfoot:last-child > tr:last-child th:first-child,\n.panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child th:first-child {\n  border-bottom-left-radius: 1px;\n}\n.panel > .table:last-child > tbody:last-child > tr:last-child td:last-child,\n.panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child td:last-child,\n.panel > .table:last-child > tfoot:last-child > tr:last-child td:last-child,\n.panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child td:last-child,\n.panel > .table:last-child > tbody:last-child > tr:last-child th:last-child,\n.panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child th:last-child,\n.panel > .table:last-child > tfoot:last-child > tr:last-child th:last-child,\n.panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child th:last-child {\n  border-bottom-right-radius: 1px;\n}\n.panel > .panel-body + .table,\n.panel > .panel-body + .table-responsive,\n.panel > .table + .panel-body,\n.panel > .table-responsive + .panel-body {\n  border-top: 1px solid #ddd;\n}\n.panel > .table > tbody:first-child > tr:first-child th,\n.panel > .table > tbody:first-child > tr:first-child td {\n  border-top: 0;\n}\n.panel > .table-bordered,\n.panel > .table-responsive > .table-bordered {\n  border: 0;\n}\n.panel > .table-bordered > thead > tr > th:first-child,\n.panel > .table-responsive > .table-bordered > thead > tr > th:first-child,\n.panel > .table-bordered > tbody > tr > th:first-child,\n.panel > .table-responsive > .table-bordered > tbody > tr > th:first-child,\n.panel > .table-bordered > tfoot > tr > th:first-child,\n.panel > .table-responsive > .table-bordered > tfoot > tr > th:first-child,\n.panel > .table-bordered > thead > tr > td:first-child,\n.panel > .table-responsive > .table-bordered > thead > tr > td:first-child,\n.panel > .table-bordered > tbody > tr > td:first-child,\n.panel > .table-responsive > .table-bordered > tbody > tr > td:first-child,\n.panel > .table-bordered > tfoot > tr > td:first-child,\n.panel > .table-responsive > .table-bordered > tfoot > tr > td:first-child {\n  border-left: 0;\n}\n.panel > .table-bordered > thead > tr > th:last-child,\n.panel > .table-responsive > .table-bordered > thead > tr > th:last-child,\n.panel > .table-bordered > tbody > tr > th:last-child,\n.panel > .table-responsive > .table-bordered > tbody > tr > th:last-child,\n.panel > .table-bordered > tfoot > tr > th:last-child,\n.panel > .table-responsive > .table-bordered > tfoot > tr > th:last-child,\n.panel > .table-bordered > thead > tr > td:last-child,\n.panel > .table-responsive > .table-bordered > thead > tr > td:last-child,\n.panel > .table-bordered > tbody > tr > td:last-child,\n.panel > .table-responsive > .table-bordered > tbody > tr > td:last-child,\n.panel > .table-bordered > tfoot > tr > td:last-child,\n.panel > .table-responsive > .table-bordered > tfoot > tr > td:last-child {\n  border-right: 0;\n}\n.panel > .table-bordered > thead > tr:first-child > td,\n.panel > .table-responsive > .table-bordered > thead > tr:first-child > td,\n.panel > .table-bordered > tbody > tr:first-child > td,\n.panel > .table-responsive > .table-bordered > tbody > tr:first-child > td,\n.panel > .table-bordered > thead > tr:first-child > th,\n.panel > .table-responsive > .table-bordered > thead > tr:first-child > th,\n.panel > .table-bordered > tbody > tr:first-child > th,\n.panel > .table-responsive > .table-bordered > tbody > tr:first-child > th {\n  border-bottom: 0;\n}\n.panel > .table-bordered > tbody > tr:last-child > td,\n.panel > .table-responsive > .table-bordered > tbody > tr:last-child > td,\n.panel > .table-bordered > tfoot > tr:last-child > td,\n.panel > .table-responsive > .table-bordered > tfoot > tr:last-child > td,\n.panel > .table-bordered > tbody > tr:last-child > th,\n.panel > .table-responsive > .table-bordered > tbody > tr:last-child > th,\n.panel > .table-bordered > tfoot > tr:last-child > th,\n.panel > .table-responsive > .table-bordered > tfoot > tr:last-child > th {\n  border-bottom: 0;\n}\n.panel > .table-responsive {\n  border: 0;\n  margin-bottom: 0;\n}\n.panel-group {\n  margin-bottom: 18px;\n}\n.panel-group .panel {\n  margin-bottom: 0;\n  border-radius: 2px;\n}\n.panel-group .panel + .panel {\n  margin-top: 5px;\n}\n.panel-group .panel-heading {\n  border-bottom: 0;\n}\n.panel-group .panel-heading + .panel-collapse > .panel-body,\n.panel-group .panel-heading + .panel-collapse > .list-group {\n  border-top: 1px solid #ddd;\n}\n.panel-group .panel-footer {\n  border-top: 0;\n}\n.panel-group .panel-footer + .panel-collapse .panel-body {\n  border-bottom: 1px solid #ddd;\n}\n.panel-default {\n  border-color: #ddd;\n}\n.panel-default > .panel-heading {\n  color: #333333;\n  background-color: #f5f5f5;\n  border-color: #ddd;\n}\n.panel-default > .panel-heading + .panel-collapse > .panel-body {\n  border-top-color: #ddd;\n}\n.panel-default > .panel-heading .badge {\n  color: #f5f5f5;\n  background-color: #333333;\n}\n.panel-default > .panel-footer + .panel-collapse > .panel-body {\n  border-bottom-color: #ddd;\n}\n.panel-primary {\n  border-color: #337ab7;\n}\n.panel-primary > .panel-heading {\n  color: #fff;\n  background-color: #337ab7;\n  border-color: #337ab7;\n}\n.panel-primary > .panel-heading + .panel-collapse > .panel-body {\n  border-top-color: #337ab7;\n}\n.panel-primary > .panel-heading .badge {\n  color: #337ab7;\n  background-color: #fff;\n}\n.panel-primary > .panel-footer + .panel-collapse > .panel-body {\n  border-bottom-color: #337ab7;\n}\n.panel-success {\n  border-color: #d6e9c6;\n}\n.panel-success > .panel-heading {\n  color: #3c763d;\n  background-color: #dff0d8;\n  border-color: #d6e9c6;\n}\n.panel-success > .panel-heading + .panel-collapse > .panel-body {\n  border-top-color: #d6e9c6;\n}\n.panel-success > .panel-heading .badge {\n  color: #dff0d8;\n  background-color: #3c763d;\n}\n.panel-success > .panel-footer + .panel-collapse > .panel-body {\n  border-bottom-color: #d6e9c6;\n}\n.panel-info {\n  border-color: #bce8f1;\n}\n.panel-info > .panel-heading {\n  color: #31708f;\n  background-color: #d9edf7;\n  border-color: #bce8f1;\n}\n.panel-info > .panel-heading + .panel-collapse > .panel-body {\n  border-top-color: #bce8f1;\n}\n.panel-info > .panel-heading .badge {\n  color: #d9edf7;\n  background-color: #31708f;\n}\n.panel-info > .panel-footer + .panel-collapse > .panel-body {\n  border-bottom-color: #bce8f1;\n}\n.panel-warning {\n  border-color: #faebcc;\n}\n.panel-warning > .panel-heading {\n  color: #8a6d3b;\n  background-color: #fcf8e3;\n  border-color: #faebcc;\n}\n.panel-warning > .panel-heading + .panel-collapse > .panel-body {\n  border-top-color: #faebcc;\n}\n.panel-warning > .panel-heading .badge {\n  color: #fcf8e3;\n  background-color: #8a6d3b;\n}\n.panel-warning > .panel-footer + .panel-collapse > .panel-body {\n  border-bottom-color: #faebcc;\n}\n.panel-danger {\n  border-color: #ebccd1;\n}\n.panel-danger > .panel-heading {\n  color: #a94442;\n  background-color: #f2dede;\n  border-color: #ebccd1;\n}\n.panel-danger > .panel-heading + .panel-collapse > .panel-body {\n  border-top-color: #ebccd1;\n}\n.panel-danger > .panel-heading .badge {\n  color: #f2dede;\n  background-color: #a94442;\n}\n.panel-danger > .panel-footer + .panel-collapse > .panel-body {\n  border-bottom-color: #ebccd1;\n}\n.embed-responsive {\n  position: relative;\n  display: block;\n  height: 0;\n  padding: 0;\n  overflow: hidden;\n}\n.embed-responsive .embed-responsive-item,\n.embed-responsive iframe,\n.embed-responsive embed,\n.embed-responsive object,\n.embed-responsive video {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  height: 100%;\n  width: 100%;\n  border: 0;\n}\n.embed-responsive-16by9 {\n  padding-bottom: 56.25%;\n}\n.embed-responsive-4by3 {\n  padding-bottom: 75%;\n}\n.well {\n  min-height: 20px;\n  padding: 19px;\n  margin-bottom: 20px;\n  background-color: #f5f5f5;\n  border: 1px solid #e3e3e3;\n  border-radius: 2px;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);\n}\n.well blockquote {\n  border-color: #ddd;\n  border-color: rgba(0, 0, 0, 0.15);\n}\n.well-lg {\n  padding: 24px;\n  border-radius: 3px;\n}\n.well-sm {\n  padding: 9px;\n  border-radius: 1px;\n}\n.close {\n  float: right;\n  font-size: 19.5px;\n  font-weight: bold;\n  line-height: 1;\n  color: #000;\n  text-shadow: 0 1px 0 #fff;\n  opacity: 0.2;\n  filter: alpha(opacity=20);\n}\n.close:hover,\n.close:focus {\n  color: #000;\n  text-decoration: none;\n  cursor: pointer;\n  opacity: 0.5;\n  filter: alpha(opacity=50);\n}\nbutton.close {\n  padding: 0;\n  cursor: pointer;\n  background: transparent;\n  border: 0;\n  -webkit-appearance: none;\n}\n.modal-open {\n  overflow: hidden;\n}\n.modal {\n  display: none;\n  overflow: hidden;\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1050;\n  -webkit-overflow-scrolling: touch;\n  outline: 0;\n}\n.modal.fade .modal-dialog {\n  -webkit-transform: translate(0, -25%);\n  -ms-transform: translate(0, -25%);\n  -o-transform: translate(0, -25%);\n  transform: translate(0, -25%);\n  -webkit-transition: -webkit-transform 0.3s ease-out;\n  -moz-transition: -moz-transform 0.3s ease-out;\n  -o-transition: -o-transform 0.3s ease-out;\n  transition: transform 0.3s ease-out;\n}\n.modal.in .modal-dialog {\n  -webkit-transform: translate(0, 0);\n  -ms-transform: translate(0, 0);\n  -o-transform: translate(0, 0);\n  transform: translate(0, 0);\n}\n.modal-open .modal {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.modal-dialog {\n  position: relative;\n  width: auto;\n  margin: 10px;\n}\n.modal-content {\n  position: relative;\n  background-color: #fff;\n  border: 1px solid #999;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n  -webkit-box-shadow: 0 3px 9px rgba(0, 0, 0, 0.5);\n  box-shadow: 0 3px 9px rgba(0, 0, 0, 0.5);\n  background-clip: padding-box;\n  outline: 0;\n}\n.modal-backdrop {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1040;\n  background-color: #000;\n}\n.modal-backdrop.fade {\n  opacity: 0;\n  filter: alpha(opacity=0);\n}\n.modal-backdrop.in {\n  opacity: 0.5;\n  filter: alpha(opacity=50);\n}\n.modal-header {\n  padding: 15px;\n  border-bottom: 1px solid #e5e5e5;\n}\n.modal-header .close {\n  margin-top: -2px;\n}\n.modal-title {\n  margin: 0;\n  line-height: 1.42857143;\n}\n.modal-body {\n  position: relative;\n  padding: 15px;\n}\n.modal-footer {\n  padding: 15px;\n  text-align: right;\n  border-top: 1px solid #e5e5e5;\n}\n.modal-footer .btn + .btn {\n  margin-left: 5px;\n  margin-bottom: 0;\n}\n.modal-footer .btn-group .btn + .btn {\n  margin-left: -1px;\n}\n.modal-footer .btn-block + .btn-block {\n  margin-left: 0;\n}\n.modal-scrollbar-measure {\n  position: absolute;\n  top: -9999px;\n  width: 50px;\n  height: 50px;\n  overflow: scroll;\n}\n@media (min-width: 768px) {\n  .modal-dialog {\n    width: 600px;\n    margin: 30px auto;\n  }\n  .modal-content {\n    -webkit-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);\n    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);\n  }\n  .modal-sm {\n    width: 300px;\n  }\n}\n@media (min-width: 992px) {\n  .modal-lg {\n    width: 900px;\n  }\n}\n.tooltip {\n  position: absolute;\n  z-index: 1070;\n  display: block;\n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  font-style: normal;\n  font-weight: normal;\n  letter-spacing: normal;\n  line-break: auto;\n  line-height: 1.42857143;\n  text-align: left;\n  text-align: start;\n  text-decoration: none;\n  text-shadow: none;\n  text-transform: none;\n  white-space: normal;\n  word-break: normal;\n  word-spacing: normal;\n  word-wrap: normal;\n  font-size: 12px;\n  opacity: 0;\n  filter: alpha(opacity=0);\n}\n.tooltip.in {\n  opacity: 0.9;\n  filter: alpha(opacity=90);\n}\n.tooltip.top {\n  margin-top: -3px;\n  padding: 5px 0;\n}\n.tooltip.right {\n  margin-left: 3px;\n  padding: 0 5px;\n}\n.tooltip.bottom {\n  margin-top: 3px;\n  padding: 5px 0;\n}\n.tooltip.left {\n  margin-left: -3px;\n  padding: 0 5px;\n}\n.tooltip-inner {\n  max-width: 200px;\n  padding: 3px 8px;\n  color: #fff;\n  text-align: center;\n  background-color: #000;\n  border-radius: 2px;\n}\n.tooltip-arrow {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-color: transparent;\n  border-style: solid;\n}\n.tooltip.top .tooltip-arrow {\n  bottom: 0;\n  left: 50%;\n  margin-left: -5px;\n  border-width: 5px 5px 0;\n  border-top-color: #000;\n}\n.tooltip.top-left .tooltip-arrow {\n  bottom: 0;\n  right: 5px;\n  margin-bottom: -5px;\n  border-width: 5px 5px 0;\n  border-top-color: #000;\n}\n.tooltip.top-right .tooltip-arrow {\n  bottom: 0;\n  left: 5px;\n  margin-bottom: -5px;\n  border-width: 5px 5px 0;\n  border-top-color: #000;\n}\n.tooltip.right .tooltip-arrow {\n  top: 50%;\n  left: 0;\n  margin-top: -5px;\n  border-width: 5px 5px 5px 0;\n  border-right-color: #000;\n}\n.tooltip.left .tooltip-arrow {\n  top: 50%;\n  right: 0;\n  margin-top: -5px;\n  border-width: 5px 0 5px 5px;\n  border-left-color: #000;\n}\n.tooltip.bottom .tooltip-arrow {\n  top: 0;\n  left: 50%;\n  margin-left: -5px;\n  border-width: 0 5px 5px;\n  border-bottom-color: #000;\n}\n.tooltip.bottom-left .tooltip-arrow {\n  top: 0;\n  right: 5px;\n  margin-top: -5px;\n  border-width: 0 5px 5px;\n  border-bottom-color: #000;\n}\n.tooltip.bottom-right .tooltip-arrow {\n  top: 0;\n  left: 5px;\n  margin-top: -5px;\n  border-width: 0 5px 5px;\n  border-bottom-color: #000;\n}\n.popover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1060;\n  display: none;\n  max-width: 276px;\n  padding: 1px;\n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  font-style: normal;\n  font-weight: normal;\n  letter-spacing: normal;\n  line-break: auto;\n  line-height: 1.42857143;\n  text-align: left;\n  text-align: start;\n  text-decoration: none;\n  text-shadow: none;\n  text-transform: none;\n  white-space: normal;\n  word-break: normal;\n  word-spacing: normal;\n  word-wrap: normal;\n  font-size: 13px;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: 1px solid #ccc;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n  -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);\n  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);\n}\n.popover.top {\n  margin-top: -10px;\n}\n.popover.right {\n  margin-left: 10px;\n}\n.popover.bottom {\n  margin-top: 10px;\n}\n.popover.left {\n  margin-left: -10px;\n}\n.popover-title {\n  margin: 0;\n  padding: 8px 14px;\n  font-size: 13px;\n  background-color: #f7f7f7;\n  border-bottom: 1px solid #ebebeb;\n  border-radius: 2px 2px 0 0;\n}\n.popover-content {\n  padding: 9px 14px;\n}\n.popover > .arrow,\n.popover > .arrow:after {\n  position: absolute;\n  display: block;\n  width: 0;\n  height: 0;\n  border-color: transparent;\n  border-style: solid;\n}\n.popover > .arrow {\n  border-width: 11px;\n}\n.popover > .arrow:after {\n  border-width: 10px;\n  content: '';\n}\n.popover.top > .arrow {\n  left: 50%;\n  margin-left: -11px;\n  border-bottom-width: 0;\n  border-top-color: #999999;\n  border-top-color: rgba(0, 0, 0, 0.25);\n  bottom: -11px;\n}\n.popover.top > .arrow:after {\n  content: ' ';\n  bottom: 1px;\n  margin-left: -10px;\n  border-bottom-width: 0;\n  border-top-color: #fff;\n}\n.popover.right > .arrow {\n  top: 50%;\n  left: -11px;\n  margin-top: -11px;\n  border-left-width: 0;\n  border-right-color: #999999;\n  border-right-color: rgba(0, 0, 0, 0.25);\n}\n.popover.right > .arrow:after {\n  content: ' ';\n  left: 1px;\n  bottom: -10px;\n  border-left-width: 0;\n  border-right-color: #fff;\n}\n.popover.bottom > .arrow {\n  left: 50%;\n  margin-left: -11px;\n  border-top-width: 0;\n  border-bottom-color: #999999;\n  border-bottom-color: rgba(0, 0, 0, 0.25);\n  top: -11px;\n}\n.popover.bottom > .arrow:after {\n  content: ' ';\n  top: 1px;\n  margin-left: -10px;\n  border-top-width: 0;\n  border-bottom-color: #fff;\n}\n.popover.left > .arrow {\n  top: 50%;\n  right: -11px;\n  margin-top: -11px;\n  border-right-width: 0;\n  border-left-color: #999999;\n  border-left-color: rgba(0, 0, 0, 0.25);\n}\n.popover.left > .arrow:after {\n  content: ' ';\n  right: 1px;\n  border-right-width: 0;\n  border-left-color: #fff;\n  bottom: -10px;\n}\n.carousel {\n  position: relative;\n}\n.carousel-inner {\n  position: relative;\n  overflow: hidden;\n  width: 100%;\n}\n.carousel-inner > .item {\n  display: none;\n  position: relative;\n  -webkit-transition: 0.6s ease-in-out left;\n  -o-transition: 0.6s ease-in-out left;\n  transition: 0.6s ease-in-out left;\n}\n.carousel-inner > .item > img,\n.carousel-inner > .item > a > img {\n  line-height: 1;\n}\n@media all and (transform-3d), (-webkit-transform-3d) {\n  .carousel-inner > .item {\n    -webkit-transition: -webkit-transform 0.6s ease-in-out;\n    -moz-transition: -moz-transform 0.6s ease-in-out;\n    -o-transition: -o-transform 0.6s ease-in-out;\n    transition: transform 0.6s ease-in-out;\n    -webkit-backface-visibility: hidden;\n    -moz-backface-visibility: hidden;\n    backface-visibility: hidden;\n    -webkit-perspective: 1000px;\n    -moz-perspective: 1000px;\n    perspective: 1000px;\n  }\n  .carousel-inner > .item.next,\n  .carousel-inner > .item.active.right {\n    -webkit-transform: translate3d(100%, 0, 0);\n    transform: translate3d(100%, 0, 0);\n    left: 0;\n  }\n  .carousel-inner > .item.prev,\n  .carousel-inner > .item.active.left {\n    -webkit-transform: translate3d(-100%, 0, 0);\n    transform: translate3d(-100%, 0, 0);\n    left: 0;\n  }\n  .carousel-inner > .item.next.left,\n  .carousel-inner > .item.prev.right,\n  .carousel-inner > .item.active {\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n    left: 0;\n  }\n}\n.carousel-inner > .active,\n.carousel-inner > .next,\n.carousel-inner > .prev {\n  display: block;\n}\n.carousel-inner > .active {\n  left: 0;\n}\n.carousel-inner > .next,\n.carousel-inner > .prev {\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n.carousel-inner > .next {\n  left: 100%;\n}\n.carousel-inner > .prev {\n  left: -100%;\n}\n.carousel-inner > .next.left,\n.carousel-inner > .prev.right {\n  left: 0;\n}\n.carousel-inner > .active.left {\n  left: -100%;\n}\n.carousel-inner > .active.right {\n  left: 100%;\n}\n.carousel-control {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  width: 15%;\n  opacity: 0.5;\n  filter: alpha(opacity=50);\n  font-size: 20px;\n  color: #fff;\n  text-align: center;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);\n  background-color: rgba(0, 0, 0, 0);\n}\n.carousel-control.left {\n  background-image: -webkit-linear-gradient(left, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.0001) 100%);\n  background-image: -o-linear-gradient(left, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.0001) 100%);\n  background-image: linear-gradient(to right, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.0001) 100%);\n  background-repeat: repeat-x;\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#80000000', endColorstr='#00000000', GradientType=1);\n}\n.carousel-control.right {\n  left: auto;\n  right: 0;\n  background-image: -webkit-linear-gradient(left, rgba(0, 0, 0, 0.0001) 0%, rgba(0, 0, 0, 0.5) 100%);\n  background-image: -o-linear-gradient(left, rgba(0, 0, 0, 0.0001) 0%, rgba(0, 0, 0, 0.5) 100%);\n  background-image: linear-gradient(to right, rgba(0, 0, 0, 0.0001) 0%, rgba(0, 0, 0, 0.5) 100%);\n  background-repeat: repeat-x;\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000', endColorstr='#80000000', GradientType=1);\n}\n.carousel-control:hover,\n.carousel-control:focus {\n  outline: 0;\n  color: #fff;\n  text-decoration: none;\n  opacity: 0.9;\n  filter: alpha(opacity=90);\n}\n.carousel-control .icon-prev,\n.carousel-control .icon-next,\n.carousel-control .glyphicon-chevron-left,\n.carousel-control .glyphicon-chevron-right {\n  position: absolute;\n  top: 50%;\n  margin-top: -10px;\n  z-index: 5;\n  display: inline-block;\n}\n.carousel-control .icon-prev,\n.carousel-control .glyphicon-chevron-left {\n  left: 50%;\n  margin-left: -10px;\n}\n.carousel-control .icon-next,\n.carousel-control .glyphicon-chevron-right {\n  right: 50%;\n  margin-right: -10px;\n}\n.carousel-control .icon-prev,\n.carousel-control .icon-next {\n  width: 20px;\n  height: 20px;\n  line-height: 1;\n  font-family: serif;\n}\n.carousel-control .icon-prev:before {\n  content: '\\2039';\n}\n.carousel-control .icon-next:before {\n  content: '\\203a';\n}\n.carousel-indicators {\n  position: absolute;\n  bottom: 10px;\n  left: 50%;\n  z-index: 15;\n  width: 60%;\n  margin-left: -30%;\n  padding-left: 0;\n  list-style: none;\n  text-align: center;\n}\n.carousel-indicators li {\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  margin: 1px;\n  text-indent: -999px;\n  border: 1px solid #fff;\n  border-radius: 10px;\n  cursor: pointer;\n  background-color: #000 \\9;\n  background-color: rgba(0, 0, 0, 0);\n}\n.carousel-indicators .active {\n  margin: 0;\n  width: 12px;\n  height: 12px;\n  background-color: #fff;\n}\n.carousel-caption {\n  position: absolute;\n  left: 15%;\n  right: 15%;\n  bottom: 20px;\n  z-index: 10;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  color: #fff;\n  text-align: center;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);\n}\n.carousel-caption .btn {\n  text-shadow: none;\n}\n@media screen and (min-width: 768px) {\n  .carousel-control .glyphicon-chevron-left,\n  .carousel-control .glyphicon-chevron-right,\n  .carousel-control .icon-prev,\n  .carousel-control .icon-next {\n    width: 30px;\n    height: 30px;\n    margin-top: -10px;\n    font-size: 30px;\n  }\n  .carousel-control .glyphicon-chevron-left,\n  .carousel-control .icon-prev {\n    margin-left: -10px;\n  }\n  .carousel-control .glyphicon-chevron-right,\n  .carousel-control .icon-next {\n    margin-right: -10px;\n  }\n  .carousel-caption {\n    left: 20%;\n    right: 20%;\n    padding-bottom: 30px;\n  }\n  .carousel-indicators {\n    bottom: 20px;\n  }\n}\n.clearfix:before,\n.clearfix:after,\n.dl-horizontal dd:before,\n.dl-horizontal dd:after,\n.container:before,\n.container:after,\n.container-fluid:before,\n.container-fluid:after,\n.row:before,\n.row:after,\n.form-horizontal .form-group:before,\n.form-horizontal .form-group:after,\n.btn-toolbar:before,\n.btn-toolbar:after,\n.btn-group-vertical > .btn-group:before,\n.btn-group-vertical > .btn-group:after,\n.nav:before,\n.nav:after,\n.navbar:before,\n.navbar:after,\n.navbar-header:before,\n.navbar-header:after,\n.navbar-collapse:before,\n.navbar-collapse:after,\n.pager:before,\n.pager:after,\n.panel-body:before,\n.panel-body:after,\n.modal-header:before,\n.modal-header:after,\n.modal-footer:before,\n.modal-footer:after,\n.item_buttons:before,\n.item_buttons:after {\n  content: ' ';\n  display: table;\n}\n.clearfix:after,\n.dl-horizontal dd:after,\n.container:after,\n.container-fluid:after,\n.row:after,\n.form-horizontal .form-group:after,\n.btn-toolbar:after,\n.btn-group-vertical > .btn-group:after,\n.nav:after,\n.navbar:after,\n.navbar-header:after,\n.navbar-collapse:after,\n.pager:after,\n.panel-body:after,\n.modal-header:after,\n.modal-footer:after,\n.item_buttons:after {\n  clear: both;\n}\n.center-block {\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n}\n.pull-right {\n  float: right !important;\n}\n.pull-left {\n  float: left !important;\n}\n.hide {\n  display: none !important;\n}\n.show {\n  display: block !important;\n}\n.invisible {\n  visibility: hidden;\n}\n.text-hide {\n  font: 0/0 a;\n  color: transparent;\n  text-shadow: none;\n  background-color: transparent;\n  border: 0;\n}\n.hidden {\n  display: none !important;\n}\n.affix {\n  position: fixed;\n}\n@-ms-viewport {\n  width: device-width;\n}\n.visible-xs,\n.visible-sm,\n.visible-md,\n.visible-lg {\n  display: none !important;\n}\n.visible-xs-block,\n.visible-xs-inline,\n.visible-xs-inline-block,\n.visible-sm-block,\n.visible-sm-inline,\n.visible-sm-inline-block,\n.visible-md-block,\n.visible-md-inline,\n.visible-md-inline-block,\n.visible-lg-block,\n.visible-lg-inline,\n.visible-lg-inline-block {\n  display: none !important;\n}\n@media (max-width: 767px) {\n  .visible-xs {\n    display: block !important;\n  }\n  table.visible-xs {\n    display: table !important;\n  }\n  tr.visible-xs {\n    display: table-row !important;\n  }\n  th.visible-xs,\n  td.visible-xs {\n    display: table-cell !important;\n  }\n}\n@media (max-width: 767px) {\n  .visible-xs-block {\n    display: block !important;\n  }\n}\n@media (max-width: 767px) {\n  .visible-xs-inline {\n    display: inline !important;\n  }\n}\n@media (max-width: 767px) {\n  .visible-xs-inline-block {\n    display: inline-block !important;\n  }\n}\n@media (min-width: 768px) and (max-width: 991px) {\n  .visible-sm {\n    display: block !important;\n  }\n  table.visible-sm {\n    display: table !important;\n  }\n  tr.visible-sm {\n    display: table-row !important;\n  }\n  th.visible-sm,\n  td.visible-sm {\n    display: table-cell !important;\n  }\n}\n@media (min-width: 768px) and (max-width: 991px) {\n  .visible-sm-block {\n    display: block !important;\n  }\n}\n@media (min-width: 768px) and (max-width: 991px) {\n  .visible-sm-inline {\n    display: inline !important;\n  }\n}\n@media (min-width: 768px) and (max-width: 991px) {\n  .visible-sm-inline-block {\n    display: inline-block !important;\n  }\n}\n@media (min-width: 992px) and (max-width: 1199px) {\n  .visible-md {\n    display: block !important;\n  }\n  table.visible-md {\n    display: table !important;\n  }\n  tr.visible-md {\n    display: table-row !important;\n  }\n  th.visible-md,\n  td.visible-md {\n    display: table-cell !important;\n  }\n}\n@media (min-width: 992px) and (max-width: 1199px) {\n  .visible-md-block {\n    display: block !important;\n  }\n}\n@media (min-width: 992px) and (max-width: 1199px) {\n  .visible-md-inline {\n    display: inline !important;\n  }\n}\n@media (min-width: 992px) and (max-width: 1199px) {\n  .visible-md-inline-block {\n    display: inline-block !important;\n  }\n}\n@media (min-width: 1200px) {\n  .visible-lg {\n    display: block !important;\n  }\n  table.visible-lg {\n    display: table !important;\n  }\n  tr.visible-lg {\n    display: table-row !important;\n  }\n  th.visible-lg,\n  td.visible-lg {\n    display: table-cell !important;\n  }\n}\n@media (min-width: 1200px) {\n  .visible-lg-block {\n    display: block !important;\n  }\n}\n@media (min-width: 1200px) {\n  .visible-lg-inline {\n    display: inline !important;\n  }\n}\n@media (min-width: 1200px) {\n  .visible-lg-inline-block {\n    display: inline-block !important;\n  }\n}\n@media (max-width: 767px) {\n  .hidden-xs {\n    display: none !important;\n  }\n}\n@media (min-width: 768px) and (max-width: 991px) {\n  .hidden-sm {\n    display: none !important;\n  }\n}\n@media (min-width: 992px) and (max-width: 1199px) {\n  .hidden-md {\n    display: none !important;\n  }\n}\n@media (min-width: 1200px) {\n  .hidden-lg {\n    display: none !important;\n  }\n}\n.visible-print {\n  display: none !important;\n}\n@media print {\n  .visible-print {\n    display: block !important;\n  }\n  table.visible-print {\n    display: table !important;\n  }\n  tr.visible-print {\n    display: table-row !important;\n  }\n  th.visible-print,\n  td.visible-print {\n    display: table-cell !important;\n  }\n}\n.visible-print-block {\n  display: none !important;\n}\n@media print {\n  .visible-print-block {\n    display: block !important;\n  }\n}\n.visible-print-inline {\n  display: none !important;\n}\n@media print {\n  .visible-print-inline {\n    display: inline !important;\n  }\n}\n.visible-print-inline-block {\n  display: none !important;\n}\n@media print {\n  .visible-print-inline-block {\n    display: inline-block !important;\n  }\n}\n@media print {\n  .hidden-print {\n    display: none !important;\n  }\n}\n/*!\n*\n* Font Awesome\n*\n*/\n/*!\n *  Font Awesome 4.7.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */\n/* FONT PATH\n * -------------------------- */\n@font-face {\n  font-family: 'FontAwesome';\n  src: url('../components/font-awesome/fonts/fontawesome-webfont.eot?v=4.7.0');\n  src: url('../components/font-awesome/fonts/fontawesome-webfont.eot?#iefix&v=4.7.0') format('embedded-opentype'), url('../components/font-awesome/fonts/fontawesome-webfont.woff2?v=4.7.0') format('woff2'), url('../components/font-awesome/fonts/fontawesome-webfont.woff?v=4.7.0') format('woff'), url('../components/font-awesome/fonts/fontawesome-webfont.ttf?v=4.7.0') format('truetype'), url('../components/font-awesome/fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular') format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n.fa {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n/* makes the font 33% larger relative to the icon container */\n.fa-lg {\n  font-size: 1.33333333em;\n  line-height: 0.75em;\n  vertical-align: -15%;\n}\n.fa-2x {\n  font-size: 2em;\n}\n.fa-3x {\n  font-size: 3em;\n}\n.fa-4x {\n  font-size: 4em;\n}\n.fa-5x {\n  font-size: 5em;\n}\n.fa-fw {\n  width: 1.28571429em;\n  text-align: center;\n}\n.fa-ul {\n  padding-left: 0;\n  margin-left: 2.14285714em;\n  list-style-type: none;\n}\n.fa-ul > li {\n  position: relative;\n}\n.fa-li {\n  position: absolute;\n  left: -2.14285714em;\n  width: 2.14285714em;\n  top: 0.14285714em;\n  text-align: center;\n}\n.fa-li.fa-lg {\n  left: -1.85714286em;\n}\n.fa-border {\n  padding: .2em .25em .15em;\n  border: solid 0.08em #eee;\n  border-radius: .1em;\n}\n.fa-pull-left {\n  float: left;\n}\n.fa-pull-right {\n  float: right;\n}\n.fa.fa-pull-left {\n  margin-right: .3em;\n}\n.fa.fa-pull-right {\n  margin-left: .3em;\n}\n/* Deprecated as of 4.4.0 */\n.pull-right {\n  float: right;\n}\n.pull-left {\n  float: left;\n}\n.fa.pull-left {\n  margin-right: .3em;\n}\n.fa.pull-right {\n  margin-left: .3em;\n}\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n  animation: fa-spin 2s infinite linear;\n}\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n  animation: fa-spin 1s infinite steps(8);\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: 'progid:DXImageTransform.Microsoft.BasicImage(rotation=1)';\n  -webkit-transform: rotate(90deg);\n  -ms-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n.fa-rotate-180 {\n  -ms-filter: 'progid:DXImageTransform.Microsoft.BasicImage(rotation=2)';\n  -webkit-transform: rotate(180deg);\n  -ms-transform: rotate(180deg);\n  transform: rotate(180deg);\n}\n.fa-rotate-270 {\n  -ms-filter: 'progid:DXImageTransform.Microsoft.BasicImage(rotation=3)';\n  -webkit-transform: rotate(270deg);\n  -ms-transform: rotate(270deg);\n  transform: rotate(270deg);\n}\n.fa-flip-horizontal {\n  -ms-filter: 'progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)';\n  -webkit-transform: scale(-1, 1);\n  -ms-transform: scale(-1, 1);\n  transform: scale(-1, 1);\n}\n.fa-flip-vertical {\n  -ms-filter: 'progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)';\n  -webkit-transform: scale(1, -1);\n  -ms-transform: scale(1, -1);\n  transform: scale(1, -1);\n}\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical {\n  filter: none;\n}\n.fa-stack {\n  position: relative;\n  display: inline-block;\n  width: 2em;\n  height: 2em;\n  line-height: 2em;\n  vertical-align: middle;\n}\n.fa-stack-1x,\n.fa-stack-2x {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  text-align: center;\n}\n.fa-stack-1x {\n  line-height: inherit;\n}\n.fa-stack-2x {\n  font-size: 2em;\n}\n.fa-inverse {\n  color: #fff;\n}\n/* Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen\n   readers do not read off random characters that represent icons */\n.fa-glass:before {\n  content: '\\f000';\n}\n.fa-music:before {\n  content: '\\f001';\n}\n.fa-search:before {\n  content: '\\f002';\n}\n.fa-envelope-o:before {\n  content: '\\f003';\n}\n.fa-heart:before {\n  content: '\\f004';\n}\n.fa-star:before {\n  content: '\\f005';\n}\n.fa-star-o:before {\n  content: '\\f006';\n}\n.fa-user:before {\n  content: '\\f007';\n}\n.fa-film:before {\n  content: '\\f008';\n}\n.fa-th-large:before {\n  content: '\\f009';\n}\n.fa-th:before {\n  content: '\\f00a';\n}\n.fa-th-list:before {\n  content: '\\f00b';\n}\n.fa-check:before {\n  content: '\\f00c';\n}\n.fa-remove:before,\n.fa-close:before,\n.fa-times:before {\n  content: '\\f00d';\n}\n.fa-search-plus:before {\n  content: '\\f00e';\n}\n.fa-search-minus:before {\n  content: '\\f010';\n}\n.fa-power-off:before {\n  content: '\\f011';\n}\n.fa-signal:before {\n  content: '\\f012';\n}\n.fa-gear:before,\n.fa-cog:before {\n  content: '\\f013';\n}\n.fa-trash-o:before {\n  content: '\\f014';\n}\n.fa-home:before {\n  content: '\\f015';\n}\n.fa-file-o:before {\n  content: '\\f016';\n}\n.fa-clock-o:before {\n  content: '\\f017';\n}\n.fa-road:before {\n  content: '\\f018';\n}\n.fa-download:before {\n  content: '\\f019';\n}\n.fa-arrow-circle-o-down:before {\n  content: '\\f01a';\n}\n.fa-arrow-circle-o-up:before {\n  content: '\\f01b';\n}\n.fa-inbox:before {\n  content: '\\f01c';\n}\n.fa-play-circle-o:before {\n  content: '\\f01d';\n}\n.fa-rotate-right:before,\n.fa-repeat:before {\n  content: '\\f01e';\n}\n.fa-refresh:before {\n  content: '\\f021';\n}\n.fa-list-alt:before {\n  content: '\\f022';\n}\n.fa-lock:before {\n  content: '\\f023';\n}\n.fa-flag:before {\n  content: '\\f024';\n}\n.fa-headphones:before {\n  content: '\\f025';\n}\n.fa-volume-off:before {\n  content: '\\f026';\n}\n.fa-volume-down:before {\n  content: '\\f027';\n}\n.fa-volume-up:before {\n  content: '\\f028';\n}\n.fa-qrcode:before {\n  content: '\\f029';\n}\n.fa-barcode:before {\n  content: '\\f02a';\n}\n.fa-tag:before {\n  content: '\\f02b';\n}\n.fa-tags:before {\n  content: '\\f02c';\n}\n.fa-book:before {\n  content: '\\f02d';\n}\n.fa-bookmark:before {\n  content: '\\f02e';\n}\n.fa-print:before {\n  content: '\\f02f';\n}\n.fa-camera:before {\n  content: '\\f030';\n}\n.fa-font:before {\n  content: '\\f031';\n}\n.fa-bold:before {\n  content: '\\f032';\n}\n.fa-italic:before {\n  content: '\\f033';\n}\n.fa-text-height:before {\n  content: '\\f034';\n}\n.fa-text-width:before {\n  content: '\\f035';\n}\n.fa-align-left:before {\n  content: '\\f036';\n}\n.fa-align-center:before {\n  content: '\\f037';\n}\n.fa-align-right:before {\n  content: '\\f038';\n}\n.fa-align-justify:before {\n  content: '\\f039';\n}\n.fa-list:before {\n  content: '\\f03a';\n}\n.fa-dedent:before,\n.fa-outdent:before {\n  content: '\\f03b';\n}\n.fa-indent:before {\n  content: '\\f03c';\n}\n.fa-video-camera:before {\n  content: '\\f03d';\n}\n.fa-photo:before,\n.fa-image:before,\n.fa-picture-o:before {\n  content: '\\f03e';\n}\n.fa-pencil:before {\n  content: '\\f040';\n}\n.fa-map-marker:before {\n  content: '\\f041';\n}\n.fa-adjust:before {\n  content: '\\f042';\n}\n.fa-tint:before {\n  content: '\\f043';\n}\n.fa-edit:before,\n.fa-pencil-square-o:before {\n  content: '\\f044';\n}\n.fa-share-square-o:before {\n  content: '\\f045';\n}\n.fa-check-square-o:before {\n  content: '\\f046';\n}\n.fa-arrows:before {\n  content: '\\f047';\n}\n.fa-step-backward:before {\n  content: '\\f048';\n}\n.fa-fast-backward:before {\n  content: '\\f049';\n}\n.fa-backward:before {\n  content: '\\f04a';\n}\n.fa-play:before {\n  content: '\\f04b';\n}\n.fa-pause:before {\n  content: '\\f04c';\n}\n.fa-stop:before {\n  content: '\\f04d';\n}\n.fa-forward:before {\n  content: '\\f04e';\n}\n.fa-fast-forward:before {\n  content: '\\f050';\n}\n.fa-step-forward:before {\n  content: '\\f051';\n}\n.fa-eject:before {\n  content: '\\f052';\n}\n.fa-chevron-left:before {\n  content: '\\f053';\n}\n.fa-chevron-right:before {\n  content: '\\f054';\n}\n.fa-plus-circle:before {\n  content: '\\f055';\n}\n.fa-minus-circle:before {\n  content: '\\f056';\n}\n.fa-times-circle:before {\n  content: '\\f057';\n}\n.fa-check-circle:before {\n  content: '\\f058';\n}\n.fa-question-circle:before {\n  content: '\\f059';\n}\n.fa-info-circle:before {\n  content: '\\f05a';\n}\n.fa-crosshairs:before {\n  content: '\\f05b';\n}\n.fa-times-circle-o:before {\n  content: '\\f05c';\n}\n.fa-check-circle-o:before {\n  content: '\\f05d';\n}\n.fa-ban:before {\n  content: '\\f05e';\n}\n.fa-arrow-left:before {\n  content: '\\f060';\n}\n.fa-arrow-right:before {\n  content: '\\f061';\n}\n.fa-arrow-up:before {\n  content: '\\f062';\n}\n.fa-arrow-down:before {\n  content: '\\f063';\n}\n.fa-mail-forward:before,\n.fa-share:before {\n  content: '\\f064';\n}\n.fa-expand:before {\n  content: '\\f065';\n}\n.fa-compress:before {\n  content: '\\f066';\n}\n.fa-plus:before {\n  content: '\\f067';\n}\n.fa-minus:before {\n  content: '\\f068';\n}\n.fa-asterisk:before {\n  content: '\\f069';\n}\n.fa-exclamation-circle:before {\n  content: '\\f06a';\n}\n.fa-gift:before {\n  content: '\\f06b';\n}\n.fa-leaf:before {\n  content: '\\f06c';\n}\n.fa-fire:before {\n  content: '\\f06d';\n}\n.fa-eye:before {\n  content: '\\f06e';\n}\n.fa-eye-slash:before {\n  content: '\\f070';\n}\n.fa-warning:before,\n.fa-exclamation-triangle:before {\n  content: '\\f071';\n}\n.fa-plane:before {\n  content: '\\f072';\n}\n.fa-calendar:before {\n  content: '\\f073';\n}\n.fa-random:before {\n  content: '\\f074';\n}\n.fa-comment:before {\n  content: '\\f075';\n}\n.fa-magnet:before {\n  content: '\\f076';\n}\n.fa-chevron-up:before {\n  content: '\\f077';\n}\n.fa-chevron-down:before {\n  content: '\\f078';\n}\n.fa-retweet:before {\n  content: '\\f079';\n}\n.fa-shopping-cart:before {\n  content: '\\f07a';\n}\n.fa-folder:before {\n  content: '\\f07b';\n}\n.fa-folder-open:before {\n  content: '\\f07c';\n}\n.fa-arrows-v:before {\n  content: '\\f07d';\n}\n.fa-arrows-h:before {\n  content: '\\f07e';\n}\n.fa-bar-chart-o:before,\n.fa-bar-chart:before {\n  content: '\\f080';\n}\n.fa-twitter-square:before {\n  content: '\\f081';\n}\n.fa-facebook-square:before {\n  content: '\\f082';\n}\n.fa-camera-retro:before {\n  content: '\\f083';\n}\n.fa-key:before {\n  content: '\\f084';\n}\n.fa-gears:before,\n.fa-cogs:before {\n  content: '\\f085';\n}\n.fa-comments:before {\n  content: '\\f086';\n}\n.fa-thumbs-o-up:before {\n  content: '\\f087';\n}\n.fa-thumbs-o-down:before {\n  content: '\\f088';\n}\n.fa-star-half:before {\n  content: '\\f089';\n}\n.fa-heart-o:before {\n  content: '\\f08a';\n}\n.fa-sign-out:before {\n  content: '\\f08b';\n}\n.fa-linkedin-square:before {\n  content: '\\f08c';\n}\n.fa-thumb-tack:before {\n  content: '\\f08d';\n}\n.fa-external-link:before {\n  content: '\\f08e';\n}\n.fa-sign-in:before {\n  content: '\\f090';\n}\n.fa-trophy:before {\n  content: '\\f091';\n}\n.fa-github-square:before {\n  content: '\\f092';\n}\n.fa-upload:before {\n  content: '\\f093';\n}\n.fa-lemon-o:before {\n  content: '\\f094';\n}\n.fa-phone:before {\n  content: '\\f095';\n}\n.fa-square-o:before {\n  content: '\\f096';\n}\n.fa-bookmark-o:before {\n  content: '\\f097';\n}\n.fa-phone-square:before {\n  content: '\\f098';\n}\n.fa-twitter:before {\n  content: '\\f099';\n}\n.fa-facebook-f:before,\n.fa-facebook:before {\n  content: '\\f09a';\n}\n.fa-github:before {\n  content: '\\f09b';\n}\n.fa-unlock:before {\n  content: '\\f09c';\n}\n.fa-credit-card:before {\n  content: '\\f09d';\n}\n.fa-feed:before,\n.fa-rss:before {\n  content: '\\f09e';\n}\n.fa-hdd-o:before {\n  content: '\\f0a0';\n}\n.fa-bullhorn:before {\n  content: '\\f0a1';\n}\n.fa-bell:before {\n  content: '\\f0f3';\n}\n.fa-certificate:before {\n  content: '\\f0a3';\n}\n.fa-hand-o-right:before {\n  content: '\\f0a4';\n}\n.fa-hand-o-left:before {\n  content: '\\f0a5';\n}\n.fa-hand-o-up:before {\n  content: '\\f0a6';\n}\n.fa-hand-o-down:before {\n  content: '\\f0a7';\n}\n.fa-arrow-circle-left:before {\n  content: '\\f0a8';\n}\n.fa-arrow-circle-right:before {\n  content: '\\f0a9';\n}\n.fa-arrow-circle-up:before {\n  content: '\\f0aa';\n}\n.fa-arrow-circle-down:before {\n  content: '\\f0ab';\n}\n.fa-globe:before {\n  content: '\\f0ac';\n}\n.fa-wrench:before {\n  content: '\\f0ad';\n}\n.fa-tasks:before {\n  content: '\\f0ae';\n}\n.fa-filter:before {\n  content: '\\f0b0';\n}\n.fa-briefcase:before {\n  content: '\\f0b1';\n}\n.fa-arrows-alt:before {\n  content: '\\f0b2';\n}\n.fa-group:before,\n.fa-users:before {\n  content: '\\f0c0';\n}\n.fa-chain:before,\n.fa-link:before {\n  content: '\\f0c1';\n}\n.fa-cloud:before {\n  content: '\\f0c2';\n}\n.fa-flask:before {\n  content: '\\f0c3';\n}\n.fa-cut:before,\n.fa-scissors:before {\n  content: '\\f0c4';\n}\n.fa-copy:before,\n.fa-files-o:before {\n  content: '\\f0c5';\n}\n.fa-paperclip:before {\n  content: '\\f0c6';\n}\n.fa-save:before,\n.fa-floppy-o:before {\n  content: '\\f0c7';\n}\n.fa-square:before {\n  content: '\\f0c8';\n}\n.fa-navicon:before,\n.fa-reorder:before,\n.fa-bars:before {\n  content: '\\f0c9';\n}\n.fa-list-ul:before {\n  content: '\\f0ca';\n}\n.fa-list-ol:before {\n  content: '\\f0cb';\n}\n.fa-strikethrough:before {\n  content: '\\f0cc';\n}\n.fa-underline:before {\n  content: '\\f0cd';\n}\n.fa-table:before {\n  content: '\\f0ce';\n}\n.fa-magic:before {\n  content: '\\f0d0';\n}\n.fa-truck:before {\n  content: '\\f0d1';\n}\n.fa-pinterest:before {\n  content: '\\f0d2';\n}\n.fa-pinterest-square:before {\n  content: '\\f0d3';\n}\n.fa-google-plus-square:before {\n  content: '\\f0d4';\n}\n.fa-google-plus:before {\n  content: '\\f0d5';\n}\n.fa-money:before {\n  content: '\\f0d6';\n}\n.fa-caret-down:before {\n  content: '\\f0d7';\n}\n.fa-caret-up:before {\n  content: '\\f0d8';\n}\n.fa-caret-left:before {\n  content: '\\f0d9';\n}\n.fa-caret-right:before {\n  content: '\\f0da';\n}\n.fa-columns:before {\n  content: '\\f0db';\n}\n.fa-unsorted:before,\n.fa-sort:before {\n  content: '\\f0dc';\n}\n.fa-sort-down:before,\n.fa-sort-desc:before {\n  content: '\\f0dd';\n}\n.fa-sort-up:before,\n.fa-sort-asc:before {\n  content: '\\f0de';\n}\n.fa-envelope:before {\n  content: '\\f0e0';\n}\n.fa-linkedin:before {\n  content: '\\f0e1';\n}\n.fa-rotate-left:before,\n.fa-undo:before {\n  content: '\\f0e2';\n}\n.fa-legal:before,\n.fa-gavel:before {\n  content: '\\f0e3';\n}\n.fa-dashboard:before,\n.fa-tachometer:before {\n  content: '\\f0e4';\n}\n.fa-comment-o:before {\n  content: '\\f0e5';\n}\n.fa-comments-o:before {\n  content: '\\f0e6';\n}\n.fa-flash:before,\n.fa-bolt:before {\n  content: '\\f0e7';\n}\n.fa-sitemap:before {\n  content: '\\f0e8';\n}\n.fa-umbrella:before {\n  content: '\\f0e9';\n}\n.fa-paste:before,\n.fa-clipboard:before {\n  content: '\\f0ea';\n}\n.fa-lightbulb-o:before {\n  content: '\\f0eb';\n}\n.fa-exchange:before {\n  content: '\\f0ec';\n}\n.fa-cloud-download:before {\n  content: '\\f0ed';\n}\n.fa-cloud-upload:before {\n  content: '\\f0ee';\n}\n.fa-user-md:before {\n  content: '\\f0f0';\n}\n.fa-stethoscope:before {\n  content: '\\f0f1';\n}\n.fa-suitcase:before {\n  content: '\\f0f2';\n}\n.fa-bell-o:before {\n  content: '\\f0a2';\n}\n.fa-coffee:before {\n  content: '\\f0f4';\n}\n.fa-cutlery:before {\n  content: '\\f0f5';\n}\n.fa-file-text-o:before {\n  content: '\\f0f6';\n}\n.fa-building-o:before {\n  content: '\\f0f7';\n}\n.fa-hospital-o:before {\n  content: '\\f0f8';\n}\n.fa-ambulance:before {\n  content: '\\f0f9';\n}\n.fa-medkit:before {\n  content: '\\f0fa';\n}\n.fa-fighter-jet:before {\n  content: '\\f0fb';\n}\n.fa-beer:before {\n  content: '\\f0fc';\n}\n.fa-h-square:before {\n  content: '\\f0fd';\n}\n.fa-plus-square:before {\n  content: '\\f0fe';\n}\n.fa-angle-double-left:before {\n  content: '\\f100';\n}\n.fa-angle-double-right:before {\n  content: '\\f101';\n}\n.fa-angle-double-up:before {\n  content: '\\f102';\n}\n.fa-angle-double-down:before {\n  content: '\\f103';\n}\n.fa-angle-left:before {\n  content: '\\f104';\n}\n.fa-angle-right:before {\n  content: '\\f105';\n}\n.fa-angle-up:before {\n  content: '\\f106';\n}\n.fa-angle-down:before {\n  content: '\\f107';\n}\n.fa-desktop:before {\n  content: '\\f108';\n}\n.fa-laptop:before {\n  content: '\\f109';\n}\n.fa-tablet:before {\n  content: '\\f10a';\n}\n.fa-mobile-phone:before,\n.fa-mobile:before {\n  content: '\\f10b';\n}\n.fa-circle-o:before {\n  content: '\\f10c';\n}\n.fa-quote-left:before {\n  content: '\\f10d';\n}\n.fa-quote-right:before {\n  content: '\\f10e';\n}\n.fa-spinner:before {\n  content: '\\f110';\n}\n.fa-circle:before {\n  content: '\\f111';\n}\n.fa-mail-reply:before,\n.fa-reply:before {\n  content: '\\f112';\n}\n.fa-github-alt:before {\n  content: '\\f113';\n}\n.fa-folder-o:before {\n  content: '\\f114';\n}\n.fa-folder-open-o:before {\n  content: '\\f115';\n}\n.fa-smile-o:before {\n  content: '\\f118';\n}\n.fa-frown-o:before {\n  content: '\\f119';\n}\n.fa-meh-o:before {\n  content: '\\f11a';\n}\n.fa-gamepad:before {\n  content: '\\f11b';\n}\n.fa-keyboard-o:before {\n  content: '\\f11c';\n}\n.fa-flag-o:before {\n  content: '\\f11d';\n}\n.fa-flag-checkered:before {\n  content: '\\f11e';\n}\n.fa-terminal:before {\n  content: '\\f120';\n}\n.fa-code:before {\n  content: '\\f121';\n}\n.fa-mail-reply-all:before,\n.fa-reply-all:before {\n  content: '\\f122';\n}\n.fa-star-half-empty:before,\n.fa-star-half-full:before,\n.fa-star-half-o:before {\n  content: '\\f123';\n}\n.fa-location-arrow:before {\n  content: '\\f124';\n}\n.fa-crop:before {\n  content: '\\f125';\n}\n.fa-code-fork:before {\n  content: '\\f126';\n}\n.fa-unlink:before,\n.fa-chain-broken:before {\n  content: '\\f127';\n}\n.fa-question:before {\n  content: '\\f128';\n}\n.fa-info:before {\n  content: '\\f129';\n}\n.fa-exclamation:before {\n  content: '\\f12a';\n}\n.fa-superscript:before {\n  content: '\\f12b';\n}\n.fa-subscript:before {\n  content: '\\f12c';\n}\n.fa-eraser:before {\n  content: '\\f12d';\n}\n.fa-puzzle-piece:before {\n  content: '\\f12e';\n}\n.fa-microphone:before {\n  content: '\\f130';\n}\n.fa-microphone-slash:before {\n  content: '\\f131';\n}\n.fa-shield:before {\n  content: '\\f132';\n}\n.fa-calendar-o:before {\n  content: '\\f133';\n}\n.fa-fire-extinguisher:before {\n  content: '\\f134';\n}\n.fa-rocket:before {\n  content: '\\f135';\n}\n.fa-maxcdn:before {\n  content: '\\f136';\n}\n.fa-chevron-circle-left:before {\n  content: '\\f137';\n}\n.fa-chevron-circle-right:before {\n  content: '\\f138';\n}\n.fa-chevron-circle-up:before {\n  content: '\\f139';\n}\n.fa-chevron-circle-down:before {\n  content: '\\f13a';\n}\n.fa-html5:before {\n  content: '\\f13b';\n}\n.fa-css3:before {\n  content: '\\f13c';\n}\n.fa-anchor:before {\n  content: '\\f13d';\n}\n.fa-unlock-alt:before {\n  content: '\\f13e';\n}\n.fa-bullseye:before {\n  content: '\\f140';\n}\n.fa-ellipsis-h:before {\n  content: '\\f141';\n}\n.fa-ellipsis-v:before {\n  content: '\\f142';\n}\n.fa-rss-square:before {\n  content: '\\f143';\n}\n.fa-play-circle:before {\n  content: '\\f144';\n}\n.fa-ticket:before {\n  content: '\\f145';\n}\n.fa-minus-square:before {\n  content: '\\f146';\n}\n.fa-minus-square-o:before {\n  content: '\\f147';\n}\n.fa-level-up:before {\n  content: '\\f148';\n}\n.fa-level-down:before {\n  content: '\\f149';\n}\n.fa-check-square:before {\n  content: '\\f14a';\n}\n.fa-pencil-square:before {\n  content: '\\f14b';\n}\n.fa-external-link-square:before {\n  content: '\\f14c';\n}\n.fa-share-square:before {\n  content: '\\f14d';\n}\n.fa-compass:before {\n  content: '\\f14e';\n}\n.fa-toggle-down:before,\n.fa-caret-square-o-down:before {\n  content: '\\f150';\n}\n.fa-toggle-up:before,\n.fa-caret-square-o-up:before {\n  content: '\\f151';\n}\n.fa-toggle-right:before,\n.fa-caret-square-o-right:before {\n  content: '\\f152';\n}\n.fa-euro:before,\n.fa-eur:before {\n  content: '\\f153';\n}\n.fa-gbp:before {\n  content: '\\f154';\n}\n.fa-dollar:before,\n.fa-usd:before {\n  content: '\\f155';\n}\n.fa-rupee:before,\n.fa-inr:before {\n  content: '\\f156';\n}\n.fa-cny:before,\n.fa-rmb:before,\n.fa-yen:before,\n.fa-jpy:before {\n  content: '\\f157';\n}\n.fa-ruble:before,\n.fa-rouble:before,\n.fa-rub:before {\n  content: '\\f158';\n}\n.fa-won:before,\n.fa-krw:before {\n  content: '\\f159';\n}\n.fa-bitcoin:before,\n.fa-btc:before {\n  content: '\\f15a';\n}\n.fa-file:before {\n  content: '\\f15b';\n}\n.fa-file-text:before {\n  content: '\\f15c';\n}\n.fa-sort-alpha-asc:before {\n  content: '\\f15d';\n}\n.fa-sort-alpha-desc:before {\n  content: '\\f15e';\n}\n.fa-sort-amount-asc:before {\n  content: '\\f160';\n}\n.fa-sort-amount-desc:before {\n  content: '\\f161';\n}\n.fa-sort-numeric-asc:before {\n  content: '\\f162';\n}\n.fa-sort-numeric-desc:before {\n  content: '\\f163';\n}\n.fa-thumbs-up:before {\n  content: '\\f164';\n}\n.fa-thumbs-down:before {\n  content: '\\f165';\n}\n.fa-youtube-square:before {\n  content: '\\f166';\n}\n.fa-youtube:before {\n  content: '\\f167';\n}\n.fa-xing:before {\n  content: '\\f168';\n}\n.fa-xing-square:before {\n  content: '\\f169';\n}\n.fa-youtube-play:before {\n  content: '\\f16a';\n}\n.fa-dropbox:before {\n  content: '\\f16b';\n}\n.fa-stack-overflow:before {\n  content: '\\f16c';\n}\n.fa-instagram:before {\n  content: '\\f16d';\n}\n.fa-flickr:before {\n  content: '\\f16e';\n}\n.fa-adn:before {\n  content: '\\f170';\n}\n.fa-bitbucket:before {\n  content: '\\f171';\n}\n.fa-bitbucket-square:before {\n  content: '\\f172';\n}\n.fa-tumblr:before {\n  content: '\\f173';\n}\n.fa-tumblr-square:before {\n  content: '\\f174';\n}\n.fa-long-arrow-down:before {\n  content: '\\f175';\n}\n.fa-long-arrow-up:before {\n  content: '\\f176';\n}\n.fa-long-arrow-left:before {\n  content: '\\f177';\n}\n.fa-long-arrow-right:before {\n  content: '\\f178';\n}\n.fa-apple:before {\n  content: '\\f179';\n}\n.fa-windows:before {\n  content: '\\f17a';\n}\n.fa-android:before {\n  content: '\\f17b';\n}\n.fa-linux:before {\n  content: '\\f17c';\n}\n.fa-dribbble:before {\n  content: '\\f17d';\n}\n.fa-skype:before {\n  content: '\\f17e';\n}\n.fa-foursquare:before {\n  content: '\\f180';\n}\n.fa-trello:before {\n  content: '\\f181';\n}\n.fa-female:before {\n  content: '\\f182';\n}\n.fa-male:before {\n  content: '\\f183';\n}\n.fa-gittip:before,\n.fa-gratipay:before {\n  content: '\\f184';\n}\n.fa-sun-o:before {\n  content: '\\f185';\n}\n.fa-moon-o:before {\n  content: '\\f186';\n}\n.fa-archive:before {\n  content: '\\f187';\n}\n.fa-bug:before {\n  content: '\\f188';\n}\n.fa-vk:before {\n  content: '\\f189';\n}\n.fa-weibo:before {\n  content: '\\f18a';\n}\n.fa-renren:before {\n  content: '\\f18b';\n}\n.fa-pagelines:before {\n  content: '\\f18c';\n}\n.fa-stack-exchange:before {\n  content: '\\f18d';\n}\n.fa-arrow-circle-o-right:before {\n  content: '\\f18e';\n}\n.fa-arrow-circle-o-left:before {\n  content: '\\f190';\n}\n.fa-toggle-left:before,\n.fa-caret-square-o-left:before {\n  content: '\\f191';\n}\n.fa-dot-circle-o:before {\n  content: '\\f192';\n}\n.fa-wheelchair:before {\n  content: '\\f193';\n}\n.fa-vimeo-square:before {\n  content: '\\f194';\n}\n.fa-turkish-lira:before,\n.fa-try:before {\n  content: '\\f195';\n}\n.fa-plus-square-o:before {\n  content: '\\f196';\n}\n.fa-space-shuttle:before {\n  content: '\\f197';\n}\n.fa-slack:before {\n  content: '\\f198';\n}\n.fa-envelope-square:before {\n  content: '\\f199';\n}\n.fa-wordpress:before {\n  content: '\\f19a';\n}\n.fa-openid:before {\n  content: '\\f19b';\n}\n.fa-institution:before,\n.fa-bank:before,\n.fa-university:before {\n  content: '\\f19c';\n}\n.fa-mortar-board:before,\n.fa-graduation-cap:before {\n  content: '\\f19d';\n}\n.fa-yahoo:before {\n  content: '\\f19e';\n}\n.fa-google:before {\n  content: '\\f1a0';\n}\n.fa-reddit:before {\n  content: '\\f1a1';\n}\n.fa-reddit-square:before {\n  content: '\\f1a2';\n}\n.fa-stumbleupon-circle:before {\n  content: '\\f1a3';\n}\n.fa-stumbleupon:before {\n  content: '\\f1a4';\n}\n.fa-delicious:before {\n  content: '\\f1a5';\n}\n.fa-digg:before {\n  content: '\\f1a6';\n}\n.fa-pied-piper-pp:before {\n  content: '\\f1a7';\n}\n.fa-pied-piper-alt:before {\n  content: '\\f1a8';\n}\n.fa-drupal:before {\n  content: '\\f1a9';\n}\n.fa-joomla:before {\n  content: '\\f1aa';\n}\n.fa-language:before {\n  content: '\\f1ab';\n}\n.fa-fax:before {\n  content: '\\f1ac';\n}\n.fa-building:before {\n  content: '\\f1ad';\n}\n.fa-child:before {\n  content: '\\f1ae';\n}\n.fa-paw:before {\n  content: '\\f1b0';\n}\n.fa-spoon:before {\n  content: '\\f1b1';\n}\n.fa-cube:before {\n  content: '\\f1b2';\n}\n.fa-cubes:before {\n  content: '\\f1b3';\n}\n.fa-behance:before {\n  content: '\\f1b4';\n}\n.fa-behance-square:before {\n  content: '\\f1b5';\n}\n.fa-steam:before {\n  content: '\\f1b6';\n}\n.fa-steam-square:before {\n  content: '\\f1b7';\n}\n.fa-recycle:before {\n  content: '\\f1b8';\n}\n.fa-automobile:before,\n.fa-car:before {\n  content: '\\f1b9';\n}\n.fa-cab:before,\n.fa-taxi:before {\n  content: '\\f1ba';\n}\n.fa-tree:before {\n  content: '\\f1bb';\n}\n.fa-spotify:before {\n  content: '\\f1bc';\n}\n.fa-deviantart:before {\n  content: '\\f1bd';\n}\n.fa-soundcloud:before {\n  content: '\\f1be';\n}\n.fa-database:before {\n  content: '\\f1c0';\n}\n.fa-file-pdf-o:before {\n  content: '\\f1c1';\n}\n.fa-file-word-o:before {\n  content: '\\f1c2';\n}\n.fa-file-excel-o:before {\n  content: '\\f1c3';\n}\n.fa-file-powerpoint-o:before {\n  content: '\\f1c4';\n}\n.fa-file-photo-o:before,\n.fa-file-picture-o:before,\n.fa-file-image-o:before {\n  content: '\\f1c5';\n}\n.fa-file-zip-o:before,\n.fa-file-archive-o:before {\n  content: '\\f1c6';\n}\n.fa-file-sound-o:before,\n.fa-file-audio-o:before {\n  content: '\\f1c7';\n}\n.fa-file-movie-o:before,\n.fa-file-video-o:before {\n  content: '\\f1c8';\n}\n.fa-file-code-o:before {\n  content: '\\f1c9';\n}\n.fa-vine:before {\n  content: '\\f1ca';\n}\n.fa-codepen:before {\n  content: '\\f1cb';\n}\n.fa-jsfiddle:before {\n  content: '\\f1cc';\n}\n.fa-life-bouy:before,\n.fa-life-buoy:before,\n.fa-life-saver:before,\n.fa-support:before,\n.fa-life-ring:before {\n  content: '\\f1cd';\n}\n.fa-circle-o-notch:before {\n  content: '\\f1ce';\n}\n.fa-ra:before,\n.fa-resistance:before,\n.fa-rebel:before {\n  content: '\\f1d0';\n}\n.fa-ge:before,\n.fa-empire:before {\n  content: '\\f1d1';\n}\n.fa-git-square:before {\n  content: '\\f1d2';\n}\n.fa-git:before {\n  content: '\\f1d3';\n}\n.fa-y-combinator-square:before,\n.fa-yc-square:before,\n.fa-hacker-news:before {\n  content: '\\f1d4';\n}\n.fa-tencent-weibo:before {\n  content: '\\f1d5';\n}\n.fa-qq:before {\n  content: '\\f1d6';\n}\n.fa-wechat:before,\n.fa-weixin:before {\n  content: '\\f1d7';\n}\n.fa-send:before,\n.fa-paper-plane:before {\n  content: '\\f1d8';\n}\n.fa-send-o:before,\n.fa-paper-plane-o:before {\n  content: '\\f1d9';\n}\n.fa-history:before {\n  content: '\\f1da';\n}\n.fa-circle-thin:before {\n  content: '\\f1db';\n}\n.fa-header:before {\n  content: '\\f1dc';\n}\n.fa-paragraph:before {\n  content: '\\f1dd';\n}\n.fa-sliders:before {\n  content: '\\f1de';\n}\n.fa-share-alt:before {\n  content: '\\f1e0';\n}\n.fa-share-alt-square:before {\n  content: '\\f1e1';\n}\n.fa-bomb:before {\n  content: '\\f1e2';\n}\n.fa-soccer-ball-o:before,\n.fa-futbol-o:before {\n  content: '\\f1e3';\n}\n.fa-tty:before {\n  content: '\\f1e4';\n}\n.fa-binoculars:before {\n  content: '\\f1e5';\n}\n.fa-plug:before {\n  content: '\\f1e6';\n}\n.fa-slideshare:before {\n  content: '\\f1e7';\n}\n.fa-twitch:before {\n  content: '\\f1e8';\n}\n.fa-yelp:before {\n  content: '\\f1e9';\n}\n.fa-newspaper-o:before {\n  content: '\\f1ea';\n}\n.fa-wifi:before {\n  content: '\\f1eb';\n}\n.fa-calculator:before {\n  content: '\\f1ec';\n}\n.fa-paypal:before {\n  content: '\\f1ed';\n}\n.fa-google-wallet:before {\n  content: '\\f1ee';\n}\n.fa-cc-visa:before {\n  content: '\\f1f0';\n}\n.fa-cc-mastercard:before {\n  content: '\\f1f1';\n}\n.fa-cc-discover:before {\n  content: '\\f1f2';\n}\n.fa-cc-amex:before {\n  content: '\\f1f3';\n}\n.fa-cc-paypal:before {\n  content: '\\f1f4';\n}\n.fa-cc-stripe:before {\n  content: '\\f1f5';\n}\n.fa-bell-slash:before {\n  content: '\\f1f6';\n}\n.fa-bell-slash-o:before {\n  content: '\\f1f7';\n}\n.fa-trash:before {\n  content: '\\f1f8';\n}\n.fa-copyright:before {\n  content: '\\f1f9';\n}\n.fa-at:before {\n  content: '\\f1fa';\n}\n.fa-eyedropper:before {\n  content: '\\f1fb';\n}\n.fa-paint-brush:before {\n  content: '\\f1fc';\n}\n.fa-birthday-cake:before {\n  content: '\\f1fd';\n}\n.fa-area-chart:before {\n  content: '\\f1fe';\n}\n.fa-pie-chart:before {\n  content: '\\f200';\n}\n.fa-line-chart:before {\n  content: '\\f201';\n}\n.fa-lastfm:before {\n  content: '\\f202';\n}\n.fa-lastfm-square:before {\n  content: '\\f203';\n}\n.fa-toggle-off:before {\n  content: '\\f204';\n}\n.fa-toggle-on:before {\n  content: '\\f205';\n}\n.fa-bicycle:before {\n  content: '\\f206';\n}\n.fa-bus:before {\n  content: '\\f207';\n}\n.fa-ioxhost:before {\n  content: '\\f208';\n}\n.fa-angellist:before {\n  content: '\\f209';\n}\n.fa-cc:before {\n  content: '\\f20a';\n}\n.fa-shekel:before,\n.fa-sheqel:before,\n.fa-ils:before {\n  content: '\\f20b';\n}\n.fa-meanpath:before {\n  content: '\\f20c';\n}\n.fa-buysellads:before {\n  content: '\\f20d';\n}\n.fa-connectdevelop:before {\n  content: '\\f20e';\n}\n.fa-dashcube:before {\n  content: '\\f210';\n}\n.fa-forumbee:before {\n  content: '\\f211';\n}\n.fa-leanpub:before {\n  content: '\\f212';\n}\n.fa-sellsy:before {\n  content: '\\f213';\n}\n.fa-shirtsinbulk:before {\n  content: '\\f214';\n}\n.fa-simplybuilt:before {\n  content: '\\f215';\n}\n.fa-skyatlas:before {\n  content: '\\f216';\n}\n.fa-cart-plus:before {\n  content: '\\f217';\n}\n.fa-cart-arrow-down:before {\n  content: '\\f218';\n}\n.fa-diamond:before {\n  content: '\\f219';\n}\n.fa-ship:before {\n  content: '\\f21a';\n}\n.fa-user-secret:before {\n  content: '\\f21b';\n}\n.fa-motorcycle:before {\n  content: '\\f21c';\n}\n.fa-street-view:before {\n  content: '\\f21d';\n}\n.fa-heartbeat:before {\n  content: '\\f21e';\n}\n.fa-venus:before {\n  content: '\\f221';\n}\n.fa-mars:before {\n  content: '\\f222';\n}\n.fa-mercury:before {\n  content: '\\f223';\n}\n.fa-intersex:before,\n.fa-transgender:before {\n  content: '\\f224';\n}\n.fa-transgender-alt:before {\n  content: '\\f225';\n}\n.fa-venus-double:before {\n  content: '\\f226';\n}\n.fa-mars-double:before {\n  content: '\\f227';\n}\n.fa-venus-mars:before {\n  content: '\\f228';\n}\n.fa-mars-stroke:before {\n  content: '\\f229';\n}\n.fa-mars-stroke-v:before {\n  content: '\\f22a';\n}\n.fa-mars-stroke-h:before {\n  content: '\\f22b';\n}\n.fa-neuter:before {\n  content: '\\f22c';\n}\n.fa-genderless:before {\n  content: '\\f22d';\n}\n.fa-facebook-official:before {\n  content: '\\f230';\n}\n.fa-pinterest-p:before {\n  content: '\\f231';\n}\n.fa-whatsapp:before {\n  content: '\\f232';\n}\n.fa-server:before {\n  content: '\\f233';\n}\n.fa-user-plus:before {\n  content: '\\f234';\n}\n.fa-user-times:before {\n  content: '\\f235';\n}\n.fa-hotel:before,\n.fa-bed:before {\n  content: '\\f236';\n}\n.fa-viacoin:before {\n  content: '\\f237';\n}\n.fa-train:before {\n  content: '\\f238';\n}\n.fa-subway:before {\n  content: '\\f239';\n}\n.fa-medium:before {\n  content: '\\f23a';\n}\n.fa-yc:before,\n.fa-y-combinator:before {\n  content: '\\f23b';\n}\n.fa-optin-monster:before {\n  content: '\\f23c';\n}\n.fa-opencart:before {\n  content: '\\f23d';\n}\n.fa-expeditedssl:before {\n  content: '\\f23e';\n}\n.fa-battery-4:before,\n.fa-battery:before,\n.fa-battery-full:before {\n  content: '\\f240';\n}\n.fa-battery-3:before,\n.fa-battery-three-quarters:before {\n  content: '\\f241';\n}\n.fa-battery-2:before,\n.fa-battery-half:before {\n  content: '\\f242';\n}\n.fa-battery-1:before,\n.fa-battery-quarter:before {\n  content: '\\f243';\n}\n.fa-battery-0:before,\n.fa-battery-empty:before {\n  content: '\\f244';\n}\n.fa-mouse-pointer:before {\n  content: '\\f245';\n}\n.fa-i-cursor:before {\n  content: '\\f246';\n}\n.fa-object-group:before {\n  content: '\\f247';\n}\n.fa-object-ungroup:before {\n  content: '\\f248';\n}\n.fa-sticky-note:before {\n  content: '\\f249';\n}\n.fa-sticky-note-o:before {\n  content: '\\f24a';\n}\n.fa-cc-jcb:before {\n  content: '\\f24b';\n}\n.fa-cc-diners-club:before {\n  content: '\\f24c';\n}\n.fa-clone:before {\n  content: '\\f24d';\n}\n.fa-balance-scale:before {\n  content: '\\f24e';\n}\n.fa-hourglass-o:before {\n  content: '\\f250';\n}\n.fa-hourglass-1:before,\n.fa-hourglass-start:before {\n  content: '\\f251';\n}\n.fa-hourglass-2:before,\n.fa-hourglass-half:before {\n  content: '\\f252';\n}\n.fa-hourglass-3:before,\n.fa-hourglass-end:before {\n  content: '\\f253';\n}\n.fa-hourglass:before {\n  content: '\\f254';\n}\n.fa-hand-grab-o:before,\n.fa-hand-rock-o:before {\n  content: '\\f255';\n}\n.fa-hand-stop-o:before,\n.fa-hand-paper-o:before {\n  content: '\\f256';\n}\n.fa-hand-scissors-o:before {\n  content: '\\f257';\n}\n.fa-hand-lizard-o:before {\n  content: '\\f258';\n}\n.fa-hand-spock-o:before {\n  content: '\\f259';\n}\n.fa-hand-pointer-o:before {\n  content: '\\f25a';\n}\n.fa-hand-peace-o:before {\n  content: '\\f25b';\n}\n.fa-trademark:before {\n  content: '\\f25c';\n}\n.fa-registered:before {\n  content: '\\f25d';\n}\n.fa-creative-commons:before {\n  content: '\\f25e';\n}\n.fa-gg:before {\n  content: '\\f260';\n}\n.fa-gg-circle:before {\n  content: '\\f261';\n}\n.fa-tripadvisor:before {\n  content: '\\f262';\n}\n.fa-odnoklassniki:before {\n  content: '\\f263';\n}\n.fa-odnoklassniki-square:before {\n  content: '\\f264';\n}\n.fa-get-pocket:before {\n  content: '\\f265';\n}\n.fa-wikipedia-w:before {\n  content: '\\f266';\n}\n.fa-safari:before {\n  content: '\\f267';\n}\n.fa-chrome:before {\n  content: '\\f268';\n}\n.fa-firefox:before {\n  content: '\\f269';\n}\n.fa-opera:before {\n  content: '\\f26a';\n}\n.fa-internet-explorer:before {\n  content: '\\f26b';\n}\n.fa-tv:before,\n.fa-television:before {\n  content: '\\f26c';\n}\n.fa-contao:before {\n  content: '\\f26d';\n}\n.fa-500px:before {\n  content: '\\f26e';\n}\n.fa-amazon:before {\n  content: '\\f270';\n}\n.fa-calendar-plus-o:before {\n  content: '\\f271';\n}\n.fa-calendar-minus-o:before {\n  content: '\\f272';\n}\n.fa-calendar-times-o:before {\n  content: '\\f273';\n}\n.fa-calendar-check-o:before {\n  content: '\\f274';\n}\n.fa-industry:before {\n  content: '\\f275';\n}\n.fa-map-pin:before {\n  content: '\\f276';\n}\n.fa-map-signs:before {\n  content: '\\f277';\n}\n.fa-map-o:before {\n  content: '\\f278';\n}\n.fa-map:before {\n  content: '\\f279';\n}\n.fa-commenting:before {\n  content: '\\f27a';\n}\n.fa-commenting-o:before {\n  content: '\\f27b';\n}\n.fa-houzz:before {\n  content: '\\f27c';\n}\n.fa-vimeo:before {\n  content: '\\f27d';\n}\n.fa-black-tie:before {\n  content: '\\f27e';\n}\n.fa-fonticons:before {\n  content: '\\f280';\n}\n.fa-reddit-alien:before {\n  content: '\\f281';\n}\n.fa-edge:before {\n  content: '\\f282';\n}\n.fa-credit-card-alt:before {\n  content: '\\f283';\n}\n.fa-codiepie:before {\n  content: '\\f284';\n}\n.fa-modx:before {\n  content: '\\f285';\n}\n.fa-fort-awesome:before {\n  content: '\\f286';\n}\n.fa-usb:before {\n  content: '\\f287';\n}\n.fa-product-hunt:before {\n  content: '\\f288';\n}\n.fa-mixcloud:before {\n  content: '\\f289';\n}\n.fa-scribd:before {\n  content: '\\f28a';\n}\n.fa-pause-circle:before {\n  content: '\\f28b';\n}\n.fa-pause-circle-o:before {\n  content: '\\f28c';\n}\n.fa-stop-circle:before {\n  content: '\\f28d';\n}\n.fa-stop-circle-o:before {\n  content: '\\f28e';\n}\n.fa-shopping-bag:before {\n  content: '\\f290';\n}\n.fa-shopping-basket:before {\n  content: '\\f291';\n}\n.fa-hashtag:before {\n  content: '\\f292';\n}\n.fa-bluetooth:before {\n  content: '\\f293';\n}\n.fa-bluetooth-b:before {\n  content: '\\f294';\n}\n.fa-percent:before {\n  content: '\\f295';\n}\n.fa-gitlab:before {\n  content: '\\f296';\n}\n.fa-wpbeginner:before {\n  content: '\\f297';\n}\n.fa-wpforms:before {\n  content: '\\f298';\n}\n.fa-envira:before {\n  content: '\\f299';\n}\n.fa-universal-access:before {\n  content: '\\f29a';\n}\n.fa-wheelchair-alt:before {\n  content: '\\f29b';\n}\n.fa-question-circle-o:before {\n  content: '\\f29c';\n}\n.fa-blind:before {\n  content: '\\f29d';\n}\n.fa-audio-description:before {\n  content: '\\f29e';\n}\n.fa-volume-control-phone:before {\n  content: '\\f2a0';\n}\n.fa-braille:before {\n  content: '\\f2a1';\n}\n.fa-assistive-listening-systems:before {\n  content: '\\f2a2';\n}\n.fa-asl-interpreting:before,\n.fa-american-sign-language-interpreting:before {\n  content: '\\f2a3';\n}\n.fa-deafness:before,\n.fa-hard-of-hearing:before,\n.fa-deaf:before {\n  content: '\\f2a4';\n}\n.fa-glide:before {\n  content: '\\f2a5';\n}\n.fa-glide-g:before {\n  content: '\\f2a6';\n}\n.fa-signing:before,\n.fa-sign-language:before {\n  content: '\\f2a7';\n}\n.fa-low-vision:before {\n  content: '\\f2a8';\n}\n.fa-viadeo:before {\n  content: '\\f2a9';\n}\n.fa-viadeo-square:before {\n  content: '\\f2aa';\n}\n.fa-snapchat:before {\n  content: '\\f2ab';\n}\n.fa-snapchat-ghost:before {\n  content: '\\f2ac';\n}\n.fa-snapchat-square:before {\n  content: '\\f2ad';\n}\n.fa-pied-piper:before {\n  content: '\\f2ae';\n}\n.fa-first-order:before {\n  content: '\\f2b0';\n}\n.fa-yoast:before {\n  content: '\\f2b1';\n}\n.fa-themeisle:before {\n  content: '\\f2b2';\n}\n.fa-google-plus-circle:before,\n.fa-google-plus-official:before {\n  content: '\\f2b3';\n}\n.fa-fa:before,\n.fa-font-awesome:before {\n  content: '\\f2b4';\n}\n.fa-handshake-o:before {\n  content: '\\f2b5';\n}\n.fa-envelope-open:before {\n  content: '\\f2b6';\n}\n.fa-envelope-open-o:before {\n  content: '\\f2b7';\n}\n.fa-linode:before {\n  content: '\\f2b8';\n}\n.fa-address-book:before {\n  content: '\\f2b9';\n}\n.fa-address-book-o:before {\n  content: '\\f2ba';\n}\n.fa-vcard:before,\n.fa-address-card:before {\n  content: '\\f2bb';\n}\n.fa-vcard-o:before,\n.fa-address-card-o:before {\n  content: '\\f2bc';\n}\n.fa-user-circle:before {\n  content: '\\f2bd';\n}\n.fa-user-circle-o:before {\n  content: '\\f2be';\n}\n.fa-user-o:before {\n  content: '\\f2c0';\n}\n.fa-id-badge:before {\n  content: '\\f2c1';\n}\n.fa-drivers-license:before,\n.fa-id-card:before {\n  content: '\\f2c2';\n}\n.fa-drivers-license-o:before,\n.fa-id-card-o:before {\n  content: '\\f2c3';\n}\n.fa-quora:before {\n  content: '\\f2c4';\n}\n.fa-free-code-camp:before {\n  content: '\\f2c5';\n}\n.fa-telegram:before {\n  content: '\\f2c6';\n}\n.fa-thermometer-4:before,\n.fa-thermometer:before,\n.fa-thermometer-full:before {\n  content: '\\f2c7';\n}\n.fa-thermometer-3:before,\n.fa-thermometer-three-quarters:before {\n  content: '\\f2c8';\n}\n.fa-thermometer-2:before,\n.fa-thermometer-half:before {\n  content: '\\f2c9';\n}\n.fa-thermometer-1:before,\n.fa-thermometer-quarter:before {\n  content: '\\f2ca';\n}\n.fa-thermometer-0:before,\n.fa-thermometer-empty:before {\n  content: '\\f2cb';\n}\n.fa-shower:before {\n  content: '\\f2cc';\n}\n.fa-bathtub:before,\n.fa-s15:before,\n.fa-bath:before {\n  content: '\\f2cd';\n}\n.fa-podcast:before {\n  content: '\\f2ce';\n}\n.fa-window-maximize:before {\n  content: '\\f2d0';\n}\n.fa-window-minimize:before {\n  content: '\\f2d1';\n}\n.fa-window-restore:before {\n  content: '\\f2d2';\n}\n.fa-times-rectangle:before,\n.fa-window-close:before {\n  content: '\\f2d3';\n}\n.fa-times-rectangle-o:before,\n.fa-window-close-o:before {\n  content: '\\f2d4';\n}\n.fa-bandcamp:before {\n  content: '\\f2d5';\n}\n.fa-grav:before {\n  content: '\\f2d6';\n}\n.fa-etsy:before {\n  content: '\\f2d7';\n}\n.fa-imdb:before {\n  content: '\\f2d8';\n}\n.fa-ravelry:before {\n  content: '\\f2d9';\n}\n.fa-eercast:before {\n  content: '\\f2da';\n}\n.fa-microchip:before {\n  content: '\\f2db';\n}\n.fa-snowflake-o:before {\n  content: '\\f2dc';\n}\n.fa-superpowers:before {\n  content: '\\f2dd';\n}\n.fa-wpexplorer:before {\n  content: '\\f2de';\n}\n.fa-meetup:before {\n  content: '\\f2e0';\n}\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  border: 0;\n}\n.sr-only-focusable:active,\n.sr-only-focusable:focus {\n  position: static;\n  width: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  clip: auto;\n}\n.sr-only-focusable:active,\n.sr-only-focusable:focus {\n  position: static;\n  width: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  clip: auto;\n}\n/*!\n*\n* IPython base\n*\n*/\n.modal.fade .modal-dialog {\n  -webkit-transform: translate(0, 0);\n  -ms-transform: translate(0, 0);\n  -o-transform: translate(0, 0);\n  transform: translate(0, 0);\n}\ncode {\n  color: #000;\n}\npre {\n  font-size: inherit;\n  line-height: inherit;\n}\nlabel {\n  font-weight: normal;\n}\n/* Make the page background atleast 100% the height of the view port */\n/* Make the page itself atleast 70% the height of the view port */\n.border-box-sizing {\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n}\n.corner-all {\n  border-radius: 2px;\n}\n.no-padding {\n  padding: 0px;\n}\n/* Flexible box model classes */\n/* Taken from Alex Russell http://infrequently.org/2009/08/css-3-progress/ */\n/* This file is a compatability layer.  It allows the usage of flexible box \nmodel layouts accross multiple browsers, including older browsers.  The newest,\nuniversal implementation of the flexible box model is used when available (see\n`Modern browsers` comments below).  Browsers that are known to implement this \nnew spec completely include:\n\n    Firefox 28.0+\n    Chrome 29.0+\n    Internet Explorer 11+ \n    Opera 17.0+\n\nBrowsers not listed, including Safari, are supported via the styling under the\n`Old browsers` comments below.\n*/\n.hbox {\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: horizontal;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: horizontal;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: horizontal;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n}\n.hbox > * {\n  /* Old browsers */\n  -webkit-box-flex: 0;\n  -moz-box-flex: 0;\n  box-flex: 0;\n  /* Modern browsers */\n  flex: none;\n}\n.vbox {\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: vertical;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: vertical;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n.vbox > * {\n  /* Old browsers */\n  -webkit-box-flex: 0;\n  -moz-box-flex: 0;\n  box-flex: 0;\n  /* Modern browsers */\n  flex: none;\n}\n.hbox.reverse,\n.vbox.reverse,\n.reverse {\n  /* Old browsers */\n  -webkit-box-direction: reverse;\n  -moz-box-direction: reverse;\n  box-direction: reverse;\n  /* Modern browsers */\n  flex-direction: row-reverse;\n}\n.hbox.box-flex0,\n.vbox.box-flex0,\n.box-flex0 {\n  /* Old browsers */\n  -webkit-box-flex: 0;\n  -moz-box-flex: 0;\n  box-flex: 0;\n  /* Modern browsers */\n  flex: none;\n  width: auto;\n}\n.hbox.box-flex1,\n.vbox.box-flex1,\n.box-flex1 {\n  /* Old browsers */\n  -webkit-box-flex: 1;\n  -moz-box-flex: 1;\n  box-flex: 1;\n  /* Modern browsers */\n  flex: 1;\n}\n.hbox.box-flex,\n.vbox.box-flex,\n.box-flex {\n  /* Old browsers */\n  /* Old browsers */\n  -webkit-box-flex: 1;\n  -moz-box-flex: 1;\n  box-flex: 1;\n  /* Modern browsers */\n  flex: 1;\n}\n.hbox.box-flex2,\n.vbox.box-flex2,\n.box-flex2 {\n  /* Old browsers */\n  -webkit-box-flex: 2;\n  -moz-box-flex: 2;\n  box-flex: 2;\n  /* Modern browsers */\n  flex: 2;\n}\n.box-group1 {\n  /*  Deprecated */\n  -webkit-box-flex-group: 1;\n  -moz-box-flex-group: 1;\n  box-flex-group: 1;\n}\n.box-group2 {\n  /* Deprecated */\n  -webkit-box-flex-group: 2;\n  -moz-box-flex-group: 2;\n  box-flex-group: 2;\n}\n.hbox.start,\n.vbox.start,\n.start {\n  /* Old browsers */\n  -webkit-box-pack: start;\n  -moz-box-pack: start;\n  box-pack: start;\n  /* Modern browsers */\n  justify-content: flex-start;\n}\n.hbox.end,\n.vbox.end,\n.end {\n  /* Old browsers */\n  -webkit-box-pack: end;\n  -moz-box-pack: end;\n  box-pack: end;\n  /* Modern browsers */\n  justify-content: flex-end;\n}\n.hbox.center,\n.vbox.center,\n.center {\n  /* Old browsers */\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  box-pack: center;\n  /* Modern browsers */\n  justify-content: center;\n}\n.hbox.baseline,\n.vbox.baseline,\n.baseline {\n  /* Old browsers */\n  -webkit-box-pack: baseline;\n  -moz-box-pack: baseline;\n  box-pack: baseline;\n  /* Modern browsers */\n  justify-content: baseline;\n}\n.hbox.stretch,\n.vbox.stretch,\n.stretch {\n  /* Old browsers */\n  -webkit-box-pack: stretch;\n  -moz-box-pack: stretch;\n  box-pack: stretch;\n  /* Modern browsers */\n  justify-content: stretch;\n}\n.hbox.align-start,\n.vbox.align-start,\n.align-start {\n  /* Old browsers */\n  -webkit-box-align: start;\n  -moz-box-align: start;\n  box-align: start;\n  /* Modern browsers */\n  align-items: flex-start;\n}\n.hbox.align-end,\n.vbox.align-end,\n.align-end {\n  /* Old browsers */\n  -webkit-box-align: end;\n  -moz-box-align: end;\n  box-align: end;\n  /* Modern browsers */\n  align-items: flex-end;\n}\n.hbox.align-center,\n.vbox.align-center,\n.align-center {\n  /* Old browsers */\n  -webkit-box-align: center;\n  -moz-box-align: center;\n  box-align: center;\n  /* Modern browsers */\n  align-items: center;\n}\n.hbox.align-baseline,\n.vbox.align-baseline,\n.align-baseline {\n  /* Old browsers */\n  -webkit-box-align: baseline;\n  -moz-box-align: baseline;\n  box-align: baseline;\n  /* Modern browsers */\n  align-items: baseline;\n}\n.hbox.align-stretch,\n.vbox.align-stretch,\n.align-stretch {\n  /* Old browsers */\n  -webkit-box-align: stretch;\n  -moz-box-align: stretch;\n  box-align: stretch;\n  /* Modern browsers */\n  align-items: stretch;\n}\ndiv.error {\n  margin: 2em;\n  text-align: center;\n}\ndiv.error > h1 {\n  font-size: 500%;\n  line-height: normal;\n}\ndiv.error > p {\n  font-size: 200%;\n  line-height: normal;\n}\ndiv.traceback-wrapper {\n  text-align: left;\n  max-width: 800px;\n  margin: auto;\n}\ndiv.traceback-wrapper pre.traceback {\n  max-height: 600px;\n  overflow: auto;\n}\n/**\n * Primary styles\n *\n * Author: Jupyter Development Team\n */\nbody {\n  background-color: #fff;\n  /* This makes sure that the body covers the entire window and needs to\n       be in a different element than the display: box in wrapper below */\n  position: absolute;\n  left: 0px;\n  right: 0px;\n  top: 0px;\n  bottom: 0px;\n  overflow: visible;\n}\nbody > #header {\n  /* Initially hidden to prevent FLOUC */\n  display: none;\n  background-color: #fff;\n  /* Display over codemirror */\n  position: relative;\n  z-index: 100;\n}\nbody > #header #header-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  padding: 5px;\n  padding-bottom: 5px;\n  padding-top: 5px;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n}\nbody > #header .header-bar {\n  width: 100%;\n  height: 1px;\n  background: #e7e7e7;\n  margin-bottom: -1px;\n}\n@media print {\n  body > #header {\n    display: none !important;\n  }\n}\n#header-spacer {\n  width: 100%;\n  visibility: hidden;\n}\n@media print {\n  #header-spacer {\n    display: none;\n  }\n}\n#ipython_notebook {\n  padding-left: 0px;\n  padding-top: 1px;\n  padding-bottom: 1px;\n}\n[dir='rtl'] #ipython_notebook {\n  margin-right: 10px;\n  margin-left: 0;\n}\n[dir='rtl'] #ipython_notebook.pull-left {\n  float: right !important;\n  float: right;\n}\n.flex-spacer {\n  flex: 1;\n}\n#noscript {\n  width: auto;\n  padding-top: 16px;\n  padding-bottom: 16px;\n  text-align: center;\n  font-size: 22px;\n  color: red;\n  font-weight: bold;\n}\n#ipython_notebook img {\n  height: 28px;\n}\n#site {\n  width: 100%;\n  display: none;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  overflow: auto;\n}\n@media print {\n  #site {\n    height: auto !important;\n  }\n}\n/* Smaller buttons */\n.ui-button .ui-button-text {\n  padding: 0.2em 0.8em;\n  font-size: 77%;\n}\ninput.ui-button {\n  padding: 0.3em 0.9em;\n}\nspan#kernel_logo_widget {\n  margin: 0 10px;\n}\nspan#login_widget {\n  float: right;\n}\n[dir='rtl'] span#login_widget {\n  float: left;\n}\nspan#login_widget > .button,\n#logout {\n  color: #333;\n  background-color: #fff;\n  border-color: #ccc;\n}\nspan#login_widget > .button:focus,\n#logout:focus,\nspan#login_widget > .button.focus,\n#logout.focus {\n  color: #333;\n  background-color: #e6e6e6;\n  border-color: #8c8c8c;\n}\nspan#login_widget > .button:hover,\n#logout:hover {\n  color: #333;\n  background-color: #e6e6e6;\n  border-color: #adadad;\n}\nspan#login_widget > .button:active,\n#logout:active,\nspan#login_widget > .button.active,\n#logout.active,\n.open > .dropdown-togglespan#login_widget > .button,\n.open > .dropdown-toggle#logout {\n  color: #333;\n  background-color: #e6e6e6;\n  border-color: #adadad;\n}\nspan#login_widget > .button:active:hover,\n#logout:active:hover,\nspan#login_widget > .button.active:hover,\n#logout.active:hover,\n.open > .dropdown-togglespan#login_widget > .button:hover,\n.open > .dropdown-toggle#logout:hover,\nspan#login_widget > .button:active:focus,\n#logout:active:focus,\nspan#login_widget > .button.active:focus,\n#logout.active:focus,\n.open > .dropdown-togglespan#login_widget > .button:focus,\n.open > .dropdown-toggle#logout:focus,\nspan#login_widget > .button:active.focus,\n#logout:active.focus,\nspan#login_widget > .button.active.focus,\n#logout.active.focus,\n.open > .dropdown-togglespan#login_widget > .button.focus,\n.open > .dropdown-toggle#logout.focus {\n  color: #333;\n  background-color: #d4d4d4;\n  border-color: #8c8c8c;\n}\nspan#login_widget > .button:active,\n#logout:active,\nspan#login_widget > .button.active,\n#logout.active,\n.open > .dropdown-togglespan#login_widget > .button,\n.open > .dropdown-toggle#logout {\n  background-image: none;\n}\nspan#login_widget > .button.disabled:hover,\n#logout.disabled:hover,\nspan#login_widget > .button[disabled]:hover,\n#logout[disabled]:hover,\nfieldset[disabled] span#login_widget > .button:hover,\nfieldset[disabled] #logout:hover,\nspan#login_widget > .button.disabled:focus,\n#logout.disabled:focus,\nspan#login_widget > .button[disabled]:focus,\n#logout[disabled]:focus,\nfieldset[disabled] span#login_widget > .button:focus,\nfieldset[disabled] #logout:focus,\nspan#login_widget > .button.disabled.focus,\n#logout.disabled.focus,\nspan#login_widget > .button[disabled].focus,\n#logout[disabled].focus,\nfieldset[disabled] span#login_widget > .button.focus,\nfieldset[disabled] #logout.focus {\n  background-color: #fff;\n  border-color: #ccc;\n}\nspan#login_widget > .button .badge,\n#logout .badge {\n  color: #fff;\n  background-color: #333;\n}\n.nav-header {\n  text-transform: none;\n}\n#header > span {\n  margin-top: 10px;\n}\n.modal_stretch .modal-dialog {\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: vertical;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: vertical;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  min-height: 80vh;\n}\n.modal_stretch .modal-dialog .modal-body {\n  max-height: calc(100vh - 200px);\n  overflow: auto;\n  flex: 1;\n}\n.modal-header {\n  cursor: move;\n}\n@media (min-width: 768px) {\n  .modal .modal-dialog {\n    width: 700px;\n  }\n}\n@media (min-width: 768px) {\n  select.form-control {\n    margin-left: 12px;\n    margin-right: 12px;\n  }\n}\n/*!\n*\n* IPython auth\n*\n*/\n.center-nav {\n  display: inline-block;\n  margin-bottom: -4px;\n}\n[dir='rtl'] .center-nav form.pull-left {\n  float: right !important;\n  float: right;\n}\n[dir='rtl'] .center-nav .navbar-text {\n  float: right;\n}\n[dir='rtl'] .navbar-inner {\n  text-align: right;\n}\n[dir='rtl'] div.text-left {\n  text-align: right;\n}\n/*!\n*\n* IPython tree view\n*\n*/\n/* We need an invisible input field on top of the sentense*/\n/* 'Drag file onto the list ...' */\n.alternate_upload {\n  background-color: none;\n  display: inline;\n}\n.alternate_upload.form {\n  padding: 0;\n  margin: 0;\n}\n.alternate_upload input.fileinput {\n  position: absolute;\n  display: block;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  cursor: pointer;\n  opacity: 0;\n  z-index: 2;\n}\n.alternate_upload .btn-xs > input.fileinput {\n  margin: -1px -5px;\n}\n.alternate_upload .btn-upload {\n  position: relative;\n  height: 22px;\n}\n::-webkit-file-upload-button {\n  cursor: pointer;\n}\n/**\n * Primary styles\n *\n * Author: Jupyter Development Team\n */\nul#tabs {\n  margin-bottom: 4px;\n}\nul#tabs a {\n  padding-top: 6px;\n  padding-bottom: 4px;\n}\n[dir='rtl'] ul#tabs.nav-tabs > li {\n  float: right;\n}\n[dir='rtl'] ul#tabs.nav.nav-tabs {\n  padding-right: 0;\n}\nul.breadcrumb a:focus,\nul.breadcrumb a:hover {\n  text-decoration: none;\n}\nul.breadcrumb i.icon-home {\n  font-size: 16px;\n  margin-right: 4px;\n}\nul.breadcrumb span {\n  color: #5e5e5e;\n}\n.list_toolbar {\n  padding: 4px 0 4px 0;\n  vertical-align: middle;\n}\n.list_toolbar .tree-buttons {\n  padding-top: 1px;\n}\n[dir='rtl'] .list_toolbar .tree-buttons .pull-right {\n  float: left !important;\n  float: left;\n}\n[dir='rtl'] .list_toolbar .col-sm-4,\n[dir='rtl'] .list_toolbar .col-sm-8 {\n  float: right;\n}\n.dynamic-buttons {\n  padding-top: 3px;\n  display: inline-block;\n}\n.list_toolbar [class*='span'] {\n  min-height: 24px;\n}\n.list_header {\n  font-weight: bold;\n  background-color: #EEE;\n}\n.list_placeholder {\n  font-weight: bold;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 7px;\n  padding-right: 7px;\n}\n.list_container {\n  margin-top: 4px;\n  margin-bottom: 20px;\n  border: 1px solid #ddd;\n  border-radius: 2px;\n}\n.list_container > div {\n  border-bottom: 1px solid #ddd;\n}\n.list_container > div:hover .list-item {\n  background-color: red;\n}\n.list_container > div:last-child {\n  border: none;\n}\n.list_item:hover .list_item {\n  background-color: #ddd;\n}\n.list_item a {\n  text-decoration: none;\n}\n.list_item:hover {\n  background-color: #fafafa;\n}\n.list_header > div,\n.list_item > div {\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 7px;\n  padding-right: 7px;\n  line-height: 22px;\n}\n.list_header > div input,\n.list_item > div input {\n  margin-right: 7px;\n  margin-left: 14px;\n  vertical-align: text-bottom;\n  line-height: 22px;\n  position: relative;\n  top: -1px;\n}\n.list_header > div .item_link,\n.list_item > div .item_link {\n  margin-left: -1px;\n  vertical-align: baseline;\n  line-height: 22px;\n}\n[dir='rtl'] .list_item > div input {\n  margin-right: 0;\n}\n.new-file input[type=checkbox] {\n  visibility: hidden;\n}\n.item_name {\n  line-height: 22px;\n  height: 24px;\n}\n.item_icon {\n  font-size: 14px;\n  color: #5e5e5e;\n  margin-right: 7px;\n  margin-left: 7px;\n  line-height: 22px;\n  vertical-align: baseline;\n}\n.item_modified {\n  margin-right: 7px;\n  margin-left: 7px;\n}\n[dir='rtl'] .item_modified.pull-right {\n  float: left !important;\n  float: left;\n}\n.item_buttons {\n  line-height: 1em;\n  margin-left: -5px;\n}\n.item_buttons .btn,\n.item_buttons .btn-group,\n.item_buttons .input-group {\n  float: left;\n}\n.item_buttons > .btn,\n.item_buttons > .btn-group,\n.item_buttons > .input-group {\n  margin-left: 5px;\n}\n.item_buttons .btn {\n  min-width: 13ex;\n}\n.item_buttons .running-indicator {\n  padding-top: 4px;\n  color: #5cb85c;\n}\n.item_buttons .kernel-name {\n  padding-top: 4px;\n  color: #5bc0de;\n  margin-right: 7px;\n  float: left;\n}\n[dir='rtl'] .item_buttons.pull-right {\n  float: left !important;\n  float: left;\n}\n[dir='rtl'] .item_buttons .kernel-name {\n  margin-left: 7px;\n  float: right;\n}\n.toolbar_info {\n  height: 24px;\n  line-height: 24px;\n}\n.list_item input:not([type=checkbox]) {\n  padding-top: 3px;\n  padding-bottom: 3px;\n  height: 22px;\n  line-height: 14px;\n  margin: 0px;\n}\n.highlight_text {\n  color: blue;\n}\n#project_name {\n  display: inline-block;\n  padding-left: 7px;\n  margin-left: -2px;\n}\n#project_name > .breadcrumb {\n  padding: 0px;\n  margin-bottom: 0px;\n  background-color: transparent;\n  font-weight: bold;\n}\n.sort_button {\n  display: inline-block;\n  padding-left: 7px;\n}\n[dir='rtl'] .sort_button.pull-right {\n  float: left !important;\n  float: left;\n}\n#tree-selector {\n  padding-right: 0px;\n}\n#button-select-all {\n  min-width: 50px;\n}\n[dir='rtl'] #button-select-all.btn {\n  float: right ;\n}\n#select-all {\n  margin-left: 7px;\n  margin-right: 2px;\n  margin-top: 2px;\n  height: 16px;\n}\n[dir='rtl'] #select-all.pull-left {\n  float: right !important;\n  float: right;\n}\n.menu_icon {\n  margin-right: 2px;\n}\n.tab-content .row {\n  margin-left: 0px;\n  margin-right: 0px;\n}\n.folder_icon:before {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: '\\f114';\n}\n.folder_icon:before.fa-pull-left {\n  margin-right: .3em;\n}\n.folder_icon:before.fa-pull-right {\n  margin-left: .3em;\n}\n.folder_icon:before.pull-left {\n  margin-right: .3em;\n}\n.folder_icon:before.pull-right {\n  margin-left: .3em;\n}\n.notebook_icon:before {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: '\\f02d';\n  position: relative;\n  top: -1px;\n}\n.notebook_icon:before.fa-pull-left {\n  margin-right: .3em;\n}\n.notebook_icon:before.fa-pull-right {\n  margin-left: .3em;\n}\n.notebook_icon:before.pull-left {\n  margin-right: .3em;\n}\n.notebook_icon:before.pull-right {\n  margin-left: .3em;\n}\n.running_notebook_icon:before {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: '\\f02d';\n  position: relative;\n  top: -1px;\n  color: #5cb85c;\n}\n.running_notebook_icon:before.fa-pull-left {\n  margin-right: .3em;\n}\n.running_notebook_icon:before.fa-pull-right {\n  margin-left: .3em;\n}\n.running_notebook_icon:before.pull-left {\n  margin-right: .3em;\n}\n.running_notebook_icon:before.pull-right {\n  margin-left: .3em;\n}\n.file_icon:before {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: '\\f016';\n  position: relative;\n  top: -2px;\n}\n.file_icon:before.fa-pull-left {\n  margin-right: .3em;\n}\n.file_icon:before.fa-pull-right {\n  margin-left: .3em;\n}\n.file_icon:before.pull-left {\n  margin-right: .3em;\n}\n.file_icon:before.pull-right {\n  margin-left: .3em;\n}\n#notebook_toolbar .pull-right {\n  padding-top: 0px;\n  margin-right: -1px;\n}\nul#new-menu {\n  left: auto;\n  right: 0;\n}\n#new-menu .dropdown-header {\n  font-size: 10px;\n  border-bottom: 1px solid #e5e5e5;\n  padding: 0 0 3px;\n  margin: -3px 20px 0;\n}\n.kernel-menu-icon {\n  padding-right: 12px;\n  width: 24px;\n  content: '\\f096';\n}\n.kernel-menu-icon:before {\n  content: '\\f096';\n}\n.kernel-menu-icon-current:before {\n  content: '\\f00c';\n}\n#tab_content {\n  padding-top: 20px;\n}\n#running .panel-group .panel {\n  margin-top: 3px;\n  margin-bottom: 1em;\n}\n#running .panel-group .panel .panel-heading {\n  background-color: #EEE;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 7px;\n  padding-right: 7px;\n  line-height: 22px;\n}\n#running .panel-group .panel .panel-heading a:focus,\n#running .panel-group .panel .panel-heading a:hover {\n  text-decoration: none;\n}\n#running .panel-group .panel .panel-body {\n  padding: 0px;\n}\n#running .panel-group .panel .panel-body .list_container {\n  margin-top: 0px;\n  margin-bottom: 0px;\n  border: 0px;\n  border-radius: 0px;\n}\n#running .panel-group .panel .panel-body .list_container .list_item {\n  border-bottom: 1px solid #ddd;\n}\n#running .panel-group .panel .panel-body .list_container .list_item:last-child {\n  border-bottom: 0px;\n}\n.delete-button {\n  display: none;\n}\n.duplicate-button {\n  display: none;\n}\n.rename-button {\n  display: none;\n}\n.move-button {\n  display: none;\n}\n.download-button {\n  display: none;\n}\n.shutdown-button {\n  display: none;\n}\n.dynamic-instructions {\n  display: inline-block;\n  padding-top: 4px;\n}\n/*!\n*\n* IPython text editor webapp\n*\n*/\n.selected-keymap i.fa {\n  padding: 0px 5px;\n}\n.selected-keymap i.fa:before {\n  content: '\\f00c';\n}\n#mode-menu {\n  overflow: auto;\n  max-height: 20em;\n}\n.edit_app #header {\n  -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);\n  box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);\n}\n.edit_app #menubar .navbar {\n  /* Use a negative 1 bottom margin, so the border overlaps the border of the\n    header */\n  margin-bottom: -1px;\n}\n.dirty-indicator {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  width: 20px;\n}\n.dirty-indicator.fa-pull-left {\n  margin-right: .3em;\n}\n.dirty-indicator.fa-pull-right {\n  margin-left: .3em;\n}\n.dirty-indicator.pull-left {\n  margin-right: .3em;\n}\n.dirty-indicator.pull-right {\n  margin-left: .3em;\n}\n.dirty-indicator-dirty {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  width: 20px;\n}\n.dirty-indicator-dirty.fa-pull-left {\n  margin-right: .3em;\n}\n.dirty-indicator-dirty.fa-pull-right {\n  margin-left: .3em;\n}\n.dirty-indicator-dirty.pull-left {\n  margin-right: .3em;\n}\n.dirty-indicator-dirty.pull-right {\n  margin-left: .3em;\n}\n.dirty-indicator-clean {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  width: 20px;\n}\n.dirty-indicator-clean.fa-pull-left {\n  margin-right: .3em;\n}\n.dirty-indicator-clean.fa-pull-right {\n  margin-left: .3em;\n}\n.dirty-indicator-clean.pull-left {\n  margin-right: .3em;\n}\n.dirty-indicator-clean.pull-right {\n  margin-left: .3em;\n}\n.dirty-indicator-clean:before {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: '\\f00c';\n}\n.dirty-indicator-clean:before.fa-pull-left {\n  margin-right: .3em;\n}\n.dirty-indicator-clean:before.fa-pull-right {\n  margin-left: .3em;\n}\n.dirty-indicator-clean:before.pull-left {\n  margin-right: .3em;\n}\n.dirty-indicator-clean:before.pull-right {\n  margin-left: .3em;\n}\n#filename {\n  font-size: 16pt;\n  display: table;\n  padding: 0px 5px;\n}\n#current-mode {\n  padding-left: 5px;\n  padding-right: 5px;\n}\n#texteditor-backdrop {\n  padding-top: 20px;\n  padding-bottom: 20px;\n}\n@media not print {\n  #texteditor-backdrop {\n    background-color: #EEE;\n  }\n}\n@media print {\n  #texteditor-backdrop #texteditor-container .CodeMirror-gutter,\n  #texteditor-backdrop #texteditor-container .CodeMirror-gutters {\n    background-color: #fff;\n  }\n}\n@media not print {\n  #texteditor-backdrop #texteditor-container .CodeMirror-gutter,\n  #texteditor-backdrop #texteditor-container .CodeMirror-gutters {\n    background-color: #fff;\n  }\n}\n@media not print {\n  #texteditor-backdrop #texteditor-container {\n    padding: 0px;\n    background-color: #fff;\n    -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);\n    box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);\n  }\n}\n.CodeMirror-dialog {\n  background-color: #fff;\n}\n/*!\n*\n* IPython notebook\n*\n*/\n/* CSS font colors for translated ANSI escape sequences */\n/* The color values are a mix of\n   http://www.xcolors.net/dl/baskerville-ivorylight and\n   http://www.xcolors.net/dl/euphrasia */\n.ansi-black-fg {\n  color: #3E424D;\n}\n.ansi-black-bg {\n  background-color: #3E424D;\n}\n.ansi-black-intense-fg {\n  color: #282C36;\n}\n.ansi-black-intense-bg {\n  background-color: #282C36;\n}\n.ansi-red-fg {\n  color: #E75C58;\n}\n.ansi-red-bg {\n  background-color: #E75C58;\n}\n.ansi-red-intense-fg {\n  color: #B22B31;\n}\n.ansi-red-intense-bg {\n  background-color: #B22B31;\n}\n.ansi-green-fg {\n  color: #00A250;\n}\n.ansi-green-bg {\n  background-color: #00A250;\n}\n.ansi-green-intense-fg {\n  color: #007427;\n}\n.ansi-green-intense-bg {\n  background-color: #007427;\n}\n.ansi-yellow-fg {\n  color: #DDB62B;\n}\n.ansi-yellow-bg {\n  background-color: #DDB62B;\n}\n.ansi-yellow-intense-fg {\n  color: #B27D12;\n}\n.ansi-yellow-intense-bg {\n  background-color: #B27D12;\n}\n.ansi-blue-fg {\n  color: #208FFB;\n}\n.ansi-blue-bg {\n  background-color: #208FFB;\n}\n.ansi-blue-intense-fg {\n  color: #0065CA;\n}\n.ansi-blue-intense-bg {\n  background-color: #0065CA;\n}\n.ansi-magenta-fg {\n  color: #D160C4;\n}\n.ansi-magenta-bg {\n  background-color: #D160C4;\n}\n.ansi-magenta-intense-fg {\n  color: #A03196;\n}\n.ansi-magenta-intense-bg {\n  background-color: #A03196;\n}\n.ansi-cyan-fg {\n  color: #60C6C8;\n}\n.ansi-cyan-bg {\n  background-color: #60C6C8;\n}\n.ansi-cyan-intense-fg {\n  color: #258F8F;\n}\n.ansi-cyan-intense-bg {\n  background-color: #258F8F;\n}\n.ansi-white-fg {\n  color: #C5C1B4;\n}\n.ansi-white-bg {\n  background-color: #C5C1B4;\n}\n.ansi-white-intense-fg {\n  color: #A1A6B2;\n}\n.ansi-white-intense-bg {\n  background-color: #A1A6B2;\n}\n.ansi-default-inverse-fg {\n  color: #FFFFFF;\n}\n.ansi-default-inverse-bg {\n  background-color: #000000;\n}\n.ansi-bold {\n  font-weight: bold;\n}\n.ansi-underline {\n  text-decoration: underline;\n}\n/* The following styles are deprecated an will be removed in a future version */\n.ansibold {\n  font-weight: bold;\n}\n.ansi-inverse {\n  outline: 0.5px dotted;\n}\n/* use dark versions for foreground, to improve visibility */\n.ansiblack {\n  color: black;\n}\n.ansired {\n  color: darkred;\n}\n.ansigreen {\n  color: darkgreen;\n}\n.ansiyellow {\n  color: #c4a000;\n}\n.ansiblue {\n  color: darkblue;\n}\n.ansipurple {\n  color: darkviolet;\n}\n.ansicyan {\n  color: steelblue;\n}\n.ansigray {\n  color: gray;\n}\n/* and light for background, for the same reason */\n.ansibgblack {\n  background-color: black;\n}\n.ansibgred {\n  background-color: red;\n}\n.ansibggreen {\n  background-color: green;\n}\n.ansibgyellow {\n  background-color: yellow;\n}\n.ansibgblue {\n  background-color: blue;\n}\n.ansibgpurple {\n  background-color: magenta;\n}\n.ansibgcyan {\n  background-color: cyan;\n}\n.ansibggray {\n  background-color: gray;\n}\ndiv.cell {\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: vertical;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: vertical;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  border-radius: 2px;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  border-width: 1px;\n  border-style: solid;\n  border-color: transparent;\n  width: 100%;\n  padding: 5px;\n  /* This acts as a spacer between cells, that is outside the border */\n  margin: 0px;\n  outline: none;\n  position: relative;\n  overflow: visible;\n}\ndiv.cell:before {\n  position: absolute;\n  display: block;\n  top: -1px;\n  left: -1px;\n  width: 5px;\n  height: calc(100% +  2px);\n  content: '';\n  background: transparent;\n}\ndiv.cell.jupyter-soft-selected {\n  border-left-color: #E3F2FD;\n  border-left-width: 1px;\n  padding-left: 5px;\n  border-right-color: #E3F2FD;\n  border-right-width: 1px;\n  background: #E3F2FD;\n}\n@media print {\n  div.cell.jupyter-soft-selected {\n    border-color: transparent;\n  }\n}\ndiv.cell.selected,\ndiv.cell.selected.jupyter-soft-selected {\n  border-color: #ababab;\n}\ndiv.cell.selected:before,\ndiv.cell.selected.jupyter-soft-selected:before {\n  position: absolute;\n  display: block;\n  top: -1px;\n  left: -1px;\n  width: 5px;\n  height: calc(100% +  2px);\n  content: '';\n  background: #42A5F5;\n}\n@media print {\n  div.cell.selected,\n  div.cell.selected.jupyter-soft-selected {\n    border-color: transparent;\n  }\n}\n.edit_mode div.cell.selected {\n  border-color: #66BB6A;\n}\n.edit_mode div.cell.selected:before {\n  position: absolute;\n  display: block;\n  top: -1px;\n  left: -1px;\n  width: 5px;\n  height: calc(100% +  2px);\n  content: '';\n  background: #66BB6A;\n}\n@media print {\n  .edit_mode div.cell.selected {\n    border-color: transparent;\n  }\n}\n.prompt {\n  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */\n  min-width: 14ex;\n  /* This padding is tuned to match the padding on the CodeMirror editor. */\n  padding: 0.4em;\n  margin: 0px;\n  font-family: monospace;\n  text-align: right;\n  /* This has to match that of the the CodeMirror class line-height below */\n  line-height: 1.21429em;\n  /* Don't highlight prompt number selection */\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  /* Use default cursor */\n  cursor: default;\n}\n@media (max-width: 540px) {\n  .prompt {\n    text-align: left;\n  }\n}\ndiv.inner_cell {\n  min-width: 0;\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: vertical;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: vertical;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  /* Old browsers */\n  -webkit-box-flex: 1;\n  -moz-box-flex: 1;\n  box-flex: 1;\n  /* Modern browsers */\n  flex: 1;\n}\n/* input_area and input_prompt must match in top border and margin for alignment */\ndiv.input_area {\n  border: 1px solid #cfcfcf;\n  border-radius: 2px;\n  background: #f7f7f7;\n  line-height: 1.21429em;\n}\n/* This is needed so that empty prompt areas can collapse to zero height when there\n   is no content in the output_subarea and the prompt. The main purpose of this is\n   to make sure that empty JavaScript output_subareas have no height. */\ndiv.prompt:empty {\n  padding-top: 0;\n  padding-bottom: 0;\n}\ndiv.unrecognized_cell {\n  padding: 5px 5px 5px 0px;\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: horizontal;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: horizontal;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: horizontal;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n}\ndiv.unrecognized_cell .inner_cell {\n  border-radius: 2px;\n  padding: 5px;\n  font-weight: bold;\n  color: red;\n  border: 1px solid #cfcfcf;\n  background: #eaeaea;\n}\ndiv.unrecognized_cell .inner_cell a {\n  color: inherit;\n  text-decoration: none;\n}\ndiv.unrecognized_cell .inner_cell a:hover {\n  color: inherit;\n  text-decoration: none;\n}\n@media (max-width: 540px) {\n  div.unrecognized_cell > div.prompt {\n    display: none;\n  }\n}\ndiv.code_cell {\n  /* avoid page breaking on code cells when printing */\n}\n@media print {\n  div.code_cell {\n    page-break-inside: avoid;\n  }\n}\n/* any special styling for code cells that are currently running goes here */\ndiv.input {\n  page-break-inside: avoid;\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: horizontal;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: horizontal;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: horizontal;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n}\n@media (max-width: 540px) {\n  div.input {\n    /* Old browsers */\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-box-align: stretch;\n    display: -moz-box;\n    -moz-box-orient: vertical;\n    -moz-box-align: stretch;\n    display: box;\n    box-orient: vertical;\n    box-align: stretch;\n    /* Modern browsers */\n    display: flex;\n    flex-direction: column;\n    align-items: stretch;\n  }\n}\n/* input_area and input_prompt must match in top border and margin for alignment */\ndiv.input_prompt {\n  color: #303F9F;\n  border-top: 1px solid transparent;\n}\ndiv.input_area > div.highlight {\n  margin: 0.4em;\n  border: none;\n  padding: 0px;\n  background-color: transparent;\n}\ndiv.input_area > div.highlight > pre {\n  margin: 0px;\n  border: none;\n  padding: 0px;\n  background-color: transparent;\n}\n/* The following gets added to the <head> if it is detected that the user has a\n * monospace font with inconsistent normal/bold/italic height.  See\n * notebookmain.js.  Such fonts will have keywords vertically offset with\n * respect to the rest of the text.  The user should select a better font.\n * See: https://github.com/ipython/ipython/issues/1503\n *\n * .CodeMirror span {\n *      vertical-align: bottom;\n * }\n */\n.CodeMirror {\n  line-height: 1.21429em;\n  /* Changed from 1em to our global default */\n  font-size: 14px;\n  height: auto;\n  /* Changed to auto to autogrow */\n  background: none;\n  /* Changed from white to allow our bg to show through */\n}\n.CodeMirror-scroll {\n  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/\n  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/\n  overflow-y: hidden;\n  overflow-x: auto;\n}\n.CodeMirror-lines {\n  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */\n  /* we have set a different line-height and want this to scale with that. */\n  /* Note that this should set vertical padding only, since CodeMirror assumes\n       that horizontal padding will be set on CodeMirror pre */\n  padding: 0.4em 0;\n}\n.CodeMirror-linenumber {\n  padding: 0 8px 0 4px;\n}\n.CodeMirror-gutters {\n  border-bottom-left-radius: 2px;\n  border-top-left-radius: 2px;\n}\n.CodeMirror pre {\n  /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only,\n    use .CodeMirror-lines for vertical */\n  padding: 0 0.4em;\n  border: 0;\n  border-radius: 0;\n}\n.CodeMirror-cursor {\n  border-left: 1.4px solid black;\n}\n@media screen and (min-width: 2138px) and (max-width: 4319px) {\n  .CodeMirror-cursor {\n    border-left: 2px solid black;\n  }\n}\n@media screen and (min-width: 4320px) {\n  .CodeMirror-cursor {\n    border-left: 4px solid black;\n  }\n}\n/*\n\nOriginal style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>\nAdapted from GitHub theme\n\n*/\n.highlight-base {\n  color: #000;\n}\n.highlight-variable {\n  color: #000;\n}\n.highlight-variable-2 {\n  color: #1a1a1a;\n}\n.highlight-variable-3 {\n  color: #333333;\n}\n.highlight-string {\n  color: #BA2121;\n}\n.highlight-comment {\n  color: #408080;\n  font-style: italic;\n}\n.highlight-number {\n  color: #080;\n}\n.highlight-atom {\n  color: #88F;\n}\n.highlight-keyword {\n  color: #008000;\n  font-weight: bold;\n}\n.highlight-builtin {\n  color: #008000;\n}\n.highlight-error {\n  color: #f00;\n}\n.highlight-operator {\n  color: #AA22FF;\n  font-weight: bold;\n}\n.highlight-meta {\n  color: #AA22FF;\n}\n/* previously not defined, copying from default codemirror */\n.highlight-def {\n  color: #00f;\n}\n.highlight-string-2 {\n  color: #f50;\n}\n.highlight-qualifier {\n  color: #555;\n}\n.highlight-bracket {\n  color: #997;\n}\n.highlight-tag {\n  color: #170;\n}\n.highlight-attribute {\n  color: #00c;\n}\n.highlight-header {\n  color: blue;\n}\n.highlight-quote {\n  color: #090;\n}\n.highlight-link {\n  color: #00c;\n}\n/* apply the same style to codemirror */\n.cm-s-ipython span.cm-keyword {\n  color: #008000;\n  font-weight: bold;\n}\n.cm-s-ipython span.cm-atom {\n  color: #88F;\n}\n.cm-s-ipython span.cm-number {\n  color: #080;\n}\n.cm-s-ipython span.cm-def {\n  color: #00f;\n}\n.cm-s-ipython span.cm-variable {\n  color: #000;\n}\n.cm-s-ipython span.cm-operator {\n  color: #AA22FF;\n  font-weight: bold;\n}\n.cm-s-ipython span.cm-variable-2 {\n  color: #1a1a1a;\n}\n.cm-s-ipython span.cm-variable-3 {\n  color: #333333;\n}\n.cm-s-ipython span.cm-comment {\n  color: #408080;\n  font-style: italic;\n}\n.cm-s-ipython span.cm-string {\n  color: #BA2121;\n}\n.cm-s-ipython span.cm-string-2 {\n  color: #f50;\n}\n.cm-s-ipython span.cm-meta {\n  color: #AA22FF;\n}\n.cm-s-ipython span.cm-qualifier {\n  color: #555;\n}\n.cm-s-ipython span.cm-builtin {\n  color: #008000;\n}\n.cm-s-ipython span.cm-bracket {\n  color: #997;\n}\n.cm-s-ipython span.cm-tag {\n  color: #170;\n}\n.cm-s-ipython span.cm-attribute {\n  color: #00c;\n}\n.cm-s-ipython span.cm-header {\n  color: blue;\n}\n.cm-s-ipython span.cm-quote {\n  color: #090;\n}\n.cm-s-ipython span.cm-link {\n  color: #00c;\n}\n.cm-s-ipython span.cm-error {\n  color: #f00;\n}\n.cm-s-ipython span.cm-tab {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);\n  background-position: right;\n  background-repeat: no-repeat;\n}\ndiv.output_wrapper {\n  /* this position must be relative to enable descendents to be absolute within it */\n  position: relative;\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: vertical;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: vertical;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  z-index: 1;\n}\n/* class for the output area when it should be height-limited */\ndiv.output_scroll {\n  /* ideally, this would be max-height, but FF barfs all over that */\n  height: 24em;\n  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */\n  width: 100%;\n  overflow: auto;\n  border-radius: 2px;\n  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);\n  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);\n  display: block;\n}\n/* output div while it is collapsed */\ndiv.output_collapsed {\n  margin: 0px;\n  padding: 0px;\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: vertical;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: vertical;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\ndiv.out_prompt_overlay {\n  height: 100%;\n  padding: 0px 0.4em;\n  position: absolute;\n  border-radius: 2px;\n}\ndiv.out_prompt_overlay:hover {\n  /* use inner shadow to get border that is computed the same on WebKit/FF */\n  -webkit-box-shadow: inset 0 0 1px #000;\n  box-shadow: inset 0 0 1px #000;\n  background: rgba(240, 240, 240, 0.5);\n}\ndiv.output_prompt {\n  color: #D84315;\n}\n/* This class is the outer container of all output sections. */\ndiv.output_area {\n  padding: 0px;\n  page-break-inside: avoid;\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: horizontal;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: horizontal;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: horizontal;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n}\ndiv.output_area .MathJax_Display {\n  text-align: left !important;\n}\ndiv.output_area .rendered_html table {\n  margin-left: 0;\n  margin-right: 0;\n}\ndiv.output_area .rendered_html img {\n  margin-left: 0;\n  margin-right: 0;\n}\ndiv.output_area img,\ndiv.output_area svg {\n  max-width: 100%;\n  height: auto;\n}\ndiv.output_area img.unconfined,\ndiv.output_area svg.unconfined {\n  max-width: none;\n}\ndiv.output_area .mglyph > img {\n  max-width: none;\n}\n/* This is needed to protect the pre formating from global settings such\n   as that of bootstrap */\n.output {\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: vertical;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: vertical;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n@media (max-width: 540px) {\n  div.output_area {\n    /* Old browsers */\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-box-align: stretch;\n    display: -moz-box;\n    -moz-box-orient: vertical;\n    -moz-box-align: stretch;\n    display: box;\n    box-orient: vertical;\n    box-align: stretch;\n    /* Modern browsers */\n    display: flex;\n    flex-direction: column;\n    align-items: stretch;\n  }\n}\ndiv.output_area pre {\n  margin: 0;\n  padding: 1px 0 1px 0;\n  border: 0;\n  vertical-align: baseline;\n  color: black;\n  background-color: transparent;\n  border-radius: 0;\n}\n/* This class is for the output subarea inside the output_area and after\n   the prompt div. */\ndiv.output_subarea {\n  overflow-x: auto;\n  padding: 0.4em;\n  /* Old browsers */\n  -webkit-box-flex: 1;\n  -moz-box-flex: 1;\n  box-flex: 1;\n  /* Modern browsers */\n  flex: 1;\n  max-width: calc(100% - 14ex);\n}\ndiv.output_scroll div.output_subarea {\n  overflow-x: visible;\n}\n/* The rest of the output_* classes are for special styling of the different\n   output types */\n/* all text output has this class: */\ndiv.output_text {\n  text-align: left;\n  color: #000;\n  /* This has to match that of the the CodeMirror class line-height below */\n  line-height: 1.21429em;\n}\n/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */\ndiv.output_stderr {\n  background: #fdd;\n  /* very light red background for stderr */\n}\ndiv.output_latex {\n  text-align: left;\n}\n/* Empty output_javascript divs should have no height */\ndiv.output_javascript:empty {\n  padding: 0;\n}\n.js-error {\n  color: darkred;\n}\n/* raw_input styles */\ndiv.raw_input_container {\n  line-height: 1.21429em;\n  padding-top: 5px;\n}\npre.raw_input_prompt {\n  /* nothing needed here. */\n}\ninput.raw_input {\n  font-family: monospace;\n  font-size: inherit;\n  color: inherit;\n  width: auto;\n  /* make sure input baseline aligns with prompt */\n  vertical-align: baseline;\n  /* padding + margin = 0.5em between prompt and cursor */\n  padding: 0em 0.25em;\n  margin: 0em 0.25em;\n}\ninput.raw_input:focus {\n  box-shadow: none;\n}\np.p-space {\n  margin-bottom: 10px;\n}\ndiv.output_unrecognized {\n  padding: 5px;\n  font-weight: bold;\n  color: red;\n}\ndiv.output_unrecognized a {\n  color: inherit;\n  text-decoration: none;\n}\ndiv.output_unrecognized a:hover {\n  color: inherit;\n  text-decoration: none;\n}\n.rendered_html {\n  color: #000;\n  /* any extras will just be numbers: */\n}\n.rendered_html em {\n  font-style: italic;\n}\n.rendered_html strong {\n  font-weight: bold;\n}\n.rendered_html u {\n  text-decoration: underline;\n}\n.rendered_html :link {\n  text-decoration: underline;\n}\n.rendered_html :visited {\n  text-decoration: underline;\n}\n.rendered_html h1 {\n  font-size: 185.7%;\n  margin: 1.08em 0 0 0;\n  font-weight: bold;\n  line-height: 1.0;\n}\n.rendered_html h2 {\n  font-size: 157.1%;\n  margin: 1.27em 0 0 0;\n  font-weight: bold;\n  line-height: 1.0;\n}\n.rendered_html h3 {\n  font-size: 128.6%;\n  margin: 1.55em 0 0 0;\n  font-weight: bold;\n  line-height: 1.0;\n}\n.rendered_html h4 {\n  font-size: 100%;\n  margin: 2em 0 0 0;\n  font-weight: bold;\n  line-height: 1.0;\n}\n.rendered_html h5 {\n  font-size: 100%;\n  margin: 2em 0 0 0;\n  font-weight: bold;\n  line-height: 1.0;\n  font-style: italic;\n}\n.rendered_html h6 {\n  font-size: 100%;\n  margin: 2em 0 0 0;\n  font-weight: bold;\n  line-height: 1.0;\n  font-style: italic;\n}\n.rendered_html h1:first-child {\n  margin-top: 0.538em;\n}\n.rendered_html h2:first-child {\n  margin-top: 0.636em;\n}\n.rendered_html h3:first-child {\n  margin-top: 0.777em;\n}\n.rendered_html h4:first-child {\n  margin-top: 1em;\n}\n.rendered_html h5:first-child {\n  margin-top: 1em;\n}\n.rendered_html h6:first-child {\n  margin-top: 1em;\n}\n.rendered_html ul:not(.list-inline),\n.rendered_html ol:not(.list-inline) {\n  padding-left: 2em;\n}\n.rendered_html ul {\n  list-style: disc;\n}\n.rendered_html ul ul {\n  list-style: square;\n  margin-top: 0;\n}\n.rendered_html ul ul ul {\n  list-style: circle;\n}\n.rendered_html ol {\n  list-style: decimal;\n}\n.rendered_html ol ol {\n  list-style: upper-alpha;\n  margin-top: 0;\n}\n.rendered_html ol ol ol {\n  list-style: lower-alpha;\n}\n.rendered_html ol ol ol ol {\n  list-style: lower-roman;\n}\n.rendered_html ol ol ol ol ol {\n  list-style: decimal;\n}\n.rendered_html * + ul {\n  margin-top: 1em;\n}\n.rendered_html * + ol {\n  margin-top: 1em;\n}\n.rendered_html hr {\n  color: black;\n  background-color: black;\n}\n.rendered_html pre {\n  margin: 1em 2em;\n  padding: 0px;\n  background-color: #fff;\n}\n.rendered_html code {\n  background-color: #eff0f1;\n}\n.rendered_html p code {\n  padding: 1px 5px;\n}\n.rendered_html pre code {\n  background-color: #fff;\n}\n.rendered_html pre,\n.rendered_html code {\n  border: 0;\n  color: #000;\n  font-size: 100%;\n}\n.rendered_html blockquote {\n  margin: 1em 2em;\n}\n.rendered_html table {\n  margin-left: auto;\n  margin-right: auto;\n  border: none;\n  border-collapse: collapse;\n  border-spacing: 0;\n  color: black;\n  font-size: 12px;\n  table-layout: fixed;\n}\n.rendered_html thead {\n  border-bottom: 1px solid black;\n  vertical-align: bottom;\n}\n.rendered_html tr,\n.rendered_html th,\n.rendered_html td {\n  text-align: right;\n  vertical-align: middle;\n  padding: 0.5em 0.5em;\n  line-height: normal;\n  white-space: normal;\n  max-width: none;\n  border: none;\n}\n.rendered_html th {\n  font-weight: bold;\n}\n.rendered_html tbody tr:nth-child(odd) {\n  background: #f5f5f5;\n}\n.rendered_html tbody tr:hover {\n  background: rgba(66, 165, 245, 0.2);\n}\n.rendered_html * + table {\n  margin-top: 1em;\n}\n.rendered_html p {\n  text-align: left;\n}\n.rendered_html * + p {\n  margin-top: 1em;\n}\n.rendered_html img {\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n}\n.rendered_html * + img {\n  margin-top: 1em;\n}\n.rendered_html img,\n.rendered_html svg {\n  max-width: 100%;\n  height: auto;\n}\n.rendered_html img.unconfined,\n.rendered_html svg.unconfined {\n  max-width: none;\n}\n.rendered_html .alert {\n  margin-bottom: initial;\n}\n.rendered_html * + .alert {\n  margin-top: 1em;\n}\n[dir='rtl'] .rendered_html p {\n  text-align: right;\n}\ndiv.text_cell {\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: horizontal;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: horizontal;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: horizontal;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n}\n@media (max-width: 540px) {\n  div.text_cell > div.prompt {\n    display: none;\n  }\n}\ndiv.text_cell_render {\n  /*font-family: 'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif;*/\n  outline: none;\n  resize: none;\n  width: inherit;\n  border-style: none;\n  padding: 0.5em 0.5em 0.5em 0.4em;\n  color: #000;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n}\na.anchor-link:link {\n  text-decoration: none;\n  padding: 0px 20px;\n  visibility: hidden;\n}\nh1:hover .anchor-link,\nh2:hover .anchor-link,\nh3:hover .anchor-link,\nh4:hover .anchor-link,\nh5:hover .anchor-link,\nh6:hover .anchor-link {\n  visibility: visible;\n}\n.text_cell.rendered .input_area {\n  display: none;\n}\n.text_cell.rendered .rendered_html {\n  overflow-x: auto;\n  overflow-y: hidden;\n}\n.text_cell.rendered .rendered_html tr,\n.text_cell.rendered .rendered_html th,\n.text_cell.rendered .rendered_html td {\n  max-width: none;\n}\n.text_cell.unrendered .text_cell_render {\n  display: none;\n}\n.text_cell .dropzone .input_area {\n  border: 2px dashed #bababa;\n  margin: -1px;\n}\n.cm-header-1,\n.cm-header-2,\n.cm-header-3,\n.cm-header-4,\n.cm-header-5,\n.cm-header-6 {\n  font-weight: bold;\n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n.cm-header-1 {\n  font-size: 185.7%;\n}\n.cm-header-2 {\n  font-size: 157.1%;\n}\n.cm-header-3 {\n  font-size: 128.6%;\n}\n.cm-header-4 {\n  font-size: 110%;\n}\n.cm-header-5 {\n  font-size: 100%;\n  font-style: italic;\n}\n.cm-header-6 {\n  font-size: 100%;\n  font-style: italic;\n}\n/*!\n*\n* IPython notebook webapp\n*\n*/\n@media (max-width: 767px) {\n  .notebook_app {\n    padding-left: 0px;\n    padding-right: 0px;\n  }\n}\n#ipython-main-app {\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  height: 100%;\n}\ndiv#notebook_panel {\n  margin: 0px;\n  padding: 0px;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  height: 100%;\n}\ndiv#notebook {\n  font-size: 14px;\n  line-height: 20px;\n  overflow-y: hidden;\n  overflow-x: auto;\n  width: 100%;\n  /* This spaces the page away from the edge of the notebook area */\n  padding-top: 20px;\n  margin: 0px;\n  outline: none;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  min-height: 100%;\n}\n@media not print {\n  #notebook-container {\n    padding: 15px;\n    background-color: #fff;\n    min-height: 0;\n    -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);\n    box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);\n  }\n}\n@media print {\n  #notebook-container {\n    width: 100%;\n  }\n}\ndiv.ui-widget-content {\n  border: 1px solid #ababab;\n  outline: none;\n}\npre.dialog {\n  background-color: #f7f7f7;\n  border: 1px solid #ddd;\n  border-radius: 2px;\n  padding: 0.4em;\n  padding-left: 2em;\n}\np.dialog {\n  padding: 0.2em;\n}\n/* Word-wrap output correctly.  This is the CSS3 spelling, though Firefox seems\n   to not honor it correctly.  Webkit browsers (Chrome, rekonq, Safari) do.\n */\npre,\ncode,\nkbd,\nsamp {\n  white-space: pre-wrap;\n}\n#fonttest {\n  font-family: monospace;\n}\np {\n  margin-bottom: 0;\n}\n.end_space {\n  min-height: 100px;\n  transition: height .2s ease;\n}\n.notebook_app > #header {\n  -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);\n  box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);\n}\n@media not print {\n  .notebook_app {\n    background-color: #EEE;\n  }\n}\nkbd {\n  border-style: solid;\n  border-width: 1px;\n  box-shadow: none;\n  margin: 2px;\n  padding-left: 2px;\n  padding-right: 2px;\n  padding-top: 1px;\n  padding-bottom: 1px;\n}\n.jupyter-keybindings {\n  padding: 1px;\n  line-height: 24px;\n  border-bottom: 1px solid gray;\n}\n.jupyter-keybindings input {\n  margin: 0;\n  padding: 0;\n  border: none;\n}\n.jupyter-keybindings i {\n  padding: 6px;\n}\n.well code {\n  background-color: #ffffff;\n  border-color: #ababab;\n  border-width: 1px;\n  border-style: solid;\n  padding: 2px;\n  padding-top: 1px;\n  padding-bottom: 1px;\n}\n/* CSS for the cell toolbar */\n.celltoolbar {\n  border: thin solid #CFCFCF;\n  border-bottom: none;\n  background: #EEE;\n  border-radius: 2px 2px 0px 0px;\n  width: 100%;\n  height: 29px;\n  padding-right: 4px;\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: horizontal;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: horizontal;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: horizontal;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  /* Old browsers */\n  -webkit-box-pack: end;\n  -moz-box-pack: end;\n  box-pack: end;\n  /* Modern browsers */\n  justify-content: flex-end;\n  display: -webkit-flex;\n}\n@media print {\n  .celltoolbar {\n    display: none;\n  }\n}\n.ctb_hideshow {\n  display: none;\n  vertical-align: bottom;\n}\n/* ctb_show is added to the ctb_hideshow div to show the cell toolbar.\n   Cell toolbars are only shown when the ctb_global_show class is also set.\n*/\n.ctb_global_show .ctb_show.ctb_hideshow {\n  display: block;\n}\n.ctb_global_show .ctb_show + .input_area,\n.ctb_global_show .ctb_show + div.text_cell_input,\n.ctb_global_show .ctb_show ~ div.text_cell_render {\n  border-top-right-radius: 0px;\n  border-top-left-radius: 0px;\n}\n.ctb_global_show .ctb_show ~ div.text_cell_render {\n  border: 1px solid #cfcfcf;\n}\n.celltoolbar {\n  font-size: 87%;\n  padding-top: 3px;\n}\n.celltoolbar select {\n  display: block;\n  width: 100%;\n  height: 32px;\n  padding: 6px 12px;\n  font-size: 13px;\n  line-height: 1.42857143;\n  color: #555555;\n  background-color: #fff;\n  background-image: none;\n  border: 1px solid #ccc;\n  border-radius: 2px;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;\n  -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;\n  transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;\n  height: 30px;\n  padding: 5px 10px;\n  font-size: 12px;\n  line-height: 1.5;\n  border-radius: 1px;\n  width: inherit;\n  font-size: inherit;\n  height: 22px;\n  padding: 0px;\n  display: inline-block;\n}\n.celltoolbar select:focus {\n  border-color: #66afe9;\n  outline: 0;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);\n  box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);\n}\n.celltoolbar select::-moz-placeholder {\n  color: #999;\n  opacity: 1;\n}\n.celltoolbar select:-ms-input-placeholder {\n  color: #999;\n}\n.celltoolbar select::-webkit-input-placeholder {\n  color: #999;\n}\n.celltoolbar select::-ms-expand {\n  border: 0;\n  background-color: transparent;\n}\n.celltoolbar select[disabled],\n.celltoolbar select[readonly],\nfieldset[disabled] .celltoolbar select {\n  background-color: #eeeeee;\n  opacity: 1;\n}\n.celltoolbar select[disabled],\nfieldset[disabled] .celltoolbar select {\n  cursor: not-allowed;\n}\ntextarea.celltoolbar select {\n  height: auto;\n}\nselect.celltoolbar select {\n  height: 30px;\n  line-height: 30px;\n}\ntextarea.celltoolbar select,\nselect[multiple].celltoolbar select {\n  height: auto;\n}\n.celltoolbar label {\n  margin-left: 5px;\n  margin-right: 5px;\n}\n.tags_button_container {\n  width: 100%;\n  display: flex;\n}\n.tag-container {\n  display: flex;\n  flex-direction: row;\n  flex-grow: 1;\n  overflow: hidden;\n  position: relative;\n}\n.tag-container > * {\n  margin: 0 4px;\n}\n.remove-tag-btn {\n  margin-left: 4px;\n}\n.tags-input {\n  display: flex;\n}\n.cell-tag:last-child:after {\n  content: '';\n  position: absolute;\n  right: 0;\n  width: 40px;\n  height: 100%;\n  /* Fade to background color of cell toolbar */\n  background: linear-gradient(to right, rgba(0, 0, 0, 0), #EEE);\n}\n.tags-input > * {\n  margin-left: 4px;\n}\n.cell-tag,\n.tags-input input,\n.tags-input button {\n  display: block;\n  width: 100%;\n  height: 32px;\n  padding: 6px 12px;\n  font-size: 13px;\n  line-height: 1.42857143;\n  color: #555555;\n  background-color: #fff;\n  background-image: none;\n  border: 1px solid #ccc;\n  border-radius: 2px;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;\n  -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;\n  transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;\n  height: 30px;\n  padding: 5px 10px;\n  font-size: 12px;\n  line-height: 1.5;\n  border-radius: 1px;\n  box-shadow: none;\n  width: inherit;\n  font-size: inherit;\n  height: 22px;\n  line-height: 22px;\n  padding: 0px 4px;\n  display: inline-block;\n}\n.cell-tag:focus,\n.tags-input input:focus,\n.tags-input button:focus {\n  border-color: #66afe9;\n  outline: 0;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);\n  box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);\n}\n.cell-tag::-moz-placeholder,\n.tags-input input::-moz-placeholder,\n.tags-input button::-moz-placeholder {\n  color: #999;\n  opacity: 1;\n}\n.cell-tag:-ms-input-placeholder,\n.tags-input input:-ms-input-placeholder,\n.tags-input button:-ms-input-placeholder {\n  color: #999;\n}\n.cell-tag::-webkit-input-placeholder,\n.tags-input input::-webkit-input-placeholder,\n.tags-input button::-webkit-input-placeholder {\n  color: #999;\n}\n.cell-tag::-ms-expand,\n.tags-input input::-ms-expand,\n.tags-input button::-ms-expand {\n  border: 0;\n  background-color: transparent;\n}\n.cell-tag[disabled],\n.tags-input input[disabled],\n.tags-input button[disabled],\n.cell-tag[readonly],\n.tags-input input[readonly],\n.tags-input button[readonly],\nfieldset[disabled] .cell-tag,\nfieldset[disabled] .tags-input input,\nfieldset[disabled] .tags-input button {\n  background-color: #eeeeee;\n  opacity: 1;\n}\n.cell-tag[disabled],\n.tags-input input[disabled],\n.tags-input button[disabled],\nfieldset[disabled] .cell-tag,\nfieldset[disabled] .tags-input input,\nfieldset[disabled] .tags-input button {\n  cursor: not-allowed;\n}\ntextarea.cell-tag,\ntextarea.tags-input input,\ntextarea.tags-input button {\n  height: auto;\n}\nselect.cell-tag,\nselect.tags-input input,\nselect.tags-input button {\n  height: 30px;\n  line-height: 30px;\n}\ntextarea.cell-tag,\ntextarea.tags-input input,\ntextarea.tags-input button,\nselect[multiple].cell-tag,\nselect[multiple].tags-input input,\nselect[multiple].tags-input button {\n  height: auto;\n}\n.cell-tag,\n.tags-input button {\n  padding: 0px 4px;\n}\n.cell-tag {\n  background-color: #fff;\n  white-space: nowrap;\n}\n.tags-input input[type=text]:focus {\n  outline: none;\n  box-shadow: none;\n  border-color: #ccc;\n}\n.completions {\n  position: absolute;\n  z-index: 110;\n  overflow: hidden;\n  border: 1px solid #ababab;\n  border-radius: 2px;\n  -webkit-box-shadow: 0px 6px 10px -1px #adadad;\n  box-shadow: 0px 6px 10px -1px #adadad;\n  line-height: 1;\n}\n.completions select {\n  background: white;\n  outline: none;\n  border: none;\n  padding: 0px;\n  margin: 0px;\n  overflow: auto;\n  font-family: monospace;\n  font-size: 110%;\n  color: #000;\n  width: auto;\n}\n.completions select option.context {\n  color: #286090;\n}\n#kernel_logo_widget .current_kernel_logo {\n  display: none;\n  margin-top: -1px;\n  margin-bottom: -1px;\n  width: 32px;\n  height: 32px;\n}\n[dir='rtl'] #kernel_logo_widget {\n  float: left !important;\n  float: left;\n}\n.modal .modal-body .move-path {\n  display: flex;\n  flex-direction: row;\n  justify-content: space;\n  align-items: center;\n}\n.modal .modal-body .move-path .server-root {\n  padding-right: 20px;\n}\n.modal .modal-body .move-path .path-input {\n  flex: 1;\n}\n#menubar {\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  margin-top: 1px;\n}\n#menubar .navbar {\n  border-top: 1px;\n  border-radius: 0px 0px 2px 2px;\n  margin-bottom: 0px;\n}\n#menubar .navbar-toggle {\n  float: left;\n  padding-top: 7px;\n  padding-bottom: 7px;\n  border: none;\n}\n#menubar .navbar-collapse {\n  clear: left;\n}\n[dir='rtl'] #menubar .navbar-toggle {\n  float: right;\n}\n[dir='rtl'] #menubar .navbar-collapse {\n  clear: right;\n}\n[dir='rtl'] #menubar .navbar-nav {\n  float: right;\n}\n[dir='rtl'] #menubar .nav {\n  padding-right: 0px;\n}\n[dir='rtl'] #menubar .navbar-nav > li {\n  float: right;\n}\n[dir='rtl'] #menubar .navbar-right {\n  float: left !important;\n}\n[dir='rtl'] ul.dropdown-menu {\n  text-align: right;\n  left: auto;\n}\n[dir='rtl'] ul#new-menu.dropdown-menu {\n  right: auto;\n  left: 0;\n}\n.nav-wrapper {\n  border-bottom: 1px solid #e7e7e7;\n}\ni.menu-icon {\n  padding-top: 4px;\n}\n[dir='rtl'] i.menu-icon.pull-right {\n  float: left !important;\n  float: left;\n}\nul#help_menu li a {\n  overflow: hidden;\n  padding-right: 2.2em;\n}\nul#help_menu li a i {\n  margin-right: -1.2em;\n}\n[dir='rtl'] ul#help_menu li a {\n  padding-left: 2.2em;\n}\n[dir='rtl'] ul#help_menu li a i {\n  margin-right: 0;\n  margin-left: -1.2em;\n}\n[dir='rtl'] ul#help_menu li a i.pull-right {\n  float: left !important;\n  float: left;\n}\n.dropdown-submenu {\n  position: relative;\n}\n.dropdown-submenu > .dropdown-menu {\n  top: 0;\n  left: 100%;\n  margin-top: -6px;\n  margin-left: -1px;\n}\n[dir='rtl'] .dropdown-submenu > .dropdown-menu {\n  right: 100%;\n  margin-right: -1px;\n}\n.dropdown-submenu:hover > .dropdown-menu {\n  display: block;\n}\n.dropdown-submenu > a:after {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  display: block;\n  content: '\\f0da';\n  float: right;\n  color: #333333;\n  margin-top: 2px;\n  margin-right: -10px;\n}\n.dropdown-submenu > a:after.fa-pull-left {\n  margin-right: .3em;\n}\n.dropdown-submenu > a:after.fa-pull-right {\n  margin-left: .3em;\n}\n.dropdown-submenu > a:after.pull-left {\n  margin-right: .3em;\n}\n.dropdown-submenu > a:after.pull-right {\n  margin-left: .3em;\n}\n[dir='rtl'] .dropdown-submenu > a:after {\n  float: left;\n  content: '\\f0d9';\n  margin-right: 0;\n  margin-left: -10px;\n}\n.dropdown-submenu:hover > a:after {\n  color: #262626;\n}\n.dropdown-submenu.pull-left {\n  float: none;\n}\n.dropdown-submenu.pull-left > .dropdown-menu {\n  left: -100%;\n  margin-left: 10px;\n}\n#notification_area {\n  float: right !important;\n  float: right;\n  z-index: 10;\n}\n[dir='rtl'] #notification_area {\n  float: left !important;\n  float: left;\n}\n.indicator_area {\n  float: right !important;\n  float: right;\n  color: #777;\n  margin-left: 5px;\n  margin-right: 5px;\n  width: 11px;\n  z-index: 10;\n  text-align: center;\n  width: auto;\n}\n[dir='rtl'] .indicator_area {\n  float: left !important;\n  float: left;\n}\n#kernel_indicator {\n  float: right !important;\n  float: right;\n  color: #777;\n  margin-left: 5px;\n  margin-right: 5px;\n  width: 11px;\n  z-index: 10;\n  text-align: center;\n  width: auto;\n  border-left: 1px solid;\n}\n#kernel_indicator .kernel_indicator_name {\n  padding-left: 5px;\n  padding-right: 5px;\n}\n[dir='rtl'] #kernel_indicator {\n  float: left !important;\n  float: left;\n  border-left: 0;\n  border-right: 1px solid;\n}\n#modal_indicator {\n  float: right !important;\n  float: right;\n  color: #777;\n  margin-left: 5px;\n  margin-right: 5px;\n  width: 11px;\n  z-index: 10;\n  text-align: center;\n  width: auto;\n}\n[dir='rtl'] #modal_indicator {\n  float: left !important;\n  float: left;\n}\n#readonly-indicator {\n  float: right !important;\n  float: right;\n  color: #777;\n  margin-left: 5px;\n  margin-right: 5px;\n  width: 11px;\n  z-index: 10;\n  text-align: center;\n  width: auto;\n  margin-top: 2px;\n  margin-bottom: 0px;\n  margin-left: 0px;\n  margin-right: 0px;\n  display: none;\n}\n.modal_indicator:before {\n  width: 1.28571429em;\n  text-align: center;\n}\n.edit_mode .modal_indicator:before {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: '\\f040';\n}\n.edit_mode .modal_indicator:before.fa-pull-left {\n  margin-right: .3em;\n}\n.edit_mode .modal_indicator:before.fa-pull-right {\n  margin-left: .3em;\n}\n.edit_mode .modal_indicator:before.pull-left {\n  margin-right: .3em;\n}\n.edit_mode .modal_indicator:before.pull-right {\n  margin-left: .3em;\n}\n.command_mode .modal_indicator:before {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: ' ';\n}\n.command_mode .modal_indicator:before.fa-pull-left {\n  margin-right: .3em;\n}\n.command_mode .modal_indicator:before.fa-pull-right {\n  margin-left: .3em;\n}\n.command_mode .modal_indicator:before.pull-left {\n  margin-right: .3em;\n}\n.command_mode .modal_indicator:before.pull-right {\n  margin-left: .3em;\n}\n.kernel_idle_icon:before {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: '\\f10c';\n}\n.kernel_idle_icon:before.fa-pull-left {\n  margin-right: .3em;\n}\n.kernel_idle_icon:before.fa-pull-right {\n  margin-left: .3em;\n}\n.kernel_idle_icon:before.pull-left {\n  margin-right: .3em;\n}\n.kernel_idle_icon:before.pull-right {\n  margin-left: .3em;\n}\n.kernel_busy_icon:before {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: '\\f111';\n}\n.kernel_busy_icon:before.fa-pull-left {\n  margin-right: .3em;\n}\n.kernel_busy_icon:before.fa-pull-right {\n  margin-left: .3em;\n}\n.kernel_busy_icon:before.pull-left {\n  margin-right: .3em;\n}\n.kernel_busy_icon:before.pull-right {\n  margin-left: .3em;\n}\n.kernel_dead_icon:before {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: '\\f1e2';\n}\n.kernel_dead_icon:before.fa-pull-left {\n  margin-right: .3em;\n}\n.kernel_dead_icon:before.fa-pull-right {\n  margin-left: .3em;\n}\n.kernel_dead_icon:before.pull-left {\n  margin-right: .3em;\n}\n.kernel_dead_icon:before.pull-right {\n  margin-left: .3em;\n}\n.kernel_disconnected_icon:before {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  content: '\\f127';\n}\n.kernel_disconnected_icon:before.fa-pull-left {\n  margin-right: .3em;\n}\n.kernel_disconnected_icon:before.fa-pull-right {\n  margin-left: .3em;\n}\n.kernel_disconnected_icon:before.pull-left {\n  margin-right: .3em;\n}\n.kernel_disconnected_icon:before.pull-right {\n  margin-left: .3em;\n}\n.notification_widget {\n  color: #777;\n  z-index: 10;\n  background: rgba(240, 240, 240, 0.5);\n  margin-right: 4px;\n  color: #333;\n  background-color: #fff;\n  border-color: #ccc;\n}\n.notification_widget:focus,\n.notification_widget.focus {\n  color: #333;\n  background-color: #e6e6e6;\n  border-color: #8c8c8c;\n}\n.notification_widget:hover {\n  color: #333;\n  background-color: #e6e6e6;\n  border-color: #adadad;\n}\n.notification_widget:active,\n.notification_widget.active,\n.open > .dropdown-toggle.notification_widget {\n  color: #333;\n  background-color: #e6e6e6;\n  border-color: #adadad;\n}\n.notification_widget:active:hover,\n.notification_widget.active:hover,\n.open > .dropdown-toggle.notification_widget:hover,\n.notification_widget:active:focus,\n.notification_widget.active:focus,\n.open > .dropdown-toggle.notification_widget:focus,\n.notification_widget:active.focus,\n.notification_widget.active.focus,\n.open > .dropdown-toggle.notification_widget.focus {\n  color: #333;\n  background-color: #d4d4d4;\n  border-color: #8c8c8c;\n}\n.notification_widget:active,\n.notification_widget.active,\n.open > .dropdown-toggle.notification_widget {\n  background-image: none;\n}\n.notification_widget.disabled:hover,\n.notification_widget[disabled]:hover,\nfieldset[disabled] .notification_widget:hover,\n.notification_widget.disabled:focus,\n.notification_widget[disabled]:focus,\nfieldset[disabled] .notification_widget:focus,\n.notification_widget.disabled.focus,\n.notification_widget[disabled].focus,\nfieldset[disabled] .notification_widget.focus {\n  background-color: #fff;\n  border-color: #ccc;\n}\n.notification_widget .badge {\n  color: #fff;\n  background-color: #333;\n}\n.notification_widget.warning {\n  color: #fff;\n  background-color: #f0ad4e;\n  border-color: #eea236;\n}\n.notification_widget.warning:focus,\n.notification_widget.warning.focus {\n  color: #fff;\n  background-color: #ec971f;\n  border-color: #985f0d;\n}\n.notification_widget.warning:hover {\n  color: #fff;\n  background-color: #ec971f;\n  border-color: #d58512;\n}\n.notification_widget.warning:active,\n.notification_widget.warning.active,\n.open > .dropdown-toggle.notification_widget.warning {\n  color: #fff;\n  background-color: #ec971f;\n  border-color: #d58512;\n}\n.notification_widget.warning:active:hover,\n.notification_widget.warning.active:hover,\n.open > .dropdown-toggle.notification_widget.warning:hover,\n.notification_widget.warning:active:focus,\n.notification_widget.warning.active:focus,\n.open > .dropdown-toggle.notification_widget.warning:focus,\n.notification_widget.warning:active.focus,\n.notification_widget.warning.active.focus,\n.open > .dropdown-toggle.notification_widget.warning.focus {\n  color: #fff;\n  background-color: #d58512;\n  border-color: #985f0d;\n}\n.notification_widget.warning:active,\n.notification_widget.warning.active,\n.open > .dropdown-toggle.notification_widget.warning {\n  background-image: none;\n}\n.notification_widget.warning.disabled:hover,\n.notification_widget.warning[disabled]:hover,\nfieldset[disabled] .notification_widget.warning:hover,\n.notification_widget.warning.disabled:focus,\n.notification_widget.warning[disabled]:focus,\nfieldset[disabled] .notification_widget.warning:focus,\n.notification_widget.warning.disabled.focus,\n.notification_widget.warning[disabled].focus,\nfieldset[disabled] .notification_widget.warning.focus {\n  background-color: #f0ad4e;\n  border-color: #eea236;\n}\n.notification_widget.warning .badge {\n  color: #f0ad4e;\n  background-color: #fff;\n}\n.notification_widget.success {\n  color: #fff;\n  background-color: #5cb85c;\n  border-color: #4cae4c;\n}\n.notification_widget.success:focus,\n.notification_widget.success.focus {\n  color: #fff;\n  background-color: #449d44;\n  border-color: #255625;\n}\n.notification_widget.success:hover {\n  color: #fff;\n  background-color: #449d44;\n  border-color: #398439;\n}\n.notification_widget.success:active,\n.notification_widget.success.active,\n.open > .dropdown-toggle.notification_widget.success {\n  color: #fff;\n  background-color: #449d44;\n  border-color: #398439;\n}\n.notification_widget.success:active:hover,\n.notification_widget.success.active:hover,\n.open > .dropdown-toggle.notification_widget.success:hover,\n.notification_widget.success:active:focus,\n.notification_widget.success.active:focus,\n.open > .dropdown-toggle.notification_widget.success:focus,\n.notification_widget.success:active.focus,\n.notification_widget.success.active.focus,\n.open > .dropdown-toggle.notification_widget.success.focus {\n  color: #fff;\n  background-color: #398439;\n  border-color: #255625;\n}\n.notification_widget.success:active,\n.notification_widget.success.active,\n.open > .dropdown-toggle.notification_widget.success {\n  background-image: none;\n}\n.notification_widget.success.disabled:hover,\n.notification_widget.success[disabled]:hover,\nfieldset[disabled] .notification_widget.success:hover,\n.notification_widget.success.disabled:focus,\n.notification_widget.success[disabled]:focus,\nfieldset[disabled] .notification_widget.success:focus,\n.notification_widget.success.disabled.focus,\n.notification_widget.success[disabled].focus,\nfieldset[disabled] .notification_widget.success.focus {\n  background-color: #5cb85c;\n  border-color: #4cae4c;\n}\n.notification_widget.success .badge {\n  color: #5cb85c;\n  background-color: #fff;\n}\n.notification_widget.info {\n  color: #fff;\n  background-color: #5bc0de;\n  border-color: #46b8da;\n}\n.notification_widget.info:focus,\n.notification_widget.info.focus {\n  color: #fff;\n  background-color: #31b0d5;\n  border-color: #1b6d85;\n}\n.notification_widget.info:hover {\n  color: #fff;\n  background-color: #31b0d5;\n  border-color: #269abc;\n}\n.notification_widget.info:active,\n.notification_widget.info.active,\n.open > .dropdown-toggle.notification_widget.info {\n  color: #fff;\n  background-color: #31b0d5;\n  border-color: #269abc;\n}\n.notification_widget.info:active:hover,\n.notification_widget.info.active:hover,\n.open > .dropdown-toggle.notification_widget.info:hover,\n.notification_widget.info:active:focus,\n.notification_widget.info.active:focus,\n.open > .dropdown-toggle.notification_widget.info:focus,\n.notification_widget.info:active.focus,\n.notification_widget.info.active.focus,\n.open > .dropdown-toggle.notification_widget.info.focus {\n  color: #fff;\n  background-color: #269abc;\n  border-color: #1b6d85;\n}\n.notification_widget.info:active,\n.notification_widget.info.active,\n.open > .dropdown-toggle.notification_widget.info {\n  background-image: none;\n}\n.notification_widget.info.disabled:hover,\n.notification_widget.info[disabled]:hover,\nfieldset[disabled] .notification_widget.info:hover,\n.notification_widget.info.disabled:focus,\n.notification_widget.info[disabled]:focus,\nfieldset[disabled] .notification_widget.info:focus,\n.notification_widget.info.disabled.focus,\n.notification_widget.info[disabled].focus,\nfieldset[disabled] .notification_widget.info.focus {\n  background-color: #5bc0de;\n  border-color: #46b8da;\n}\n.notification_widget.info .badge {\n  color: #5bc0de;\n  background-color: #fff;\n}\n.notification_widget.danger {\n  color: #fff;\n  background-color: #d9534f;\n  border-color: #d43f3a;\n}\n.notification_widget.danger:focus,\n.notification_widget.danger.focus {\n  color: #fff;\n  background-color: #c9302c;\n  border-color: #761c19;\n}\n.notification_widget.danger:hover {\n  color: #fff;\n  background-color: #c9302c;\n  border-color: #ac2925;\n}\n.notification_widget.danger:active,\n.notification_widget.danger.active,\n.open > .dropdown-toggle.notification_widget.danger {\n  color: #fff;\n  background-color: #c9302c;\n  border-color: #ac2925;\n}\n.notification_widget.danger:active:hover,\n.notification_widget.danger.active:hover,\n.open > .dropdown-toggle.notification_widget.danger:hover,\n.notification_widget.danger:active:focus,\n.notification_widget.danger.active:focus,\n.open > .dropdown-toggle.notification_widget.danger:focus,\n.notification_widget.danger:active.focus,\n.notification_widget.danger.active.focus,\n.open > .dropdown-toggle.notification_widget.danger.focus {\n  color: #fff;\n  background-color: #ac2925;\n  border-color: #761c19;\n}\n.notification_widget.danger:active,\n.notification_widget.danger.active,\n.open > .dropdown-toggle.notification_widget.danger {\n  background-image: none;\n}\n.notification_widget.danger.disabled:hover,\n.notification_widget.danger[disabled]:hover,\nfieldset[disabled] .notification_widget.danger:hover,\n.notification_widget.danger.disabled:focus,\n.notification_widget.danger[disabled]:focus,\nfieldset[disabled] .notification_widget.danger:focus,\n.notification_widget.danger.disabled.focus,\n.notification_widget.danger[disabled].focus,\nfieldset[disabled] .notification_widget.danger.focus {\n  background-color: #d9534f;\n  border-color: #d43f3a;\n}\n.notification_widget.danger .badge {\n  color: #d9534f;\n  background-color: #fff;\n}\ndiv#pager {\n  background-color: #fff;\n  font-size: 14px;\n  line-height: 20px;\n  overflow: hidden;\n  display: none;\n  position: fixed;\n  bottom: 0px;\n  width: 100%;\n  max-height: 50%;\n  padding-top: 8px;\n  -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);\n  box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);\n  /* Display over codemirror */\n  z-index: 100;\n  /* Hack which prevents jquery ui resizable from changing top. */\n  top: auto !important;\n}\ndiv#pager pre {\n  line-height: 1.21429em;\n  color: #000;\n  background-color: #f7f7f7;\n  padding: 0.4em;\n}\ndiv#pager #pager-button-area {\n  position: absolute;\n  top: 8px;\n  right: 20px;\n}\ndiv#pager #pager-contents {\n  position: relative;\n  overflow: auto;\n  width: 100%;\n  height: 100%;\n}\ndiv#pager #pager-contents #pager-container {\n  position: relative;\n  padding: 15px 0px;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n}\ndiv#pager .ui-resizable-handle {\n  top: 0px;\n  height: 8px;\n  background: #f7f7f7;\n  border-top: 1px solid #cfcfcf;\n  border-bottom: 1px solid #cfcfcf;\n  /* This injects handle bars (a short, wide = symbol) for \n        the resize handle. */\n}\ndiv#pager .ui-resizable-handle::after {\n  content: '';\n  top: 2px;\n  left: 50%;\n  height: 3px;\n  width: 30px;\n  margin-left: -15px;\n  position: absolute;\n  border-top: 1px solid #cfcfcf;\n}\n.quickhelp {\n  /* Old browsers */\n  display: -webkit-box;\n  -webkit-box-orient: horizontal;\n  -webkit-box-align: stretch;\n  display: -moz-box;\n  -moz-box-orient: horizontal;\n  -moz-box-align: stretch;\n  display: box;\n  box-orient: horizontal;\n  box-align: stretch;\n  /* Modern browsers */\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  line-height: 1.8em;\n}\n.shortcut_key {\n  display: inline-block;\n  width: 21ex;\n  text-align: right;\n  font-family: monospace;\n}\n.shortcut_descr {\n  display: inline-block;\n  /* Old browsers */\n  -webkit-box-flex: 1;\n  -moz-box-flex: 1;\n  box-flex: 1;\n  /* Modern browsers */\n  flex: 1;\n}\nspan.save_widget {\n  height: 30px;\n  margin-top: 4px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: baseline;\n  width: 50%;\n  flex: 1;\n}\nspan.save_widget span.filename {\n  height: 100%;\n  line-height: 1em;\n  margin-left: 16px;\n  border: none;\n  font-size: 146.5%;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  border-radius: 2px;\n}\nspan.save_widget span.filename:hover {\n  background-color: #e6e6e6;\n}\n[dir='rtl'] span.save_widget.pull-left {\n  float: right !important;\n  float: right;\n}\n[dir='rtl'] span.save_widget span.filename {\n  margin-left: 0;\n  margin-right: 16px;\n}\nspan.checkpoint_status,\nspan.autosave_status {\n  font-size: small;\n  white-space: nowrap;\n  padding: 0 5px;\n}\n@media (max-width: 767px) {\n  span.save_widget {\n    font-size: small;\n    padding: 0 0 0 5px;\n  }\n  span.checkpoint_status,\n  span.autosave_status {\n    display: none;\n  }\n}\n@media (min-width: 768px) and (max-width: 991px) {\n  span.checkpoint_status {\n    display: none;\n  }\n  span.autosave_status {\n    font-size: x-small;\n  }\n}\n.toolbar {\n  padding: 0px;\n  margin-left: -5px;\n  margin-top: 2px;\n  margin-bottom: 5px;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n}\n.toolbar select,\n.toolbar label {\n  width: auto;\n  vertical-align: middle;\n  margin-right: 2px;\n  margin-bottom: 0px;\n  display: inline;\n  font-size: 92%;\n  margin-left: 0.3em;\n  margin-right: 0.3em;\n  padding: 0px;\n  padding-top: 3px;\n}\n.toolbar .btn {\n  padding: 2px 8px;\n}\n.toolbar .btn-group {\n  margin-top: 0px;\n  margin-left: 5px;\n}\n.toolbar-btn-label {\n  margin-left: 6px;\n}\n#maintoolbar {\n  margin-bottom: -3px;\n  margin-top: -8px;\n  border: 0px;\n  min-height: 27px;\n  margin-left: 0px;\n  padding-top: 11px;\n  padding-bottom: 3px;\n}\n#maintoolbar .navbar-text {\n  float: none;\n  vertical-align: middle;\n  text-align: right;\n  margin-left: 5px;\n  margin-right: 0px;\n  margin-top: 0px;\n}\n.select-xs {\n  height: 24px;\n}\n[dir='rtl'] .btn-group > .btn,\n.btn-group-vertical > .btn {\n  float: right;\n}\n.pulse,\n.dropdown-menu > li > a.pulse,\nli.pulse > a.dropdown-toggle,\nli.pulse.open > a.dropdown-toggle {\n  background-color: #F37626;\n  color: white;\n}\n/**\n * Primary styles\n *\n * Author: Jupyter Development Team\n */\n/** WARNING IF YOU ARE EDITTING THIS FILE, if this is a .css file, It has a lot\n * of chance of beeing generated from the ../less/[samename].less file, you can\n * try to get back the less file by reverting somme commit in history\n **/\n/*\n * We'll try to get something pretty, so we\n * have some strange css to have the scroll bar on\n * the left with fix button on the top right of the tooltip\n */\n@-moz-keyframes fadeOut {\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n  }\n}\n@-webkit-keyframes fadeOut {\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n  }\n}\n@-moz-keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@-webkit-keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n/*properties of tooltip after 'expand'*/\n.bigtooltip {\n  overflow: auto;\n  height: 200px;\n  -webkit-transition-property: height;\n  -webkit-transition-duration: 500ms;\n  -moz-transition-property: height;\n  -moz-transition-duration: 500ms;\n  transition-property: height;\n  transition-duration: 500ms;\n}\n/*properties of tooltip before 'expand'*/\n.smalltooltip {\n  -webkit-transition-property: height;\n  -webkit-transition-duration: 500ms;\n  -moz-transition-property: height;\n  -moz-transition-duration: 500ms;\n  transition-property: height;\n  transition-duration: 500ms;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  height: 80px;\n}\n.tooltipbuttons {\n  position: absolute;\n  padding-right: 15px;\n  top: 0px;\n  right: 0px;\n}\n.tooltiptext {\n  /*avoid the button to overlap on some docstring*/\n  padding-right: 30px;\n}\n.ipython_tooltip {\n  max-width: 700px;\n  /*fade-in animation when inserted*/\n  -webkit-animation: fadeOut 400ms;\n  -moz-animation: fadeOut 400ms;\n  animation: fadeOut 400ms;\n  -webkit-animation: fadeIn 400ms;\n  -moz-animation: fadeIn 400ms;\n  animation: fadeIn 400ms;\n  vertical-align: middle;\n  background-color: #f7f7f7;\n  overflow: visible;\n  border: #ababab 1px solid;\n  outline: none;\n  padding: 3px;\n  margin: 0px;\n  padding-left: 7px;\n  font-family: monospace;\n  min-height: 50px;\n  -moz-box-shadow: 0px 6px 10px -1px #adadad;\n  -webkit-box-shadow: 0px 6px 10px -1px #adadad;\n  box-shadow: 0px 6px 10px -1px #adadad;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 1000;\n}\n.ipython_tooltip a {\n  float: right;\n}\n.ipython_tooltip .tooltiptext pre {\n  border: 0;\n  border-radius: 0;\n  font-size: 100%;\n  background-color: #f7f7f7;\n}\n.pretooltiparrow {\n  left: 0px;\n  margin: 0px;\n  top: -16px;\n  width: 40px;\n  height: 16px;\n  overflow: hidden;\n  position: absolute;\n}\n.pretooltiparrow:before {\n  background-color: #f7f7f7;\n  border: 1px #ababab solid;\n  z-index: 11;\n  content: '';\n  position: absolute;\n  left: 15px;\n  top: 10px;\n  width: 25px;\n  height: 25px;\n  -webkit-transform: rotate(45deg);\n  -moz-transform: rotate(45deg);\n  -ms-transform: rotate(45deg);\n  -o-transform: rotate(45deg);\n}\nul.typeahead-list i {\n  margin-left: -10px;\n  width: 18px;\n}\n[dir='rtl'] ul.typeahead-list i {\n  margin-left: 0;\n  margin-right: -10px;\n}\nul.typeahead-list {\n  max-height: 80vh;\n  overflow: auto;\n}\nul.typeahead-list > li > a {\n  /** Firefox bug **/\n  /* see https://github.com/jupyter/notebook/issues/559 */\n  white-space: normal;\n}\nul.typeahead-list  > li > a.pull-right {\n  float: left !important;\n  float: left;\n}\n[dir='rtl'] .typeahead-list {\n  text-align: right;\n}\n.cmd-palette .modal-body {\n  padding: 7px;\n}\n.cmd-palette form {\n  background: white;\n}\n.cmd-palette input {\n  outline: none;\n}\n.no-shortcut {\n  min-width: 20px;\n  color: transparent;\n}\n[dir='rtl'] .no-shortcut.pull-right {\n  float: left !important;\n  float: left;\n}\n[dir='rtl'] .command-shortcut.pull-right {\n  float: left !important;\n  float: left;\n}\n.command-shortcut:before {\n  content: '(command mode)';\n  padding-right: 3px;\n  color: #777777;\n}\n.edit-shortcut:before {\n  content: '(edit)';\n  padding-right: 3px;\n  color: #777777;\n}\n[dir='rtl'] .edit-shortcut.pull-right {\n  float: left !important;\n  float: left;\n}\n#find-and-replace #replace-preview .match,\n#find-and-replace #replace-preview .insert {\n  background-color: #BBDEFB;\n  border-color: #90CAF9;\n  border-style: solid;\n  border-width: 1px;\n  border-radius: 0px;\n}\n[dir='ltr'] #find-and-replace .input-group-btn + .form-control {\n  border-left: none;\n}\n[dir='rtl'] #find-and-replace .input-group-btn + .form-control {\n  border-right: none;\n}\n#find-and-replace #replace-preview .replace .match {\n  background-color: #FFCDD2;\n  border-color: #EF9A9A;\n  border-radius: 0px;\n}\n#find-and-replace #replace-preview .replace .insert {\n  background-color: #C8E6C9;\n  border-color: #A5D6A7;\n  border-radius: 0px;\n}\n#find-and-replace #replace-preview {\n  max-height: 60vh;\n  overflow: auto;\n}\n#find-and-replace #replace-preview pre {\n  padding: 5px 10px;\n}\n.terminal-app {\n  background: #EEE;\n}\n.terminal-app #header {\n  background: #fff;\n  -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);\n  box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);\n}\n.terminal-app .terminal {\n  width: 100%;\n  float: left;\n  font-family: monospace;\n  color: white;\n  background: black;\n  padding: 0.4em;\n  border-radius: 2px;\n  -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.4);\n  box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.4);\n}\n.terminal-app .terminal,\n.terminal-app .terminal dummy-screen {\n  line-height: 1em;\n  font-size: 14px;\n}\n.terminal-app .terminal .xterm-rows {\n  padding: 10px;\n}\n.terminal-app .terminal-cursor {\n  color: black;\n  background: white;\n}\n.terminal-app #terminado-container {\n  margin-top: 20px;\n}\n/*# sourceMappingURL=style.min.css.map */\n    </style>\n<style type='text/css'>\n    .highlight .hll { background-color: #ffffcc }\n.highlight  { background: #f8f8f8; }\n.highlight .c { color: #408080; font-style: italic } /* Comment */\n.highlight .err { border: 1px solid #FF0000 } /* Error */\n.highlight .k { color: #008000; font-weight: bold } /* Keyword */\n.highlight .o { color: #666666 } /* Operator */\n.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */\n.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */\n.highlight .cp { color: #BC7A00 } /* Comment.Preproc */\n.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */\n.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */\n.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */\n.highlight .gd { color: #A00000 } /* Generic.Deleted */\n.highlight .ge { font-style: italic } /* Generic.Emph */\n.highlight .gr { color: #FF0000 } /* Generic.Error */\n.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */\n.highlight .gi { color: #00A000 } /* Generic.Inserted */\n.highlight .go { color: #888888 } /* Generic.Output */\n.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */\n.highlight .gs { font-weight: bold } /* Generic.Strong */\n.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */\n.highlight .gt { color: #0044DD } /* Generic.Traceback */\n.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */\n.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */\n.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */\n.highlight .kp { color: #008000 } /* Keyword.Pseudo */\n.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */\n.highlight .kt { color: #B00040 } /* Keyword.Type */\n.highlight .m { color: #666666 } /* Literal.Number */\n.highlight .s { color: #BA2121 } /* Literal.String */\n.highlight .na { color: #7D9029 } /* Name.Attribute */\n.highlight .nb { color: #008000 } /* Name.Builtin */\n.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */\n.highlight .no { color: #880000 } /* Name.Constant */\n.highlight .nd { color: #AA22FF } /* Name.Decorator */\n.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */\n.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */\n.highlight .nf { color: #0000FF } /* Name.Function */\n.highlight .nl { color: #A0A000 } /* Name.Label */\n.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */\n.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */\n.highlight .nv { color: #19177C } /* Name.Variable */\n.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */\n.highlight .w { color: #bbbbbb } /* Text.Whitespace */\n.highlight .mb { color: #666666 } /* Literal.Number.Bin */\n.highlight .mf { color: #666666 } /* Literal.Number.Float */\n.highlight .mh { color: #666666 } /* Literal.Number.Hex */\n.highlight .mi { color: #666666 } /* Literal.Number.Integer */\n.highlight .mo { color: #666666 } /* Literal.Number.Oct */\n.highlight .sa { color: #BA2121 } /* Literal.String.Affix */\n.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */\n.highlight .sc { color: #BA2121 } /* Literal.String.Char */\n.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */\n.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */\n.highlight .s2 { color: #BA2121 } /* Literal.String.Double */\n.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */\n.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */\n.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */\n.highlight .sx { color: #008000 } /* Literal.String.Other */\n.highlight .sr { color: #BB6688 } /* Literal.String.Regex */\n.highlight .s1 { color: #BA2121 } /* Literal.String.Single */\n.highlight .ss { color: #19177C } /* Literal.String.Symbol */\n.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */\n.highlight .fm { color: #0000FF } /* Name.Function.Magic */\n.highlight .vc { color: #19177C } /* Name.Variable.Class */\n.highlight .vg { color: #19177C } /* Name.Variable.Global */\n.highlight .vi { color: #19177C } /* Name.Variable.Instance */\n.highlight .vm { color: #19177C } /* Name.Variable.Magic */\n.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */\n    </style>\n<style type='text/css'>\n    \n/* Temporary definitions which will become obsolete with Notebook release 5.0 */\n.ansi-black-fg { color: #3E424D; }\n.ansi-black-bg { background-color: #3E424D; }\n.ansi-black-intense-fg { color: #282C36; }\n.ansi-black-intense-bg { background-color: #282C36; }\n.ansi-red-fg { color: #E75C58; }\n.ansi-red-bg { background-color: #E75C58; }\n.ansi-red-intense-fg { color: #B22B31; }\n.ansi-red-intense-bg { background-color: #B22B31; }\n.ansi-green-fg { color: #00A250; }\n.ansi-green-bg { background-color: #00A250; }\n.ansi-green-intense-fg { color: #007427; }\n.ansi-green-intense-bg { background-color: #007427; }\n.ansi-yellow-fg { color: #DDB62B; }\n.ansi-yellow-bg { background-color: #DDB62B; }\n.ansi-yellow-intense-fg { color: #B27D12; }\n.ansi-yellow-intense-bg { background-color: #B27D12; }\n.ansi-blue-fg { color: #208FFB; }\n.ansi-blue-bg { background-color: #208FFB; }\n.ansi-blue-intense-fg { color: #0065CA; }\n.ansi-blue-intense-bg { background-color: #0065CA; }\n.ansi-magenta-fg { color: #D160C4; }\n.ansi-magenta-bg { background-color: #D160C4; }\n.ansi-magenta-intense-fg { color: #A03196; }\n.ansi-magenta-intense-bg { background-color: #A03196; }\n.ansi-cyan-fg { color: #60C6C8; }\n.ansi-cyan-bg { background-color: #60C6C8; }\n.ansi-cyan-intense-fg { color: #258F8F; }\n.ansi-cyan-intense-bg { background-color: #258F8F; }\n.ansi-white-fg { color: #C5C1B4; }\n.ansi-white-bg { background-color: #C5C1B4; }\n.ansi-white-intense-fg { color: #A1A6B2; }\n.ansi-white-intense-bg { background-color: #A1A6B2; }\n\n.ansi-bold { font-weight: bold; }\n\n    </style>\n\n\n<style type='text/css'>\n/* Overrides of notebook CSS for static HTML export */\nbody {\n  overflow: visible;\n  padding: 8px;\n}\n\ndiv#notebook {\n  overflow: visible;\n  border-top: none;\n}@media print {\n  div.cell {\n    display: block;\n    page-break-inside: avoid;\n  } \n  div.output_wrapper { \n    display: block;\n    page-break-inside: avoid; \n  }\n  div.output { \n    display: block;\n    page-break-inside: avoid; \n  }\n}\n</style>\n\n<!-- Custom stylesheet, it must be in the same directory as the html file -->\n<link rel='stylesheet' href='custom.css'>\n\n<!-- Loading mathjax macro -->\n<!-- Load mathjax -->\n    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML'></script>\n    <!-- MathJax configuration -->\n    <script type='text/x-mathjax-config'>\n    MathJax.Hub.Config({\n        tex2jax: {\n            inlineMath: [ ['$','$'], ['\\\\(','\\\\)'] ],\n            displayMath: [ ['$$','$$'], ['\\\\[','\\\\]'] ],\n            processEscapes: true,\n            processEnvironments: true\n        },\n        // Center justify equations in code and markdown cells. Elsewhere\n        // we use CSS to left justify single line equations in code cells.\n        displayAlign: 'center',\n        'HTML-CSS': {\n            styles: {'.MathJax_Display': {'margin': 0}},\n            linebreaks: { automatic: true }\n        }\n    });\n    </script>\n    <!-- End of mathjax configuration --><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>\n<body>\n  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div tabindex='-1' id='notebook' class='border-box-sizing'>\n    <div class='container' id='notebook-container'>\n\n<div class='cell border-box-sizing code_cell rendered'>\n<div class='input'>\n<div class='prompt input_prompt'>In&nbsp;[1]:</div>\n<div class='inner_cell'>\n    <div class='input_area'>\n<div class=' highlight hl-ipython3'><pre><span></span><span class='kn'>import</span> <span class='nn'>numpy</span> <span class='k'>as</span> <span class='nn'>np</span>\n<span class='c1'># 对应状态集合Q</span>\n<span class='n'>states</span> <span class='o'>=</span> <span class='p'>(</span><span class='s1'>&#39;Box1&#39;</span><span class='p'>,</span> <span class='s1'>&#39;Box2&#39;</span><span class='p'>,</span> <span class='s1'>&#39;Box3&#39;</span><span class='p'>)</span>\n<span class='c1'># 对应观测集合V</span>\n<span class='n'>observations</span> <span class='o'>=</span> <span class='p'>(</span><span class='s1'>&#39;red&#39;</span><span class='p'>,</span> <span class='s1'>&#39;white&#39;</span><span class='p'>)</span>\n<span class='c1'># 初始状态概率向量π</span>\n<span class='n'>start_probability</span> <span class='o'>=</span> <span class='p'>{</span><span class='s1'>&#39;Box1&#39;</span><span class='p'>:</span> <span class='mf'>0.2</span><span class='p'>,</span> <span class='s1'>&#39;Box2&#39;</span><span class='p'>:</span> <span class='mf'>0.4</span><span class='p'>,</span><span class='s1'>&#39;Box3&#39;</span><span class='p'>:</span><span class='mf'>0.4</span><span class='p'>}</span>\n<span class='c1'># 状态转移矩阵A</span>\n<span class='n'>transition_probability</span> <span class='o'>=</span> <span class='p'>{</span>\n    <span class='s1'>&#39;Box1&#39;</span><span class='p'>:</span> <span class='p'>{</span><span class='s1'>&#39;Box1&#39;</span><span class='p'>:</span> <span class='mf'>0.5</span><span class='p'>,</span> <span class='s1'>&#39;Box2&#39;</span><span class='p'>:</span> <span class='mf'>0.2</span><span class='p'>,</span><span class='s1'>&#39;Box3&#39;</span><span class='p'>:</span><span class='mf'>0.3</span><span class='p'>},</span>\n    <span class='s1'>&#39;Box2&#39;</span><span class='p'>:</span> <span class='p'>{</span><span class='s1'>&#39;Box1&#39;</span><span class='p'>:</span> <span class='mf'>0.3</span><span class='p'>,</span> <span class='s1'>&#39;Box2&#39;</span><span class='p'>:</span> <span class='mf'>0.5</span><span class='p'>,</span><span class='s1'>&#39;Box3&#39;</span><span class='p'>:</span><span class='mf'>0.2</span><span class='p'>},</span>\n    <span class='s1'>&#39;Box3&#39;</span><span class='p'>:</span> <span class='p'>{</span><span class='s1'>&#39;Box1&#39;</span><span class='p'>:</span> <span class='mf'>0.2</span><span class='p'>,</span> <span class='s1'>&#39;Box2&#39;</span><span class='p'>:</span> <span class='mf'>0.3</span><span class='p'>,</span><span class='s1'>&#39;Box3&#39;</span><span class='p'>:</span><span class='mf'>0.5</span><span class='p'>},</span>\n<span class='p'>}</span>\n<span class='c1'># 观测概率矩阵B</span>\n<span class='n'>emission_probability</span> <span class='o'>=</span> <span class='p'>{</span>\n    <span class='s1'>&#39;Box1&#39;</span><span class='p'>:</span> <span class='p'>{</span><span class='s1'>&#39;red&#39;</span><span class='p'>:</span> <span class='mf'>0.5</span><span class='p'>,</span> <span class='s1'>&#39;white&#39;</span><span class='p'>:</span> <span class='mf'>0.5</span><span class='p'>},</span>\n    <span class='s1'>&#39;Box2&#39;</span><span class='p'>:</span> <span class='p'>{</span><span class='s1'>&#39;red&#39;</span><span class='p'>:</span> <span class='mf'>0.4</span><span class='p'>,</span> <span class='s1'>&#39;white&#39;</span><span class='p'>:</span> <span class='mf'>0.6</span><span class='p'>},</span>\n    <span class='s1'>&#39;Box3&#39;</span><span class='p'>:</span> <span class='p'>{</span><span class='s1'>&#39;red&#39;</span><span class='p'>:</span> <span class='mf'>0.7</span><span class='p'>,</span> <span class='s1'>&#39;white&#39;</span><span class='p'>:</span> <span class='mf'>0.3</span><span class='p'>},</span>\n<span class='p'>}</span>\n</pre></div>\n\n    </div>\n</div>\n</div>\n\n</div>\n<div class='cell border-box-sizing code_cell rendered'>\n<div class='input'>\n<div class='prompt input_prompt'>In&nbsp;[2]:</div>\n<div class='inner_cell'>\n    <div class='input_area'>\n<div class=' highlight hl-ipython3'><pre><span></span><span class='c1'># 随机生成观测序列和状态序列    </span>\n<span class='k'>def</span> <span class='nf'>simulate</span><span class='p'>(</span><span class='n'>T</span><span class='p'>):</span>\n\n    <span class='k'>def</span> <span class='nf'>draw_from</span><span class='p'>(</span><span class='n'>probs</span><span class='p'>):</span>\n        <span class='sd'>&quot;&quot;&quot;</span>\n<span class='sd'>        1.np.random.multinomial:</span>\n<span class='sd'>        按照多项式分布，生成数据</span>\n<span class='sd'>        &gt;&gt;&gt; np.random.multinomial(20, [1/6.]*6, size=2)</span>\n<span class='sd'>                array([[3, 4, 3, 3, 4, 3],</span>\n<span class='sd'>                       [2, 4, 3, 4, 0, 7]])</span>\n<span class='sd'>         For the first run, we threw 3 times 1, 4 times 2, etc.  </span>\n<span class='sd'>         For the second, we threw 2 times 1, 4 times 2, etc.</span>\n<span class='sd'>        2.np.where:</span>\n<span class='sd'>        &gt;&gt;&gt; x = np.arange(9.).reshape(3, 3)</span>\n<span class='sd'>        &gt;&gt;&gt; np.where( x &gt; 5 )</span>\n<span class='sd'>        (array([2, 2, 2]), array([0, 1, 2]))</span>\n<span class='sd'>        &quot;&quot;&quot;</span>\n        <span class='k'>return</span> <span class='n'>np</span><span class='o'>.</span><span class='n'>where</span><span class='p'>(</span><span class='n'>np</span><span class='o'>.</span><span class='n'>random</span><span class='o'>.</span><span class='n'>multinomial</span><span class='p'>(</span><span class='mi'>1</span><span class='p'>,</span><span class='n'>probs</span><span class='p'>)</span> <span class='o'>==</span> <span class='mi'>1</span><span class='p'>)[</span><span class='mi'>0</span><span class='p'>][</span><span class='mi'>0</span><span class='p'>]</span>\n\n    <span class='n'>observations</span> <span class='o'>=</span> <span class='n'>np</span><span class='o'>.</span><span class='n'>zeros</span><span class='p'>(</span><span class='n'>T</span><span class='p'>,</span> <span class='n'>dtype</span><span class='o'>=</span><span class='nb'>int</span><span class='p'>)</span>\n    <span class='n'>states</span> <span class='o'>=</span> <span class='n'>np</span><span class='o'>.</span><span class='n'>zeros</span><span class='p'>(</span><span class='n'>T</span><span class='p'>,</span> <span class='n'>dtype</span><span class='o'>=</span><span class='nb'>int</span><span class='p'>)</span>\n    <span class='n'>states</span><span class='p'>[</span><span class='mi'>0</span><span class='p'>]</span> <span class='o'>=</span> <span class='n'>draw_from</span><span class='p'>(</span><span class='n'>pi</span><span class='p'>)</span>\n    <span class='n'>observations</span><span class='p'>[</span><span class='mi'>0</span><span class='p'>]</span> <span class='o'>=</span> <span class='n'>draw_from</span><span class='p'>(</span><span class='n'>B</span><span class='p'>[</span><span class='n'>states</span><span class='p'>[</span><span class='mi'>0</span><span class='p'>],:])</span>\n    <span class='k'>for</span> <span class='n'>t</span> <span class='ow'>in</span> <span class='nb'>range</span><span class='p'>(</span><span class='mi'>1</span><span class='p'>,</span> <span class='n'>T</span><span class='p'>):</span>\n        <span class='n'>states</span><span class='p'>[</span><span class='n'>t</span><span class='p'>]</span> <span class='o'>=</span> <span class='n'>draw_from</span><span class='p'>(</span><span class='n'>A</span><span class='p'>[</span><span class='n'>states</span><span class='p'>[</span><span class='n'>t</span><span class='o'>-</span><span class='mi'>1</span><span class='p'>],:])</span>\n        <span class='n'>observations</span><span class='p'>[</span><span class='n'>t</span><span class='p'>]</span> <span class='o'>=</span> <span class='n'>draw_from</span><span class='p'>(</span><span class='n'>B</span><span class='p'>[</span><span class='n'>states</span><span class='p'>[</span><span class='n'>t</span><span class='p'>],:])</span>\n    <span class='k'>return</span> <span class='n'>observations</span><span class='p'>,</span> <span class='n'>states</span>\n</pre></div>\n\n    </div>\n</div>\n</div>\n\n</div>\n<div class='cell border-box-sizing code_cell rendered'>\n<div class='input'>\n<div class='prompt input_prompt'>In&nbsp;[3]:</div>\n<div class='inner_cell'>\n    <div class='input_area'>\n<div class=' highlight hl-ipython3'><pre><span></span><span class='k'>def</span> <span class='nf'>generate_index_map</span><span class='p'>(</span><span class='n'>lables</span><span class='p'>):</span>\n    <span class='n'>id2label</span> <span class='o'>=</span> <span class='p'>{}</span>\n    <span class='n'>label2id</span> <span class='o'>=</span> <span class='p'>{}</span>\n    <span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span>\n    <span class='k'>for</span> <span class='n'>l</span> <span class='ow'>in</span> <span class='n'>lables</span><span class='p'>:</span>\n        <span class='n'>id2label</span><span class='p'>[</span><span class='n'>i</span><span class='p'>]</span> <span class='o'>=</span> <span class='n'>l</span>\n        <span class='n'>label2id</span><span class='p'>[</span><span class='n'>l</span><span class='p'>]</span> <span class='o'>=</span> <span class='n'>i</span>\n        <span class='n'>i</span> <span class='o'>+=</span> <span class='mi'>1</span>\n    <span class='k'>return</span> <span class='n'>id2label</span><span class='p'>,</span> <span class='n'>label2id</span>\n \n<span class='n'>states_id2label</span><span class='p'>,</span> <span class='n'>states_label2id</span> <span class='o'>=</span> <span class='n'>generate_index_map</span><span class='p'>(</span><span class='n'>states</span><span class='p'>)</span>\n<span class='n'>observations_id2label</span><span class='p'>,</span> <span class='n'>observations_label2id</span> <span class='o'>=</span> <span class='n'>generate_index_map</span><span class='p'>(</span><span class='n'>observations</span><span class='p'>)</span>\n<span class='nb'>print</span><span class='p'>(</span><span class='n'>states_id2label</span><span class='p'>,</span> <span class='n'>states_label2id</span><span class='p'>)</span>\n<span class='nb'>print</span><span class='p'>(</span><span class='n'>observations_id2label</span><span class='p'>,</span> <span class='n'>observations_label2id</span><span class='p'>)</span>\n</pre></div>\n\n    </div>\n</div>\n</div>\n\n<div class='output_wrapper'>\n<div class='output'>\n\n\n<div class='output_area'>\n\n    <div class='prompt'></div>\n\n\n<div class='output_subarea output_stream output_stdout output_text'>\n<pre>{0: &#39;Box1&#39;, 1: &#39;Box2&#39;, 2: &#39;Box3&#39;} {&#39;Box1&#39;: 0, &#39;Box2&#39;: 1, &#39;Box3&#39;: 2}\n{0: &#39;red&#39;, 1: &#39;white&#39;} {&#39;red&#39;: 0, &#39;white&#39;: 1}\n</pre>\n</div>\n</div>\n\n</div>\n</div>\n\n</div>\n<div class='cell border-box-sizing code_cell rendered'>\n<div class='input'>\n<div class='prompt input_prompt'>In&nbsp;[4]:</div>\n<div class='inner_cell'>\n    <div class='input_area'>\n<div class=' highlight hl-ipython3'><pre><span></span><span class='k'>def</span> <span class='nf'>convert_map_to_vector</span><span class='p'>(</span><span class='n'>map_</span><span class='p'>,</span> <span class='n'>label2id</span><span class='p'>):</span>\n    <span class='sd'>&quot;&quot;&quot;将概率向量从dict转换成一维array&quot;&quot;&quot;</span>\n    <span class='n'>v</span> <span class='o'>=</span> <span class='n'>np</span><span class='o'>.</span><span class='n'>zeros</span><span class='p'>(</span><span class='nb'>len</span><span class='p'>(</span><span class='n'>map_</span><span class='p'>),</span> <span class='n'>dtype</span><span class='o'>=</span><span class='nb'>float</span><span class='p'>)</span>\n    <span class='k'>for</span> <span class='n'>e</span> <span class='ow'>in</span> <span class='n'>map_</span><span class='p'>:</span>\n        <span class='n'>v</span><span class='p'>[</span><span class='n'>label2id</span><span class='p'>[</span><span class='n'>e</span><span class='p'>]]</span> <span class='o'>=</span> <span class='n'>map_</span><span class='p'>[</span><span class='n'>e</span><span class='p'>]</span>\n    <span class='k'>return</span> <span class='n'>v</span>\n\n \n<span class='k'>def</span> <span class='nf'>convert_map_to_matrix</span><span class='p'>(</span><span class='n'>map_</span><span class='p'>,</span> <span class='n'>label2id1</span><span class='p'>,</span> <span class='n'>label2id2</span><span class='p'>):</span>\n    <span class='sd'>&quot;&quot;&quot;将概率转移矩阵从dict转换成矩阵&quot;&quot;&quot;</span>\n    <span class='n'>m</span> <span class='o'>=</span> <span class='n'>np</span><span class='o'>.</span><span class='n'>zeros</span><span class='p'>((</span><span class='nb'>len</span><span class='p'>(</span><span class='n'>label2id1</span><span class='p'>),</span> <span class='nb'>len</span><span class='p'>(</span><span class='n'>label2id2</span><span class='p'>)),</span> <span class='n'>dtype</span><span class='o'>=</span><span class='nb'>float</span><span class='p'>)</span>\n    <span class='k'>for</span> <span class='n'>line</span> <span class='ow'>in</span> <span class='n'>map_</span><span class='p'>:</span>\n        <span class='k'>for</span> <span class='n'>col</span> <span class='ow'>in</span> <span class='n'>map_</span><span class='p'>[</span><span class='n'>line</span><span class='p'>]:</span>\n            <span class='n'>m</span><span class='p'>[</span><span class='n'>label2id1</span><span class='p'>[</span><span class='n'>line</span><span class='p'>]][</span><span class='n'>label2id2</span><span class='p'>[</span><span class='n'>col</span><span class='p'>]]</span> <span class='o'>=</span> <span class='n'>map_</span><span class='p'>[</span><span class='n'>line</span><span class='p'>][</span><span class='n'>col</span><span class='p'>]</span>\n    <span class='k'>return</span> <span class='n'>m</span>\n</pre></div>\n\n    </div>\n</div>\n</div>\n\n</div>\n<div class='cell border-box-sizing code_cell rendered'>\n<div class='input'>\n<div class='prompt input_prompt'>In&nbsp;[5]:</div>\n<div class='inner_cell'>\n    <div class='input_area'>\n<div class=' highlight hl-ipython3'><pre><span></span><span class='n'>A</span> <span class='o'>=</span> <span class='n'>convert_map_to_matrix</span><span class='p'>(</span><span class='n'>transition_probability</span><span class='p'>,</span> <span class='n'>states_label2id</span><span class='p'>,</span> <span class='n'>states_label2id</span><span class='p'>)</span>\n<span class='nb'>print</span><span class='p'>(</span><span class='s2'>&quot;状态转移概率矩阵：</span><span class='se'>\\n</span><span class='s2'>&quot;</span><span class='p'>,</span><span class='n'>A</span><span class='p'>)</span>\n<span class='n'>B</span> <span class='o'>=</span> <span class='n'>convert_map_to_matrix</span><span class='p'>(</span><span class='n'>emission_probability</span><span class='p'>,</span> <span class='n'>states_label2id</span><span class='p'>,</span> <span class='n'>observations_label2id</span><span class='p'>)</span>\n<span class='nb'>print</span><span class='p'>(</span><span class='s2'>&quot;观测概率矩阵</span><span class='se'>\\n</span><span class='s2'>&quot;</span><span class='p'>,</span><span class='n'>B</span><span class='p'>)</span>\n<span class='n'>observations_index</span> <span class='o'>=</span> <span class='p'>[</span><span class='n'>observations_label2id</span><span class='p'>[</span><span class='n'>o</span><span class='p'>]</span> <span class='k'>for</span> <span class='n'>o</span> <span class='ow'>in</span> <span class='n'>observations</span><span class='p'>]</span>\n<span class='n'>pi</span> <span class='o'>=</span> <span class='n'>convert_map_to_vector</span><span class='p'>(</span><span class='n'>start_probability</span><span class='p'>,</span> <span class='n'>states_label2id</span><span class='p'>)</span>\n<span class='nb'>print</span><span class='p'>(</span><span class='s2'>&quot;初始状态概率向量</span><span class='se'>\\n</span><span class='s2'>&quot;</span><span class='p'>,</span><span class='n'>pi</span><span class='p'>)</span>\n</pre></div>\n\n    </div>\n</div>\n</div>\n\n<div class='output_wrapper'>\n<div class='output'>\n\n\n<div class='output_area'>\n\n    <div class='prompt'></div>\n\n\n<div class='output_subarea output_stream output_stdout output_text'>\n<pre>状态转移概率矩阵：\n [[0.5 0.2 0.3]\n [0.3 0.5 0.2]\n [0.2 0.3 0.5]]\n观测概率矩阵\n [[0.5 0.5]\n [0.4 0.6]\n [0.7 0.3]]\n初始状态概率向量\n [0.2 0.4 0.4]\n</pre>\n</div>\n</div>\n\n</div>\n</div>\n\n</div>\n<div class='cell border-box-sizing code_cell rendered'>\n<div class='input'>\n<div class='prompt input_prompt'>In&nbsp;[6]:</div>\n<div class='inner_cell'>\n    <div class='input_area'>\n<div class=' highlight hl-ipython3'><pre><span></span><span class='c1'># 生成模拟数据</span>\n<span class='n'>observations_data</span><span class='p'>,</span> <span class='n'>states_data</span> <span class='o'>=</span> <span class='n'>simulate</span><span class='p'>(</span><span class='mi'>10</span><span class='p'>)</span>\n<span class='nb'>print</span><span class='p'>(</span><span class='n'>states_data</span><span class='p'>)</span>\n<span class='nb'>print</span><span class='p'>(</span><span class='n'>observations_data</span><span class='p'>)</span>\n<span class='c1'># 相应的label</span>\n<span class='nb'>print</span><span class='p'>(</span><span class='s2'>&quot;盒子的状态: &quot;</span><span class='p'>,</span> <span class='p'>[</span><span class='n'>states_id2label</span><span class='p'>[</span><span class='n'>index</span><span class='p'>]</span> <span class='k'>for</span> <span class='n'>index</span> <span class='ow'>in</span> <span class='n'>states_data</span><span class='p'>])</span>\n<span class='nb'>print</span><span class='p'>(</span><span class='s2'>&quot;得到的观测: &quot;</span><span class='p'>,</span> <span class='p'>[</span><span class='n'>observations_id2label</span><span class='p'>[</span><span class='n'>index</span><span class='p'>]</span> <span class='k'>for</span> <span class='n'>index</span> <span class='ow'>in</span> <span class='n'>observations_data</span><span class='p'>])</span>\n</pre></div>\n\n    </div>\n</div>\n</div>\n\n<div class='output_wrapper'>\n<div class='output'>\n\n\n<div class='output_area'>\n\n    <div class='prompt'></div>\n\n\n<div class='output_subarea output_stream output_stdout output_text'>\n<pre>[0 2 2 1 1 1 1 0 0 0]\n[1 0 0 1 0 1 1 0 0 0]\n盒子的状态:  [&#39;Box1&#39;, &#39;Box3&#39;, &#39;Box3&#39;, &#39;Box2&#39;, &#39;Box2&#39;, &#39;Box2&#39;, &#39;Box2&#39;, &#39;Box1&#39;, &#39;Box1&#39;, &#39;Box1&#39;]\n得到的观测:  [&#39;white&#39;, &#39;red&#39;, &#39;red&#39;, &#39;white&#39;, &#39;red&#39;, &#39;white&#39;, &#39;white&#39;, &#39;red&#39;, &#39;red&#39;, &#39;red&#39;]\n</pre>\n</div>\n</div>\n\n</div>\n</div>\n\n</div>\n    </div>\n  </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->\n</body>\n\n \n\n\n</html>\n\" style=\"scrolling:no;\">\n</iframe>\n\n<script>\n\n$(\"#ipynb\").load( function() {\nconsole.log($(\"#ipynb\").contents().find(\"body\").find(\"#notebook\"));\ndocument.getElementById('ipynb').height=$(\"#ipynb\").contents().find(\"#notebook\").height()+100;\n})\n</script> \n    \n\n<h2 id=\"hmm模型的三个基本问题\">HMM模型的三个基本问题</h2>\n<p>HMM在实际应用中，一般会遇上三种问题：</p>\n<ol type=\"1\">\n<li><strong>概率计算问题</strong>：给定模型<span class=\"math inline\">\\(\\lambda = (A,B,\\pi)\\)</span> 和观测序列<span class=\"math inline\">\\(O={o_1,o_2,...,o_T}\\)</span>，计算在模型<span class=\"math inline\">\\(\\lambda\\)</span>下观测序列<span class=\"math inline\">\\(O\\)</span>出现的概率<span class=\"math inline\">\\(P(O|\\lambda)\\)</span></li>\n<li><strong>学习问题</strong>：已知观测序列<span class=\"math inline\">\\(O={o_1,o_2,\\cdots,o_T}\\)</span>，估计模型<span class=\"math inline\">\\(\\lambda= (A,B,\\pi)\\)</span>，使得<span class=\"math inline\">\\(P(O|\\lambda)\\)</span>最大。即是用最大似然法的方法估计参数。</li>\n<li><strong>预测问题</strong>：（亦称为 decoding 解码问题）已知观测序列<span class=\"math inline\">\\(O={o_1,o_2,...,o_T}\\)</span>和模型<span class=\"math inline\">\\(\\lambda = (A,B,\\pi)\\)</span>，求给定的观测序列条件概率<span class=\"math inline\">\\(P(I|O)\\)</span>最大的状态序列<span class=\"math inline\">\\(I = (i_1,i_2,\\cdots,i_T)\\)</span>，即是给定观测序列，求最有可能的状态序列。</li>\n</ol>\n<p>回到上面的例子，这三个问题就是：</p>\n<ol type=\"1\">\n<li><strong>概率计算问题</strong>：如果给定模型参数，抽球结果某一系列观测的序列状态出现的概率</li>\n<li><strong>学习问题</strong>：根据抽球结果某一些列观测的状态，学习模型参数。</li>\n<li><strong>预测问题</strong>：根据学到的模型，预测抽球的序列。</li>\n</ol>\n<h3 id=\"前向后向算法评估观察序列概率\">前向后向算法评估观察序列概率</h3>\n<p>首先要解决的问题是上面的问题一，即是概率计算问题，在模型<span class=\"math inline\">\\(\\lambda\\)</span>下观测序列<span class=\"math inline\">\\(O\\)</span>出现的概率<span class=\"math inline\">\\(P(O|\\lambda)\\)</span>。</p>\n<h4 id=\"直接计算法\">直接计算法</h4>\n<p>因为我们知道所有的隐藏状态之间的转移概率和所有从隐藏状态到观测状态生成概率，那么我们是可以暴力求解的。 我们可以列举出所有可能出现的长度为T的隐藏序列<span class=\"math inline\">\\(I = (i_1,i_2,\\cdots,i_T)\\)</span>，分布求出这些隐藏序列与观测序列<span class=\"math inline\">\\(O={o_1,o_2,...,o_T}\\)</span>的联合概率分布<span class=\"math inline\">\\(P(O,I|\\lambda)\\)</span>，这样我们就可以求出边缘分布<span class=\"math inline\">\\(P(O|\\lambda)\\)</span></p>\n<p>算法步骤如下：</p>\n<ol type=\"1\">\n<li>任意一个隐藏序列<span class=\"math inline\">\\(I = (i_1,i_2,\\cdots,i_T)\\)</span>出现的概率是: <span class=\"math display\">\\[\nP(I|\\lambda) = \\pi_{i_1} a_{i_1i_2} a_{i_2i_3}... a_{i_{T-1}\\;\\;i_T}\n\\]</span></li>\n<li>对上面这种状态序列，产生观测序列<span class=\"math inline\">\\(O={o_1,o_2,...,o_T}\\)</span>的概率是： <span class=\"math display\">\\[\nP(O|I,\\lambda)=b_{i_1}(o_1)b_{i_2}(o_2)...b_{i_T}(o_{T})\n\\]</span></li>\n<li>则O和I联合出现的概率是： <span class=\"math display\">\\[\nP(O,I|\\lambda)=P(O|I,\\lambda)P(I|\\lambda)=\\pi_{i_1}b_{i_1}(o_1)a_{i_1i_2}b_{i_2}(o_2)...a_{i_{T-1}i_T}b_{i_T}(o_{T})\n\\]</span></li>\n<li>对所有可能的<span class=\"math inline\">\\(I\\)</span>求和，得到: <span class=\"math display\">\\[\nP(O|λ)=\\sum_IP(O,I|\\lambda)=\\sum_{i_1,...,i_T}\\pi_{i_1}b_{i_1}(o_1)a_{i_1i_2}b_{i_2}(o_2)...a_{i_{T-1}i_T}b_{i_T}(o_{T})\n\\]</span> 如果直接计算，时间复杂度太高，是<span class=\"math inline\">\\(O(TN^T)\\)</span></li>\n</ol>\n<p>因此对于一些隐藏状态数极少的模型，我们可以用暴力求解法来得到观测序列出现的概率，但是如果隐藏状态多，则上述算法太耗时，我们需要寻找其他简洁的算法。</p>\n<p>前向后向算法就是来帮助我们在较低的时间复杂度情况下求解这个问题的。 #### 前向算法（或者后向算法） 前向算法本质上属于动态规划的算法，也就是我们要通过找到局部状态递推的公式，这样一步步的从子问题的最优解拓展到整个问题的最优解。</p>\n<p>在前向算法中，通过定义“前向概率”来定义动态规划的这个局部状态。</p>\n<p><strong>前向概率：</strong>定义时刻<span class=\"math inline\">\\(t\\)</span>时隐藏状态为<span class=\"math inline\">\\(q_i\\)</span>, 观测状态的序列为<span class=\"math inline\">\\(o_1,o_2,\\cdots,o_t\\)</span>的概率为前向概率，记做： <span class=\"math display\">\\[\n\\alpha_t(i) = P(o_1,o_2,...o_t, i_t =q_i | \\lambda)\n\\]</span></p>\n<p>利用的思想是动态规划中的递推：</p>\n<p>即是利用在时刻<span class=\"math inline\">\\(t\\)</span>掌握的前向概率信息推出<span class=\"math inline\">\\(t+1\\)</span>时刻各个隐藏状态的前向概率。具体步骤如下： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/12/16/423B35A6-5DE4-432E-A68D-CD4FB933C0C9.png\" alt=\"前向算法递推步骤\"> 算法步骤如下：</p>\n<p><strong>输入</strong>：隐马模型<span class=\"math inline\">\\(\\lambda = (A, B, \\Pi)\\)</span>，观测序列<span class=\"math inline\">\\(O=(o_1,o_2,...o_T)\\)</span>; <strong>输出</strong>：观测序列概率<span class=\"math inline\">\\(P(O|λ)\\)</span>.</p>\n<p><strong>step 1：</strong> 计算<span class=\"math inline\">\\(t=1\\)</span>时刻的各个隐藏状态初始前向概率： <span class=\"math display\">\\[\\alpha_1(i) = \\pi_ib_i(o_1),\\; i=1,2,...N\\]</span> <strong>step 2：</strong>递推时刻<span class=\"math inline\">\\(2,3,\\cdots,T\\)</span>时刻的前向概率： <span class=\"math display\">\\[\n\\alpha_{t+1}(i) = \\Big[\\sum\\limits_{j=1}^N\\alpha_t(j)a_{ji}\\Big]b_i(o_{t+1}),\\; i=1,2,...N\n\\]</span> <strong>step 3：</strong>计算最终结果： <span class=\"math display\">\\[\nP(O|\\lambda) = \\sum\\limits_{i=1}^N\\alpha_T(i)\n\\]</span></p>\n<p>从递推公式可以看出，我们的算法时间复杂度是<span class=\"math inline\">\\(O(TN^2)\\)</span></p>\n<p>后向算法原理亦是如此。</p>\n<p>实现代码如下:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 接上面代码</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">forward</span><span class=\"params\">(obs_seq)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"前向算法\"\"\"</span></span><br><span class=\"line\">    N = A.shape[<span class=\"number\">0</span>]</span><br><span class=\"line\">    T = len(obs_seq)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># F保存前向概率矩阵</span></span><br><span class=\"line\">    F = np.zeros((N,T))</span><br><span class=\"line\">    F[:,<span class=\"number\">0</span>] = pi * B[:, obs_seq[<span class=\"number\">0</span>]]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, T):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> n <span class=\"keyword\">in</span> range(N):</span><br><span class=\"line\">            F[n,t] = np.dot(F[:,t<span class=\"number\">-1</span>], (A[:,n])) * B[n, obs_seq[t]]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> F, sum(F[:,T<span class=\"number\">-1</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">backward</span><span class=\"params\">(obs_seq)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"后向算法\"\"\"</span></span><br><span class=\"line\">    N = A.shape[<span class=\"number\">0</span>]</span><br><span class=\"line\">    T = len(obs_seq)</span><br><span class=\"line\">    <span class=\"comment\"># X保存后向概率矩阵</span></span><br><span class=\"line\">    X = np.zeros((N,T))</span><br><span class=\"line\">    X[:,<span class=\"number\">-1</span>:] = <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> reversed(range(T<span class=\"number\">-1</span>)):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> n <span class=\"keyword\">in</span> range(N):</span><br><span class=\"line\">            X[n,t] = np.sum(X[:,t+<span class=\"number\">1</span>] * A[n,:] * B[:, obs_seq[t+<span class=\"number\">1</span>]])</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> X, sum(pi*B[:,<span class=\"number\">0</span>]*X[:,<span class=\"number\">0</span>])</span><br></pre></td></tr></table></figure>\n<p>结果如下： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/12/16/238936F0-D7CC-4527-9C36-B7AA0B9D25FB.png\" alt=\"结果\"></p>\n<h3 id=\"鲍姆-韦尔奇算法求解hmm参数\">鲍姆-韦尔奇算法求解HMM参数</h3>\n<p>HMM模型参数求解根据已知的条件可以分为两种情况。 第一种情况较为简单，就是我们已知<span class=\"math inline\">\\(D\\)</span>个长度为<span class=\"math inline\">\\(T\\)</span>的观测序列和对应的隐藏状态序列，<span class=\"math inline\">\\(\\{(O_1, I_1), (O_2, I_2), ...(O_D, I_D)\\}\\)</span>是已知的，此时我们可以很容易的用最大似然来求解模型参数。 <img src=\"media/76C08584-F650-4B94-90DC-0C18D99EC5B0.png\" alt=\"求解步骤\"></p>\n<p>可见第一种情况下求解模型还是很简单的。但是在很多时候，我们无法得到HMM样本观察序列对应的隐藏序列，只有D个长度为T的观测序列，即是<span class=\"math inline\">\\(\\{(O_1), (O_2), ...(O_D)\\}\\)</span>是已知的，此时我们能不能求出合适的HMM模型参数呢？这就是我们的第二种情况，它的解法最常用的是鲍姆-韦尔奇算法，其实就是基于EM算法的求解。</p>\n<h3 id=\"维特比算法解码隐藏状态序列\">维特比算法解码隐藏状态序列</h3>\n<h2 id=\"分词实战\">分词实战</h2>\n","categories":["机器学习","NLP"],"tags":["NLP"]},{"title":"Gibbs采样","url":"https://suool.net/2018/11/17/Markov-Chain-Monte-Carlo-4/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"前言\">前言</h2>\n<p>M-H采样已经可以很好的解决蒙特卡罗方法需要的任意概率分布的样本集的问题。但是M-H采样有两个缺点：一是需要计算接受率，在高维时计算量大。并且由于接受率的原因导致算法收敛时间变长。二是有些高维数据，特征的条件概率分布好求，但是特征的联合分布不好求。因此需要一个好的方法来改进M-H采样，这就是我们下面讲到的Gibbs采样。 <a id=\"more\"></a></p>\n<h3 id=\"重新寻找合适的细致平稳条件\">重新寻找合适的细致平稳条件</h3>\n<p>之前在 MCMC 采样及 M-H 采样的时候提到一个细致平稳条件,其表述如下:</p>\n<p>如果非周期马尔科夫链的状态转移矩阵<span class=\"math inline\">\\(P\\)</span>和概率分布<span class=\"math inline\">\\(π(x)\\)</span>对于所有的<span class=\"math inline\">\\(i,j\\)</span>满足： <span class=\"math display\">\\[\n\\pi(i)P(i,j) = \\pi(j)P(j,i)\n\\]</span></p>\n<p>则称概率分布<span class=\"math inline\">\\(π(x)\\)</span>是状态转移矩阵<span class=\"math inline\">\\(P\\)</span>的平稳分布。上式被称为细致平稳条件(<code>detailed balance condition</code>)。</p>\n<p>现在我们换一个思路。</p>\n<p>从二维的数据分布开始，假设<span class=\"math inline\">\\(π(x_1,x_2)\\)</span>是一个二维联合数据分布，观察第一个特征维度相同的两个点A<span class=\"math inline\">\\(A(x_1^{(1)},x_2^{(1)})\\)</span>和B<span class=\"math inline\">\\(A(x_1^{(1)},x_2^{(2)})\\)</span>，容易发现下面两式成立：</p>\n<p><span class=\"math display\">\\[\n\\pi(x_1^{(1)},x_2^{(1)}) \\pi(x_2^{(2)} | x_1^{(1)}) = \\pi(x_1^{(1)})\\pi(x_2^{(1)}|x_1^{(1)}) \\pi(x_2^{(2)} | x_1^{(1)}) \\\\\n\\pi(x_1^{(1)},x_2^{(2)}) \\pi(x_2^{(1)} | x_1^{(1)}) = \\pi(x_1^{(1)}) \\pi(x_2^{(2)} | x_1^{(1)})\\pi(x_2^{(1)}|x_1^{(1)})\n\\]</span></p>\n<p>由于两式的右边相等，因此我们有： <span class=\"math display\">\\[\n\\pi(x_1^{(1)},x_2^{(1)}) \\pi(x_2^{(2)} | x_1^{(1)})  = \\pi(x_1^{(1)},x_2^{(2)}) \\pi(x_2^{(1)} | x_1^{(1)})\n\\]</span></p>\n<p>也就是： <span class=\"math display\">\\[\n\\pi(A) \\pi(x_2^{(2)} | x_1^{(1)})  = \\pi(B) \\pi(x_2^{(1)} | x_1^{(1)})\n\\]</span></p>\n<p>观察上式再观察细致平稳条件的公式，我们发现在<span class=\"math inline\">\\(x_1=x^{(1)}_1\\)</span>这条直线上，如果用条件概率分布<span class=\"math inline\">\\(π(x_2|x^{(1)}_1)\\)</span>作为马尔科夫链的状态转移概率，则任意两个点之间的转移满足细致平稳条件！同样的道理，在<span class=\"math inline\">\\(x_2=x^{(1)}_2\\)</span>这条直线上，如果用条件概率分布<span class=\"math inline\">\\(π(x_1|x^{(1)}_2)\\)</span>作为马尔科夫链的状态转移概率，则任意两个点之间的转移也满足细致平稳条件。那是因为假如有一点C<span class=\"math inline\">\\((x^{(2)}_1,x^{(1)}_2)\\)</span>,我们可以得到： <span class=\"math display\">\\[\n\\pi(A) \\pi(x_1^{(2)} | x_2^{(1)})  = \\pi(C) \\pi(x_1^{(1)} | x_2^{(1)})\n\\]</span></p>\n<p>基于上面的发现，我们可以这样构造分布<span class=\"math inline\">\\(π(x_1,x_2)\\)</span>的马尔可夫链对应的状态转移矩阵P： <span class=\"math display\">\\[\nP(A \\to B) = \\pi(x_2^{(B)}|x_1^{(1)})\\;\\; if\\; x_1^{(A)} = x_1^{(B)} =x_1^{(1)} \\\\\nP(A \\to C) = \\pi(x_1^{(C)}|x_2^{(1)})\\;\\; if\\; x_2^{(A)} = x_2^{(C)} =x_2^{(1)} \\\\\nP(A \\to D) = 0\\;\\; else\n\\]</span></p>\n<p>有了上面这个状态转移矩阵，我们很容易验证平面上的任意两点E,F，满足细致平稳条件：</p>\n<p><span class=\"math display\">\\[\n\\pi(E)P(E \\to F)  = \\pi(F)P(F \\to E)\n\\]</span></p>\n<p>###二维Gibbs采样 利用上一节找到的状态转移矩阵，我们就得到了二维Gibbs采样，这个采样需要两个维度之间的条件概率。</p>\n<p>###多维Gibbs采样</p>\n<p>##Gibbs采样小结 由于Gibbs采样在高维特征时的优势，目前我们通常意义上的MCMC采样都是用的Gibbs采样。当然Gibbs采样是从M-H采样的基础上的进化而来的，同时Gibbs采样要求数据至少有两个维度，一维概率分布的采样是没法用Gibbs采样的,这时M-H采样仍然成立。</p>\n","categories":["统计学"],"tags":["算法"]},{"title":"MCMC采样及M-H采样","url":"https://suool.net/2018/11/17/Markov-Chain-Monte-Carlo-3/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h1 id=\"mcmc采样及m-h采样\">MCMC采样及M-H采样</h1>\n<h2 id=\"前言\">前言</h2>\n<p><a href=\"https://suool.net/2018/11/16/Markov-Chain-Monte-Carlo-2/\">前面的文章</a>\b\b已经说到给定一个概率平稳分布π, 只要能够其马尔科夫链状态转移矩阵P，我们就可以找到一种通用的概率分布采样方法，进而用于蒙特卡罗模拟。现在就学习下解决这个问题的办法：MCMC采样和它的易用版M-H采样。</p>\n<p>如何能做到这一点呢？我们主要使用如下的定理。 <a id=\"more\"></a></p>\n<h3 id=\"马尔科夫链的细致平稳条件\">马尔科夫链的细致平稳条件</h3>\n<p>细致平稳条件: 如果非周期马尔科夫链的状态转移矩阵<span class=\"math inline\">\\(P\\)</span>和概率分布<span class=\"math inline\">\\(π(x)\\)</span>对于所有的<span class=\"math inline\">\\(i,j\\)</span>满足： <span class=\"math display\">\\[\n\\pi(i)P(i,j) = \\pi(j)P(j,i)\n\\]</span></p>\n<p>则称概率分布<span class=\"math inline\">\\(π(x)\\)</span>是状态转移矩阵<span class=\"math inline\">\\(P\\)</span>的平稳分布。上式被称为细致平稳条件(<code>detailed balance condition</code>)。</p>\n<p>其实这个定理是显而易见的，因为细致平稳条件的物理含义就是对于任何两个状态<span class=\"math inline\">\\(i,j\\)</span>, 从<span class=\"math inline\">\\(i\\)</span>转移出去到<span class=\"math inline\">\\(j\\)</span>而丢失的概率质量，恰好会被从<span class=\"math inline\">\\(j\\)</span>转移回<span class=\"math inline\">\\(i\\)</span>的概率质量补充回来，所以状态上的概率质量<span class=\"math inline\">\\(π(i\\)</span>)是稳定的，从而<span class=\"math inline\">\\(π(x)\\)</span>是马尔科夫链的平稳分布。</p>\n<p>\b证明很简单,由细致平稳条件可知: <span class=\"math display\">\\[\n\\sum\\limits_{i=1}^{\\infty}\\pi(i)P(i,j)  = \\sum\\limits_{i=1}^{\\infty} \\pi(j)P(j,i) =  \\pi(j)\\sum\\limits_{i=1}^{\\infty} P(j,i) =  \\pi(j)\n\\]</span></p>\n<p>将上式用矩阵表示即为： <span class=\"math display\">\\[\n\\pi P = \\pi\n\\]</span></p>\n<p>即满足马尔可夫链的收敛性质。也就是说，只要我们找到了可以使概率分布<span class=\"math inline\">\\(π(x)\\)</span>满足细致平稳分布的矩阵<span class=\"math inline\">\\(P\\)</span>即可。这给了我们寻找从平稳分布<span class=\"math inline\">\\(π\\)</span>, 找到对应的马尔科夫链状态转移矩阵<span class=\"math inline\">\\(P\\)</span>的新思路。</p>\n<p>不过不幸的是，仅仅从细致平稳条件还是很难找到合适的矩阵P。比如我们的目标平稳分布是<span class=\"math inline\">\\(π(x)\\)</span>,随机找一个马尔科夫链状态转移矩阵<span class=\"math inline\">\\(Q\\)</span>,它是很难满足细致平稳条件的，即: <span class=\"math display\">\\[\n\\pi(i)Q(i,j) \\neq \\pi(j)Q(j,i)\n\\]</span></p>\n<p>那么如何使这个等式满足呢？</p>\n<h2 id=\"mcmc采样\">MCMC采样</h2>\n<p>由于一般情况下，目标平稳分布<span class=\"math inline\">\\(π(x)\\)</span>和某一个马尔科夫链状态转移矩阵<span class=\"math inline\">\\(Q\\)</span>不满足细致平稳条件，即: <span class=\"math display\">\\[\n\\pi(i)Q(i,j) \\neq \\pi(j)Q(j,i)\n\\]</span></p>\n<p>我们可以对上式做一个改造，使细致平稳条件成立。方法是引入一个<span class=\"math inline\">\\(α(i,j)\\)</span>,使上式可以取等号，即：</p>\n<p><span class=\"math display\">\\[\n\\pi(i)Q(i,j)\\alpha(i,j) = \\pi(j)Q(j,i)\\alpha(j,i)\n\\]</span></p>\n<p>此时的问题转化为什么样的<span class=\"math inline\">\\(α(i,j)\\)</span>可以使等式成立, 其实很简单，只要满足下两式即可： <span class=\"math display\">\\[\n\\alpha(i,j) = \\pi(j)Q(j,i) \\\\\n\\alpha(j,i) = \\pi(i)Q(i,j)\n\\]</span></p>\n<p>这样，我们就得到了我们的分布<span class=\"math inline\">\\(π(x)\\)</span>对应的马尔科夫链状态转移矩阵<span class=\"math inline\">\\(P\\)</span>，满足： <span class=\"math display\">\\[\nP(i,j) = Q(i,j)\\alpha(i,j)\n\\]</span></p>\n<p>也就是说，我们的目标矩阵<span class=\"math inline\">\\(P\\)</span>可以通过任意一个马尔科夫链状态转移矩阵<span class=\"math inline\">\\(Q\\)</span>乘以<span class=\"math inline\">\\(α(i,j)\\)</span>得到。<span class=\"math inline\">\\(α(i,j)\\)</span>我们有一般称之为接受率。取值在[0,1]之间，可以理解为一个概率值。即目标矩阵<span class=\"math inline\">\\(P\\)</span>可以通过任意一个马尔科夫链状态转移矩阵<span class=\"math inline\">\\(Q\\)</span>以一定的接受率获得。这个很像我们在<a href=\"https://suool.net/2018/11/16/Markov-Chain-Monte-Carlo-1/\">蒙特卡罗方法</a>讲到的接受-拒绝采样，那里是以一个常用分布通过一定的接受-拒绝概率得到一个非常见分布，这里是以一个常见的马尔科夫链状态转移矩阵<span class=\"math inline\">\\(Q\\)</span>通过一定的接受-拒绝概率得到目标转移矩阵<span class=\"math inline\">\\(P\\)</span>,两者的解决问题思路是类似的。</p>\n<p><strong>MCMC的采样过程</strong>如下</p>\n<ol type=\"1\">\n<li>输入我们任意选定的马尔科夫链状态转移矩阵<span class=\"math inline\">\\(Q\\)</span>，平稳分布<span class=\"math inline\">\\(π(x)\\)</span>，设定状态转移次数阈值<span class=\"math inline\">\\(n_1\\)</span>，需要的样本个数<span class=\"math inline\">\\(n_2\\)</span></li>\n<li>从任意简单概率分布采样得到初始状态值<span class=\"math inline\">\\(x_0\\)</span></li>\n<li><span class=\"math inline\">\\(for\\; t=0 \\; to \\; n_1+n_2−1:\\)</span>\n<ol type=\"1\">\n<li>从条件概率分布<span class=\"math inline\">\\(Q(x|x_t)\\)</span>中采样得到样本<span class=\"math inline\">\\(x_∗\\)</span></li>\n<li>从均匀分布采样<span class=\"math inline\">\\(u∼uniform[0,1]\\)</span></li>\n<li>如果<span class=\"math inline\">\\(u &lt; \\alpha(x_t,x_{*}) = \\pi(x_{*})Q(x_{*},x_t)\\)</span>, 则接受转移<span class=\"math inline\">\\(x_t \\to x_{*}\\)</span>，即<span class=\"math inline\">\\(x_{t+1}= x_{*}\\)</span></li>\n<li>否则不接受转移，<span class=\"math inline\">\\(t=max(t−1,0)\\)</span></li>\n</ol></li>\n<li>样本集<span class=\"math inline\">\\((x_{n_1}, x_{n_1+1},..., x_{n_1+n_2-1})\\)</span>即为我们需要的平稳分布对应的样本集。</li>\n</ol>\n<p>以上的MCMC采样算法已经能很漂亮的工作了，不过它有一个小的问题：马尔科夫链<span class=\"math inline\">\\(Q\\)</span>在转移的过程中的接受率<span class=\"math inline\">\\(α(i,j)\\)</span>可能偏小，这样采样过程中容易原地踏步，拒绝大量的跳转，使得马尔科夫链收敛到平稳分布<span class=\"math inline\">\\(p(x)\\)</span>的速度太慢。有可能我们采样了上百万次马尔可夫链还没有收敛，也就是上面这个<span class=\"math inline\">\\(n_1\\)</span>要非常非常的大，这让人难以接受，怎么办呢？</p>\n<p>看下节.</p>\n<h2 id=\"m-h采样\">M-H采样</h2>\n<p>M-H采样是Metropolis-Hastings采样的简称，这个算法首先由Metropolis提出，被Hastings改进，因此被称之为Metropolis-Hastings采样或M-H采样.</p>\n<p>M-H采样解决了我们上一节MCMC采样接受率过低的问题。</p>\n<p>假设<span class=\"math inline\">\\(α(i,j)=0.1,α(j,i)=0.2\\)</span>此时满足细致平稳条件，于是: <span class=\"math display\">\\[\np(i)q(i,j) \\cdot 0.1=p(j)q(j,i) \\cdot 0.2\n\\]</span></p>\n<p>上式两边同时扩大5倍，等式变为: <span class=\"math display\">\\[\np(i)q(i,j) \\cdot 0.5=p(j)q(j,i) \\cdot 1\n\\]</span></p>\n<p>我们提高了接受率，而细致平稳条件并没有打破。这启发我们可以把细致平稳条件中<span class=\"math inline\">\\(α(i,j),α(j,i)\\)</span>等比例放大，使得两数中较大的一个放大到1，如此提高了采样中的跳转接受率。 这样我们的接受率可以做如下改进，即： <span class=\"math display\">\\[\n\\alpha(i,j) = min\\{ \\frac{\\pi(j)Q(j,i)}{\\pi(i)Q(i,j)},1\\}\n\\]</span></p>\n<p>通过这个微小的改造，我们就得到了可以在实际应用中使用的M-H采样算法过程如下：</p>\n<ol type=\"1\">\n<li>输入我们任意选定的马尔科夫链状态转移矩阵<span class=\"math inline\">\\(Q\\)</span>，平稳分布<span class=\"math inline\">\\(π(x)\\)</span>，设定状态转移次数阈值<span class=\"math inline\">\\(n_1\\)</span>，需要的样本个数<span class=\"math inline\">\\(n_2\\)</span></li>\n<li>从任意简单概率分布采样得到初始状态值<span class=\"math inline\">\\(x_0\\)</span></li>\n<li><span class=\"math inline\">\\(for\\; t=0 \\;to\\; n_1+n_2−1:\\)</span>\n<ol type=\"1\">\n<li>从条件概率分布<span class=\"math inline\">\\(Q(x|x_t)\\)</span>中采样得到样本<span class=\"math inline\">\\(x_∗\\)</span></li>\n<li>从均匀分布采样<span class=\"math inline\">\\(u∼uniform[0,1]\\)</span></li>\n<li>如果<span class=\"math inline\">\\(u &lt; \\alpha(x_t,x_{*}) = min\\{ \\frac{\\pi(j)Q(j,i)}{\\pi(i)Q(i,j)},1\\}\\)</span>, 则接受转移<span class=\"math inline\">\\(x_t \\to x_{*}\\)</span>，即<span class=\"math inline\">\\(x_{t+1}=x_∗\\)</span></li>\n<li>否则不接受转移，<span class=\"math inline\">\\(t=max(t-1,0)\\)</span></li>\n</ol></li>\n<li>样本集<span class=\"math inline\">\\((x_{n_1}, x_{n_1+1},..., x_{n_1+n_2-1})\\)</span>即为我们需要的平稳分布对应的样本集。</li>\n</ol>\n<p>很多时候，我们选择的马尔科夫链状态转移矩阵<span class=\"math inline\">\\(Q\\)</span>如果是对称的，即满足<span class=\"math inline\">\\(Q(i,j)=Q(j,i)\\)</span>,这时我们的接受率可以进一步简化为： <span class=\"math display\">\\[\n\\alpha(i,j) = min\\{ \\frac{\\pi(j)}{\\pi(i)},1\\}\n\\]</span></p>\n<h2 id=\"note注意点\">Note注意点</h2>\n<ul>\n<li>具体的关于上述两个采样的方法的转移矩阵<span class=\"math inline\">\\(Q\\)</span>的选择，如果是离散的分布，那么只要这个矩阵满足每行概率和为1即可，没有特殊要求。如果是连续分布，则一般会选择正态分布作为<span class=\"math inline\">\\(Q\\)</span>，因为正态分布的联合分布，条件分布，边缘分布都是正态分布，所以后面计算条件概率比较的容易。对采样的好坏一般影响都不大，只能说不同的<span class=\"math inline\">\\(Q\\)</span>对算法的收敛速度会快有慢，只要收敛了，最后的采样结果都是可以的。</li>\n<li>这里<span class=\"math inline\">\\(α(i,j)\\)</span>是某一个位置的<span class=\"math inline\">\\((i,j)\\)</span>的接受率，所以α实际上也是一个矩阵，如果按矩阵的写法，就是:<span class=\"math inline\">\\(P=Qα^T\\)</span>, 不要理解为所有的位置都乘以的是同一个α(i,j),这是不对的。</li>\n</ul>\n<h3 id=\"m-h采样实例\">M-H采样实例</h3>\n<p>我们的目标平稳分布是一个均值3，标准差2的正态分布，而选择的马尔可夫链状态转移矩阵<span class=\"math inline\">\\(Q(i,j)\\)</span>的条件转移概率是以<span class=\"math inline\">\\(i\\)</span>为均值,方差<span class=\"math inline\">\\(1\\)</span>的正态分布在位置<span class=\"math inline\">\\(j\\)</span>的值。这个例子仅仅用来加深对M-H采样过程的理解。毕竟一个普通的一维正态分布用不着去用M-H采样来获得样本。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"keyword\">import</span> math</span><br><span class=\"line\"><span class=\"keyword\">from</span> scipy.stats <span class=\"keyword\">import</span> norm</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\">%matplotlib inline</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">norm_dist_prob</span><span class=\"params\">(theta)</span>:</span></span><br><span class=\"line\">    y = norm.pdf(theta, loc=<span class=\"number\">3</span>, scale=<span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> y</span><br><span class=\"line\"></span><br><span class=\"line\">T = <span class=\"number\">100000</span></span><br><span class=\"line\">pi = [<span class=\"number\">0</span> <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(T)]</span><br><span class=\"line\">sigma = <span class=\"number\">1</span></span><br><span class=\"line\">t = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> t &lt; T<span class=\"number\">-1</span>:</span><br><span class=\"line\">    t = t + <span class=\"number\">1</span></span><br><span class=\"line\">    pi_star = norm.rvs(loc=pi[t - <span class=\"number\">1</span>], scale=sigma, size=<span class=\"number\">1</span>, random_state=<span class=\"keyword\">None</span>)</span><br><span class=\"line\">    alpha = min(<span class=\"number\">1</span>, (norm_dist_prob(pi_star[<span class=\"number\">0</span>]) / norm_dist_prob(pi[t - <span class=\"number\">1</span>])))</span><br><span class=\"line\"></span><br><span class=\"line\">    u = random.uniform(<span class=\"number\">0</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> u &lt; alpha:</span><br><span class=\"line\">        pi[t] = pi_star[<span class=\"number\">0</span>]</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        pi[t] = pi[t - <span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">plt.scatter(pi, norm.pdf(pi, loc=<span class=\"number\">3</span>, scale=<span class=\"number\">2</span>))</span><br><span class=\"line\">num_bins = <span class=\"number\">1000</span></span><br><span class=\"line\">plt.hist(pi, num_bins, density=<span class=\"number\">1</span>, facecolor=<span class=\"string\">'red'</span>, alpha=<span class=\"number\">0.7</span>)</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></table></figure>\n<p>结果如下： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/11/19/977C93F7-DC2F-4E60-BC0F-820B055DF4C4.png\" alt=\"采样结果\"></p>\n<h2 id=\"m-h采样总结\">M-H采样总结</h2>\n<p>M-H采样完整解决了使用蒙特卡罗方法需要的任意概率分布样本集的问题，因此在实际生产环境得到了广泛的应用。</p>\n<p>但是在大数据时代，M-H采样面临着两大难题：</p>\n<ol type=\"1\">\n<li><p>我们的数据特征非常的多，M-H采样由于接受率计算式<span class=\"math inline\">\\(\\frac{\\pi(j)Q(j,i)}{\\pi(i)Q(i,j)}\\)</span>的存在，在高维时需要的计算时间非常的可观，算法效率很低。同时<span class=\"math inline\">\\(α(i,j)\\)</span>一般小于1，有时候辛苦计算出来却被拒绝了。能不能做到不拒绝转移呢？</p></li>\n<li><p>由于特征维度大，很多时候我们甚至很难求出目标的各特征维度联合分布，但是可以方便求出各个特征之间的条件概率分布。这时候我们能不能只有各维度之间条件概率分布的情况下方便的采样呢？</p></li>\n</ol>\n<p>Gibbs采样解决了上面两个问题，因此在大数据时代，MCMC采样基本是Gibbs采样的天下，下一篇我们就来学习Gibbs采样。</p>\n","categories":["统计学"],"tags":["算法"]},{"title":"NLP 之分词技术概述","url":"https://suool.net/2018/11/16/Text-Segmentation-1/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"前言\">前言</h2>\n<p>NLP 的问题领域中，首先的要解决核心问题就是分词。在英文以空格来作为天然的词语间隔的语言中，分词是非常容易的；但是在中文领域，词以汉字为单位组成，词语与词语之间并无天然的界限，句子或短语之间以标点符号作为间隔。这就导致在中文领域做 NLP 的前提是做好中文分词技术。 <a id=\"more\"></a></p>\n<h3 id=\"基于规则的分词\">基于规则的分词</h3>\n<p>中文分词技术是中文\b NLP 领域一个非常基础而核心的问题。在此问题被提出来之后，主要有三种思路出现，分别是：基于规则的分词、基于统计的分词、混合方式分词（规则+统计）。</p>\n<p>基于规则的分词是一种\b机械的分词方法，主要通过维护词典，在切分语句的时候，通过将语句中的每个字符串与词表中的词语逐一匹配，找到即切分，否则不切分。按照匹配切分的方法，主要有：正向最大匹配法（MM），逆向最大匹配法（RMM）以及双向最大匹配法（BM）。</p>\n<p>基于规则的方式其优点和缺点\b都显而易见，当今的环境下，这种方式已不再是主流，不再细说。</p>\n<p>###基于统计的分词</p>\n<p>基于统计的分词其主要思想是把每个词看作是由词的最小单位的各个字组成的，如果相连的字在不同的文本中出现的次数越多，就说明这个相连的字很可能就是一个词。因此可以利用字与字相邻出现的频率来反映其组成词的可靠度，统计语料库中相邻共现的各个字的组合的频度，当这个频度高于某一个临界值的时候，便可以认为这个字的组合是一个词语。</p>\n<p>基于统计的分词，基本操作有两个： 1. 建立语言模型 2. 对句子进行\b单词划分，然后对划分结果进行概率计算，获得概率最大的分词方式，这里面用到的统计算法主要有隐马尔科夫模型（HMM）、条件随机场（CRF）等。</p>\n<h2 id=\"语言模型\">语言模型</h2>\n<p>语言模型主要有统计语言模型（n-gram语言模型）和神经网络语言模型等，这里主要详细说明统计语言模型。</p>\n<h3 id=\"n-gram语言模型\">n-gram语言模型</h3>\n<p>统计语言模型简单来讲，就是计算一个句子的概率，更确切的说是计算组成这个句子一系列词语的概率。</p>\n<p>比如给定一个已知词语序列的句子： <span class=\"math display\">\\[\nS = W_1,W_2,\\cdots,W_n\n\\]</span></p>\n<p>一个好的语言模型应该会给这个句子比较高的概率。因为这个句子在语义语法上都没有任何问题。我们可以用如下的公式来计算概率： <span class=\"math display\">\\[\n\\begin{align}\nP(S)&amp;=P(W_1,W_2,...,W_n) \\\\\n&amp;=P(W_1)P(W_2|W_1)\\cdots P(W_n|W_1,W_2,...W_{n−1})\n\\end{align}\n\\]</span></p>\n<p>可是这样的方法存在两个致命的缺陷：</p>\n<ul>\n<li><strong>參数空间过大</strong>：条件概率 <span class=\"math inline\">\\(P(W_n|W_1,W_2,...W_{n−1})\\)</span> 的可能性太多，无法估算，不可能有用；</li>\n<li><strong>数据稀疏严重</strong>：对于非常多词对的组合，在语料库中都没有出现，依据最大似然估计得到的概率将会是0。</li>\n</ul>\n<p>为了解决參数空间过大的问题。引入了<strong>马尔科夫假设：随意一个词出现的概率只与它前面出现的有限的一个或者几个词有关</strong>。</p>\n<p>如果 n=1，即假设每个单词之间相互独立，那么就会得到 unigram 也就是一元语言模型： <strong>Unigram model</strong> <span class=\"math display\">\\[ \nP(W_1,W_2,W_3,...,W_n)=∏^n_{i=1}P(W_i)\n\\]</span></p>\n<p>如果 n=2 则为 \bbi-gram 模型表示，因为，下一个单词和之前一个单词是有很强的关联性 <strong>Bigram model</strong> <span class=\"math display\">\\[\nP(W_1,W_2,W_3,...,W_n)=∏^n_{i=2}P(W_i|W_{i−1})\n\\]</span></p>\n<p>假设一个词的出现仅依赖于它前面出现的两个词，即是 n=3，那么我们就称之为trigram： <strong>Trigram model</strong> <span class=\"math display\">\\[\nP(W_1,W_2,W_3,...,W_n)=∏^n_{i=3}P(W_i|W_{i−1},W_{i−2})\n\\]</span></p>\n<p>一般来说，N 元模型就是假设当前词的出现概率只与它前面的 N-1 个词有关。而这些概率参数都是可以通过大规模语料库来计算.</p>\n<p>同时，n一般不会超过3, 否则参数空间过大，数据稀疏严重，时间复杂度高，精度却提高的不多。对于非常对多词对的组合，在语料库中没有出现，依据最大似然估计得到的概率将会是0。</p>\n<p>当然，对于n-gram模型来说，有很多的平滑方法。即对频率为0的n元对进行估计，典型的平滑算法有加法平滑、Good-Turing平滑、Katz平滑、插值平滑，等等</p>\n<h3 id=\"隐马尔科夫模型\">隐马尔科夫模型</h3>\n<p>隐马尔科夫模型（Hidden Markov Model，以下简称HMM）是比较经典的机器学习模型，它在语言识别，自然语言处理，模式识别等领域得到广泛的应用。当然，随着目前深度学习的崛起，尤其是RNN，LSTM等神经网络序列模型的火热，HMM的地位有所下降。</p>\n<p>这部分内容会在后面专门说明,在 HMM 中也面临着计算复杂度\b过高等问题.</p>\n<h2 id=\"结语\">结语</h2>\n<p>对于文本挖掘中需要的分词功能，一般我们会用现有的工具。简单的英文分词不需要任何工具，通过空格和标点符号就可以分词了，而进一步的英文分词推荐使用 <a href=\"http://www.nltk.org/\" target=\"_blank\" rel=\"noopener\">nltk</a>。对于中文分词，则推荐用<a href=\"https://github.com/fxsjy/jieba/\" target=\"_blank\" rel=\"noopener\">结巴分词</a>（jieba）。这些工具使用都很简单。你的分词没有特别的需求直接使用这些分词工具就可以了。</p>\n<p>分词是传统中文 NLP 的第一步.</p>\n","categories":["机器学习"],"tags":["机器学习"]},{"title":"马尔科夫链及其采样方法","url":"https://suool.net/2018/11/16/Markov-Chain-Monte-Carlo-2/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"前言\">前言</h2>\n<p>了解了什么是蒙特卡罗方法之后，自然引出了马尔可夫链这个概念，其在 WIKI 的解释如下：</p>\n<blockquote>\n<p>马尔可夫链（英语：Markov chain），又称离散时间马尔可夫链（discrete-time Markov chain，缩写为DTMC），因俄国数学家安德烈·马尔可夫得名，为状态空间中经过从一个状态到另一个状态的转换的随机过程。该过程要求具备“无记忆”的性质：下一状态的概率分布只能由当前状态决定，在时间序列中它前面的事件均与之无关。这种特定类型的“无记忆性”称作马尔可夫性质。 在马尔可夫链的每一步，系统根据概率分布，可以从一个状态变到另一个状态，也可以保持当前状态。状态的改变叫做转移，与不同的状态改变相关的概率叫做转移概率。</p>\n</blockquote>\n<a id=\"more\"></a>\n<h2 id=\"定义及性质\">定义及性质</h2>\n<p>依据上述 wiki 的定义可以知道，马尔可夫链能在很多时间序列模型中得到广泛的应用，比如循环神经网络RNN，隐式马尔科夫模型HMM等，当然MCMC也需要它。</p>\n<p>如果用精确的数学定义来描述，则假设我们的序列状态是<span class=\"math inline\">\\(...X_{t-2}, X_{t-1}, X_{t}, X_{t+1},...\\)</span>那么我们的在时刻 <span class=\"math inline\">\\(X_{t+1}\\)</span> 的状态的条件概率仅仅依赖于时刻 <span class=\"math inline\">\\(X_t\\)</span>，即： <span class=\"math display\">\\[\nP(X_{t+1} |...X_{t-2}, X_{t-1}, X_{t} ) = P(X_{t+1} | X_{t})\n\\]</span></p>\n<p>既然某一时刻状态转移的概率只依赖于它的前一个状态，那么我们只要能求出系统中任意两个状态之间的转换概率，这个马尔科夫链的模型就定了。我们来看看下图这个马尔科夫链模型的具体的例子(来源于维基百科)。</p>\n<figure>\n<img src=\"https://suool-bolg.b0.upaiyun.com/2018/11/16/15423528014563.jpg\" alt=\"股市转移概率\"><figcaption>股市转移概率</figcaption>\n</figure>\n<p>这个马尔科夫链是表示股市模型的，共有三种状态：牛市（Bull market）, 熊市（Bear market）和横盘（Stagnant market）。每一个状态都以一定的概率转化到下一个状态。比如，牛市以0.025的概率转化到横盘的状态。这个状态概率转化图可以以矩阵的形式表示。如果我们定义矩阵P某一位置<span class=\"math inline\">\\(P(i,j)\\)</span>的值为<span class=\"math inline\">\\(P(j|i)\\)</span>,即从状态i转化到状态j的概率，并定义牛市为状态0， 熊市为状态1, 横盘为状态2. 这样我们得到了马尔科夫链模型的状态转移矩阵为： <span class=\"math display\">\\[\nP=\\left( \\begin{array}{ccc} 0.9&amp;0.075&amp;0.025 \\\\ 0.15&amp;0.80&amp; 0.05 \\\\ 0.25&amp;0.25&amp;0.5 \\end{array} \\right)\n\\]</span></p>\n<p>假设已知当前处在熊市、牛市、横盘的人的比例是概率分布向量<span class=\"math inline\">\\(π_0=[π_0(1),π_0(2),π_0(3)]\\)</span>,那么第一\b天的分布比例将是<span class=\"math inline\">\\(π_1=π_0P\\)</span>, 第二天的分布比例将是<span class=\"math inline\">\\(π_2=π_1P=π_0P^2\\)</span> ，第n天分布比例将是<span class=\"math inline\">\\(π_n=π_{n−1}P=π_0P^n\\)</span>。</p>\n<p>假设我们当前已知股市的概率分布为：[0.8,0.1,0.1],即80%概率的牛市，10%概率的熊盘与10%的横盘。然后这个状态作为序列概率分布的初始状态<span class=\"math inline\">\\(t_0\\)</span>，将其带入这个状态转移矩阵计算<span class=\"math inline\">\\(t_1,t_2,t_3...\\)</span>的状态。代码如下： <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">matrix = np.matrix([[<span class=\"number\">0.9</span>,<span class=\"number\">0.075</span>,<span class=\"number\">0.025</span>],[<span class=\"number\">0.15</span>,<span class=\"number\">0.8</span>,<span class=\"number\">0.05</span>],[<span class=\"number\">0.25</span>,<span class=\"number\">0.25</span>,<span class=\"number\">0.5</span>]], dtype=float)</span><br><span class=\"line\">vector1 = np.matrix([[<span class=\"number\">0.8</span>,<span class=\"number\">0.1</span>,<span class=\"number\">0.1</span>]], dtype=float)</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">100</span>):</span><br><span class=\"line\">    vector1 = vector1*matrix</span><br><span class=\"line\">    <span class=\"keyword\">print</span> <span class=\"string\">\"Current round:\"</span> , i+<span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">print</span> vector1</span><br></pre></td></tr></table></figure></p>\n<p>通过观察输出结果,可以看出在迭代一定次数之后,数据结果出现了如下的稳定情况 <figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Current round: <span class=\"number\">48</span></span><br><span class=\"line\"><span class=\"string\">[[0.62500011 0.3124999  0.06249999]]</span></span><br><span class=\"line\">Current round: <span class=\"number\">49</span></span><br><span class=\"line\"><span class=\"string\">[[0.62500008 0.31249992 0.06249999]]</span></span><br><span class=\"line\">Current round: <span class=\"number\">50</span></span><br><span class=\"line\"><span class=\"string\">[[0.62500006 0.31249994 0.06249999]]</span></span><br><span class=\"line\">.............</span><br><span class=\"line\">Current round: <span class=\"number\">59</span></span><br><span class=\"line\"><span class=\"string\">[[0.625  0.3125 0.0625]]</span></span><br><span class=\"line\">Current round: <span class=\"number\">60</span></span><br><span class=\"line\"><span class=\"string\">[[0.625  0.3125 0.0625]]</span></span><br><span class=\"line\">Current round: <span class=\"number\">61</span></span><br><span class=\"line\"><span class=\"string\">[[0.625  0.3125 0.0625]]</span></span><br><span class=\"line\">Current round: <span class=\"number\">62</span></span><br><span class=\"line\"><span class=\"string\">[[0.625  0.3125 0.0625]]</span></span><br><span class=\"line\">........</span><br></pre></td></tr></table></figure></p>\n<p>可以发现，从第60轮开始，我们的状态概率分布就不变了，一直保持在[0.625 0.3125 0.0625]，即62.5%的牛市，31.25%的熊市与6.25%的横盘。</p>\n<p>我们现在换一个初始概率分布试一试，现在我们用[0.7,0.1,0.2]作为初始概率分布, \b利用上述的代码计算,得出的结果一样出现的最终状态的概率分布趋于同一个稳定的概率分布[0.625 0.3125 0.0625], 也就是说我们的<strong>马尔科夫链模型的状态转移矩阵收敛到的稳定概率分布与我们的初始状态概率分布无关</strong>。这是一个非常好的性质, 也就是说，如果我们得到了这个稳定概率分布对应的马尔科夫链模型的状态转移矩阵，则我们可以用任意的概率分布样本开始，代入马尔科夫链模型的状态转移矩阵，这样经过一些序列的转换，最终就可以得到符合对应稳定概率分布的样本。</p>\n<p>这个性质不光对我们上面的状态转移矩阵有效，对于绝大多数的其他的马尔科夫链模型的状态转移矩阵也有效。同时不光是离散状态，连续状态时也成立。</p>\n<p>同时这个性质也意味着，对于一个确定的状态转移矩阵 P，它的 n 次幂<span class=\"math inline\">\\(P^n\\)</span>在当 n 大于一定的值的时候也可以发现是确定的.</p>\n<h3 id=\"性质的数学语言描述\">性质的数学语言描述</h3>\n<p>如果一个非周期的马尔科夫链有状态转移矩阵P, 并且它的任何两个状态是连通的，那么<span class=\"math inline\">\\(\\lim_{n \\to \\infty}P_{ij}^n\\)</span>与 i 无关，我们有： <span class=\"math display\">\\[\n\\lim_{n \\to \\infty}P_{ij}^n = \\pi(j) \\tag{1}\n\\]</span></p>\n<p><span class=\"math display\">\\[\n\\lim_{n \\to \\infty}P^n = \\left( \\begin{array}{ccc} \\pi(1)&amp;\\pi(2)&amp;\\ldots&amp;\\pi(j)&amp;\\ldots \\\\ \\pi(1)&amp;\\pi(2)&amp;\\ldots&amp;\\pi(j)&amp;\\ldots \\\\ \\ldots&amp;\\ldots&amp;\\ldots&amp;\\ldots&amp;\\ldots \\\\ \\pi(1)&amp;\\pi(2)&amp;\\ldots&amp;\\pi(j)&amp;\\ldots \\\\ \\ldots&amp;\\ldots&amp;\\ldots&amp;\\ldots&amp;\\ldots \\end{array} \\right) \\tag{2}\n\\]</span></p>\n<p><span class=\"math display\">\\[\n\\pi(j) = \\sum\\limits_{i=0}^{\\infty}\\pi(i)P_{ij} \\tag{3}\n\\]</span></p>\n<p>π 是方程<span class=\"math inline\">\\(πP=π\\)</span>的唯一非负解，其中 <span class=\"math display\">\\[\n\\pi = [\\pi(1),\\pi(2),...,\\pi(j),...]\\;\\; , \\sum\\limits_{i=0}^{\\infty}\\pi(i) = 1 \\tag{4}\n\\]</span></p>\n<p>上面的性质中需要解释的有：</p>\n<ol type=\"1\">\n<li>非周期的马尔科夫链：定理中的“非周期“这个概念不解释，因为我们遇到的绝大多数马氏链都是非周期的；这个主要是指马尔科夫链的状态转化不是循环的，如果是循环的则永远不会收敛。幸运的是我们遇到的马尔科夫链一般都是非周期性的。用数学方式表述则是：对于任意某一状态i，d为集合<span class=\"math inline\">\\(\\{n \\mid n \\geq 1,P_{ii}^n&gt;0 \\}\\)</span>的最大公约数，如果 d=1 ，则该状态为非周期的</li>\n<li>任何两个状态是连通的：这个指的是从任意一个状态可以通过有限步到达其他的任意一个状态，不会出现条件概率一直为0导致不可达的情况。</li>\n<li>马尔科夫链的状态数可以是有限的，也可以是无限的。因此可以用于连续概率分布和离散概率分布。</li>\n<li>π 通常称为马尔科夫链的平稳分布。</li>\n<li>我们用<span class=\"math inline\">\\(X_i\\)</span>表示在马氏链上跳转第 i 步所处的状态，如果<span class=\"math inline\">\\(\\lim_{n \\rightarrow \\infty}P_{ij}^{n} = \\pi(j)\\)</span>存在,很容易证明定理第二个结论 <span class=\"math display\">\\[\nP(X_{n+1}=j) = \\sum_{i=1}^{\\infty}P(X_{n}=i)P(X_{n+1}=j\\mid x_{n}=i)=\\sum_{i=1}^{\\infty}P(X_{n}=i) p_{ij}\n\\]</span></li>\n</ol>\n<h2 id=\"基于马尔科夫链采样\">基于马尔科夫链采样</h2>\n<p>对于给定的概率分布<span class=\"math inline\">\\(p(x)\\)</span> ，我们希望能有便捷的方式生成它对应的样本。由于马尔科夫链能收敛到平稳分布，于是一个很的漂亮想法是：如果我们能构造一个转移矩阵为 P 的马尔科夫链，使得该马尔科夫链的平稳分布恰好是<span class=\"math inline\">\\(p(x)\\)</span>，那么我们从任何一个初始状态<span class=\"math inline\">\\(x_0\\)</span>出发沿着马尔科夫链转移，得到一个转移序列<span class=\"math inline\">\\(x_0,x_1,x_2,\\ldots,x_n,x_{n+1},\\ldots\\)</span>, 如果马尔科夫在第n步已经收敛了，于是我们就得到了<span class=\"math inline\">\\(p(x)\\)</span>的样本<span class=\"math inline\">\\(x_n,x_{n+1},\\ldots\\)</span></p>\n<p>总结下基于马尔科夫链的采样过程：</p>\n<ol type=\"1\">\n<li>输入马尔科夫链状态转移矩阵P，设定状态转移次数阈值<span class=\"math inline\">\\(n_1\\)</span>，需要的样本个数<span class=\"math inline\">\\(n_2\\)</span></li>\n<li>从任意简单概率分布采样得到初始状态值<span class=\"math inline\">\\(x_0\\)</span></li>\n<li><span class=\"math inline\">\\(for t=0 to n_1+n_2−1:\\)</span> 从条件概率分布<span class=\"math inline\">\\(P(x|x_t)\\)</span>中采样得到样本<span class=\"math inline\">\\(x_t+1\\)</span></li>\n</ol>\n<p>样本集<span class=\"math inline\">\\((x_{n1},x_{n_1+1},\\ldots,...,x_{n1+n2−1})\\)</span>即为我们需要的平稳分布对应的样本集。</p>\n<h2 id=\"小结\">小结</h2>\n<p>马尔科夫链的收敛性质主要由转移矩阵P决定， 所以基于马尔科夫链做采样的关键问题是如何构造转移矩阵P，使得平稳分布恰好是我们要的分布<span class=\"math inline\">\\(p(x)\\)</span>。</p>\n<p>如何能做到这一点呢？</p>\n<p>幸运的是，MCMC采样通过迂回的方式解决了上面这个大问题，我们在下一篇来讨论MCMC的采样，以及它的使用改进版采样: M-H(Metropolis-Hastings)采样和Gibbs采样.</p>\n","categories":["统计学"],"tags":["算法"]},{"title":"蒙特卡罗方法概述","url":"https://suool.net/2018/11/16/Markov-Chain-Monte-Carlo-1/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"前言\">前言</h2>\n<p>作为一种随机采样方法，马尔科夫链蒙特卡罗（Markov Chain Monte Carlo，以下简称MCMC）在机器学习,深度学习以及自然语言处理等领域都有广泛的应用，是很多复杂算法求解的基础。</p>\n<p>从名字我们可以看出，MCMC由两个MC组成，即蒙特卡罗方法（Monte Carlo Simulation，简称MC）和马尔科夫链（Markov Chain ，也简称MC）。要弄懂MCMC的原理我们首先得搞清楚蒙特卡罗方法和马尔科夫链的原理。 <a id=\"more\"></a></p>\n<h2 id=\"蒙特卡罗方法\">蒙特卡罗方法</h2>\n<p>蒙特卡罗原来是一个赌场的名称，用它作为名字大概是因为蒙特卡罗方法是一种随机模拟的方法，这很像赌博场里面的扔骰子的过程。原理是通过大量随机样本，去了解一个系统，进而得到所要计算的值。</p>\n<p>它非常强大和灵活，又相当简单易懂，很容易实现。对于许多问题来说，它往往是最简单的计算方法，有时甚至是唯一可行的方法。</p>\n<p>具体的适合理解的例子参考<a href=\"http://www.ruanyifeng.com/blog/2015/07/monte-carlo-method.html\" target=\"_blank\" rel=\"noopener\">这篇文章</a></p>\n<p>给定统计样本集，如何估计产生这个样本集的随机变量概率密度函数,是我们比较熟悉的概率密度估计问题。 求解概率密度估计问题的常用方法是最大似然估计、最大后验估计等。但是，我们思考概率密度估计问题的逆问题:给定一个概率分布p(x)，如何让计算机生成满足这个概率分布的样本。 这个问题就是统计模拟中研究的重要问题–采样(Sampling)。</p>\n<p>如果有一个我们很难求解出<span class=\"math inline\">\\(f(x)\\)</span>的原函数的函数, 现要求其在定义域 [a, b] 上的积分, 如果这个函数是均匀分布, 那么我们可以采样 [a,b] 区间的 n 个值：<span class=\"math inline\">\\({x_0,x_1,...x_{n-1}}\\)</span>,用它们的均值来代表 [a,b] 区间上所有的 f(x) 的值。这样我们上面的定积分的近似求解为:</p>\n<p><span class=\"math display\">\\[\n\\theta = \\int_a^b f(x)dx = \\frac{b-a}{n}\\sum\\limits_{i=0}^{n-1}f(x_i)\n\\]</span></p>\n<p>如果不是均匀分布, 并<strong>假设我们可以得到 <span class=\"math inline\">\\(x\\)</span> 在<span class=\"math inline\">\\([a,b]\\)</span>的概率分布函数<span class=\"math inline\">\\(p(x)\\)</span></strong>，那么我们的定积分求和可以这样进行： <span class=\"math display\">\\[\n\\theta = \\int_a^b f(x)dx =  \\int_a^b \\frac{f(x)}{p(x)}p(x)dx \\approx \\frac{1}{n}\\sum\\limits_{i=0}^{n-1}\\frac{f(x_i)}{p(x_i)}\n\\]</span></p>\n<p>上式最右边的这个形式就是蒙特卡罗方法的一般形式。当然这里是连续函数形式的蒙特卡罗方法，但是在离散时一样成立。</p>\n<p>可以看出，最上面我们假设x在[a,b]之间是均匀分布的时候，p(xi)=1/(b−a)，带入我们有概率分布的蒙特卡罗积分的上式，可以得到： <span class=\"math display\">\\[\n\\frac{1}{n}\\sum\\limits_{i=0}^{n-1}\\frac{f(x_i)}{1/(b-a)} = \\frac{b-a}{n}\\sum\\limits_{i=0}^{n-1}f(x_i)\n\\]</span></p>\n<p>也就是说，我们最上面的均匀分布也可以作为一般概率分布函数<span class=\"math inline\">\\(p(x)\\)</span>在均匀分布时候的特例。那么我们现在的问题转到了如何在已知分布求出 x 的分布<span class=\"math inline\">\\(p(x)\\)</span>对应的若干个样本上来。</p>\n<h2 id=\"采样方法\">采样方法</h2>\n<p>主要有概率分布采样及接受-拒绝采样方法. ###概率分布采样 如果求出了<span class=\"math inline\">\\(x\\)</span>的概率分布，我们可以基于概率分布去采样基于这个概率分布的 n 个<span class=\"math inline\">\\(x\\)</span>的样本集，带入蒙特卡罗求和的式子即可求解。但是还有一个关键的问题需要解决，即如何基于概率分布去采样基于这个概率分布的 n 个<span class=\"math inline\">\\(x\\)</span>的样本集。</p>\n<p>一般而言均匀分布<code>Uniform(0,1)</code>的样本是相对容易生成的。 通过线性同余发生器可以生成伪随机数，我们用确定性算法生成[0,1]之间的伪随机数序列后， 这些序列的各种统计指标和均匀分布<code>Uniform(0,1)</code>的理论计算结果非常接近。这样的伪随机序列就有比较好的统计性质，可以被当成真实的随机数使用。线性同余随机数生成器如下: <span class=\"math display\">\\[\nx_{n+1}=(ax_n+c)~\\textrm{mod}~m\n\\]</span> 式中<span class=\"math inline\">\\(a，c，m\\)</span>是数学推导出的合适的常数。这种算法产生的下一个随机数完全依赖当前的随机数，当随机数序列足够大的时候，随机数会出现重复子序列的情况。 当然，也有很多更加先进的随机数产生算法出现，比如<code>numpy</code>用的是 <code>Mersenne Twister</code> 等.</p>\n<p>而其他常见的概率分布，无论是离散的分布还是连续的分布，它们的样本都可以通过<code>Uniform(0,1)</code>的样本转换而得, 但是如何产生满足其他分布下的随机数呢？</p>\n<p>比如二维正态分布的样本<span class=\"math inline\">\\((Z1,Z2)\\)</span>可以通过通过独立采样得到的<code>uniform(0,1)</code>样本对<span class=\"math inline\">\\((X1,X2)\\)</span>通过如下的式子转换而得： <span class=\"math display\">\\[\nZ_1 = \\sqrt{-2 ln X_1}cos(2\\pi X_2) \\\\\nZ_2 = \\sqrt{-2 ln X_1}sin(2\\pi X_2)\n\\]</span></p>\n<p>其他一些常见的连续分布，比如<code>t分布</code>，<code>F分布</code>，<code>Beta分布</code>，<code>Gamma分布</code>等，都可以通过类似的方式从<code>uniform(0,1)</code>得到的采样样本转化得到。在python的<code>numpy</code>，<code>scikit-learn</code>等类库中，都有生成这些常用分布样本的函数可以使用。</p>\n<p>不过很多时候，我们的x的概率分布不是常见的分布，这意味着我们没法方便的得到这些非常见的概率分布的样本集。那这个问题怎么解决呢？</p>\n<h3 id=\"接受-拒绝采样\">接受-拒绝采样</h3>\n<p>对于概率分布不是常见的分布，一个可行的办法是采用接受-拒绝采样来得到该分布的样本。既然 <span class=\"math inline\">\\(p(x)\\)</span> 太复杂在程序中没法直接采样，那么我设定一个程序可采样的分布 <span class=\"math inline\">\\(q(x\\)</span>) 比如高斯分布，然后按照一定的方法拒绝某些样本，以达到接近 <span class=\"math inline\">\\(p(x)\\)</span> 分布的目的，其中<span class=\"math inline\">\\(q(x)\\)</span>叫做 <code>proposal distribution</code>。</p>\n<p>具体采用过程如下，设定一个方便采样的常用概率分布函数 q(x)，以及一个常量 k，使得 p(x) 总在 kq(x) 的下方。</p>\n<figure>\n<img src=\"https://suool-bolg.b0.upaiyun.com/2018/11/16/15423393056582.jpg\" alt=\"接受-拒绝采样-w283\"><figcaption>接受-拒绝采样-w283</figcaption>\n</figure>\n<p>首先，采样得到<code>q(x)</code>的一个样本<span class=\"math inline\">\\(z_0\\)</span>，采样方法如上，使用<code>uniform(0,1)</code>转换得到。然后，从均匀分布<span class=\"math inline\">\\((0,kq(z_0))\\)</span>中采样得到一个值<span class=\"math inline\">\\(u\\)</span>。如果<span class=\"math inline\">\\(u\\)</span>落在了上图中的灰色区域，则拒绝这次抽样，否则接受这个样本<span class=\"math inline\">\\(z_0\\)</span>。重复以上过程得到 n 个接受的样本 <span class=\"math inline\">\\(z_0,z_1,...z_{n−1}\\)</span>,则最后的蒙特卡罗方法求解结果为： <span class=\"math display\">\\[\n\\frac{1}{n}\\sum\\limits_{i=0}^{n-1}\\frac{f(z_i)}{p(z_i)}\n\\]</span> 整个过程中，我们通过一系列的接受拒绝决策来达到用q(x)模拟p(x)概率分布的目的。</p>\n<h2 id=\"小结\">小结</h2>\n<p>使用接受-拒绝采样，我们可以解决一些概率分布不是常见的分布的时候，得到其采样集并用蒙特卡罗方法求和的目的。但是接受-拒绝采样也只能部分满足我们的需求，在很多时候我们还是很难得到我们的概率分布的样本集。比如：</p>\n<ol type=\"1\">\n<li>对于一些二维分布<span class=\"math inline\">\\(p(x,y)\\)</span>，有时候我们只能得到条件分布<span class=\"math inline\">\\(p(x|y)\\)</span>和<span class=\"math inline\">\\(p(y|x)\\)</span>,却很难得到二维分布<span class=\"math inline\">\\(p(x,y)\\)</span>一般形式，这时我们无法用接受-拒绝采样得到其样本集。</li>\n<li>对于一些高维的复杂非常见分布<span class=\"math inline\">\\(p(x_1,x_2,...,x_n)\\)</span>，我们要找到一个合适的<span class=\"math inline\">\\(q(x)和\\)</span>k$非常困难。</li>\n</ol>\n<p>从上面可以看出，要想将蒙特卡罗方法作为一个通用的采样模拟求和的方法，必须解决如何方便得到各种复杂概率分布的对应的采样样本集的问题。</p>\n<p>此时就需要使用一些更加复杂的随机模拟的方法来生成样本。比如马尔科夫链蒙特卡罗方法，了解这个算法我们首先要对马尔科夫链的平稳分布的性质有基本的认识。</p>\n","categories":["机器学习"],"tags":["算法"]},{"title":"自剖","url":"https://suool.net/2018/11/01/self-analysis/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"说明前面\">说明前面</h2>\n<p>这是一篇去年差不多这个时候写的东西，现在读起来依然适用现在的自己。</p>\n<p>最近这几天是真的有点不好受，昨晚几乎失眠了一整晚，缺少很多的东西，对未来看不清楚，对自己没有信心，心里面就充满了怀疑。 <a id=\"more\"></a> ## 正文</p>\n<p>我终究还是成为了现在的我，我迷失了自我。</p>\n<p>如今的我变成了什么样子呢？ 直观的感受来说，我变成了一个越来越封闭，一个离内在自我越来越远的自己了。这个过程像是我自己亲手给我自己筑了一堵墙，或者说我亲手抛弃了我自己，任由他在那里腐化、堕落、锈蚀，然后，至于此地，我越来越觉得难辨真正的自己是什么样了。</p>\n<p>现在看上一次写这些东西，那时的我的确发现一些问题所在，但是也仅是止步于此，而后至今，我非但未能解决问题，反而使问题更加复杂和难以解决了。</p>\n<p>现在的我越来越认同“最难也最重要的是经营好自己”这句话了。不仅是我现在近乎彻底失败于经营自己，也是在自察我的生活，直观的感觉就是众多问题都是由我而起。 自身都经营不好，谈何经营一段良好的亲密关系，谈何拥有一个好的未来。与人关系及美好的未来，如若缺少一个足够好的自己存在，怎么想都觉得不可能。</p>\n<p>自我的经营，包括内在自我的经营和外在自我的经营。 近些日子，读了一些书，对于内在的自我和意识有了更多更深刻清晰的认识，所以，多谈一下这方面。</p>\n<p>内在的自我不仅仅是指那个理性、逻辑的意识自我，也包括在潜意识中的自我。 内在的意识的自我是我的脑的活动的直接映射，而我的脑的活动则更多的是先验自我的映射，也即是昨日的我造就了今日的我，今日我蕴含着明日的我。 因此，经营内在自我的关键明显就在于经营当下的自我，因为当下所做的每个选择，每个情绪反应都是为以后的自我埋下伏笔，现时的每次情绪反馈和选择都不可避免的成为我的脑的先验自我的经验的一部分，从而成为其下一次重复当下的一个可能选择，重复这个选择即是再次强化意识中的自我，意识又会继续强化我的感受和情绪，进而形成了一个正向的反馈循环。 至此，改变内在自己我的唯一可能就是打破这个过去自我与当下自我的循环，从而造就新的当下自我和未来自我的新的循环的可能。说的在直接点，就是改变当下自我不如过去自我一样的选择和情绪反应，才能为产生一个新的明日自我提供可能。</p>\n<p>纵观这些日子，我则在一遍又一遍的强化那个懒惰、消极、贪婪、放纵的自我，一次又一次的不断重复过去自我所做的错误选择，成为了今日的我，算是“修得正果”。</p>\n<p>外在的自我的经营首先是对自己身体的经营，强身健体，其意义显然无需赘言。其次是外界关系的经营，人际沟通，心智交流。</p>\n<p>这段时间里，在自己的亲密关系里面，因为自己不自觉的要去选择封闭自己，隐藏自己的感受，导致很多问题不仅没有被解决而且变得更加复杂和不堪。对于自己的不满意也使得自己缺少很多的耐心。</p>\n<p>然后，现在就又回到了那个亘古难题：明明知道自己该怎么做，该做什么，但是就是不去做，做不好。</p>\n<p>这里，我先自我剖析我的实际情况： 首先，很多情况下只有在当下这种自剖的时候，我才清醒的意识到自己该做什么，真正在日常生活中，往往是<em>由着自己的大脑做着潜意识下的决定</em>而走了。 其次，即是偶尔能够在面对选择和决定的时候（比如早上起床）意识到自己真正应该做的决定，但是要么是自己创造了一个理由没有去选择，要么是选择了但是具体执行的时候效果很不好。 最后，在自己做了不该做的选择之后，偶尔会意识到自己不应该如此，但是却无法去改变自己的方向，无法停止之前错误的选择造成的行为，而是继续任由自己错误下去。</p>\n<p>根据上面的自己的实际情况，改变自己的可以尝试的方式是，每当自己面临比较关键的选择的时候，主动的去注意观察自己大脑的反应，观察自己潜意识的意图是什么，然后停下来，试着和自己的情绪和感受共处，不要急于做不同的决定，先试着跟它共处。 试着学会觉察自己的潜意识做决定时候的意图，站在一个第三方的角度去看自己的情绪和感受，与这个时候的自己共处，与自我的懒惰、拖延、放纵的意图保持觉察的链接。会对自己更深刻的认识和了解，多去练习这个过程。</p>\n<p>比如早上闹钟响起，要做起不起床的决定的时候，去观察下此时自己内心的意图，不用急着说服自己起床，就纯粹是与此刻自己这个无论是要起床还是继续睡觉的意图保持链接，停下来和它共处，观察，然后再去做决定。</p>\n<p>类似的还有在要不要锻炼，要不要赶紧关上灯关上手机睡觉等等这些决定的时候都一样，试着去观察自己当时的意图，并停下来和它共处。</p>\n<p>这样子必然存在一定的困难，因为这是有意识的觉察无意识决定的过程，但是只要用心去做，还是做得到的，不用急着改变想法，只是尝试着要去观察并且和它共处，把它当作客观存在的东西，把自己当成一个观察的第三者。</p>\n<p>改变，特别是向好的改变，意味着打破大脑同意识的旧有循环，而旧有循环之所以能够成为一个固化的循环，就是因为他能给大脑带来舒适，给意识带来愉悦。因此，改变，便意味这个打破这个正向反馈的“舒适愉悦”的循环，必然伴随着大脑的不适应及情绪上的痛苦体验，也必然是不易的。 但是，好的改变，都值得去尝试和牺牲。</p>\n<p>学会和糟糕的自己和解，同做糟糕决定的大脑和意识共处，去觉察自己的懒惰、放纵等意图闪现的瞬间，然后停下来和他们共处。这是有意识觉察无意识的意图的练习。努力将有意识觉察养成无意识觉察的习惯，会发现更多关于深层次自我的东西。</p>\n<p>这次找出了一些问题，也想了一些解决的方法，试试看吧。</p>\n","categories":["心理学"],"tags":["反思"]},{"title":"pytorch 自定义数据集及 Kaggle 101 数字识别","url":"https://suool.net/2018/10/29/custom-dataset-use-pytorch/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"引言\">引言</h2>\n<p>前面的文章中使用 feed forward neural network 实现了简单的手写数字识别，但是这不能直接照搬到 kaggle上面，因为 kaggle 使用的数据集是 CSV 文件，因此需要自定义一个 pytorch 的数据类型，来完成这个入门题目。</p>\n<p>本文的提纲如下: 1. 自定义 Dataset 2. 模型搭建保存与读取 <a id=\"more\"></a></p>\n<h2 id=\"自定义-dataset\">自定义 Dataset</h2>\n<p>Pytorch的数据读取主要包含三个类: 1. Dataset 2. DataLoader 3. DataLoaderIter</p>\n<p>这三者大致是一个依次封装的关系: Dataset 被封装进DataLoader, DataLoader 被装进 DataLoaderIter。</p>\n<h3 id=\"torch.utils.data.dataset\">torch.utils.data.Dataset</h3>\n<p>这个类的源码如下：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dataset</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"An abstract class representing a Dataset.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    All other datasets should subclass it. All subclasses should override</span></span><br><span class=\"line\"><span class=\"string\">    ``__len__``, that provides the size of the dataset, and ``__getitem__``,</span></span><br><span class=\"line\"><span class=\"string\">    supporting integer indexing in range from 0 to len(self) exclusive.</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, index)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">raise</span> NotImplementedError</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__len__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">raise</span> NotImplementedError</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__add__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ConcatDataset([self, other])</span><br></pre></td></tr></table></figure>\n<p>其类的说明在上述源码的注释中一目了然，这是一个抽象类, 自定义的Dataset需要继承它并且实现下面两个成员方法:</p>\n<ol type=\"1\">\n<li><code>__getitem__()</code> 方法</li>\n<li><code>__len__()</code> 方法</li>\n</ol>\n<p>自定义类的框架如下:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CustomDataset</span><span class=\"params\">(torch.utils.data.Dataset)</span>:</span><span class=\"comment\">#需要继承data.Dataset</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># TODO</span></span><br><span class=\"line\">        <span class=\"comment\"># 1. Initialize file path or list of file names.</span></span><br><span class=\"line\">        <span class=\"comment\"># 做一些初始化的工作</span></span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, index)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># TODO</span></span><br><span class=\"line\">        <span class=\"comment\"># 1. Read one data from file (e.g. using numpy.fromfile, PIL.Image.open).</span></span><br><span class=\"line\">        <span class=\"comment\"># 2. Preprocess the data (e.g. torchvision.Transform).</span></span><br><span class=\"line\">        <span class=\"comment\"># 3. Return a data pair (e.g. image and label).</span></span><br><span class=\"line\">        <span class=\"comment\"># 这里需要注意的是，第一步：read one data，是一个data</span></span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__len__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># You should change 0 to the total size of your dataset.</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n<p>以下是官方的 <code>MNIST</code> 的一个参考例子：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MNIST</span><span class=\"params\">(data.Dataset)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"`MNIST &lt;http://yann.lecun.com/exdb/mnist/&gt;`_ Dataset.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Args:</span></span><br><span class=\"line\"><span class=\"string\">        root (string): Root directory of dataset where ``processed/training.pt``</span></span><br><span class=\"line\"><span class=\"string\">            and  ``processed/test.pt`` exist.</span></span><br><span class=\"line\"><span class=\"string\">        train (bool, optional): If True, creates dataset from ``training.pt``,</span></span><br><span class=\"line\"><span class=\"string\">            otherwise from ``test.pt``.</span></span><br><span class=\"line\"><span class=\"string\">        download (bool, optional): If true, downloads the dataset from the internet and</span></span><br><span class=\"line\"><span class=\"string\">            puts it in root directory. If dataset is already downloaded, it is not</span></span><br><span class=\"line\"><span class=\"string\">            downloaded again.</span></span><br><span class=\"line\"><span class=\"string\">        transform (callable, optional): A function/transform that  takes in an PIL image</span></span><br><span class=\"line\"><span class=\"string\">            and returns a transformed version. E.g, ``transforms.RandomCrop``</span></span><br><span class=\"line\"><span class=\"string\">        target_transform (callable, optional): A function/transform that takes in the</span></span><br><span class=\"line\"><span class=\"string\">            target and transforms it.</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, root, train=True, transform=None, target_transform=None, download=False)</span>:</span></span><br><span class=\"line\">        self.root = os.path.expanduser(root)</span><br><span class=\"line\">        self.transform = transform</span><br><span class=\"line\">        self.target_transform = target_transform</span><br><span class=\"line\">        self.train = train  <span class=\"comment\"># training set or test set</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> download:</span><br><span class=\"line\">            self.download()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> self._check_exists():</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> RuntimeError(<span class=\"string\">'Dataset not found.'</span> +</span><br><span class=\"line\">                               <span class=\"string\">' You can use download=True to download it'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.train:</span><br><span class=\"line\">            self.train_data, self.train_labels = torch.load(</span><br><span class=\"line\">                os.path.join(self.root, self.processed_folder, self.training_file))</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            self.test_data, self.test_labels = torch.load(</span><br><span class=\"line\">                os.path.join(self.root, self.processed_folder, self.test_file))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, index)</span>:</span></span><br><span class=\"line\">        <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        Args:</span></span><br><span class=\"line\"><span class=\"string\">            index (int): Index</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">        Returns:</span></span><br><span class=\"line\"><span class=\"string\">            tuple: (image, target) where target is index of the target class.</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.train:</span><br><span class=\"line\">            img, target = self.train_data[index], self.train_labels[index]</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            img, target = self.test_data[index], self.test_labels[index]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># doing this so that it is consistent with all other datasets</span></span><br><span class=\"line\">        <span class=\"comment\"># to return a PIL Image</span></span><br><span class=\"line\">        img = Image.fromarray(img.numpy(), mode=<span class=\"string\">'L'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.transform <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">            img = self.transform(img)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.target_transform <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">            target = self.target_transform(target)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> img, target</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__len__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.train:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> len(self.train_data)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> len(self.test_data)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_check_exists</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> os.path.exists(os.path.join(self.root, self.processed_folder, self.training_file)) <span class=\"keyword\">and</span> \\</span><br><span class=\"line\">            os.path.exists(os.path.join(self.root, self.processed_folder, self.test_file))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">download</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"string\">\"\"\"Download the MNIST data if it doesn't exist in processed_folder already.\"\"\"</span></span><br><span class=\"line\">        <span class=\"comment\"># PASS</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># PASS</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> fmt_str</span><br></pre></td></tr></table></figure>\n<p>第一个最为重要, 即每次怎么读数据；上面的读取图片的例子中可以看出如何实现这个方法，值得一提的是, <code>pytorch</code> 还提供了很多常用的 <code>transform</code>, 在 <code>torchvision.transforms</code> 里面, 本文中不多介绍, 我常用的有<code>Resize</code> , <code>RandomCrop</code> , <code>Normalize</code> , <code>ToTensor</code> (这个<strong>极为重要</strong>, 可以把一个 <code>PIL或numpy</code> 图片转为 <code>torch.Tensor</code>, 但是好像对 <code>numpy</code> 数组的转换比较受限, 所以这里建议在 <code>__getitem__()</code> 里面用 <code>PIL</code> 来读图片, 而不是用 <code>skimage.io</code>)。</p>\n<p>第二个比较简单, 就是返回整个数据集的长度。</p>\n<p>按照这个思路，我写的Version 1.0 版的如下：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DigitDataSet</span><span class=\"params\">(torch.utils.data.Dataset)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, data_path, train=True, transform=None, target_transform=None)</span>:</span></span><br><span class=\"line\">        self.transform = transform</span><br><span class=\"line\">        self.train = train</span><br><span class=\"line\">        self.target_transform = target_transform</span><br><span class=\"line\">        self.data = pd.read_csv(data_path, header=<span class=\"number\">0</span>, sep=<span class=\"string\">','</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, index)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.train:</span><br><span class=\"line\">            img, target = self.data.iloc[index:index+<span class=\"number\">1</span>, <span class=\"number\">1</span>:].values.reshape(<span class=\"number\">28</span>, <span class=\"number\">28</span>).astype(np.uint8), self.data.iloc[index:index+<span class=\"number\">1</span>, :<span class=\"number\">1</span>].values[<span class=\"number\">0</span>].tolist()[<span class=\"number\">0</span>]</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            img, target = self.data.iloc[index:index + <span class=\"number\">1</span>, :].values.reshape(<span class=\"number\">28</span>, <span class=\"number\">28</span>).astype(np.uint8), \\</span><br><span class=\"line\">                          <span class=\"number\">-1</span></span><br><span class=\"line\">        <span class=\"comment\"># doing this so that it is consistent with all other datasets</span></span><br><span class=\"line\">        <span class=\"comment\"># to return a PIL Image</span></span><br><span class=\"line\">        <span class=\"comment\"># print(target, type(target))</span></span><br><span class=\"line\">        img = Image.fromarray(img)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.transform <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">            img = self.transform(img)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.target_transform <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">            target = self.target_transform(target)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> img, target</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__len__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> len(self.data)</span><br></pre></td></tr></table></figure>\n<p>这是一个显然不够好看的实现方式，存在一些问题，比如没办法划分训练集和验证集，只能读取训练集和测试集。有点模型训练完了，一切看天的意思。</p>\n<p>改进版会在下次再说，这次纯粹是为了解决问题。</p>\n<h3 id=\"torch.utils.data.dataloader\">torch.utils.data.DataLoader</h3>\n<p>这个类中的源代码中的注释非常详细，在此直接贴下来：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DataLoader</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">r\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    Data loader. Combines a dataset and a sampler, and provides</span></span><br><span class=\"line\"><span class=\"string\">    single- or multi-process iterators over the dataset.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Arguments:</span></span><br><span class=\"line\"><span class=\"string\">        dataset (Dataset): dataset from which to load the data.</span></span><br><span class=\"line\"><span class=\"string\">        batch_size (int, optional): how many samples per batch to load</span></span><br><span class=\"line\"><span class=\"string\">            (default: ``1``).</span></span><br><span class=\"line\"><span class=\"string\">        shuffle (bool, optional): set to ``True`` to have the data reshuffled</span></span><br><span class=\"line\"><span class=\"string\">            at every epoch (default: ``False``).</span></span><br><span class=\"line\"><span class=\"string\">        sampler (Sampler, optional): defines the strategy to draw samples from</span></span><br><span class=\"line\"><span class=\"string\">            the dataset. If specified, ``shuffle`` must be False.</span></span><br><span class=\"line\"><span class=\"string\">        batch_sampler (Sampler, optional): like sampler, but returns a batch of</span></span><br><span class=\"line\"><span class=\"string\">            indices at a time. Mutually exclusive with :attr:`batch_size`,</span></span><br><span class=\"line\"><span class=\"string\">            :attr:`shuffle`, :attr:`sampler`, and :attr:`drop_last`.</span></span><br><span class=\"line\"><span class=\"string\">        num_workers (int, optional): how many subprocesses to use for data</span></span><br><span class=\"line\"><span class=\"string\">            loading. 0 means that the data will be loaded in the main process.</span></span><br><span class=\"line\"><span class=\"string\">            (default: ``0``)</span></span><br><span class=\"line\"><span class=\"string\">        collate_fn (callable, optional): merges a list of samples to form a mini-batch.</span></span><br><span class=\"line\"><span class=\"string\">        pin_memory (bool, optional): If ``True``, the data loader will copy tensors</span></span><br><span class=\"line\"><span class=\"string\">            into CUDA pinned memory before returning them.</span></span><br><span class=\"line\"><span class=\"string\">        drop_last (bool, optional): set to ``True`` to drop the last incomplete batch,</span></span><br><span class=\"line\"><span class=\"string\">            if the dataset size is not divisible by the batch size. If ``False`` and</span></span><br><span class=\"line\"><span class=\"string\">            the size of dataset is not divisible by the batch size, then the last batch</span></span><br><span class=\"line\"><span class=\"string\">            will be smaller. (default: ``False``)</span></span><br><span class=\"line\"><span class=\"string\">        timeout (numeric, optional): if positive, the timeout value for collecting a batch</span></span><br><span class=\"line\"><span class=\"string\">            from workers. Should always be non-negative. (default: ``0``)</span></span><br><span class=\"line\"><span class=\"string\">        worker_init_fn (callable, optional): If not ``None``, this will be called on each</span></span><br><span class=\"line\"><span class=\"string\">            worker subprocess with the worker id (an int in ``[0, num_workers - 1]``) as</span></span><br><span class=\"line\"><span class=\"string\">            input, after seeding and before data loading. (default: ``None``)</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    .. note:: By default, each worker will have its PyTorch seed set to</span></span><br><span class=\"line\"><span class=\"string\">              ``base_seed + worker_id``, where ``base_seed`` is a long generated</span></span><br><span class=\"line\"><span class=\"string\">              by main process using its RNG. However, seeds for other libraies</span></span><br><span class=\"line\"><span class=\"string\">              may be duplicated upon initializing workers (w.g., NumPy), causing</span></span><br><span class=\"line\"><span class=\"string\">              each worker to return identical random numbers. (See</span></span><br><span class=\"line\"><span class=\"string\">              :ref:`dataloader-workers-random-seed` section in FAQ.) You may</span></span><br><span class=\"line\"><span class=\"string\">              use :func:`torch.initial_seed()` to access the PyTorch seed for</span></span><br><span class=\"line\"><span class=\"string\">              each worker in :attr:`worker_init_fn`, and use it to set other</span></span><br><span class=\"line\"><span class=\"string\">              seeds before data loading.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    .. warning:: If ``spawn`` start method is used, :attr:`worker_init_fn` cannot be an</span></span><br><span class=\"line\"><span class=\"string\">                 unpicklable object, e.g., a lambda function.</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    __initialized = <span class=\"keyword\">False</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, dataset, batch_size=<span class=\"number\">1</span>, shuffle=False, sampler=None, batch_sampler=None,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                 num_workers=<span class=\"number\">0</span>, collate_fn=default_collate, pin_memory=False, drop_last=False,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                 timeout=<span class=\"number\">0</span>, worker_init_fn=None)</span>:</span></span><br><span class=\"line\">        self.dataset = dataset</span><br><span class=\"line\">        self.batch_size = batch_size</span><br><span class=\"line\">        self.num_workers = num_workers</span><br><span class=\"line\">        self.collate_fn = collate_fn</span><br><span class=\"line\">        self.pin_memory = pin_memory</span><br><span class=\"line\">        self.drop_last = drop_last</span><br><span class=\"line\">        self.timeout = timeout</span><br><span class=\"line\">        self.worker_init_fn = worker_init_fn</span><br><span class=\"line\">        <span class=\"comment\"># PASS</span></span><br><span class=\"line\">        self.sampler = sampler</span><br><span class=\"line\">        self.batch_sampler = batch_sampler</span><br><span class=\"line\">        self.__initialized = <span class=\"keyword\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__setattr__</span><span class=\"params\">(self, attr, val)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.__initialized <span class=\"keyword\">and</span> attr <span class=\"keyword\">in</span> (<span class=\"string\">'batch_size'</span>, <span class=\"string\">'sampler'</span>, <span class=\"string\">'drop_last'</span>):</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> ValueError(<span class=\"string\">'&#123;&#125; attribute should not be set after &#123;&#125; is '</span></span><br><span class=\"line\">                             <span class=\"string\">'initialized'</span>.format(attr, self.__class__.__name__))</span><br><span class=\"line\"></span><br><span class=\"line\">        super(DataLoader, self).__setattr__(attr, val)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> _DataLoaderIter(self)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__len__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> len(self.batch_sampler)</span><br></pre></td></tr></table></figure>\n<p>从他的 <code>__init__</code> 方法中可以看出可以看到, 主要参数有这么几个:</p>\n<ul>\n<li><code>dataset</code> : 即上面自定义的 dataset.</li>\n<li><code>collate_fn</code>: 这个函数用来打包 batch.</li>\n<li><code>num_worker</code>: 非常简单的多线程方法, 只要设置为&gt;=1, 就可以多线程预读数据</li>\n</ul>\n<p>这个类其实就是下面将要讲的 <code>DataLoaderIter</code> 的一个框架, 一共干了两件事: 1. 定义了一堆成员变量, 到时候赋给 <code>DataLoaderIter</code>, 2. 然后有一个 <code>__iter__()</code> 函数, 把自己 &quot;装进&quot; DataLoaderIter 里面.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> DataLoaderIter(self)</span><br></pre></td></tr></table></figure>\n<h3 id=\"torch.utils.data.dataloader.dataloaderiter\">torch.utils.data.dataloader.DataLoaderIter</h3>\n<p>上面提到, <code>DataLoader</code> 就是<code>DataLoaderIter</code>的一个框架, 用来传给<code>DataLoaderIter</code> 一堆参数, 并把自己装进<code>DataLoaderIter</code> 里.</p>\n<p>比如下面一个框架:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CustomDataset</span><span class=\"params\">(Dataset)</span>:</span></span><br><span class=\"line\">   <span class=\"comment\"># 自定义自己的dataset</span></span><br><span class=\"line\"></span><br><span class=\"line\">dataset = CustomDataset()</span><br><span class=\"line\">dataloader = Dataloader(dataset, ...)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> data <span class=\"keyword\">in</span> dataloader:</span><br><span class=\"line\">   <span class=\"comment\"># training...</span></span><br></pre></td></tr></table></figure>\n<p>在for 循环里, 总共有三点操作:</p>\n<ul>\n<li>调用了 <code>dataloader</code> 的 <code>__iter__()</code> 方法, 产生了一个<code>DataLoaderIter</code></li>\n<li>反复调用 <code>DataLoaderIter</code> 的 <code>__next__()</code> 来得到 batch, 具体操作就是, 多次调用 dataset 的 <code>__getitem__()</code> 方法 (如果<code>num_worker&gt;0</code>就多线程调用), 然后用<code>collate_fn</code>来把它们打包成batch. 中间还会涉及到<code>shuffle</code> , 以及 <code>sample</code> 的方法等, 这里就不多说了.</li>\n<li>数据读完后, <code>__next__()</code> 抛出一个 <code>StopIteration</code> 异常, for循环结束, <code>dataloader</code> 失效.</li>\n</ul>\n<h2 id=\"模型搭建保存与读取\">模型搭建保存与读取</h2>\n<p>\b模型的搭建及保存部分和<a href=\"https://suool.net/2018/10/07/feed-forward-neural-network-on-tf-and-pytorch/\">上篇文章</a>的一模一样，这里就不多说了。</p>\n<p>关于模型的读取预测部分代码如下： <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python</span></span><br><span class=\"line\"><span class=\"comment\"># coding: utf-8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">'''</span></span><br><span class=\"line\"><span class=\"string\">Created on 2018-10-29</span></span><br><span class=\"line\"><span class=\"string\">Update  on 2018-10-29</span></span><br><span class=\"line\"><span class=\"string\">Author: SuooL</span></span><br><span class=\"line\"><span class=\"string\">Github: https://github.com/SuooL</span></span><br><span class=\"line\"><span class=\"string\">'''</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> torch.nn <span class=\"keyword\">as</span> nn</span><br><span class=\"line\"><span class=\"keyword\">import</span> torch.utils.data</span><br><span class=\"line\"><span class=\"keyword\">import</span> torchvision.transforms <span class=\"keyword\">as</span> transforms</span><br><span class=\"line\"><span class=\"keyword\">import</span> csv</span><br><span class=\"line\"><span class=\"keyword\">from</span> PIL <span class=\"keyword\">import</span> Image</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 多核 cpu 设置</span></span><br><span class=\"line\">os.environ[<span class=\"string\">\"OMP_NUM_THREADS\"</span>] = <span class=\"string\">\"8\"</span></span><br><span class=\"line\">os.environ[<span class=\"string\">\"MKL_NUM_THREADS\"</span>] = <span class=\"string\">\"8\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 设置使用 CPU</span></span><br><span class=\"line\">device = torch.device(<span class=\"string\">'cpu'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 参数配置</span></span><br><span class=\"line\">input_size = <span class=\"number\">784</span></span><br><span class=\"line\">hidden_size = <span class=\"number\">512</span></span><br><span class=\"line\">num_classes = <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3 Fully connected neural network with one hidden layer 定义网络</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NeuralNet</span><span class=\"params\">(nn.Module)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, input_size, hidden_size, num_classes)</span>:</span></span><br><span class=\"line\">        super(NeuralNet, self).__init__()</span><br><span class=\"line\">        self.fc1 = nn.Linear(input_size, hidden_size)</span><br><span class=\"line\">        self.relu = nn.ReLU()</span><br><span class=\"line\">        self.fc2 = nn.Linear(hidden_size, num_classes)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">forward</span><span class=\"params\">(self, x)</span>:</span></span><br><span class=\"line\">        out = self.fc1(x)</span><br><span class=\"line\">        out = self.relu(out)</span><br><span class=\"line\">        out = self.fc2(out)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> out</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">model = NeuralNet(input_size, hidden_size, num_classes).to(device)</span><br><span class=\"line\">model_dict = model.load_state_dict(torch.load(<span class=\"string\">'model.ckpt'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Test the model 预测</span></span><br><span class=\"line\"><span class=\"comment\"># In test phase, we don't need to compute gradients (for memory efficiency)</span></span><br><span class=\"line\"></span><br><span class=\"line\">test_data = pd.read_csv(<span class=\"string\">'test.csv'</span>, header=<span class=\"number\">0</span>, sep=<span class=\"string\">','</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">with</span> torch.no_grad():</span><br><span class=\"line\">    <span class=\"keyword\">with</span> open(<span class=\"string\">'submission.csv'</span>, <span class=\"string\">'w'</span>, newline=<span class=\"string\">''</span>) <span class=\"keyword\">as</span> csv_file:</span><br><span class=\"line\">        writer = csv.writer(csv_file, dialect=<span class=\"string\">'excel'</span>)</span><br><span class=\"line\">        writer.writerow([<span class=\"string\">\"ImageId\"</span>, <span class=\"string\">\"Label\"</span>])</span><br><span class=\"line\">        <span class=\"keyword\">for</span> index <span class=\"keyword\">in</span> range(<span class=\"number\">0</span>, <span class=\"number\">28000</span>):</span><br><span class=\"line\">            img = Image.fromarray(test_data.iloc[index:index+<span class=\"number\">1</span>, :].values.reshape(<span class=\"number\">28</span>, <span class=\"number\">28</span>).astype(np.uint8))</span><br><span class=\"line\">            transform1 = transforms.Compose([</span><br><span class=\"line\">                transforms.ToTensor(),  <span class=\"comment\"># range [0, 255] -&gt; [0.0,1.0]</span></span><br><span class=\"line\">            ])</span><br><span class=\"line\">            img_tensor = transform1(img)</span><br><span class=\"line\">            images = img_tensor.reshape(<span class=\"number\">-1</span>, <span class=\"number\">28</span> * <span class=\"number\">28</span>).to(device)</span><br><span class=\"line\">            outputs = model(images)</span><br><span class=\"line\">            _, predicted = torch.max(outputs.data, <span class=\"number\">1</span>)</span><br><span class=\"line\">            <span class=\"comment\"># writer.writerow([])</span></span><br><span class=\"line\">            print(<span class=\"string\">\"picture %d, predicted number is %s\"</span> % (index+<span class=\"number\">1</span>, predicted[<span class=\"number\">0</span>].item()))</span><br><span class=\"line\">            writer.writerow([index+<span class=\"number\">1</span>, predicted[<span class=\"number\">0</span>].item()])</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"总结\">总结</h2>\n<p>这篇文章基本上上熟悉 pytorch 自定义数据集相关的知识，代码实现并没有过多去关注，\b算是完成了 kaggle 第一题的尝试。</p>\n<p>\b以后会更新下这个\b代码，\b实现的更优雅一些。</p>\n<p>下篇文章会写一些关于 NLP 处理的基础经典的算法使用。</p>\n","categories":["深度学习"],"tags":["机器学习"]},{"title":"全连接前向神经网络与手写数字的实践","url":"https://suool.net/2018/10/07/feed-forward-neural-network-on-tf-and-pytorch/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"引言\">引言</h2>\n<p>上一篇文章提到了 logistics regression 、多分类的 softmax 算法及梯度等概念，其实就可以很自然的引出深度学习了。</p>\n<p>引用WiKi的定义： &gt;深度学习（deep learning）是机器学习的分支，是一种试图使用包含复杂结构或由多重非线性变换构成的多个处理层对数据进行高层抽象的算法。</p>\n<p>早在1958年就提出了 perceptron 的模型，即最简单的线性感知机模型，在当时引起了很大的轰动，甚至提出了机器可以取代人的说法，然而后来就被人质疑，现在看来线性感知机的限制显而易见。</p>\n<p>然后在20世纪80年代，根据之前 perceptron 提出了 multi-layer perceptron（又叫 Neural Network）， 这个模型和当今的深度神经网络是没有显著区别的。1986年提出了反向传播的概念，但是通常大于三层的 hidden layer 就没有效果了，神经网络学习出现了梯度消失的问题。</p>\n<p>后来在 2006年，在上述神经网络的算法模型上，取得了一些改进（RBM initialization），将之前 multi-layer perceptron 改了个名字 —— Deep Learning 重新提了出来，2009年的时候 DL 的运算开始利用 GPU，后面其在各个领域取得了一些突破性的应用进展，就火起来了。</p>\n<p>所以，深度学习并不是什么新鲜事物，只是换了个名字的稍微改进的旧模型。 <a id=\"more\"></a></p>\n<h2 id=\"全连接前向神经网络\">全连接前向神经网络</h2>\n<p>一个全连接的前向神经网络示例如下所示，其激活函数是之前提到的 sigmod 函数，经过这个全连接的神经网络，其 weight 和 bias 都知道的情况下，输入的向量就会不断的变化，最后输出一个向量。</p>\n<figure>\n<img src=\"https://suool-bolg.b0.upaiyun.com/2018/10/07/3AE7177E-8176-41EF-B7AE-54874C0E6DE8.png\" alt=\"3AE7177E-8176-41EF-B7AE-54874C0E6DE8\"><figcaption>3AE7177E-8176-41EF-B7AE-54874C0E6DE8</figcaption>\n</figure>\n<p>一般来说，Fully Connect Feedforward Network 的架构如下图所示，前一层每个输入都连接到下一层的所有神经元中： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/10/07/819348CB-888B-4214-8A58-3E9E8EE9C721.png\" alt=\"819348CB-888B-4214-8A58-3E9E8EE9\"></p>\n<p>其输入层和输出层都是一个 vector，但是其 dimension 不一定相同，其中的 hidden layer 一般有多层，这也是 Deep Learning 的 Deep 所在。</p>\n<p>而神经网络的运算实质是矩阵运算，这也是为什么 GPU 能加速神经网络的原因所在。</p>\n<figure>\n<img src=\"https://suool-bolg.b0.upaiyun.com/2018/10/07/076D7461-22D5-4378-BED1-DA8F23AFB6B0.png\" alt=\"076D7461-22D5-4378-BED1-DA8F23AFB6B0\"><figcaption>076D7461-22D5-4378-BED1-DA8F23AFB6B0</figcaption>\n</figure>\n<p>##实例 以之前一直在用的手写数字识别为例，分别使用 keras 和 pytorch 搭建两个 fully connect feedforward network 模型，使用 Mnist 数据集进行训练。</p>\n<p>首先是 keras （Using TensorFlow backend.）的代码如下:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/local/bin/python3.6</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">import</span> keras</span><br><span class=\"line\"><span class=\"keyword\">from</span> keras.models <span class=\"keyword\">import</span> Sequential</span><br><span class=\"line\"><span class=\"keyword\">from</span> keras.layers.core <span class=\"keyword\">import</span> Dense, Dropout, Activation</span><br><span class=\"line\"><span class=\"keyword\">from</span> keras.utils <span class=\"keyword\">import</span> np_utils</span><br><span class=\"line\"><span class=\"keyword\">from</span> keras <span class=\"keyword\">import</span> backend <span class=\"keyword\">as</span> K</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 多核 CPU 使用设置</span></span><br><span class=\"line\">K.set_session(K.tf.Session(config=K.tf.ConfigProto(device_count=&#123;<span class=\"string\">\"CPU\"</span>: <span class=\"number\">8</span>&#125;,</span><br><span class=\"line\">                inter_op_parallelism_threads=<span class=\"number\">8</span>,</span><br><span class=\"line\">                intra_op_parallelism_threads=<span class=\"number\">8</span>,</span><br><span class=\"line\">                log_device_placement=<span class=\"keyword\">True</span>)))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># tensorboard 可视化        </span></span><br><span class=\"line\">tbCallBack = keras.callbacks.TensorBoard(log_dir=<span class=\"string\">'./Graph'</span>,</span><br><span class=\"line\">                                         histogram_freq=<span class=\"number\">1</span>,</span><br><span class=\"line\">                                         write_graph=<span class=\"keyword\">True</span>,</span><br><span class=\"line\">                                         write_images=<span class=\"keyword\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 加载数据集</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">load_data</span><span class=\"params\">(file_path)</span>:</span></span><br><span class=\"line\">    f = np.load(file_path)</span><br><span class=\"line\">    x_train, y_train = f[<span class=\"string\">'x_train'</span>], f[<span class=\"string\">'y_train'</span>]</span><br><span class=\"line\">    x_test, y_test = f[<span class=\"string\">'x_test'</span>], f[<span class=\"string\">'y_test'</span>]</span><br><span class=\"line\">    f.close()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (x_train, y_train), (x_test, y_test)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 初始化数据</span></span><br><span class=\"line\">(X_train, y_train), (X_test, y_test) = load_data(<span class=\"string\">'./mnist.npz'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">X_train = X_train.reshape(<span class=\"number\">60000</span>, <span class=\"number\">784</span>)</span><br><span class=\"line\">X_test = X_test.reshape(<span class=\"number\">10000</span>, <span class=\"number\">784</span>)</span><br><span class=\"line\">X_train = X_train.astype(<span class=\"string\">'float32'</span>)</span><br><span class=\"line\">X_test = X_test.astype(<span class=\"string\">'float32'</span>)</span><br><span class=\"line\">X_train /= <span class=\"number\">255</span></span><br><span class=\"line\">X_test /= <span class=\"number\">255</span></span><br><span class=\"line\"></span><br><span class=\"line\">nb_classes = <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"comment\"># 将 label 数据转化为 one-hot，因为模型训练 loss 参数为 categorical_crossentropy</span></span><br><span class=\"line\">Y_train = np_utils.to_categorical(y_train, nb_classes)</span><br><span class=\"line\">Y_test = np_utils.to_categorical(y_test, nb_classes)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 初始化一个 model</span></span><br><span class=\"line\">model = Sequential()</span><br><span class=\"line\"><span class=\"comment\"># 添加第一层，输入是784维，第一层节点为 500，激活函数为 relu</span></span><br><span class=\"line\">model.add(Dense(<span class=\"number\">500</span>, input_shape=(<span class=\"number\">784</span>,)))</span><br><span class=\"line\">model.add(Activation(<span class=\"string\">'relu'</span>))</span><br><span class=\"line\"><span class=\"comment\"># model.add(Dropout(0.2))</span></span><br><span class=\"line\"><span class=\"comment\"># 添加第二层，节点为 500，激活函数为 relu</span></span><br><span class=\"line\">model.add(Dense(<span class=\"number\">500</span>))</span><br><span class=\"line\">model.add(Activation(<span class=\"string\">'relu'</span>))</span><br><span class=\"line\"><span class=\"comment\"># model.add(Dropout(0.2))</span></span><br><span class=\"line\"><span class=\"comment\"># 添加输出层，输出 10 维，激活函数为 softmax</span></span><br><span class=\"line\">model.add(Dense(<span class=\"number\">10</span>))</span><br><span class=\"line\">model.add(Activation(<span class=\"string\">'softmax'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置模型训练参数，loss 使用多类的对数损失函数，optimizer 优化器使用 adam，模型性能评估使用 accuracy</span></span><br><span class=\"line\">model.compile(loss=<span class=\"string\">'categorical_crossentropy'</span>, optimizer=<span class=\"string\">'adam'</span>, metrics=[<span class=\"string\">'accuracy'</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 开始训练，batch_size为100， 10 个 epoch，callbacks调用 tensorboard</span></span><br><span class=\"line\">model.fit(X_train, Y_train,</span><br><span class=\"line\">          batch_size=<span class=\"number\">100</span>, epochs=<span class=\"number\">10</span>,</span><br><span class=\"line\">          validation_data=(X_test, Y_test),</span><br><span class=\"line\">          callbacks=[tbCallBack]</span><br><span class=\"line\">          )</span><br><span class=\"line\"></span><br><span class=\"line\">score = model.evaluate(X_test, Y_test, verbose=<span class=\"number\">0</span>)</span><br><span class=\"line\">print(<span class=\"string\">'Test score:'</span>, score[<span class=\"number\">0</span>])</span><br><span class=\"line\">print(<span class=\"string\">'Test accuracy:'</span>, score[<span class=\"number\">1</span>])</span><br></pre></td></tr></table></figure>\n<p>这是一个两层的全连接前向神经网络，训练了 10 epochs，准确率如下： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/10/07/1F78B36F-9654-4FF3-9166-F827DD83B6B9.png\" alt=\"1F78B36F-9654-4FF3-9166-F827DD83B6B9\"></p>\n<p>没有 GPU，纯 CPU 跑起来的不算慢，准确率达到 97.7%，其神经网络结构图如下： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/10/07/96202340-46DD-40B4-97DB-7642D377A42D.png\" alt=\"96202340-46DD-40B4-97DB-7642D377A42D\"></p>\n<p>pytorch 使用起来就没 keras 那么简单了，其代码如下：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"><span class=\"keyword\">import</span> torch.nn <span class=\"keyword\">as</span> nn</span><br><span class=\"line\"><span class=\"keyword\">import</span> torchvision</span><br><span class=\"line\"><span class=\"keyword\">import</span> torchvision.transforms <span class=\"keyword\">as</span> transforms</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 多核 cpu 设置</span></span><br><span class=\"line\">os.environ[<span class=\"string\">\"OMP_NUM_THREADS\"</span>] = <span class=\"string\">\"8\"</span></span><br><span class=\"line\">os.environ[<span class=\"string\">\"MKL_NUM_THREADS\"</span>] = <span class=\"string\">\"8\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 设置使用 CPU</span></span><br><span class=\"line\">device = torch.device(<span class=\"string\">'cpu'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 参数配置</span></span><br><span class=\"line\">input_size = <span class=\"number\">784</span></span><br><span class=\"line\">hidden_size = <span class=\"number\">500</span></span><br><span class=\"line\">num_classes = <span class=\"number\">10</span></span><br><span class=\"line\">num_epochs = <span class=\"number\">10</span></span><br><span class=\"line\">batch_size = <span class=\"number\">100</span></span><br><span class=\"line\">learning_rate = <span class=\"number\">0.001</span></span><br><span class=\"line\"><span class=\"comment\"># 1 MNIST dataset 加载图像数据</span></span><br><span class=\"line\">train_dataset = torchvision.datasets.MNIST(root=<span class=\"string\">'.'</span>,</span><br><span class=\"line\">                                           train=<span class=\"keyword\">True</span>,</span><br><span class=\"line\">                                           transform=transforms.ToTensor(),</span><br><span class=\"line\">                                           download=<span class=\"keyword\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">test_dataset = torchvision.datasets.MNIST(root=<span class=\"string\">'.'</span>,</span><br><span class=\"line\">                                          train=<span class=\"keyword\">False</span>,</span><br><span class=\"line\">                                          transform=transforms.ToTensor())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2 Data loader pytorch的数据加载方式，tensorflow是没有的</span></span><br><span class=\"line\">train_loader = torch.utils.data.DataLoader(dataset=train_dataset,</span><br><span class=\"line\">                                           batch_size=batch_size,</span><br><span class=\"line\">                                           shuffle=<span class=\"keyword\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">test_loader = torch.utils.data.DataLoader(dataset=test_dataset,</span><br><span class=\"line\">                                          batch_size=batch_size,</span><br><span class=\"line\">                                          shuffle=<span class=\"keyword\">False</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3 Fully connected neural network with one hidden layer 定义网络</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NeuralNet</span><span class=\"params\">(nn.Module)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, input_size, hidden_size, num_classes)</span>:</span></span><br><span class=\"line\">        super(NeuralNet, self).__init__()</span><br><span class=\"line\">        self.fc1 = nn.Linear(input_size, hidden_size)</span><br><span class=\"line\">        self.relu = nn.ReLU()</span><br><span class=\"line\">        self.fc2 = nn.Linear(hidden_size, num_classes)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">forward</span><span class=\"params\">(self, x)</span>:</span></span><br><span class=\"line\">        out = self.fc1(x)</span><br><span class=\"line\">        out = self.relu(out)</span><br><span class=\"line\">        out = self.fc2(out)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> out</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">model = NeuralNet(input_size, hidden_size, num_classes).to(device)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4 Loss and optimizer 定义损失和优化函数</span></span><br><span class=\"line\">criterion = nn.CrossEntropyLoss()</span><br><span class=\"line\">optimizer = torch.optim.Adam(model.parameters(),</span><br><span class=\"line\">                             lr=learning_rate)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 5 Train the model 训练模型</span></span><br><span class=\"line\">total_step = len(train_loader)</span><br><span class=\"line\"><span class=\"keyword\">for</span> epoch <span class=\"keyword\">in</span> range(num_epochs):</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i, (images, labels) <span class=\"keyword\">in</span> enumerate(train_loader):  <span class=\"comment\"># batch size的大小</span></span><br><span class=\"line\">        <span class=\"comment\"># Move tensors to the configured device</span></span><br><span class=\"line\">        images = images.reshape(<span class=\"number\">-1</span>, <span class=\"number\">28</span>*<span class=\"number\">28</span>).to(device)</span><br><span class=\"line\">        labels = labels.to(device)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Forward pass 前向传播</span></span><br><span class=\"line\">        outputs = model(images)</span><br><span class=\"line\">        loss = criterion(outputs, labels)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Backward and optimize 后向传播</span></span><br><span class=\"line\">        optimizer.zero_grad()</span><br><span class=\"line\">        loss.backward()</span><br><span class=\"line\">        optimizer.step()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i+<span class=\"number\">1</span>) % <span class=\"number\">100</span> == <span class=\"number\">0</span>:</span><br><span class=\"line\">            print(<span class=\"string\">'Epoch [&#123;&#125;/&#123;&#125;], Step [&#123;&#125;/&#123;&#125;], Loss: &#123;:.4f&#125;'</span></span><br><span class=\"line\">                   .format(epoch+<span class=\"number\">1</span>, num_epochs, i+<span class=\"number\">1</span>, total_step, loss.item()))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Test the model 预测</span></span><br><span class=\"line\"><span class=\"comment\"># In test phase, we don't need to compute gradients (for memory efficiency)</span></span><br><span class=\"line\"><span class=\"keyword\">with</span> torch.no_grad():</span><br><span class=\"line\">    correct = <span class=\"number\">0</span></span><br><span class=\"line\">    total = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> images, labels <span class=\"keyword\">in</span> test_loader:</span><br><span class=\"line\">        images = images.reshape(<span class=\"number\">-1</span>, <span class=\"number\">28</span>*<span class=\"number\">28</span>).to(device)</span><br><span class=\"line\">        labels = labels.to(device)</span><br><span class=\"line\">        outputs = model(images)</span><br><span class=\"line\">        _, predicted = torch.max(outputs.data, <span class=\"number\">1</span>)</span><br><span class=\"line\">        total += labels.size(<span class=\"number\">0</span>)</span><br><span class=\"line\">        correct += (predicted == labels).sum().item()</span><br><span class=\"line\"></span><br><span class=\"line\">    print(<span class=\"string\">'Accuracy of the network on the 10000 test images: &#123;&#125; %'</span></span><br><span class=\"line\">            .format(<span class=\"number\">100</span> * correct / total))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Save the model checkpoint</span></span><br><span class=\"line\">torch.save(model.state_dict(), <span class=\"string\">'model.ckpt'</span>)</span><br></pre></td></tr></table></figure>\n<p>准确率如下: <img src=\"https://suool-bolg.b0.upaiyun.com/2018/10/07/4E84C574-A959-4E97-9C9F-3BB5057F954F.png\" alt=\"4E84C574-A959-4E97-9C9F-3BB5057F954F\"></p>\n<p>总体时间上，要比 TF 的慢，从源码编译了一遍安装还是慢。。</p>\n<p>下一篇练习 CNN 。</p>\n","categories":["深度学习"],"tags":["机器学习"]},{"title":"logistic 算法及其在手写数字识别的实践","url":"https://suool.net/2018/09/05/logistic-mnist/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"引言\">引言</h2>\n<p>逻辑斯谛回归（logistic regression）是统计学习中的经典分类算法。最大熵模型是概率模型学习的一个准则，将其推广到分类问题得到最大熵模型（maximum entropy model). 逻辑斯谛回归模型与最大熵模型都是对数线性模型. <a id=\"more\"></a></p>\n<h2 id=\"逻辑斯谛回归模型\">逻辑斯谛回归模型</h2>\n<p>###sigmoid 函数 首先我们知道，线性回归的公式如下： <span class=\"math display\">\\[\nz = \\omega_0x_0+\\omega_1x_1+\\omega_2x_1+\\cdots+\\omega_nx_n = \\omega^Tx \\tag{1}\n\\]</span></p>\n<p>其次在介绍逻辑斯谛回归模型之前，我们先引入sigmoid函数，其数学形式是： <span class=\"math display\">\\[\ng(x) = \\frac {1}{1+e^{-x}} \\tag{2}\n\\]</span></p>\n<p>函数曲线如下: <img src=\"https://suool-bolg.b0.upaiyun.com/2018/09/18/15362860576396.jpg\"></p>\n<p>从上图可以看到 sigmoid 函数是一个 s 形的曲线，它的取值在 [0, 1] 之间，在远离 0 的地方函数的值会很快接近 0/1 。在横坐标的大尺度下看，sigmoid 函数很类似阶跃函数。</p>\n<h2 id=\"二项逻辑斯谛回归模型\">二项逻辑斯谛回归模型</h2>\n<p>一个机器学习的模型，实际上是把决策函数限定在某一组条件下，这组限定条件就决定了模型的假设空间。当然，我们还希望这组限定条件简单而合理。而逻辑回归模型所做的假设是：</p>\n<p><span class=\"math display\">\\[\nh_\\omega(x)=\\frac {1}{1+e^{-z}} = \\frac {1}{1+e^{-\\omega^T\\cdot x}} \\tag{3}\n\\]</span></p>\n<p>其中， <span class=\"math display\">\\[\ny = \\frac {1}{1+e^{-x}}\n\\]</span></p>\n<p>我们可以看到，Logistic Regression 算法是将线性函数的结果映射到了sigmoid函数中。</p>\n<p>因此，为了实现 Logistic 回归分类器，我们可以在每个特征上都乘以一个回归系数（如公式1所示），然后把所有结果值相加，将这个总和代入 Sigmoid 函数中，进而得到一个范围在 0~1 之间的数值。任何大于 0.5 的数据被分入 1 类，小于 0.5 即被归入 0 类。所以，Logistic 回归也是一种概率估计，比如这里Sigmoid 函数得出的值为0.5，可以理解为给定数据和参数，数据被分入 1 类的概率为0.5。</p>\n<p>模型的条件概率分布函数的一般写法如下 <span class=\"math display\">\\[\nP(Y=1\\mid x;\\omega) = h_\\omega(x) \\tag{4}\n\\]</span> 及 <span class=\"math display\">\\[\nP(Y=0 \\mid x;\\omega) = 1-h_\\omega(x) \\tag{5}\n\\]</span></p>\n<p>其中 <span class=\"math inline\">\\(w = (w^1,w^2, \\cdots, w^n, b)^T\\)</span> 为权值向量, <span class=\"math inline\">\\(x=(x^1, x^2, \\cdots, x^n, 1)^T\\)</span> 为输入向量.</p>\n<p>因此逻辑斯谛回归的对数几率为 <span class=\"math display\">\\[\nlog \\frac {P(Y=1\\mid x)}{1-P(Y=1\\mid x)} = w \\cdot x \\tag{6}\n\\]</span></p>\n<p>由此可知, 在二项逻辑斯谛回归模型中, 输出 Y=1 的对数几率是输入 x 的线性函数. 又由式(3)可知,线性函数的值越接近正无穷, 概率值就越接近1, 反之越接近0, 这样子的模型就是逻辑斯谛回归模型.</p>\n<p>###参数求解之最大似然估计法 模型的数学形式确定后，剩下就是如何去求解模型中的参数。统计学中常用的一种方法是最大似然估计，即找到一组参数，使得在这组参数下，我们的数据的似然度（概率）越大.</p>\n<p>首先通过式(4)及(5)确定的概率函数为： <span class=\"math display\">\\[\nP(y\\mid x;\\omega) = (h_\\omega(x))^y\\cdot (1-h_\\omega(x))^{1-y}\n\\]</span></p>\n<p>因为样本数据相互独立，所以他们的联合分布可以表示为各边际分布的乘积，取似然函数为： <span class=\"math display\">\\[\n\\begin{align}\nL(\\omega) &amp;= \\prod_{i=1}^n P(y^i \\mid x^i; \\omega) \\\\\n&amp; = \\prod_{i=1}^n (h_\\omega(x^i))^{y^i}\\cdot (1-h_\\omega(x^i))^{1-y^i}\n\\end{align}\n\\]</span></p>\n<p>取对数似然函数： <span class=\"math display\">\\[\nl(\\omega)= \\log(L(\\omega)) = \\sum_{i=1}^m\\log((h_\\omega(x^i))^{y^i})+\\log((1-h_\\omega(x^i))^{1-y^i})\n\\]</span></p>\n<p>最大似然估计就是\b要求使得<span class=\"math inline\">\\(l(\\omega)\\)</span>取最大值时候的<span class=\"math inline\">\\(\\omega\\)</span>，这里可以用显然可以用梯度上升法求解，同时，如果稍微做下变换： <span class=\"math display\">\\[\nJ(\\omega) = - \\frac{1}{n}l(\\omega)\n\\]</span></p>\n<p>因为乘了一个负的系数,然后就可以使用梯度下降算法进行求解了.</p>\n<p>###梯度上升算法 梯度上升算法的基本思想是:要找到某个函数的最大值, 最好的方法是沿着该函数的梯度方向探寻. 如果梯度记为 <span class=\"math inline\">\\(\\nabla\\)</span>, 那么函数\b <span class=\"math inline\">\\(f(x,y)\\)</span>的梯度表示为: <span class=\"math display\">\\[\n\\nabla f(x,y) = \\begin{pmatrix}  \\frac{\\partial f(x,y)}{\\partial x} \\\\\n\\frac{\\partial f(x,y)}{\\partial y} \\end{pmatrix} \n\\]</span></p>\n<p>梯度上升算法的描述公式为: <span class=\"math display\">\\[\nw:=w+\\alpha \\nabla f(w)\n\\]</span></p>\n<p>梯度下降算法的描述公式: <span class=\"math display\">\\[\nw:=w-\\alpha \\nabla f(w)\n\\]</span></p>\n<p>这个梯度意味着要沿 x 的方向移动 <span class=\"math inline\">\\(\\frac{\\partial f(x,y)}{\\partial x}\\)</span> ，沿 y 的方向移动 <span class=\"math inline\">\\(\\frac{\\partial f(x,y)}{\\partial y}\\)</span> 。其中，函数<span class=\"math inline\">\\(f(x, y)\\)</span>必须要在待计算的点上有定义并且可微。</p>\n<p>梯度上升的一个示意图 <img src=\"https://suool-bolg.b0.upaiyun.com/2018/09/18/LR_8.png\" alt=\"LR_8\"></p>\n<p>步长，记作 α , <span class=\"math inline\">\\(\\nabla f(w)\\)</span> 表示沿着梯度变化的方向</p>\n<p>这个算法将会在很大的程度上被初始点的选择影响而陷入局部最小点。</p>\n<h3 id=\"简单的线性分类器\">简单的线性分类器</h3>\n<p>代码示例-暂略</p>\n<h2 id=\"多项逻辑斯谛回归模型\">多项逻辑斯谛回归模型</h2>\n<p>上述的都是二分类问题, 那么如何改造 logistics 回归解决多分类问题呢?</p>\n<p>第一种方式是直接根据每个类别，都建立一个二分类器，带有这个类别的样本标记为1，带有其他类别的样本标记为0。假如我们有 K 个类别，最后我们就得到了 K 个针对不同标记的普通的logistic分类器。</p>\n<p>第二种方式是修改 logistic 回归的损失函数，让其适应多分类问题。这个损失函数不再笼统地只考虑二分类非1就0的损失，而是具体考虑每个样本标记的损失。这种方法叫做 softmax 回归，即 logistic 回归的多分类版本。</p>\n<p>首先对于第一种方式, 假如给定的的数据集 <span class=\"math inline\">\\(X \\in R^{m\\times n}\\)</span>, 他们的标记为 <span class=\"math inline\">\\(Y \\in R^k\\)</span>, 即是政协样本有 K 个不同的类别。</p>\n<p>现在我们挑选出\b数据集中标记为 <span class=\"math inline\">\\(c(c\\leq k)\\)</span> 的样本，将挑选出来的样本标记为1， 其余的所有不为 c 的样本标记为0，由此训练出一个 logistics回归二分分类器， 即得到 <span class=\"math inline\">\\(h_c(x)\\)</span> （表示针对标记为 c 的 logistics 分类函数）</p>\n<p>按照上面的步骤， 我们可以得到k个不同的分类器。针对一个分类样本，我们需要找到这个k个分类函数中输出值最大的那个， 即认为是测试样本的输出标记： <span class=\"math display\">\\[\n\\mathop{\\arg\\;\\max}\\limits_{c} h_c(x), c=1,2,\\cdots,k\n\\]</span></p>\n<p>第二种方式是 softmax 回归</p>\n<p><span class=\"math display\">\\[\nh_\\theta(x^i) = \n\\begin{bmatrix} \np(y^i = 1 \\mid x^i; \\theta) \n\\\\ p(y^i = 2 \\mid x^i; \\theta) \\\\ \n\\vdots \\\\\np(y^i = k \\mid x^i; \\theta)\n\\end{bmatrix} = \\frac{1}{\\sum_{c=1}^k e^{\\theta_c^Tx^i}} \n\\begin{bmatrix}\ne^{\\theta_1^Tx^i} \\\\\ne^{\\theta_2^Tx^i} \\\\\n\\vdots \\\\\ne^{\\theta_k^Tx^i}\n\\end{bmatrix}\n\\]</span></p>\n<p>然后使用矩阵<span class=\"math inline\">\\(\\theta\\)</span>表示上式中的<span class=\"math inline\">\\(\\theta_1,\\cdots,\\theta_k\\)</span>,即是: <span class=\"math display\">\\[\n\\theta = \\begin{bmatrix}\n\\theta_1^T \\\\\n\\theta_2^T \\\\\n\\vdots \\\\\n\\theta_k^T \\\\\n\\end{bmatrix}\n\\]</span></p>\n<p>Softmax回归中将 <span class=\"math inline\">\\(\\textstyle x\\)</span> 分类为类别 <span class=\"math inline\">\\(\\textstyle j\\)</span> 的概率: <span class=\"math display\">\\[p(y^i=j\\mid x^i;\\theta) = \\frac{e^{\\theta_j^T}x^i}{\\sum_{l=1}^k e_l^Tx^i}\\]</span></p>\n<p>一个图解: <img src=\"https://suool-bolg.b0.upaiyun.com/2018/09/18/15366230049078.jpg\"></p>\n<p><img src=\"https://suool-bolg.b0.upaiyun.com/2018/09/18/15366242666868.jpg\"></p>\n<h3 id=\"损失函数\">损失函数</h3>\n<p>为了训练模型，我们需要定义一个 loss function 来描述模型对问题的分类精度。loss 越小，代表模型的分类结果与真实值的偏差越小。在多分类问题中常使用交差熵作为损失函数，交叉熵定义如下，其中y代表真实值， <span class=\"math inline\">\\(\\tilde{y}\\)</span> 代表预测值，n代表需要区分的类别数。</p>\n<p><span class=\"math display\">\\[\nH_y(\\tilde{y}) = - \\sum_i^n y\\log \\tilde{y}\n\\]</span></p>\n<p>那么，为什么交叉熵可以用来判断模型对真实概率分布 估计的准确程度呢？首先补充几个知识点</p>\n<h4 id=\"信息量\"><strong>信息量</strong></h4>\n<p>直觉上来说：一件事情发生的可能性越小（概率小），当这件事发生时，人们所获得信息量越大；相反，一件事极有可能发生（概率大），当这件事发生时，人们会感觉没有什么信息量，因为早知道会发生。因此信息量跟事件发生的概率有关。定义如下，其中 <span class=\"math inline\">\\(p(x_{0})\\)</span> 为事件 <span class=\"math inline\">\\(x_{0}\\)</span> 发生的概率，log 为自然对数。</p>\n<p><span class=\"math display\">\\[\nI(x_0) = -log(p(x_0))\n\\]</span></p>\n<p>由于是概率所以 <span class=\"math inline\">\\(p(x_{0})\\)</span> 的取值范围是 [0,1],绘制为图，可见该函数符合我们对信息量的直觉</p>\n<p><img src=\"https://suool-bolg.b0.upaiyun.com/2018/09/18/15366229765258.jpg\"></p>\n<h4 id=\"熵\">熵</h4>\n<p>对于某个事件，有n种可能性，每种可能性有个概率值。熵用来表示所有信息量的期望, 也是随机变量不确定性的度量, 其定义如下: <span class=\"math display\">\\[\nH(X) = - \\sum_i^n p(x_i)\\log (p(x_i))\n\\]</span></p>\n<p>由此可见, 熵只依赖与 X 的分布,与其取值大小无关,因此熵也可以直接记做: <span class=\"math display\">\\[\nH(p) = - \\sum_i^n p_i\\log p_i\n\\]</span></p>\n<p>熵越大, 随机变量的不确定性越大.</p>\n<h4 id=\"相对熵kl散度\">相对熵（KL散度）</h4>\n<p>对同一个问题，用P、Q同时描述，用 KL 散度来衡量两个分布的差异。 <span class=\"math display\">\\[\nD_{KL}(p||q)=\\sum_{i}^{n}{}p(x_{i})log(\\frac{p(x_{i})}{q(x_{i})})\\\\\n\\]</span> 在机器学习中，P往往用来表示真实的样本分布，比如[1,0,0]表示当前样本属于第一类。Q用来表示模型所预测的分布，比如[0.7,0.2,0.1]。当然Q越接近P越好，这样就说明预测值十分逼近真实值。也就是上式的 D_{KL}的值越小越好。</p>\n<h4 id=\"交差熵\">交差熵</h4>\n<p>对 <span class=\"math inline\">\\(D_{KL}(p||q)\\)</span>公式进行变形：</p>\n<p><span class=\"math display\">\\[\n\\begin{align}\nD_{KL}(p||q) &amp;= \\sum_{i}^{n}{p(x_{i})log(p(x_{i}))} - \\sum_{i}^{n}{p(x_{i})log(q(x_{i}))} \\\\\n&amp; = -H(p(x)) + [-\\sum_{i}^{n}{p(x_{i})log(q(x_{i}))}]\n\\end{align}\n\\]</span></p>\n<p>等式的前一部分恰巧就是p的熵，等式的后一部分，就是交叉熵：</p>\n<p><span class=\"math display\">\\[\nH(p,q) = - \\sum_{i}^{n}{p(x_{i})log(q(x_{i}))}\n\\]</span></p>\n<p>在机器学习中，我们需要评估 labels 和 predicts 之间的差距，使用 KL 散度刚刚好，即 <span class=\"math inline\">\\(D_{KL}(y||\\tilde{y})\\)</span> ，由于KL散度中的前一部分−H(y)不变，故在优化过程中，只需要关注交叉熵就可以了。所以一般在机器学习中直接用用交叉熵做loss，评估模型。</p>\n<h3 id=\"识别数字实践\">识别数字实践</h3>\n<p>暂略</p>\n","categories":["机器学习"],"tags":["机器学习"]},{"title":"问题解决记录","url":"https://suool.net/2018/07/25/problems-solved-listed/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"系统问题\">系统问题</h2>\n<h3 id=\"docker\">Docker</h3>\n<p><strong>1.Ubuntu 下安装 <code>docker</code> 使用非 <code>sudo</code> 命令的问题</strong>：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.38/images/json: dial unix /var/run/docker.sock: connect: permission denied</span><br></pre></td></tr></table></figure>\n<p>解决方法： &gt;the error message tells you that your current user can’t access the docker engine, because you’re lacking permissions to access the unix socket to communicate with the engine. <strong>Temporary solution</strong> Use the <code>sudo</code> command to execute the commands with elevated permissions every time. <strong>Permanent (suggested) solution</strong> Add the current user to the docker group. This can be achieved by typing <figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo usermod -<span class=\"selector-tag\">a</span> -G docker <span class=\"variable\">$USER</span></span><br></pre></td></tr></table></figure></p>\n<p><strong>You have to log out and log in again</strong> for the group membership to take effect.</p>\n<a id=\"more\"></a>\n<p><strong>2.Docker 换源</strong></p>\n<p>新版的 <code>Docker</code> 使用 <code>/etc/docker/daemon.json（Linux）</code> 或者 <code>%programdata%\\docker\\config\\daemon.json（Windows）</code> 来配置 Daemon 。</p>\n<p>请在该配置文件中加入（没有该文件的话，请先建一个）：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"registry-mirrors\"</span>: [<span class=\"string\">\"https://docker.mirrors.ustc.edu.cn\"</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>完成上述配置后，执行如下命令即可：</p>\n<figure class=\"highlight smali\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo<span class=\"keyword\"> system</span>ctl daemon-reload</span><br><span class=\"line\">sudo<span class=\"keyword\"> system</span>ctl restart docker</span><br></pre></td></tr></table></figure>\n<h3 id=\"替换及重置homebrew默认源\">替换及重置Homebrew默认源</h3>\n<p>替换 <code>brew.git</code>:</p>\n<figure class=\"highlight dsconfig\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">cd </span><span class=\"string\">\"$(brew --repo)\"</span></span><br><span class=\"line\"><span class=\"string\">git </span><span class=\"string\">remote </span><span class=\"built_in\">set-url</span> <span class=\"string\">origin </span><span class=\"string\">https:</span>//<span class=\"string\">mirrors.</span><span class=\"string\">ustc.</span><span class=\"string\">edu.</span><span class=\"string\">cn/</span><span class=\"string\">brew.</span><span class=\"string\">git</span></span><br></pre></td></tr></table></figure>\n<p>替换 <code>homebrew-core.git</code>:</p>\n<figure class=\"highlight dsconfig\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">cd </span><span class=\"string\">\"$(brew --repo)/Library/Taps/homebrew/homebrew-core\"</span></span><br><span class=\"line\"><span class=\"string\">git </span><span class=\"string\">remote </span><span class=\"built_in\">set-url</span> <span class=\"string\">origin </span><span class=\"string\">https:</span>//<span class=\"string\">mirrors.</span><span class=\"string\">ustc.</span><span class=\"string\">edu.</span><span class=\"string\">cn/</span><span class=\"string\">homebrew-core.</span><span class=\"string\">git</span></span><br></pre></td></tr></table></figure>\n<p>替换 <code>Homebrew Bottles</code> 源: 参考:<a href=\"https://lug.ustc.edu.cn/wiki/mirrors/help/homebrew-bottles\" target=\"_blank\" rel=\"noopener\">替换 Homebrew Bottles 源</a></p>\n<p>在中科大源失效或宕机时可以： 1. <a href=\"https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/\" target=\"_blank\" rel=\"noopener\">使用清华源设置参考</a>。 2. 切换回官方源：</p>\n<p>重置 <code>brew.git</code>:</p>\n<figure class=\"highlight dsconfig\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">cd </span><span class=\"string\">\"$(brew --repo)\"</span></span><br><span class=\"line\"><span class=\"string\">git </span><span class=\"string\">remote </span><span class=\"built_in\">set-url</span> <span class=\"string\">origin </span><span class=\"string\">https:</span>//<span class=\"string\">github.</span><span class=\"string\">com/</span><span class=\"string\">Homebrew/</span><span class=\"string\">brew.</span><span class=\"string\">git</span></span><br></pre></td></tr></table></figure>\n<p>重置 <code>homebrew-core.git</code>:</p>\n<figure class=\"highlight dsconfig\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">cd </span><span class=\"string\">\"$(brew --repo)/Library/Taps/homebrew/homebrew-core\"</span></span><br><span class=\"line\"><span class=\"string\">git </span><span class=\"string\">remote </span><span class=\"built_in\">set-url</span> <span class=\"string\">origin </span><span class=\"string\">https:</span>//<span class=\"string\">github.</span><span class=\"string\">com/</span><span class=\"string\">Homebrew/</span><span class=\"string\">homebrew-core.</span><span class=\"string\">git</span></span><br></pre></td></tr></table></figure>\n<p>注释掉bash配置文件里的有关Homebrew Bottles即可恢复官方源。 重启bash或让bash重读配置文件。</p>\n<h3 id=\"xcode-高亮和提示失效\">Xcode 高亮和提示失效</h3>\n<p>Xcode 在长时间运行之后，会出现一个问题，那就是 例如 return 不再高亮显示了。 重启Xcode 重启机器 也不能解决和个问题。 后来找了一些资料 解决了这个问题</p>\n<ol type=\"1\">\n<li>由于 DerivedData 问题\n<ul>\n<li>关闭项目，Xcode 设置，选择 Localtions 点击 Derived Data 的的箭头进入 DerivedData 目录</li>\n<li>直接进入 /Users/jingwenzheng/Library/Developer/Xcode/DerivedData 目录，删除这里面所有的文件</li>\n<li>重启Xcode</li>\n</ul></li>\n<li>由于 pch 文件的问题\n<ul>\n<li>把.pch里的内容全部注释掉，clean掉项目里的内容，把.pch里的注释去掉，编译。代码高亮，语法提示功能都回来了。</li>\n</ul></li>\n</ol>\n<h3 id=\"mac-oslinux命令查询网络端口占用情况\">Mac OS/Linux命令查询网络端口占用情况</h3>\n<p><strong>netstat命令</strong></p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">netstat -<span class=\"keyword\">an</span> | <span class=\"keyword\">grep</span> <span class=\"symbol\">&lt;port&gt;</span></span><br></pre></td></tr></table></figure>\n<p><strong>lsof命令</strong> 通过list open file命令可以查看到当前打开文件，在linux中所有事物都是以文件形式存在，包括网络连接及硬件设备。</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lsof -<span class=\"selector-tag\">i</span>:<span class=\"number\">80</span></span><br></pre></td></tr></table></figure>\n<p>-i参数表示网络链接，:80指明端口号，该命令会同时列出PID，方便kill</p>\n<p>查看所有进程监听的端口</p>\n<figure class=\"highlight 1c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo lsof -i -P <span class=\"string\">| grep -i \"</span>listen<span class=\"string\">\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"vscode\">VSCode</h2>\n<p><a href=\"https://segmentfault.com/a/1190000012322533\" target=\"_blank\" rel=\"noopener\">mac vscode Python配置</a> <a href=\"https://blog.csdn.net/ever_now_future/article/details/79075581\" target=\"_blank\" rel=\"noopener\">使用vs(visual studio code)写python代码遇到的import requests失败问题</a> ## TensorFlow <a href=\"https://www.jianshu.com/p/1d305ac47d61\" target=\"_blank\" rel=\"noopener\">源码编译安装TensorFlow</a> <a href=\"http://nooverfit.com/wp/tensorflow%E5%A6%82%E4%BD%95%E5%85%85%E5%88%86%E4%BD%BF%E7%94%A8%E6%89%80%E6%9C%89cpu%E6%A0%B8%E6%95%B0%EF%BC%8C%E6%8F%90%E9%AB%98tensorflow%E7%9A%84cpu%E4%BD%BF%E7%94%A8%E7%8E%87%EF%BC%8C%E4%BB%A5/\" target=\"_blank\" rel=\"noopener\">TensorFlow如何充分使用所有CPU核数，提高TensorFlow的CPU使用率，以及Intel的MKL加速</a> <a href=\"https://blog.csdn.net/rockingdingo/article/details/55652662\" target=\"_blank\" rel=\"noopener\">Tensorflow并行计算：多核(multicore)，多线程(multi-thread)，图分割(Graph Partition)</a></p>\n<h2 id=\"dl\">DL</h2>\n<h3 id=\"jupyter\">Jupyter</h3>\n<ol type=\"1\">\n<li>Jupyter python3 notebook cannot recognize pandas in jupyter notebook: <code>!pip install pandas</code></li>\n</ol>\n","categories":["技术"],"tags":["记录"]},{"title":"决策树及其在手写数字识别的实践","url":"https://suool.net/2018/07/19/Mnist-With-Decision-Tree-ID3/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><p>##引言 决策时是一种基本的分类和回归方法，现在主要讨论分类决策树。决策树模型呈树形结构，在分类问题中，表示基本特征对实例进行分类的过程，你可以认为他是一个 <code>if-then</code> 的集合，也可以认为是定义在特征空间与类空间上的条件概率分布。 <a id=\"more\"></a></p>\n<p>其优点是模型具有可读性，分类速度快，学习时，利用训练数据，根据损失函数最小化的原则建立决策树模型。预测的时，对新的数据利用训练建立的决策树模型来分类。</p>\n<p>决策树学习分为三个步骤：特征选择、决策树生成和决策树的剪枝。主要的决策树生成算法有 ID3 算法、C4.5 算法、 CART 算法。</p>\n<p>本文的大纲如下： 1. 介绍决策树模型的基本概念 2. 决策树的特征选择和学习过程 3. 以 ID3 算法为例进行手写数字识别实践</p>\n<h2 id=\"决策树模型的基本概念\">决策树模型的基本概念</h2>\n<h3 id=\"决策树模型\">决策树模型</h3>\n<p>分类决策树是一种描述对实例进行分类的树形结构。决策树由节点和有向边组成，节点分为两类：内部结点和叶节点。内部结点表示一个特征或者属性，叶节点表示一个分类。</p>\n<p>用决策树分类的过程类似于一系列的 <code>if-then</code> 判断，如下图的一个决策树，圆和方框分别表示内部节点和叶节点，决策分类过程是这样的：首先从顶端的根节点出发，每个内部结点都是一个特征判断，即是 <code>if-then</code> 判断，如果满足特征是一种路径，不满足特征是另一条路径。</p>\n<p><img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/24/D295E3E5-FD3E-4509-BBA7-D80D26317A61.png\" alt=\"D295E3E5-FD3E-4509-BBA7-D80D26317A61\"> ### 决策树学习 决策树学习，假设给定训练数据集： <span class=\"math display\">\\[\nD=\\{(x_1,y_1),(x_2,y_2),\\cdots,(x_N,y_N)\\}\n\\]</span></p>\n<p>其中，<span class=\"math inline\">\\(x_i = (x_i^1,x_i^2,\\cdots,x_i^n)\\)</span> 为输入实力（特征向量），n为特征个数， <span class=\"math inline\">\\(y_i\\in\\{1,2,\\cdots,K\\}\\)</span>为类标记，<span class=\"math inline\">\\(i=1,2,\\cdots,N\\)</span>，N 为样本容量。学习的目标是根据给定的训练数据集构建一个决策树模型，使他能够进行正确的分类。</p>\n<p>而通过上面决策树的概念介绍，我们可以知道，决策树学习本质上是从训练数据集中归纳出一组分类规则。与训练数据集不相矛盾的决策树（即是能对训练数据进行正确分类的决策树）可能有多个，有可能一个都没有。我们需要的是一个与训练数据矛盾较小的决策树，同时有较好的泛化能力。</p>\n<p>决策树学习的损失函数通常是正则化的极大似然函数。决策树学习的策略也自然是以损失函数为目标函数的最小化。而这是一个 NP 问题，所以一般采用启发式的方法求得一个次最优解。</p>\n<p>决策树学习的算法通常是一个递归的选择最优特征，并根据该特征对训练数据进行分割，使得对各个子数据集有一个最好的分类的过程。</p>\n<h2 id=\"特征选择\">特征选择</h2>\n<p>特征选择在于选取对训练数据具有分类能力的特征，这样可以提高决策树学习的效率，而衡量特征分类效果的函数就是信息增益函数。</p>\n<p>###信息增益 信息增益是信息论中的概念，了解信息增益，首先要了解熵和条件熵的定义。 <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/24/02E0F04F-0D7E-463B-BBEC-92B7909204F8.png\" alt=\"熵的定义\"> <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/24/E16F35E0-799D-4CD7-8927-2CCC0BFBBC17.png\" alt=\"条件熵\"></p>\n<p><strong>信息增益的定义</strong>：特征 A 对训练集 D 对信息增益 g(D,A)，定义为集合 D 的经验熵 H(D) 与特征 A 给定的条件下 D 的经验条件熵 H(D|A) 之差，即是： <span class=\"math display\">\\[\ng(D,A) = H(D)-H(D|A)\n\\]</span></p>\n<p><strong>信息增益算法</strong></p>\n<ul>\n<li>基本假设 <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/24/D145C82E-3CEC-40BA-BBA3-223CC39CE9AB.png\" alt=\"基本元素定义\"></li>\n</ul>\n<p>于是信息增益算法如下： <strong>输入</strong>：训练数据集 D 和特征 A； <strong>输出</strong>：特征 A 对训练数据集 D 的信息增益 g(D,A) <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/24/18A795F2-9690-479B-B780-B893C562ED4D.png\" alt=\"算法步骤\"></p>\n<h2 id=\"决策树生成\">决策树生成</h2>\n<p>ID3 算法的核心是在决策树各个节点上应用信息增益准则选择特征，递归的构建决策树。具体点方法是：从根结点开始，对节点计算所有可能的特征的信息增益，选择信息增益最大的特征作为节点的特征，由该特征的不同取值建立子节点；再对子节点递归的调用以上方法，构建决策树；知道所有的特征的信心增益均很小或者没有特征可以选择为止。最后得到一个决策树，ID3 算法相当于用最大似然估计进行概率模型的选择。</p>\n<p>###ID3 算法 <strong>输入：</strong>训练数据 D，特征集 A，阈值 <span class=\"math inline\">\\(\\epsilon\\)</span> <strong>输出：</strong>决策树 <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/24/A2008824-0C64-4C99-AB08-27B6AD708FE0.png\" alt=\"ID3-1\"> <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/24/5D4D317A-2635-47DC-81B5-CCF172A6BD72.png\" alt=\"ID3-2\"></p>\n<p>ID3 算法只有树的生成，所以其生成的树很容易过拟合。</p>\n<p>以下为该算法的代码在 Mnist 数据集上实现的准确率，86.7%，比不上 KNN 的准确度，但是速度比其快的多。</p>\n<figure>\n<img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/24/8959541E-8E3F-4094-997E-C839D795ACA9.png\" alt=\"预测准确率\"><figcaption>预测准确率</figcaption>\n</figure>\n<p>代码如下： <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#encoding=utf-8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> cv2</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">import</span> testLibrary <span class=\"keyword\">as</span> tl</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ALL_DATA = <span class=\"number\">60000</span></span><br><span class=\"line\"></span><br><span class=\"line\">total_class = <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">log</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">wrapper</span><span class=\"params\">(*args, **kwargs)</span>:</span></span><br><span class=\"line\">        start_time = time.time()</span><br><span class=\"line\">        logging.debug(<span class=\"string\">'start %s()'</span> % func.__name__)</span><br><span class=\"line\">        ret = func(*args, **kwargs)</span><br><span class=\"line\"></span><br><span class=\"line\">        end_time = time.time()</span><br><span class=\"line\">        logging.debug(<span class=\"string\">'end %s(), cost %s seconds'</span> % (func.__name__,end_time-start_time))</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ret</span><br><span class=\"line\">    <span class=\"keyword\">return</span> wrapper</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 二值化</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">binaryzation</span><span class=\"params\">(img)</span>:</span></span><br><span class=\"line\">    cv_img = img.astype(np.uint8)</span><br><span class=\"line\">    cv2.threshold(cv_img,<span class=\"number\">50</span>,<span class=\"number\">1</span>,cv2.cv.CV_THRESH_BINARY_INV,cv_img)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cv_img</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@log</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">binaryzation_features</span><span class=\"params\">(trainset)</span>:</span></span><br><span class=\"line\">    features = []</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> img <span class=\"keyword\">in</span> trainset:</span><br><span class=\"line\">        img = np.reshape(img,(<span class=\"number\">28</span>,<span class=\"number\">28</span>))</span><br><span class=\"line\">        cv_img = img.astype(np.uint8)</span><br><span class=\"line\"></span><br><span class=\"line\">        img_b = binaryzation(cv_img)</span><br><span class=\"line\">        <span class=\"comment\"># hog_feature = np.transpose(hog_feature)</span></span><br><span class=\"line\">        features.append(img_b)</span><br><span class=\"line\"></span><br><span class=\"line\">    features = np.array(features)</span><br><span class=\"line\">    features = np.reshape(features, (<span class=\"number\">-1</span>, <span class=\"number\">784</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> features</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Tree</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, node_type, Class=None, feature=None)</span>:</span></span><br><span class=\"line\">        self.node_type = node_type</span><br><span class=\"line\">        self.dict = &#123;&#125;</span><br><span class=\"line\">        self.Class = Class</span><br><span class=\"line\">        self.feature = feature</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_tree</span><span class=\"params\">(self, val, tree)</span>:</span></span><br><span class=\"line\">        self.dict[val] = tree</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">predict</span><span class=\"params\">(self, features)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.node_type == <span class=\"string\">'leaf'</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> self.Class</span><br><span class=\"line\"></span><br><span class=\"line\">        tree = self.dict[features[self.feature]]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> tree.predict(features)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calc_ent</span><span class=\"params\">(x)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        calculate shanno ent of x</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    x_value_list = set([x[i] <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(x.shape[<span class=\"number\">0</span>])])</span><br><span class=\"line\">    ent = <span class=\"number\">0.0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x_value <span class=\"keyword\">in</span> x_value_list:</span><br><span class=\"line\">        p = float(x[x == x_value].shape[<span class=\"number\">0</span>]) / x.shape[<span class=\"number\">0</span>]</span><br><span class=\"line\">        logp = np.log2(p)</span><br><span class=\"line\">        ent -= p * logp</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ent</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calc_condition_ent</span><span class=\"params\">(x, y)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        calculate ent H(y|x)</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># calc ent(y|x)</span></span><br><span class=\"line\">    x_value_list = set([x[i] <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(x.shape[<span class=\"number\">0</span>])])</span><br><span class=\"line\">    ent = <span class=\"number\">0.0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x_value <span class=\"keyword\">in</span> x_value_list:</span><br><span class=\"line\">        sub_y = y[x == x_value]</span><br><span class=\"line\">        temp_ent = calc_ent(sub_y)</span><br><span class=\"line\">        ent += (float(sub_y.shape[<span class=\"number\">0</span>]) / y.shape[<span class=\"number\">0</span>]) * temp_ent</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># def calc_ent_grap(x,y):</span></span><br><span class=\"line\"><span class=\"comment\">#     \"\"\"</span></span><br><span class=\"line\"><span class=\"comment\">#         calculate ent grap</span></span><br><span class=\"line\"><span class=\"comment\">#     \"\"\"</span></span><br><span class=\"line\"><span class=\"comment\">#     base_ent = calc_ent(y)</span></span><br><span class=\"line\"><span class=\"comment\">#     condition_ent = calc_condition_ent(x, y)</span></span><br><span class=\"line\"><span class=\"comment\">#     ent_grap = base_ent - condition_ent</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#     return ent_grap</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">recurse_train</span><span class=\"params\">(train_set, train_label, features, epsilon)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> total_class</span><br><span class=\"line\"></span><br><span class=\"line\">    LEAF = <span class=\"string\">'leaf'</span></span><br><span class=\"line\">    INTERNAL = <span class=\"string\">'internal'</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 步骤1——如果train_set中的所有实例都属于同一类Ck</span></span><br><span class=\"line\">    label_set = set(train_label)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(label_set) == <span class=\"number\">1</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Tree(LEAF, Class=label_set.pop())</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 步骤2——如果features为空</span></span><br><span class=\"line\">    (max_class, max_len) = max([(i, len([x <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> train_label <span class=\"keyword\">if</span> x == i])) <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(total_class)],key = <span class=\"keyword\">lambda</span> x:x[<span class=\"number\">1</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(features) == <span class=\"number\">0</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Tree(LEAF, Class=max_class)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 步骤3——计算信息增益</span></span><br><span class=\"line\">    max_feature = <span class=\"number\">0</span></span><br><span class=\"line\">    max_gda = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    d = train_label</span><br><span class=\"line\">    hd = calc_ent(d)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> feature <span class=\"keyword\">in</span> features:</span><br><span class=\"line\">        A = np.array(train_set[:, feature].flat)</span><br><span class=\"line\">        gda = hd - calc_condition_ent(A, d)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> gda &gt; max_gda:</span><br><span class=\"line\">            max_gda, max_feature = gda, feature</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 步骤4——小于阈值</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> max_gda &lt; epsilon:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Tree(LEAF, Class=max_class)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 步骤5——构建非空子集</span></span><br><span class=\"line\">    sub_features = [x <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> features <span class=\"keyword\">if</span> x != max_feature]</span><br><span class=\"line\">    tree = Tree(INTERNAL, feature=max_feature)</span><br><span class=\"line\"></span><br><span class=\"line\">    feature_col = np.array(train_set[:, max_feature].flat)</span><br><span class=\"line\">    feature_value_list = set([feature_col[i] <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(feature_col.shape[<span class=\"number\">0</span>])])</span><br><span class=\"line\">    <span class=\"keyword\">for</span> feature_value <span class=\"keyword\">in</span> feature_value_list:</span><br><span class=\"line\"></span><br><span class=\"line\">        index = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(len(train_label)):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> train_set[i][max_feature] == feature_value:</span><br><span class=\"line\">                index.append(i)</span><br><span class=\"line\"></span><br><span class=\"line\">        sub_train_set = train_set[index]</span><br><span class=\"line\">        sub_train_label = train_label[index]</span><br><span class=\"line\"></span><br><span class=\"line\">        sub_tree = recurse_train(sub_train_set,sub_train_label,sub_features,epsilon)</span><br><span class=\"line\">        tree.add_tree(feature_value,sub_tree)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> tree</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@log</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">train</span><span class=\"params\">(train_set, train_label, features, epsilon)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> recurse_train(train_set, train_label, features, epsilon)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@log</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">predict</span><span class=\"params\">(test_set, tree)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    result = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> features <span class=\"keyword\">in</span> test_set:</span><br><span class=\"line\">        tmp_predict = tree.predict(features)</span><br><span class=\"line\">        result.append(tmp_predict)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> np.array(result)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calculate_accuracy</span><span class=\"params\">(predict_ary, test)</span>:</span></span><br><span class=\"line\">    right_count = <span class=\"number\">0.0</span></span><br><span class=\"line\">    accuracy_ary = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> index <span class=\"keyword\">in</span> range(len(predict_ary)):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> predict_ary[index] == test[index]:</span><br><span class=\"line\">            right_count += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (index + <span class=\"number\">1</span>) % <span class=\"number\">500</span> == <span class=\"number\">0</span>:</span><br><span class=\"line\">                accuracy_ary.append(float(right_count) / (index + <span class=\"number\">1</span>))</span><br><span class=\"line\">        print(<span class=\"string\">\"预测值：%d 实际值： %d\"</span> % (predict_ary[index], test[index]))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> right_count/len(test), accuracy_ary</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    logger = logging.getLogger()</span><br><span class=\"line\">    logger.setLevel(logging.DEBUG)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 读取训练数据集和测试数据集的方法和朴素贝叶斯方法一致</span></span><br><span class=\"line\">    print(<span class=\"string\">'Start read train data'</span>)</span><br><span class=\"line\">    time_1 = time.time()</span><br><span class=\"line\">    data_map, labels = tl.loadCSVfile(<span class=\"string\">\"data.csv\"</span>)</span><br><span class=\"line\">    print(data_map.shape, labels.shape)</span><br><span class=\"line\">    time_2 = time.time()</span><br><span class=\"line\">    print(<span class=\"string\">'read data train cost '</span>, time_2 - time_1, <span class=\"string\">' seconds'</span>, <span class=\"string\">'\\n'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    print(<span class=\"string\">'Start read predict data'</span>)</span><br><span class=\"line\">    time_3 = time.time()</span><br><span class=\"line\">    test_data_map, test_labels = tl.loadCSVfile(<span class=\"string\">\"dataTest.csv\"</span>)</span><br><span class=\"line\">    print(test_data_map.shape, test_data_map.shape)</span><br><span class=\"line\">    time_4 = time.time()</span><br><span class=\"line\">    print(<span class=\"string\">'read predict data cost '</span>, time_4 - time_3, <span class=\"string\">' seconds'</span>, <span class=\"string\">'\\n'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    tree = train(data_map, labels, [i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">784</span>)], <span class=\"number\">0.1</span>)</span><br><span class=\"line\">    test_predict = predict(test_data_map, tree)</span><br><span class=\"line\"></span><br><span class=\"line\">    rate, accuracy = calculate_accuracy(test_predict, test_labels)</span><br><span class=\"line\"></span><br><span class=\"line\">    print(<span class=\"string\">\"The accuracy score is \"</span>, rate)</span><br><span class=\"line\">    new_ticks = np.linspace(<span class=\"number\">1</span>, <span class=\"number\">20</span>, <span class=\"number\">20</span>)</span><br><span class=\"line\">    plt.xticks(new_ticks)</span><br><span class=\"line\">    plt.ylim(ymin=<span class=\"number\">0.7</span>, ymax=<span class=\"number\">1</span>)</span><br><span class=\"line\">    plt.plot(new_ticks, accuracy, <span class=\"string\">'o-'</span>, color=<span class=\"string\">'g'</span>)</span><br><span class=\"line\">    plt.xlabel(<span class=\"string\">\"x -- 1:500\"</span>)</span><br><span class=\"line\">    plt.ylabel(<span class=\"string\">\"y\"</span>)</span><br><span class=\"line\">    plt.title(<span class=\"string\">u\"预测准确率\"</span>)</span><br><span class=\"line\">    plt.show()</span><br></pre></td></tr></table></figure></p>\n","categories":["机器学习"],"tags":["机器学习"]},{"title":"K 近邻法及其在手写数字识别的实践","url":"https://suool.net/2018/07/10/Mnist-With-K-Nearest-Neighbor/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"引言\">引言</h2>\n<p>k 近邻法（k-nearest-neighbor, KNN）是一种基本的分类和回归方法。现在只讨论其分类方面的应用，它不具备明显的学习过程，实际上是利用已知的训练数据集对输入特征向量空间进行划分，并作为其分类的“模型”。 <a id=\"more\"></a></p>\n<p>其中 k 值的选择、距离的度量及分类决策规则是 k 近邻模型的三个基本要素。</p>\n<p>本文将按照以下提纲进行： - k 近邻法阐述 - k 近邻的模型 - k 近邻在手写数字识别上的实战</p>\n<h2 id=\"k-近邻法阐述\">k 近邻法阐述</h2>\n<p>k 近邻算法非常容易理解，因为其本质上就是求距离，这是非常简单而直观的度量方法：对于给定的一个训练数据集，对新的输入实例 M，在训练数据集中找到与该新实例 M 最邻近的 k 个实例，由这 k 个实例按照一定的表决规则进行投票决策最合适的类别，那么实例 M 就属于这个类。下面是算法的描述： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/10/CC3A072A-F73B-4A54-A6F9-94EF80316B66.png\" alt=\"CC3A072A-F73B-4A54-A6F9-94EF80316B66\"></p>\n<h2 id=\"k-近邻模型\">k 近邻模型</h2>\n<p>k 近邻算法本质上是在超空间内划分区域空间分类的问题，在输入数据集的特征空间内，对于每个训练实例点 <span class=\"math inline\">\\(x_i\\)</span> ，距离改点比其他点更近的所有点组成一个区域，叫做单元(cell)。上文说了 k 近邻模型的三个要素，k 值选择、距离度量、决策函数，下面一一说明。</p>\n<h3 id=\"k-值选择\">k 值选择</h3>\n<p>k 值指的是选择近邻点的数目，如果 k = 1 则是最近邻，即是每次由距离新实例最近的训练点所属的类别决定待分类实例的类别。</p>\n<p>k 值的选择对于 k 近邻法的结果可以产生重大影响。</p>\n<p>当 k 值较小的时候，那么预测学习的近似误差会减少，因为此时只有距离待分类点较近的训练实例才会对于分类预测结果有影响作用，但是缺点是估计误差会增大，因为预测结果会对近邻的实例点非常敏感，如果近邻的实例多数都是噪声点，那么就很容易导致预测出错。即是说，k 值的减少意味着模型变得复杂，容易发生过拟合。</p>\n<p>当 k 值较大的时候，就相当于用较大邻域中的训练实例进行预测。其优点是可以减少学习的估计误差。但缺点是学习的近似误差会增大，这时与输入实例较远的（不相似的）训练实例也会对预测起作用，使预测发生错误。k 值的增大就意味着整体的模型变得简单。</p>\n<p>如果 k = N，那么无论输入实例是什么，都将简单地预测它属于在训练实例中最多的类。这时，模型过于简单，完全忽略训练实例中的大量有用信息，是不可取的。</p>\n<p>在应用中，k 值一般取一个比较小的数值。通常采用交叉验证法来选取最优的 k 值。</p>\n<h3 id=\"距离度量\">距离度量</h3>\n<p>在实数域中，数的大小和两个数之间的距离是通过绝对值来度量的。在解析几何中，向量的大小和两个向量之差的大小是“长度”和“距离”的概念来度量的。为了对矩阵运算进行数值分析，我们需要对向量 和矩阵的“大小”引进某种度量。而范数是绝对值概念的自然推广。</p>\n<p>特征空间中两个实例点的距离是其相似程度的反映，k 近邻空间选用欧式距离及更一般的 <span class=\"math inline\">\\(L_p\\)</span> 距离。</p>\n<p>设特征空间 X 是 n 维实数向量空间 <span class=\"math inline\">\\(R^n\\)</span>，<span class=\"math inline\">\\(x_i,x_j \\in \\mathcal{X}, x_i = (x_i^1,x_i^2,\\cdots,x_i^n), x_j = (x_j^1,x_j^2,\\cdots,x_j^n)\\)</span>，则 <span class=\"math inline\">\\(x_i, x_j\\)</span> 的<span class=\"math inline\">\\(L_p\\)</span>距离定义为: <span class=\"math display\">\\[\nL_p(x_i,x_j) =  \n\\left(\n\\sum_{l=1}^n |x_i^l-x_j^l|^p\n\\right) ^{\\frac{1}{p}}\n\\]</span></p>\n<p>这里 p 要不小于1，当 p = 2时，成为欧氏距离； 当 p = 1 时，称为曼哈顿距离； 当 p = <span class=\"math inline\">\\(\\infty\\)</span> 时，它是各个坐标距离的最大值。</p>\n<h3 id=\"分类决策\">分类决策</h3>\n<p>k 近邻法中的分类决策规则往往是多数投票表决，即由输入实例的 k 个邻近的训练实例中的多数类决定输入实例的类。</p>\n<p>多数表决规则（majorityvotingrule）有如下解释：如果分类的损失函数为 0-1 损失函数，分类函数为： <span class=\"math display\">\\[\nf:R^n \\to \\{c_1,c_2,\\cdots, c_K\\}\n\\]</span></p>\n<p>那么对给定的实例 <span class=\"math inline\">\\(x\\in X\\)</span>，其最近邻的 k 个训练实例点构成集合 <span class=\"math inline\">\\(N_k(x\\)</span>。如果涵盖<span class=\"math inline\">\\(N_k(x)\\)</span>的区域的类别是，那么误分类率是： <span class=\"math display\">\\[\n\\frac{1}{k} \\sum_{x_i\\in N_k(x)} I (y_i\\not=c_j) = 1 - \\frac{1}{k} \\sum_{x_i\\in N_k(x)} I (y_i = c_j)\n\\]</span></p>\n<p>要使误分类率最小即经验风险最小，就要使<span class=\"math inline\">\\(\\sum_{x_i\\in N_k(x)} I (y_i = c_j)\\)</span>最大，所以多数表决规则等价于经验风险最小化。</p>\n<p>同时多数表决可以加权表决，可以一定程度提高表决结果的准确性。</p>\n<h2 id=\"k-近邻在手写数字识别上的实战\">k 近邻在手写数字识别上的实战</h2>\n<p>数据集的读取和解析和<a href=\"https://suool.net/2018/07/08/navie-bayes-handwriting-recognition/\">朴素贝叶斯法识别手写数字</a>的原理一样，这里不再赘述。</p>\n<p>代码实现算法上，这里先采用线性暴搜的方法，效率上明显是非常低的，耗时也比朴素贝叶斯慢的多，但是准确率却非常高，目前表决数为 k=3 的情况下且不加权的预测准确率可以达到 94% 以上。</p>\n<p>训练预测结果如下: <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/10/597C98CC-BFA6-4998-9E03-A43C6BAF6620.png\" alt=\"597C98CC-BFA6-4998-9E03-A43C6BAF6620\"></p>\n<p>可以看出，测试 2100 个图片，用了1218秒，20多分钟，效率非常慢。 <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/10/A535D08C-349E-46B2-8147-E59F88076FB1.png\" alt=\"A535D08C-349E-46B2-8147-E59F88076FB1\"></p>\n<p>但是准确率异常高，且比较稳定。</p>\n<h3 id=\"总结\">总结</h3>\n<ul>\n<li><p>更高效率的 k 近邻寻找方法是 k-d树（k-dimensional树的简称），这是一种分割 k 维数据空间的数据结构，主要应用于多维空间关键数据的搜索。</p></li>\n<li><p>可以对 k 近邻进行加权表决，对于预测准确率应该也会有所提升。</p></li>\n</ul>\n<h2 id=\"next\">NEXT</h2>\n<p>下一次将实践以上的两点总结，看看具体的表现如何吧。</p>\n<hr>\n<p>附KNN 算法的线性暴搜实现如下:</p>\n<div class=\"sourceCode\" id=\"cb1\"><pre class=\"sourceCode python\"><code class=\"sourceCode python\"><a class=\"sourceLine\" id=\"cb1-1\" data-line-number=\"1\"><span class=\"co\"># -*- coding: utf-8 -*</span></a>\n<a class=\"sourceLine\" id=\"cb1-2\" data-line-number=\"2\"><span class=\"im\">import</span> time</a>\n<a class=\"sourceLine\" id=\"cb1-3\" data-line-number=\"3\"><span class=\"im\">import</span> matplotlib.pyplot <span class=\"im\">as</span> plt</a>\n<a class=\"sourceLine\" id=\"cb1-4\" data-line-number=\"4\"><span class=\"im\">import</span> testLibrary <span class=\"im\">as</span> tl</a>\n<a class=\"sourceLine\" id=\"cb1-5\" data-line-number=\"5\"><span class=\"im\">import</span> collections</a>\n<a class=\"sourceLine\" id=\"cb1-6\" data-line-number=\"6\"><span class=\"im\">import</span> numpy <span class=\"im\">as</span> np</a>\n<a class=\"sourceLine\" id=\"cb1-7\" data-line-number=\"7\"></a>\n<a class=\"sourceLine\" id=\"cb1-8\" data-line-number=\"8\"><span class=\"co\"># 距离计算</span></a>\n<a class=\"sourceLine\" id=\"cb1-9\" data-line-number=\"9\"><span class=\"kw\">def</span> calc_dis(train_image,test_image):</a>\n<a class=\"sourceLine\" id=\"cb1-10\" data-line-number=\"10\">    dist<span class=\"op\">=</span>np.linalg.norm(train_image<span class=\"op\">-</span>test_image)</a>\n<a class=\"sourceLine\" id=\"cb1-11\" data-line-number=\"11\">    <span class=\"cf\">return</span> dist</a>\n<a class=\"sourceLine\" id=\"cb1-12\" data-line-number=\"12\"></a>\n<a class=\"sourceLine\" id=\"cb1-13\" data-line-number=\"13\"></a>\n<a class=\"sourceLine\" id=\"cb1-14\" data-line-number=\"14\"><span class=\"co\"># 确定待分类实例的 k 近邻</span></a>\n<a class=\"sourceLine\" id=\"cb1-15\" data-line-number=\"15\"><span class=\"kw\">def</span> find_labels(k,train_images,train_labels,test_image):</a>\n<a class=\"sourceLine\" id=\"cb1-16\" data-line-number=\"16\">    all_dis <span class=\"op\">=</span> []</a>\n<a class=\"sourceLine\" id=\"cb1-17\" data-line-number=\"17\">    labels<span class=\"op\">=</span>collections.defaultdict(<span class=\"bu\">int</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-18\" data-line-number=\"18\">    <span class=\"cf\">for</span> i <span class=\"kw\">in</span> <span class=\"bu\">range</span>(<span class=\"bu\">len</span>(train_images)):</a>\n<a class=\"sourceLine\" id=\"cb1-19\" data-line-number=\"19\">        dis <span class=\"op\">=</span> np.linalg.norm(train_images[i]<span class=\"op\">-</span>test_image)</a>\n<a class=\"sourceLine\" id=\"cb1-20\" data-line-number=\"20\">        all_dis.append(dis)</a>\n<a class=\"sourceLine\" id=\"cb1-21\" data-line-number=\"21\">    sorted_dis <span class=\"op\">=</span> np.argsort(all_dis)</a>\n<a class=\"sourceLine\" id=\"cb1-22\" data-line-number=\"22\">    count <span class=\"op\">=</span> <span class=\"dv\">0</span></a>\n<a class=\"sourceLine\" id=\"cb1-23\" data-line-number=\"23\">    <span class=\"cf\">while</span> count <span class=\"op\">&lt;</span> k:</a>\n<a class=\"sourceLine\" id=\"cb1-24\" data-line-number=\"24\">        labels[train_labels[sorted_dis[count]]]<span class=\"op\">+=</span><span class=\"dv\">1</span></a>\n<a class=\"sourceLine\" id=\"cb1-25\" data-line-number=\"25\">        count <span class=\"op\">+=</span> <span class=\"dv\">1</span></a>\n<a class=\"sourceLine\" id=\"cb1-26\" data-line-number=\"26\">    <span class=\"cf\">return</span> labels</a>\n<a class=\"sourceLine\" id=\"cb1-27\" data-line-number=\"27\"></a>\n<a class=\"sourceLine\" id=\"cb1-28\" data-line-number=\"28\"></a>\n<a class=\"sourceLine\" id=\"cb1-29\" data-line-number=\"29\"><span class=\"co\"># 结合训练数据集，对所有待分类实例进行 k 近邻分类预测</span></a>\n<a class=\"sourceLine\" id=\"cb1-30\" data-line-number=\"30\"><span class=\"kw\">def</span> knn_all(k,train_images,train_labels,test_images, test_labels):</a>\n<a class=\"sourceLine\" id=\"cb1-31\" data-line-number=\"31\">    <span class=\"bu\">print</span>(<span class=\"st\">&quot;start knn_all!&quot;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-32\" data-line-number=\"32\">    res<span class=\"op\">=</span>[]</a>\n<a class=\"sourceLine\" id=\"cb1-33\" data-line-number=\"33\">    right <span class=\"op\">=</span> <span class=\"dv\">0</span></a>\n<a class=\"sourceLine\" id=\"cb1-34\" data-line-number=\"34\">    accuracy <span class=\"op\">=</span> []</a>\n<a class=\"sourceLine\" id=\"cb1-35\" data-line-number=\"35\">    count<span class=\"op\">=</span><span class=\"dv\">0</span></a>\n<a class=\"sourceLine\" id=\"cb1-36\" data-line-number=\"36\">    <span class=\"cf\">for</span> i <span class=\"kw\">in</span> <span class=\"bu\">range</span>(<span class=\"dv\">2100</span>):</a>\n<a class=\"sourceLine\" id=\"cb1-37\" data-line-number=\"37\">        labels<span class=\"op\">=</span>find_labels(k,train_images,train_labels,test_images[i])</a>\n<a class=\"sourceLine\" id=\"cb1-38\" data-line-number=\"38\">        res.append(<span class=\"bu\">max</span>(labels))</a>\n<a class=\"sourceLine\" id=\"cb1-39\" data-line-number=\"39\">        <span class=\"bu\">print</span>(<span class=\"st\">&quot;Picture </span><span class=\"sc\">%d</span><span class=\"st\"> has been predicted! real is </span><span class=\"sc\">%d</span><span class=\"st\"> predicted is </span><span class=\"sc\">%d</span><span class=\"st\">&quot;</span><span class=\"op\">%</span>(count, test_labels[i], <span class=\"bu\">max</span>(labels)))</a>\n<a class=\"sourceLine\" id=\"cb1-40\" data-line-number=\"40\">        count<span class=\"op\">+=</span><span class=\"dv\">1</span></a>\n<a class=\"sourceLine\" id=\"cb1-41\" data-line-number=\"41\">        <span class=\"cf\">if</span> <span class=\"bu\">max</span>(labels) <span class=\"op\">==</span> test_labels[i]:</a>\n<a class=\"sourceLine\" id=\"cb1-42\" data-line-number=\"42\">            right<span class=\"op\">+=</span><span class=\"dv\">1</span></a>\n<a class=\"sourceLine\" id=\"cb1-43\" data-line-number=\"43\">        <span class=\"cf\">if</span> (i<span class=\"op\">+</span><span class=\"dv\">1</span>) <span class=\"op\">%</span> <span class=\"dv\">70</span> <span class=\"op\">==</span> <span class=\"dv\">0</span>:</a>\n<a class=\"sourceLine\" id=\"cb1-44\" data-line-number=\"44\">            accuracy.append(<span class=\"bu\">float</span>(right)<span class=\"op\">/</span>(i<span class=\"op\">+</span><span class=\"dv\">1</span>))</a>\n<a class=\"sourceLine\" id=\"cb1-45\" data-line-number=\"45\">    <span class=\"cf\">return</span> res, accuracy</a>\n<a class=\"sourceLine\" id=\"cb1-46\" data-line-number=\"46\"></a>\n<a class=\"sourceLine\" id=\"cb1-47\" data-line-number=\"47\"></a>\n<a class=\"sourceLine\" id=\"cb1-48\" data-line-number=\"48\"><span class=\"co\"># 总的预测准确率计算</span></a>\n<a class=\"sourceLine\" id=\"cb1-49\" data-line-number=\"49\"><span class=\"kw\">def</span> calc_precision(res,test_labels):</a>\n<a class=\"sourceLine\" id=\"cb1-50\" data-line-number=\"50\">    f_res_open<span class=\"op\">=</span><span class=\"bu\">open</span>(<span class=\"st\">&quot;res.txt&quot;</span>,<span class=\"st\">&quot;a+&quot;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-51\" data-line-number=\"51\">    precision<span class=\"op\">=</span><span class=\"dv\">0</span></a>\n<a class=\"sourceLine\" id=\"cb1-52\" data-line-number=\"52\">    <span class=\"cf\">for</span> i <span class=\"kw\">in</span> <span class=\"bu\">range</span>(<span class=\"bu\">len</span>(res)):</a>\n<a class=\"sourceLine\" id=\"cb1-53\" data-line-number=\"53\">        f_res_open.write(<span class=\"st\">&quot;res:&quot;</span><span class=\"op\">+</span><span class=\"bu\">str</span>(res[i])<span class=\"op\">+</span><span class=\"st\">&quot;</span><span class=\"ch\">\\n</span><span class=\"st\">&quot;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-54\" data-line-number=\"54\">        f_res_open.write(<span class=\"st\">&quot;test:&quot;</span><span class=\"op\">+</span><span class=\"bu\">str</span>(test_labels[i])<span class=\"op\">+</span><span class=\"st\">&quot;</span><span class=\"ch\">\\n</span><span class=\"st\">&quot;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-55\" data-line-number=\"55\">        <span class=\"cf\">if</span> res[i]<span class=\"op\">==</span>test_labels[i]:</a>\n<a class=\"sourceLine\" id=\"cb1-56\" data-line-number=\"56\">            precision<span class=\"op\">+=</span><span class=\"dv\">1</span></a>\n<a class=\"sourceLine\" id=\"cb1-57\" data-line-number=\"57\">    <span class=\"cf\">return</span> precision<span class=\"op\">/</span><span class=\"bu\">len</span>(res)</a>\n<a class=\"sourceLine\" id=\"cb1-58\" data-line-number=\"58\"></a>\n<a class=\"sourceLine\" id=\"cb1-59\" data-line-number=\"59\"></a>\n<a class=\"sourceLine\" id=\"cb1-60\" data-line-number=\"60\"><span class=\"cf\">if</span> <span class=\"va\">__name__</span> <span class=\"op\">==</span> <span class=\"st\">&#39;__main__&#39;</span>:</a>\n<a class=\"sourceLine\" id=\"cb1-61\" data-line-number=\"61\">    <span class=\"bu\">print</span>(<span class=\"st\">&#39;Start process train data&#39;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-62\" data-line-number=\"62\">    time_0 <span class=\"op\">=</span> time.time()</a>\n<a class=\"sourceLine\" id=\"cb1-63\" data-line-number=\"63\">    <span class=\"co\"># tl.get_train_set()</span></a>\n<a class=\"sourceLine\" id=\"cb1-64\" data-line-number=\"64\"></a>\n<a class=\"sourceLine\" id=\"cb1-65\" data-line-number=\"65\">    <span class=\"bu\">print</span>(<span class=\"st\">&#39;Start process test data&#39;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-66\" data-line-number=\"66\">    time_t <span class=\"op\">=</span> time.time()</a>\n<a class=\"sourceLine\" id=\"cb1-67\" data-line-number=\"67\">    <span class=\"co\"># tl.get_test_set()</span></a>\n<a class=\"sourceLine\" id=\"cb1-68\" data-line-number=\"68\"></a>\n<a class=\"sourceLine\" id=\"cb1-69\" data-line-number=\"69\">    <span class=\"co\"># 读取训练数据集和测试数据集的方法和朴素贝叶斯方法一致</span></a>\n<a class=\"sourceLine\" id=\"cb1-70\" data-line-number=\"70\">    <span class=\"bu\">print</span> (<span class=\"st\">&#39;Start read train data&#39;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-71\" data-line-number=\"71\">    time_1 <span class=\"op\">=</span> time.time()</a>\n<a class=\"sourceLine\" id=\"cb1-72\" data-line-number=\"72\">    data_map, labels <span class=\"op\">=</span> tl.loadCSVfile(<span class=\"st\">&quot;data.csv&quot;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-73\" data-line-number=\"73\">    <span class=\"bu\">print</span>(data_map.shape, labels.shape)</a>\n<a class=\"sourceLine\" id=\"cb1-74\" data-line-number=\"74\">    time_2 <span class=\"op\">=</span> time.time()</a>\n<a class=\"sourceLine\" id=\"cb1-75\" data-line-number=\"75\">    <span class=\"bu\">print</span>(<span class=\"st\">&#39;read data train cost &#39;</span>, time_2 <span class=\"op\">-</span> time_1, <span class=\"st\">&#39; seconds&#39;</span>, <span class=\"st\">&#39;</span><span class=\"ch\">\\n</span><span class=\"st\">&#39;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-76\" data-line-number=\"76\"></a>\n<a class=\"sourceLine\" id=\"cb1-77\" data-line-number=\"77\">    <span class=\"bu\">print</span>(<span class=\"st\">&#39;Start read predict data&#39;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-78\" data-line-number=\"78\">    time_3 <span class=\"op\">=</span> time.time()</a>\n<a class=\"sourceLine\" id=\"cb1-79\" data-line-number=\"79\">    test_data_map, test_labels <span class=\"op\">=</span> tl.loadCSVfile(<span class=\"st\">&quot;dataTest.csv&quot;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-80\" data-line-number=\"80\">    <span class=\"bu\">print</span>(test_data_map.shape, test_data_map.shape)</a>\n<a class=\"sourceLine\" id=\"cb1-81\" data-line-number=\"81\">    time_4 <span class=\"op\">=</span> time.time()</a>\n<a class=\"sourceLine\" id=\"cb1-82\" data-line-number=\"82\">    <span class=\"bu\">print</span>(<span class=\"st\">&#39;read predict data cost &#39;</span>, time_4 <span class=\"op\">-</span> time_3, <span class=\"st\">&#39; seconds&#39;</span>, <span class=\"st\">&#39;</span><span class=\"ch\">\\n</span><span class=\"st\">&#39;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-83\" data-line-number=\"83\"></a>\n<a class=\"sourceLine\" id=\"cb1-84\" data-line-number=\"84\">    <span class=\"bu\">print</span>(<span class=\"st\">&#39;Start predicting data&#39;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-85\" data-line-number=\"85\">    time_5 <span class=\"op\">=</span> time.time()</a>\n<a class=\"sourceLine\" id=\"cb1-86\" data-line-number=\"86\">    res, accuracy <span class=\"op\">=</span> knn_all(<span class=\"dv\">3</span>, data_map, labels, test_data_map, test_labels)</a>\n<a class=\"sourceLine\" id=\"cb1-87\" data-line-number=\"87\">    score <span class=\"op\">=</span> calc_precision(res, test_labels)</a>\n<a class=\"sourceLine\" id=\"cb1-88\" data-line-number=\"88\">    time_6 <span class=\"op\">=</span> time.time()</a>\n<a class=\"sourceLine\" id=\"cb1-89\" data-line-number=\"89\">    <span class=\"bu\">print</span>(<span class=\"st\">&#39;read predict data cost &#39;</span>, time_6 <span class=\"op\">-</span> time_5, <span class=\"st\">&#39; seconds&#39;</span>, <span class=\"st\">&#39;</span><span class=\"ch\">\\n</span><span class=\"st\">&#39;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-90\" data-line-number=\"90\"></a>\n<a class=\"sourceLine\" id=\"cb1-91\" data-line-number=\"91\">    new_ticks <span class=\"op\">=</span> np.linspace(<span class=\"dv\">1</span>, <span class=\"dv\">30</span>, <span class=\"dv\">30</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-92\" data-line-number=\"92\">    plt.xticks(new_ticks)</a>\n<a class=\"sourceLine\" id=\"cb1-93\" data-line-number=\"93\">    plt.ylim(ymin<span class=\"op\">=</span><span class=\"fl\">0.5</span>, ymax <span class=\"op\">=</span> <span class=\"dv\">1</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-94\" data-line-number=\"94\">    plt.plot(new_ticks, accuracy, <span class=\"st\">&#39;o-&#39;</span>, color<span class=\"op\">=</span><span class=\"st\">&#39;g&#39;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-95\" data-line-number=\"95\">    plt.xlabel(<span class=\"st\">&quot;x -- 1:70&quot;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-96\" data-line-number=\"96\">    plt.ylabel(<span class=\"st\">&quot;y&quot;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-97\" data-line-number=\"97\">    plt.title(<span class=\"st\">u&quot;预测准确率&quot;</span>)</a>\n<a class=\"sourceLine\" id=\"cb1-98\" data-line-number=\"98\">    plt.show()</a>\n<a class=\"sourceLine\" id=\"cb1-99\" data-line-number=\"99\"></a>\n<a class=\"sourceLine\" id=\"cb1-100\" data-line-number=\"100\">    <span class=\"bu\">print</span>(<span class=\"st\">&quot;The accuracy rate is &quot;</span>, score)</a>\n<a class=\"sourceLine\" id=\"cb1-101\" data-line-number=\"101\">    <span class=\"bu\">print</span>(<span class=\"st\">&quot;All data processing cost </span><span class=\"sc\">%s</span><span class=\"st\"> seconds&quot;</span> <span class=\"op\">%</span> (time_6 <span class=\"op\">-</span> time_0))</a></code></pre></div>\n","categories":["机器学习"],"tags":["机器学习"]},{"title":"乡土中国","url":"https://suool.net/2018/07/09/from-the-soil-first/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><p>上个周看完了费孝通的《乡土中国》，现在摘抄一下其中的标记，后续再写相关的读后感吧。 <a id=\"more\"></a></p>\n<ol type=\"1\">\n<li>从基层上看，中国社会是乡土性的。</li>\n<li>农业和游牧或者工业不同，它是直接取资于土地的。种地的农民是搬不动的，因为长在土里的庄稼是他们生存的基础，伺候庄家的老农也像是半身插在土里，无法流动。</li>\n<li>直接靠土地来谋生的人是站着在土地上的。以农为生的人，时代定居是常态，迁移是变态。除非天灾战火才有可能会使他们背井离乡，即使这样，死守在土里的可能还是较大的。</li>\n<li>人口的不流动是从人和空间的关系上说的，从人和人在空间的排列关系上说就是孤立和隔膜。孤立和隔膜并不是以个人为单位的，而是以一处住在的集团为单位的，比如村落。</li>\n<li>中国的农民一般是聚村而居，形成数百户人家的村落是积极普遍的；而美国等国家农民则一般是一户人家形成一个单位，因此而形成的精神文明也大不相同。</li>\n<li>乡土社会在地方性的限制下成了生于斯、死于斯的社会，常态的生活是终老于乡。因此，中国的基层社会也就形成了这样一个特色，每个孩子都是在人家眼里看着长大的，在孩子眼里周围的人也是从小看惯的。这就形成了一个对每个人而言都充满了“熟悉”感的社会，没有陌生人的社会。</li>\n<li>社会学里分出两种性质的社会：礼俗社会和法理社会。礼俗社会是没有具体目的，只是因为在一起生长而发生的社会，是有机的团结；法理社会是为了要完成一件任务而结合的社会，是机械的团结。</li>\n<li>乡土社会中的规矩不是法律，规矩是“习”出来的礼俗。</li>\n<li>乡土社会是熟人社会，因此乡土社会的人与人之间也从熟悉得到信任，但这种信任不是出于契约精神的信用，乡土社会的信用不是对契约的重视，而是发生于对一种行为的规矩熟悉到不假思索时的可靠性。</li>\n<li>像是一株植物扎根于土地，在能在后续悠长的生存时间里，从容的摸清每个人都生活，甚至摸清“物”的生活，传统的二十四节气，以及各种农业谚语都是农人对于生存环境熟悉的经验总结。然而这些熟悉里面的认识都是个别的，不具有抽象的普遍原则，在熟悉环境中生长的人也不需要这些原则就能世代安稳的生存，因此，他们也会不去尝试追求更加抽象的笼罩万物的真理。</li>\n<li>但是熟悉个别的事物，总结成生存经验这种生存哲学在一个陌生人的社会是无法应用的。在我们社会的急速变迁中，从乡土社会进入现代社会的过程中，我们在乡土社会中所养成的生活方式处处产生了流弊。陌生人所组成的现代社会是无法用乡土社会的习俗来应对的。于是，“土气”成了贬义词，“乡”也不再是衣锦荣归的去处了。</li>\n</ol>\n","categories":["社会学"],"tags":["书摘","思考"]},{"title":"朴素贝叶斯应用之在手写数字识别的实践","url":"https://suool.net/2018/07/08/navie-bayes-handwriting-recognition/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><hr>\n<h2 id=\"引言\">引言</h2>\n<p>我们都见过或者用过的一个东西就是输入法的手写键盘，如下面的动图所示，那么输入法是如何识别出我们手写的字迹是什么字的呢？这是一个对人而言非常简单（前提是你写的字体不过于潦草），但是对于程序而言，可能就没有那么简单了，这次我就从一个更简单的角度来试一下，如何去识别手写的数字。 <sup id=\"fnref:1\"><a href=\"#fn:1\" rel=\"footnote\"><span class=\"hint--top-right hint--error hint--large\" data-aria-label=\"李航《统计学习方法》第四章\">[1]</span></a></sup> <a id=\"more\"></a> <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/08/handinput.gif\" alt=\"手写输入\"></p>\n<h2 id=\"朴素贝叶斯\">朴素贝叶斯</h2>\n<p>我们在前面的文章中提到了<a href=\"https://suool.net/2018/06/21/%E4%BF%A1%E6%81%AF%E8%AE%BA%E5%92%8C%E8%B4%9D%E5%8F%B6%E6%96%AF/\">贝叶斯定理</a>，公式表示如下 <span class=\"math display\">\\[P(y|x)= \\frac{P(x,y)}{p(x)} = \\frac {P(x|y)P(y)} {P(x)} = \\frac {P(x|y)P(y)} {\\sum_{y \\in Y} P(x|y)P(y)}\\]</span> 并从中得出了这样的结论: &gt; 贝叶斯定理可以精确的说明在已知新证据 <span class=\"math inline\">\\(x\\)</span> 的情况下，我们应该改变多少关于 <span class=\"math inline\">\\(y\\)</span> 的信念，这个等式中，<span class=\"math inline\">\\(P(y)\\)</span> 是新证据 <span class=\"math inline\">\\(x\\)</span> 出现之前我对于 <span class=\"math inline\">\\(y\\)</span> 的先验信念。 <span class=\"math inline\">\\(P(x|y)\\)</span> 是在 <span class=\"math inline\">\\(y\\)</span> 确定的前提下，得到证据 <span class=\"math inline\">\\(x\\)</span> 的可能性。 <span class=\"math inline\">\\(P(y|x)\\)</span> 是在考虑新证据后我对于 <span class=\"math inline\">\\(y\\)</span> 的后验信念。</p>\n<p>而朴素贝叶斯（Naive Bayes）法是基于贝叶斯定理与特征条件独立假设的分类方法。对于给定的训练数据集，首先基于特征条件独立假设学习输入/输出的联合概率分布，然后基于学习到模型，对于新的输入 <span class=\"math inline\">\\(x\\)</span> ，利用贝叶斯定理求出后验概率最大的输出 <span class=\"math inline\">\\(y\\)</span> ，朴素贝叶斯法实现简单，学习和预测的效率也非常高，是一种很常用的分类方法。</p>\n<h3 id=\"朴素贝叶斯法的学习与分类\">朴素贝叶斯法的学习与分类</h3>\n<p>朴素贝叶斯法如何用于分类工作呢？这里用更加数学的语言，可以表述如下： 首先设输入空间 $ R^n $ 为 n 维向量的集合，输出空间为类标记集合 <span class=\"math inline\">\\(\\mathcal{Y} = \\{c_1, c_2, \\cdots , c_k\\}\\)</span>，其中输入为特征向量 <span class=\"math inline\">\\(x \\in \\mathcal{X}\\)</span>，输出为类标记（class label） <span class=\"math inline\">\\(y \\in \\mathcal{Y}\\)</span> .则 $ P(X, Y) $ 是 <span class=\"math inline\">\\(X\\)</span> 和 <span class=\"math inline\">\\(Y\\)</span> 的联合概率分布.</p>\n<p>其次训练数据集表示为: <span class=\"math display\">\\[\nT = \\{(x_1, y_1), (x_2, y_2), \\cdots, (x_N, y_N) \\}\n\\]</span> 由 $P(X, Y) $ 独立同分布产生.</p>\n<p>最后由朴素贝叶斯法通过上述训练数据集学习到联合概率分布 $P(X, Y) $ ，由条件概率公式可以知道只需要学习到如下的先验概率分布: <span class=\"math display\">\\[\nP(Y = c_k), k=1,2,\\cdots, K\n\\]</span> 以及条件概率分布： <span class=\"math display\">\\[\nP(X = x \\mid Y = c_k) = P(X^{(1)} = x^{(1)}, \\cdots, X^{(n)} = x^{(n)} \\mid Y = c_k)\n\\]</span> 二者相乘即可得到联合概率分布。</p>\n<p>但是，事实上，从我们学到的条件概率分布的知识可以知道，$P(X = x Y = c_k) $ 是一个具有指数级数量的参数，一旦训练集稍微具有规模，那么这个概率分布都是无法估计的。而机器学习中，训练集的规模化显然是不可避免的。</p>\n<p>那么现在我们明显已经知道通过学习上述两个概率分布，可以得到我们想要的联合概率分布，从而得到训练模型，然而其中条件概率分布计算的不可行性却让我们止步不前。</p>\n<p>在这样一个尴尬的时候，朴素贝叶斯法站出来为我们解围了，它提出了一个非常强的假设，就是假设条件概率分布是特征条件独立的，因此朴素贝叶斯，也就朴素在这里:他的假设太强，强到改变了理论上计算的规则。</p>\n<p>具体的，条件独立性假设是： <span class=\"math display\">\\[\n\\begin{align}\nP(X = x \\mid Y = c_k) &amp; = P(X^{(1)} = x^{(1)}, \\cdots, X^{(n)} = x^{(n)} \\mid Y = c_k) \\\\\n&amp; = \\prod^{n}_{j=1}P(X^{(j)} = x^{(j)} \\mid Y=c_k) \\tag{1}\n\\end{align}\n\\]</span> 这个假设等于是说用于分类的特征在类别确定的条件下都是条件独立的，这一假设使得条件概率的计算变得异常简单，但是显然也牺牲了一定的准确率，因为一般情况下\b特征并不都是独立的而是有关联的。</p>\n<p>通过上述学习到模型，就可以计算后验概率分布 <span class=\"math inline\">\\(P(Y = c_k \\mid X = x)\\)</span>，将后验概率最大的类别作为要预测的样本 <span class=\"math inline\">\\(x\\)</span> 的输出。后验概率的计算依据贝叶斯定理进行： <span class=\"math display\">\\[\nP(Y = c_k \\mid X = x) = \\frac{P(X=x\\mid Y=c_k) P(Y=c_k)}{\\sum_k P(X=x\\mid Y=c_k) P(Y=c_k)} \\tag{2}\n\\]</span></p>\n<p>将 2 式代入 1 式，得到： <span class=\"math display\">\\[\nP(Y = c_k \\mid X = x) = \\frac{P(Y=c_k) \\prod_{j}P(X^{(j)} = x^{(j)} \\mid Y=c_k)}{\\sum_k P(Y=c_k) \\prod_{j}P(X^{(j)} = x^{(j)} \\mid Y=c_k)}\n\\]</span></p>\n<p>\b所以，贝叶斯分类器可以表示为： <span class=\"math display\">\\[\ny=f(x)= \\arg \\max_{c_k} \\frac{P(Y=c_k) \\prod_{j}P(X^{(j)} = x^{(j)} \\mid Y=c_k)}{\\sum_k P(Y=c_k) \\prod_{j}P(X^{(j)} = x^{(j)} \\mid Y=c_k)}\n\\]</span></p>\n<p>上式\b因为分母对所有 <span class=\"math inline\">\\(c_k\\)</span> 都是相同的，所以： <span class=\"math display\">\\[\ny = \\arg \\max_{c_k} P(Y=c_k) \\prod_{j}P(X^{(j)} = x^{(j)} \\mid Y=c_k)\n\\]</span></p>\n<p>这就是朴素贝叶斯分类器的最简形式，从这个式子可以看出来，朴素贝叶斯分类器本质上是根据先验概率及条件概率求最大化的后验概率，从而推断类别。</p>\n<h3 id=\"朴素贝叶斯法的参数估计\">朴素贝叶斯法的参数估计</h3>\n<h4 id=\"极大似然估计\"><strong>极大似然估计</strong></h4>\n<p>在上面所说的\b朴素贝叶斯法中，训练学习意味着估计先验概率 <span class=\"math inline\">\\(P(Y=c_k)\\)</span> 和\b条件概率 <span class=\"math inline\">\\(P(X^{(j)} = x^{(j)} \\mid Y=c_k)\\)</span>，这可以应用极大似然估计来估计相应的概率，其中先验概率的极大似然估计是：</p>\n<p><span class=\"math display\">\\[\nP(Y=c_k) = \\frac{\\sum^{N}_{i=1} I(y_i=c_k)}{N} ，k = 1,2,\\cdots,K\n\\]</span> 设第 j 个特征 <span class=\"math inline\">\\(x^{j}\\)</span> 可能的取值的集合为 <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/08/0EE6F321-E6D7-495F-BEDD-0CA48526F6EB.png\" alt=\"0EE6F321-E6D7-495F-BEDD-0CA48526F6EB\">，则条件概率的极大似然估计为：</p>\n<p><span class=\"math display\">\\[\nP(X^{(j)} = a_{jl} \\mid Y=c_k) = \\frac{\\sum^{N}_{i=1} I (x_i^{(j)} = a_{jl}, y_i = c_k)}{\\sum^{N}_{i=1}I (y_i=c_k)} \\tag{3}\n\\]</span></p>\n<figure>\n<img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/08/D5690E7F-DC11-4F6C-8842-77972CDFEBE8.png\" alt=\"D5690E7F-DC11-4F6C-8842-77972CDFEBE8\"><figcaption>D5690E7F-DC11-4F6C-8842-77972CDFEBE8</figcaption>\n</figure>\n<p>####<strong>贝叶斯估计</strong></p>\n<p>因为用极大似然估计可能会出现\b所要估计的概率值为 0 的情况，这就会导致后续的计算出现错误，\b使得分类出现偏差，解决这个问题的方法就是使用贝叶斯估计，即是平滑处理估计结果，条件概率的贝叶斯估计是： <span class=\"math display\">\\[\nP(X^{(j)} = a_{jl} \\mid Y=c_k) = \\frac{\\sum^{N}_{i=1} I (x_i^{(j)} = a_{jl}, y_i = c_k) + \\lambda}{\\sum^{N}_{i=1}I (y_i=c_k) + S_j\\lambda} \\tag{3}\n\\]</span></p>\n<p>其中 <span class=\"math inline\">\\(\\lambda \\geq 0\\)</span>，等价于给随机变量的各个取值的频数加上一个正数 <span class=\"math inline\">\\(\\lambda &gt; 0\\)</span> 常取 <span class=\"math inline\">\\(\\lambda = 1\\)</span>，称为<strong>拉普拉斯平滑</strong>。</p>\n<h2 id=\"实战朴素贝叶斯\">实战朴素贝叶斯</h2>\n<p>有了上面的基础，那么处理手写数字识别上面就变得很简单了，整个处理的步骤分为： - 图片预处理 - 图片数据化 - 模型训练 - 模型测试</p>\n<h3 id=\"图片预处理\">图片预处理</h3>\n<p>这里我们取现成的 mnist 数据集 <sup id=\"fnref:2\"><a href=\"#fn:2\" rel=\"footnote\"><span class=\"hint--top-right hint--error hint--large\" data-aria-label=\"[THE MNIST DATABASE](http://yann.lecun.com/exdb/mnist/)\">[2]</span></a></sup> ，首先数据集下载下来的\b是特殊格式的压缩包，其中训练集的图片包和标签包格式如下： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/08/traintype.png\" alt=\"\b压缩格式\"></p>\n<p>可以看出在 train-images.idx3-ubyte 中，第一个数为 32 位的整数（魔数，图片类型的数），第二个数为32位的整数（图片的个数），第三和第四个也是 32 位的整数（分别代表图片的行数和列数），接下来的都是一个字节的无符号数（即像素，值域为0~255），因此，我们只需要依次获取魔数和图片的个数，然后获取图片的长和宽，最后逐个按照图片大小的像素读取就可以得到一张张的图片内容了。标签数据集及测试数据集的的数据读取都是一样的原理。</p>\n<p>读取训练图片集并将图片存储成图片，读取标签集的代码实现代码如下： <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> PIL <span class=\"keyword\">import</span> Image</span><br><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_image</span><span class=\"params\">(filename)</span>:</span></span><br><span class=\"line\">    f = open(filename, <span class=\"string\">'rb'</span>)</span><br><span class=\"line\">    index = <span class=\"number\">0</span></span><br><span class=\"line\">    buf = f.read()</span><br><span class=\"line\">    f.close()</span><br><span class=\"line\">    // 开始读取 魔数、图片数目、图片行数、列数</span><br><span class=\"line\">    magic, images, rows, columns = struct.unpack_from(<span class=\"string\">'&gt;IIII'</span>, buf, index)</span><br><span class=\"line\">    index += struct.calcsize(<span class=\"string\">'&gt;IIII'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(images):</span><br><span class=\"line\">        <span class=\"comment\"># 逐个读取图片，每个图片字节数为 行数X列数</span></span><br><span class=\"line\">        image = Image.new(<span class=\"string\">'L'</span>, (columns, rows))</span><br><span class=\"line\">        <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> range(rows):</span><br><span class=\"line\">            <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> range(columns):</span><br><span class=\"line\">                <span class=\"comment\"># 读取并填充图片的像素值，每个像素值为一个字节</span></span><br><span class=\"line\">                image.putpixel((y, x), int(struct.unpack_from(<span class=\"string\">'&gt;B'</span>, buf, index)[<span class=\"number\">0</span>]))</span><br><span class=\"line\">                index += struct.calcsize(<span class=\"string\">'&gt;B'</span>)</span><br><span class=\"line\">        print(<span class=\"string\">'save '</span> + str(i) + <span class=\"string\">'image'</span>)</span><br><span class=\"line\">        image.save(<span class=\"string\">'train/'</span> + str(i) + <span class=\"string\">'.png'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_label</span><span class=\"params\">(filename, saveFilename)</span>:</span></span><br><span class=\"line\">    f = open(filename, <span class=\"string\">'rb'</span>)</span><br><span class=\"line\">    index = <span class=\"number\">0</span></span><br><span class=\"line\">    buf = f.read()</span><br><span class=\"line\">    f.close()</span><br><span class=\"line\">    <span class=\"comment\"># 开始读取 魔数及标签数目</span></span><br><span class=\"line\">    magic, labels = struct.unpack_from(<span class=\"string\">'&gt;II'</span>, buf, index)</span><br><span class=\"line\">    index += struct.calcsize(<span class=\"string\">'&gt;II'</span>)</span><br><span class=\"line\">    labelArr = [<span class=\"number\">0</span>] * labels</span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> range(labels):</span><br><span class=\"line\">        <span class=\"comment\"># 一个标签一个字节</span></span><br><span class=\"line\">        labelArr[x] = int(struct.unpack_from(<span class=\"string\">'&gt;B'</span>, buf, index)[<span class=\"number\">0</span>])</span><br><span class=\"line\">        index += struct.calcsize(<span class=\"string\">'&gt;B'</span>)</span><br><span class=\"line\">    save = open(saveFilename, <span class=\"string\">'w'</span>)</span><br><span class=\"line\">    save.write(<span class=\"string\">','</span>.join([str(x) <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> labelArr]))</span><br><span class=\"line\">    save.write(<span class=\"string\">'\\n'</span>)</span><br><span class=\"line\">    save.close()</span><br><span class=\"line\">    print(<span class=\"string\">'save labels success'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> labelArr</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    read_image(<span class=\"string\">'train-images.idx3-ubyte'</span>)</span><br><span class=\"line\">    read_label(<span class=\"string\">'train-labels.idx1-ubyte'</span>, <span class=\"string\">'train/label.txt'</span>)</span><br></pre></td></tr></table></figure></p>\n<p>读取到图片之后，存储的结果如下：</p>\n<figure>\n<img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/08/dataprocess-1.png\" alt=\"数据解压\"><figcaption>数据解压</figcaption>\n</figure>\n<p>###图片数据化 \b为了将图片变成更易为计算机接受的形式，这里需要将图片二值化，即是只包含0和1的图片表现形式，即是下面这样的矩阵，其方法是超过一定像素值的点标记为 1，否则为 0： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/08/FE2F3FF5-7847-4F83-9C62-400196BB55FF.png\" alt=\"FE2F3FF5-7847-4F83-9C62-400196BB55FF\"></p>\n<p>可以隐约看出一个 5 的形状。</p>\n<p>这里为了方便继续处理图片特征，将这个 28 *28 的矩阵进行 reshape 操作，将一幅图展开为行向量。因此整个训练集（）60000张图片）就变成了一个大小为 60000×784 的矩阵，之后尽量进行矩阵操作。</p>\n<p>同时为了方便标记，将每行向量表示的数字写在最后一列，因此整个矩阵的大小为 60000×785。</p>\n<p>并为了后续数据操作的方便，将这个矩阵存在本地的CSV文件中，代码及结果如下： <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">N = <span class=\"number\">28</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_train_set</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    f = open(<span class=\"string\">'data.csv'</span>, <span class=\"string\">'wb'</span>)</span><br><span class=\"line\">    category = MR.read_label(<span class=\"string\">'train-labels.idx1-ubyte'</span>, <span class=\"string\">'train/label.txt'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    file_names = os.listdir(<span class=\"string\">r\"./train/\"</span>, )</span><br><span class=\"line\">    train_picture = np.zeros([len(file_names)<span class=\"number\">-1</span>, N ** <span class=\"number\">2</span> + <span class=\"number\">1</span>])</span><br><span class=\"line\">    <span class=\"comment\"># 遍历文件，转为向量存储</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> file <span class=\"keyword\">in</span> range(len(file_names)<span class=\"number\">-1</span>):</span><br><span class=\"line\">        img_num = io.imread(<span class=\"string\">'./train/%d.png'</span> % (file))</span><br><span class=\"line\">        rows, cols = img_num.shape</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(rows):</span><br><span class=\"line\">            <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(cols):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> img_num[i, j] &lt; <span class=\"number\">100</span>:</span><br><span class=\"line\">                    img_num[i, j] = <span class=\"number\">0</span></span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    img_num[i, j] = <span class=\"number\">1</span></span><br><span class=\"line\">        train_picture[file, <span class=\"number\">0</span>:N ** <span class=\"number\">2</span>] = img_num.reshape(N ** <span class=\"number\">2</span>)</span><br><span class=\"line\">        train_picture[file, N ** <span class=\"number\">2</span>] = category[file]</span><br><span class=\"line\">        print(<span class=\"string\">\"完成处理第%d张图片\"</span> % (file+<span class=\"number\">1</span>))</span><br><span class=\"line\">    np.savetxt(f,train_picture,fmt=<span class=\"string\">'%d'</span>,delimiter=<span class=\"string\">','</span>, newline=<span class=\"string\">'\\n'</span>, header=<span class=\"string\">''</span>, footer=<span class=\"string\">''</span>)</span><br><span class=\"line\">    f.close()</span><br><span class=\"line\">    time_e = time.time()</span><br><span class=\"line\">    print(<span class=\"string\">'process data train cost '</span>, time_e - time_0, <span class=\"string\">' seconds'</span>, <span class=\"string\">'\\n'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> train_picture</span><br></pre></td></tr></table></figure></p>\n<p>结果为，红色框内即是该行向量的标签： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/08/EAFE6D9C-EC29-4806-80D2-055FCE2CFFB5.png\" alt=\"EAFE6D9C-EC29-4806-80D2-055FCE2CFFB5\"></p>\n<p>处理测试数据也是一样的原理。</p>\n<h3 id=\"模型训练\">模型训练</h3>\n<p>从第一部分我们可以了解到，要求后验概率的本质是求在类别为 j 的条件下，样本 x 的第 i 个特征出现的条件概率的，将所有特征的概率与该类别的先验概率作连乘即得到后验概率。</p>\n<p>因此，重点是计算类别的先验概率和在类别为 j 的条件下，样本 x 的第 i 个特征出现的条件概率，这也就是我们要训练的模型，代码如下： <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">Train</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    conditional_probability = np.zeros((class_num, feature_len, <span class=\"number\">2</span>))   <span class=\"comment\"># 条件概率</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 计算先验概率及条件概率</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(len(labels)):</span><br><span class=\"line\">        img = data_map[i, :]</span><br><span class=\"line\">        label = labels[i]</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(feature_len):</span><br><span class=\"line\">            conditional_probability[label][j][img[j]] += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 将概率归到[1.1001]</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(class_num):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(feature_len):</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\"># 经过二值化后图像只有0，1两种取值</span></span><br><span class=\"line\">            pix_0 = conditional_probability[i][j][<span class=\"number\">0</span>]</span><br><span class=\"line\">            pix_1 = conditional_probability[i][j][<span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\"># 计算0，1像素点对应的条件概率</span></span><br><span class=\"line\">            probalility_0 = (float(pix_0)/float(pix_0+pix_1))*<span class=\"number\">1000</span> + <span class=\"number\">1</span></span><br><span class=\"line\">            probalility_1 = (float(pix_1)/float(pix_0+pix_1))*<span class=\"number\">1000</span> + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">            conditional_probability[i][j][<span class=\"number\">0</span>] = probalility_0</span><br><span class=\"line\">            conditional_probability[i][j][<span class=\"number\">1</span>] = probalility_1</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> conditional_probability</span><br></pre></td></tr></table></figure></p>\n<p>其中部分说明如下： - 由于 Python 浮点数精度的原因，784个浮点数联乘后结果变为 Inf，而 Python 中 int 可以无限相乘的，因此可以利用python int 数据类型的特性对先验概率与条件概率进行一些改造。</p>\n<ul>\n<li>先验概率： 由于先验概率分母都是 N，因此不用除于 N，直接用分子即可。</li>\n<li>条件概率： 条件概率公式如上说明济代码所示，我们得到概率后再乘以1000000 （最小的可能性为1/784，同时需要尽量保存概率精度，这里保存到白万分之一，因此乘以1000000），将概率映射到[0,1000000]中，但是为防止出现概率值为0的情况，人为的加上1，使概率映射到[1,1000001]中。<sup id=\"fnref:3\"><a href=\"#fn:3\" rel=\"footnote\"><span class=\"hint--top-right hint--error hint--large\" data-aria-label=\"李航《统计学习方on实现朴素贝叶斯分类器（MNIST数据集）](https://blog.csdn.net/wds2006sdo/article/details/51967839)\">[3]</span></a></sup></li>\n</ul>\n<h3 id=\"模型预测\">模型预测</h3>\n<p>模型预测的方法就是根据上面训练出来的朴素贝叶斯模型，对任一个新的样本 x ，分别计算它是类别 j 的条件下的后验概率，取最大后验概率的类别即可。</p>\n<p>代码如下： <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 计算概率</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calculate_probability</span><span class=\"params\">(img, label)</span>:</span></span><br><span class=\"line\">    probability = int(prior_probability[label])</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(len(img)):</span><br><span class=\"line\">        probability *= int(conditional_probability[label][i][img[i]])</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> probability</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">Predict</span><span class=\"params\">(testset, test_labels)</span>:</span></span><br><span class=\"line\">    predict = []</span><br><span class=\"line\">    accuracy = []</span><br><span class=\"line\">    right = <span class=\"number\">0</span></span><br><span class=\"line\">    rows, cols = testset.shape</span><br><span class=\"line\">    <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> range(rows):</span><br><span class=\"line\">        <span class=\"comment\"># 图像二值化</span></span><br><span class=\"line\">        img = testset[row, :]</span><br><span class=\"line\"></span><br><span class=\"line\">        max_label = <span class=\"number\">0</span></span><br><span class=\"line\">        max_probability = calculate_probability(img, <span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, <span class=\"number\">10</span>):</span><br><span class=\"line\">            probability = calculate_probability(img, j)</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> max_probability &lt; probability:</span><br><span class=\"line\">                max_label = j</span><br><span class=\"line\">                max_probability = probability</span><br><span class=\"line\">        predict.append(max_label)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> max_label == test_labels[row]:</span><br><span class=\"line\">            right += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (row+<span class=\"number\">1</span>) % <span class=\"number\">500</span> == <span class=\"number\">0</span>:</span><br><span class=\"line\">            accuracy.append(float(right)/(row+<span class=\"number\">1</span>))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> float(right)/len(test_labels), np.array(predict), accuracy</span><br></pre></td></tr></table></figure></p>\n<p>整个代码运行的结果如下： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/08/15310514214661.jpg\" alt=\"-w455\"> 准确率曲线如下： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/08/8EAA5A09-8E40-45F3-85EC-D20F83C5C844.png\" alt=\"8EAA5A09-8E40-45F3-85EC-D20F83C5\"></p>\n<h3 id=\"其他说明\">其他说明</h3>\n<ul>\n<li>本次实验将图像展开、对单个像素独立判断，损失了图像的空间信息，而这种空间信息正是我们人眼识别图像的关键。所以最终的准确率受此影响。</li>\n<li>测试数据的准确率为84.47%，还是非常不错的（共有10个分类，理论上随机猜测的准确率只有10%）。能使准确率达到84.15%的原因主要是：(1) MNIST数据集被预先处理过。通过上面的示例图片可以看出，MNIST中的图片较为纯净，没有噪声干扰，非常清晰。所以实验中可以直接进行二值化。(2) MNIST数据集中，图片中的数字总是在中心位置，大小合适，比较饱满。这一点保留了部分的空间信息。</li>\n<li>本例中的二值化过程是直接将超过一定像素阀值值置1，如果采用更合理的阈值(比如取当前图片最大像素阀值为 100 )进行二值化操作，进行训练、测试过程，最终的准确率可能会提升。 <sup id=\"fnref:4\"><a href=\"#fn:4\" rel=\"footnote\"><span class=\"hint--top-right hint--error hint--large\" data-aria-label=\"[用朴素贝叶斯法对MNIST数据集分类](http://geyao1995.com/%E7%94%A8%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E6%B3%95%E5%AF%B9MNIST%E6%95%B0%E6%8D%AE%E9%9B%86%E5%88%86%E7%B1%BB/)\">[4]</span></a></sup></li>\n</ul>\n<p>以上就是这次朴素贝叶斯法的理论及实战啦。</p>\n<p>下次是 K 近邻算法在手写识别上的应用。</p>\n<h2 id=\"reference\">Reference</h2>\n<div id=\"footnotes\">\n<hr>\n<div id=\"footnotelist\">\n<ol style=\"list-style: none; padding-left: 0; margin-left: 40px\">\n<li id=\"fn:1\">\n<span style=\"display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px\">1.</span><span style=\"display: inline-block; vertical-align: top; margin-left: 10px;\">李航《统计学习方法》第四章<a href=\"#fnref:1\" rev=\"footnote\"> ↩</a></span>\n</li>\n<li id=\"fn:2\">\n<span style=\"display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px\">2.</span><span style=\"display: inline-block; vertical-align: top; margin-left: 10px;\"><a href=\"http://yann.lecun.com/exdb/mnist/\" target=\"_blank\" rel=\"noopener\">THE MNIST DATABASE</a><a href=\"#fnref:2\" rev=\"footnote\"> ↩</a></span>\n</li>\n<li id=\"fn:3\">\n<span style=\"display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px\">3.</span><span style=\"display: inline-block; vertical-align: top; margin-left: 10px;\">李航《统计学习方on实现朴素贝叶斯分类器（MNIST数据集）](https://blog.csdn.net/wds2006sdo/article/details/51967839)<a href=\"#fnref:3\" rev=\"footnote\"> ↩</a></span>\n</li>\n<li id=\"fn:4\">\n<span style=\"display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px\">4.</span><span style=\"display: inline-block; vertical-align: top; margin-left: 10px;\"><a href=\"http://geyao1995.com/%E7%94%A8%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E6%B3%95%E5%AF%B9MNIST%E6%95%B0%E6%8D%AE%E9%9B%86%E5%88%86%E7%B1%BB/\" target=\"_blank\" rel=\"noopener\">用朴素贝叶斯法对MNIST数据集分类</a><a href=\"#fnref:4\" rev=\"footnote\"> ↩</a></span>\n</li>\n</ol>\n</div>\n</div>\n","categories":["机器学习"],"tags":["机器学习"]},{"title":"最小二乘法矩阵表示及非线性响应","url":"https://suool.net/2018/06/26/Least-Squares-with-Matrix-Nolinear/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"引言\">引言</h2>\n<p>早上上班的路上读《社会心理学》里面有一段话，觉得不错，摘在这里。</p>\n<blockquote>\n<p><strong>我们人类总是有一种不可抑制的冲动，想要解释行为，对其归因，以使其变得次序井然．具有可预见性，使一切尽在掌握之中。</strong>你我对于类似的情境却可能表现出截然不同的反应，这是因为我们的想法不同。我们对朋友的责难做何反应，取决于我们对其所做的解释，取决于我们是把它归咎于朋友的敌意行为，还是归结于他糟糕的心情。 从某种角度来说，我们都是天生的科学家。我们解释着他人的行为，通常足够快也足够准确，以适应我们日常生活的需要。当他人的行为具有一致性而且与众不同时，我们会把其行为归因于他们的人格。例如。如果你发现一个人说话总是对人冷嘲热讽．你可能就会推断此人秉性不良，然后便设法尽量避免与他的接触。</p>\n</blockquote>\n<p>当然这是指更大范围内的人类心理，在对数据和模型的痴迷上，人类的欲望显然也是强烈的，人类总是想尽一切的办法打破现有的桎梏，在创造了更多的不确定性之后，期望通过对数据的把控和预测以看到更确切的未来。 <a id=\"more\"></a> 这次我们来从矩阵和向量的角度来解释最小二乘法及非线性的模拟建模。</p>\n<h2 id=\"ls-的矩阵推导\">LS 的矩阵推导</h2>\n<p>继续使用上一次的方程式并将其改写成矩阵的形式如下：</p>\n<p><span class=\"math display\">\\[f(x_n;w_0,w_1) = w_0 + w_1x = w^Tx \\tag{2.1} \\]</span></p>\n<p>代入最小二乘损失函数，得到结果为：</p>\n<p><span class=\"math display\">\\[\n\\begin{align}\n\\mathcal{L} &amp;= \\frac{1}{N} \\sum_{n=1}^{N} \\mathcal{L}_n(t_n,f(x_n;w_0,w_1 )) \\\\\n&amp;= \\frac{1}{N} \\sum_{n=1}^{N} (t_n-w^tx_n)^2 \\tag{2.2} \\\\\n&amp; = \\frac{1}{N} \\sum_{n=1}^{N} (t-Xw)^T(t-Xw) \\tag{2.3}\n\\end{align}\n\\]</span></p>\n<p>式 2.2 到式 2.3 的证明忽略。</p>\n<p>其中 <span class=\"math inline\">\\(X\\)</span> 、<span class=\"math inline\">\\(W\\)</span> 和 <span class=\"math inline\">\\(T\\)</span> 为：</p>\n<p><span class=\"math display\">\\[\n X = \\begin{bmatrix} x_1^T  \\\\ x_2^T  \\\\ x_3^T   \\\\ \\vdots \\\\  x_n^T  \\\\ \\end{bmatrix} =  \\begin{bmatrix} 1 &amp; x_1  \\\\ 1 &amp;  x_2 \\\\ 1 &amp; x_3  \\\\ \\vdots &amp; \\vdots\\\\ 1 &amp; x_n  \\\\ \\end{bmatrix} \\\\\n w = \\begin{bmatrix} w_0^T  \\\\ w_1^T \\end{bmatrix} \\quad \\\\\n t = \\begin{bmatrix} t_1^T  \\\\ t_2^T  \\\\ t_3^T   \\\\ \\vdots \\\\  t_n^T  \\\\ \\end{bmatrix}\n\\]</span></p>\n<p>对上述 2.3 展开，得到下面的表达式：</p>\n<p><span class=\"math display\">\\[\n\\begin{align}\n\\mathcal{L} &amp;= \\frac{1}{N} w^TX^TXw - \\frac {2} {N}w^TX^Tt + \\frac {1}{N} t^Tt \\\\\n&amp; = \\frac{1}{N} (w^TX^TXw - 2 w^TX^Tt + t^Tt)\n\\end{align}\\]</span></p>\n<p>为了得到最小值，需要得到 <span class=\"math inline\">\\(\\mathcal{L}\\)</span>的拐点（极小值）一致的向量<span class=\"math inline\">\\(w\\)</span>的值，这里一样是求 <span class=\"math inline\">\\(\\mathcal{L}\\)</span> 关于 <span class=\"math inline\">\\(w\\)</span> 的偏导数，并令其为 0，可以代入上述的矩阵进行求解，也可以使用一些恒等式来直接化简:</p>\n<p><span class=\"math display\">\\[\n% inner array of minimum values 内层&quot;最小值&quot;数组\n\\begin{array}{c|c}\n\\hline\nf(w) &amp; \n\\frac {\\partial f} {\\partial w} \\\\\n\\hline\nw^Tx &amp; x \\\\\nx^t=Tw &amp; x \\\\\nw^Tw &amp; 2w \\\\\nw^TCw &amp; 2Cw \\\\\n\\hline\n\\end{array}\n\\]</span></p>\n<p>得到的表达式如下：</p>\n<p><span class=\"math display\">\\[\n\\frac {\\partial \\mathcal{L}} {\\partial w} = \\frac {2} {N} X^TXw - \\frac {2} {N}X^Tt = 0 \n\\]</span></p>\n<p><span class=\"math display\">\\[\nX^Xw = X^Tt \\tag{2.4}\n\\]</span></p>\n<p>从而得到使损失最小的<span class=\"math inline\">\\(w\\)</span>值，<span class=\"math inline\">\\(\\hat w\\)</span> 的矩阵公式为：</p>\n<p><span class=\"math display\">\\[\n\\hat w = (X^TX)^{-1}X^Tt \\tag{2.5}\n\\]</span></p>\n<p>根据此公式解出的值与上次用标量形式解出的是一样的。</p>\n<h2 id=\"线性模型的非线性响应\">线性模型的非线性响应</h2>\n<p>前面我们所假设的是拟合函数是一次函数，但是可以明显的看出拟合效果并不好，所以需要往更高次的多项式延伸，假如是二次的话，那么可以表示为：</p>\n<p><span class=\"math display\">\\[\nf(x;w) = w^Tx = w_0+w_1x+w_2x^2\n\\]</span></p>\n<p>更一般的，扩展 <span class=\"math inline\">\\(x\\)</span> 的幂次到任意任意阶的多项式函数，对于一个 K 阶多项式，可以扩展数据矩阵为：</p>\n<p><span class=\"math display\">\\[\nt = \\begin{bmatrix} \nx_1^0 &amp; x_1^1 &amp; x_1^2 &amp; \\cdots &amp; x_1^k \\\\ \nx_2^0 &amp; x_2^1 &amp; x_2^2 &amp; \\cdots &amp; x_2^k\\\\ \n\\vdots &amp; \\vdots &amp; \\vdots &amp; \\ddots &amp; \\vdots \\\\\nx_n^0 &amp; x_n^1 &amp; x_n^2 &amp; \\cdots &amp; x_n^k \\\\\n\\end{bmatrix}\n\\]</span></p>\n<p>函数表达为更一般的形式：</p>\n<p><span class=\"math display\">\\[\nf(x;w)= \\sum^K_{k=0} w_kx^k\n\\]</span></p>\n<p>其解一样适用于式 <span class=\"math inline\">\\(2.5\\)</span></p>\n<p>可以求得其八阶线性拟合结果如下：</p>\n<figure>\n<img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/03/FE170A95-A609-4B5D-AE3C-4090B7B63FA2.png\" alt=\"FE170A95-A609-4B5D-AE3C-4090B7B63FA2\"><figcaption>FE170A95-A609-4B5D-AE3C-4090B7B63FA2</figcaption>\n</figure>\n<p>代码如下:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"></span><br><span class=\"line\">x_cord = []</span><br><span class=\"line\">y_cord = []</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">drawScatterDiagram</span><span class=\"params\">(fileName)</span>:</span></span><br><span class=\"line\">    fr=open(fileName)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> line <span class=\"keyword\">in</span> fr.readlines():</span><br><span class=\"line\">        lineArr=line.split(<span class=\"string\">','</span>)</span><br><span class=\"line\">        x_cord.append(float(lineArr[<span class=\"number\">0</span>]))</span><br><span class=\"line\">        y_cord.append(float(lineArr[<span class=\"number\">1</span>]))</span><br><span class=\"line\">    <span class=\"comment\"># plt.scatter(x_cord,y_cord,s=30,c='red',marker='o', alpha=0.7,label='比赛成绩 ')</span></span><br><span class=\"line\">    <span class=\"comment\"># plt.xlabel(\"year\")</span></span><br><span class=\"line\">    <span class=\"comment\"># plt.ylabel(\"time\")</span></span><br><span class=\"line\">    <span class=\"comment\"># plt.title(\"result of game\")</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">noLinearMoreTimesCalculate</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    x_mat = np.ones((len(x_cord),<span class=\"number\">1</span>))</span><br><span class=\"line\">    y_mat = np.mat(y_cord).T</span><br><span class=\"line\">    test = np.array(x_cord)</span><br><span class=\"line\">    test = (test - <span class=\"number\">1896</span>)/<span class=\"number\">4.0</span>  // 数据预处理，缩小化</span><br><span class=\"line\">    <span class=\"comment\"># x_mat = np.mat(np.c_[x_zeros,test])</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> index <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>,<span class=\"number\">9</span>):</span><br><span class=\"line\">        x_temp = test**index</span><br><span class=\"line\">        x_mat = np.mat(np.c_[x_mat, x_temp])</span><br><span class=\"line\">    print(x_mat)</span><br><span class=\"line\">    w_mat = ((x_mat.T * x_mat).I*x_mat.T*y_mat)[::<span class=\"number\">-1</span>]</span><br><span class=\"line\">    w_mat = w_mat.T</span><br><span class=\"line\">    c = np.squeeze([i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> w_mat])</span><br><span class=\"line\">    print(c)</span><br><span class=\"line\">    func = np.poly1d(c)</span><br><span class=\"line\">    x_mLo = np.linspace(<span class=\"number\">0</span>, <span class=\"number\">29</span>, <span class=\"number\">112</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    y_mLo = func(x_mLo)</span><br><span class=\"line\"></span><br><span class=\"line\">    plt.scatter(test,y_cord,s=<span class=\"number\">30</span>,c=<span class=\"string\">'red'</span>,marker=<span class=\"string\">'o'</span>, alpha=<span class=\"number\">0.7</span>,label=<span class=\"string\">'比赛成绩 '</span>)</span><br><span class=\"line\">    plt.xlabel(<span class=\"string\">\"year\"</span>)</span><br><span class=\"line\">    plt.ylabel(<span class=\"string\">\"time\"</span>)</span><br><span class=\"line\">    plt.title(<span class=\"string\">\"result of game\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    plt.plot(x_mLo,y_mLo, c=<span class=\"string\">\"yellow\"</span>,label=<span class=\"string\">'线性拟合-8阶'</span>)</span><br><span class=\"line\">    plt.legend(loc=<span class=\"string\">'upper right'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    drawScatterDiagram(<span class=\"string\">\"olympic100m.txt\"</span>)</span><br><span class=\"line\">    <span class=\"comment\"># linearCalculate()</span></span><br><span class=\"line\">    <span class=\"comment\"># noLinearCalculate()</span></span><br><span class=\"line\">    noLinearMoreTimesCalculate()</span><br><span class=\"line\">    plt.show()</span><br></pre></td></tr></table></figure>\n<h2 id=\"过拟合与验证\">过拟合与验证</h2>\n<p>从上次的一阶线性拟合到现在的八阶拟合，从直观上看，八阶的拟合效果比一阶的明显好很多，但是我们做拟合的根本目的是为了做预测，不是纯粹为了拟合而拟合，因为理论上说，一般对于 n 个点，可以拟合 n-1 次多项式以便完全通过这些点。但是这样子的拟合结果对于预测而言可能是极其差的。</p>\n<p>那么如何衡量呢? 和拟合是一样的思想，看模型在泛化问题时候的表现，即是在预测验证数据上的表现，如果其损失很小，那么可以认为这个模型的预测能力不错。</p>\n<h3 id=\"验证数据\">验证数据</h3>\n<p>克服过拟合问题的一般方法是使用第二个数据集，即是验证集。用其来验证模型的预测性能，验证集可以是单独提供的，也可以从原始训练集中拿出来的。</p>\n<p>从验证集计算的损失对于验证集数据的选择敏感，如果验证集非常小，那就更加困难了，而交叉验证是一个有效使用现有数据集的方法。</p>\n<p>一般是 K 折交叉验证，当 K = N 的时候，及 K 恰好是等于数据集中的可观测数据的数量，每个观测数据依次拿出用作测试其他 N-1 个对象训练得到的模型，其又叫 留一交叉验证 （Leave-One-Out Cross Validation, LOOCV）,对于 LOOCV 的均方验证为：</p>\n<p><span class=\"math display\">\\[\n\\mathcal{L}^{CV} = \\frac {1}{N} \\sum^N_{n=1}(t_n-\\hat{w}^T_{-n}x_n)^2\n\\]</span></p>\n<p>其中 <span class=\"math inline\">\\(\\hat{w}_{-n}\\)</span> 是除去第 n 个训练样例的参数估计值。</p>\n<h3 id=\"应用实例及代码实现\">应用实例及代码实现</h3>\n<p>首先定义一个带噪声的函数，并用其生成 100 个随机数据点作为训练数据，生成 1000 个随机数据点作为测试数据，生成数据点的 <span class=\"math inline\">\\(x\\)</span> 范围是 [-5,5], 表达式如下，其中噪声<span class=\"math inline\">\\(\\mathcal {N}\\)</span> 符合正态分布 <span class=\"math display\">\\[\ny = 5 \\times x^3 - x^2 + x + 100 \\times \\mathcal N \\\\\n\\mathcal N(x \\mid \\mu,\\sigma^2) = \\frac {1}{\\sigma \\sqrt {2 \\pi}} \\exp \\{- \\frac {1}{2\\sigma^2}(x-\\mu)^2\\}\n\\]</span></p>\n<p>使用如上的矩阵式，对数据进行不同阶数的拟合，得到的结果如下:</p>\n<figure>\n<img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/03/51A2EEB0-A96E-44EC-BFC9-10C5C196DC89.png\" alt=\"51A2EEB0-A96E-44EC-BFC9-10C5C196D\"><figcaption>51A2EEB0-A96E-44EC-BFC9-10C5C196D</figcaption>\n</figure>\n<p>然后，分别对比训练损失、测试损失及使用 LOOCV 方法拟合及其损失随着阶数增高而变化的曲线如下图所示:</p>\n<figure>\n<img src=\"https://suool-bolg.b0.upaiyun.com/2018/07/03/274FF482-8C88-4A58-B39D-3231ADBBFAF4.png\" alt=\"274FF482-8C88-4A58-B39D-3231ADBBFAF4\"><figcaption>274FF482-8C88-4A58-B39D-3231ADBBFAF4</figcaption>\n</figure>\n<p>可以从图中看出，在 3 阶的时候，测试损失和 LOOCV 损失达到最小，且 3 阶拟合之后训练损失不明显，但是测试损失明显增高，即产生了过拟合的现象。</p>\n<p>实现代码如下:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"></span><br><span class=\"line\">x = np.random.randint(<span class=\"number\">-5000</span>,<span class=\"number\">5000</span>, size=[<span class=\"number\">100</span>,<span class=\"number\">1</span>]) / <span class=\"number\">1000.0</span></span><br><span class=\"line\"></span><br><span class=\"line\">t = <span class=\"number\">5</span>*(x**<span class=\"number\">3</span>)  - x**<span class=\"number\">2</span> + x + <span class=\"number\">100</span>*np.random.randn(<span class=\"number\">100</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">testx = np.linspace(<span class=\"number\">-5</span>,<span class=\"number\">5</span>,<span class=\"number\">1001</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">testt = <span class=\"number\">5</span>*(testx**<span class=\"number\">3</span>) - testx**<span class=\"number\">2</span> + testx + <span class=\"number\">100</span>*np.random.randn(<span class=\"number\">1001</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">plt.figure()</span><br><span class=\"line\">plt.subplot(<span class=\"number\">2</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>)</span><br><span class=\"line\">plt.scatter(x, t, s=<span class=\"number\">35</span>, c=<span class=\"string\">\"red\"</span>, marker=<span class=\"string\">'o'</span>, alpha=<span class=\"number\">0.9</span>)</span><br><span class=\"line\">plt.xlabel(<span class=\"string\">\"x\"</span>)</span><br><span class=\"line\">plt.ylabel(<span class=\"string\">\"y\"</span>)</span><br><span class=\"line\">plt.title(<span class=\"string\">\"points of train\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">x_mat = np.ones((len(x),<span class=\"number\">1</span>))</span><br><span class=\"line\">y_mat = np.mat(t)</span><br><span class=\"line\"></span><br><span class=\"line\">color = [<span class=\"string\">\"\"</span>,<span class=\"string\">\"\"</span>,<span class=\"string\">\"\"</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">degrees = np.arange(<span class=\"number\">2</span>, <span class=\"number\">10</span>)</span><br><span class=\"line\">trainLoss = []</span><br><span class=\"line\">predictLoss = []</span><br><span class=\"line\">LOOCVLoss = []</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">trainAndGetLoss</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> degree <span class=\"keyword\">in</span> degrees:</span><br><span class=\"line\">        <span class=\"keyword\">global</span> x_mat</span><br><span class=\"line\">        <span class=\"keyword\">global</span> y_mat</span><br><span class=\"line\">        tempX = x_mat</span><br><span class=\"line\">        tempY = y_mat</span><br><span class=\"line\">        <span class=\"keyword\">for</span> index <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, degree):</span><br><span class=\"line\">            x_temp = x ** index</span><br><span class=\"line\">            tempX = np.mat(np.c_[tempX, x_temp])</span><br><span class=\"line\">        <span class=\"comment\"># print(tempX)</span></span><br><span class=\"line\">        print(<span class=\"string\">\"计算\"</span>)</span><br><span class=\"line\">        print(type(tempX.T*tempX))</span><br><span class=\"line\">        w_mat = ((tempX.T * tempX).I * tempX.T * tempY)[::<span class=\"number\">-1</span>]</span><br><span class=\"line\">        w_mat = w_mat.T</span><br><span class=\"line\">        c = np.squeeze([i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> w_mat])</span><br><span class=\"line\">        print(c)</span><br><span class=\"line\">        func = np.poly1d(c)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> degree ==<span class=\"number\">2</span> <span class=\"keyword\">or</span> degree == <span class=\"number\">3</span> <span class=\"keyword\">or</span> degree == <span class=\"number\">5</span> :</span><br><span class=\"line\">            x_mLo = np.linspace(<span class=\"number\">-5</span>, <span class=\"number\">5</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">            y_mLo = func(x_mLo)</span><br><span class=\"line\">            plt.subplot(<span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">            plt.plot(x_mLo, y_mLo, linewidth=<span class=\"number\">2</span>, c=np.random.rand(<span class=\"number\">3</span>,), label=<span class=\"string\">'线性拟合-%d阶'</span> % (degree - <span class=\"number\">1</span>))</span><br><span class=\"line\">            plt.legend(loc=<span class=\"string\">'upper left'</span>)</span><br><span class=\"line\">        <span class=\"comment\">#  训练数据损失</span></span><br><span class=\"line\">        y_train = func(x)</span><br><span class=\"line\">        print(np.mean((y_train-t)**<span class=\"number\">2</span>), type(y_train), len(y_train))</span><br><span class=\"line\">        trainLoss.append(np.mean((y_train-t)**<span class=\"number\">2</span>))</span><br><span class=\"line\">        <span class=\"comment\"># 预测数据损失</span></span><br><span class=\"line\">        y_predict = func(testx)</span><br><span class=\"line\">        print(np.mean((y_predict-testt)**<span class=\"number\">2</span>), type(y_predict), len(y_predict))</span><br><span class=\"line\">        predictLoss.append(np.mean((y_predict-testt)**<span class=\"number\">2</span>))</span><br><span class=\"line\">    plt.subplot(<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>)</span><br><span class=\"line\">    new_ticks = np.linspace(<span class=\"number\">1</span>, <span class=\"number\">8</span>, <span class=\"number\">8</span>)</span><br><span class=\"line\">    plt.xticks(new_ticks)</span><br><span class=\"line\">    plt.plot(new_ticks, trainLoss, <span class=\"string\">'o-'</span>, color=<span class=\"string\">'g'</span>)</span><br><span class=\"line\">    plt.xlabel(<span class=\"string\">\"x\"</span>)</span><br><span class=\"line\">    plt.ylabel(<span class=\"string\">\"y\"</span>)</span><br><span class=\"line\">    plt.title(<span class=\"string\">\"训练数据损失\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    plt.subplot(<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>)</span><br><span class=\"line\">    plt.xticks(new_ticks)</span><br><span class=\"line\">    plt.plot(new_ticks, predictLoss, <span class=\"string\">'o-'</span>, color=<span class=\"string\">'g'</span>)</span><br><span class=\"line\">    plt.xlabel(<span class=\"string\">\"x\"</span>)</span><br><span class=\"line\">    plt.ylabel(<span class=\"string\">\"y\"</span>)</span><br><span class=\"line\">    plt.title(<span class=\"string\">\"预测数据损失\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">trainLOOCVAndGetLoss</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> degree <span class=\"keyword\">in</span> degrees:</span><br><span class=\"line\">        trainLoocv = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> index <span class=\"keyword\">in</span> range(<span class=\"number\">0</span>, <span class=\"number\">100</span>):</span><br><span class=\"line\">            <span class=\"comment\"># 准备训练数据</span></span><br><span class=\"line\">            index_x = (index)</span><br><span class=\"line\">            new_x = np.delete(x, index_x)</span><br><span class=\"line\">            new_y = np.delete(t, index_x)</span><br><span class=\"line\">            tempX = np.ones([<span class=\"number\">99</span>, <span class=\"number\">1</span>])</span><br><span class=\"line\">            tempY = np.mat(new_y).T</span><br><span class=\"line\">            <span class=\"keyword\">for</span> index <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, degree):</span><br><span class=\"line\">                x_temp = new_x ** index</span><br><span class=\"line\">                tempX = np.mat(np.c_[tempX, x_temp])</span><br><span class=\"line\">            w_mat = ((tempX.T * tempX).I * tempX.T * tempY)[::<span class=\"number\">-1</span>]</span><br><span class=\"line\">            w_mat = w_mat.T</span><br><span class=\"line\">            c = np.squeeze([i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> w_mat])</span><br><span class=\"line\">            func = np.poly1d(c)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> index_x == <span class=\"number\">0</span>:</span><br><span class=\"line\">                print((func(x[index,<span class=\"number\">0</span>])-t[index,<span class=\"number\">0</span>])**<span class=\"number\">2</span>)</span><br><span class=\"line\">            trainLoocv.append((func(x[index,<span class=\"number\">0</span>])-t[index,<span class=\"number\">0</span>])**<span class=\"number\">2</span>)</span><br><span class=\"line\">        LOOCVLoss.append(np.mean(trainLoocv))</span><br><span class=\"line\">        plt.subplot(<span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">6</span>)</span><br><span class=\"line\">        new_ticks = np.linspace(<span class=\"number\">1</span>, <span class=\"number\">8</span>, <span class=\"number\">8</span>)</span><br><span class=\"line\">        plt.xticks(new_ticks)</span><br><span class=\"line\">        plt.plot(new_ticks, predictLoss, <span class=\"string\">'o-'</span>, color=<span class=\"string\">'g'</span>)</span><br><span class=\"line\">        plt.xlabel(<span class=\"string\">\"x\"</span>)</span><br><span class=\"line\">        plt.ylabel(<span class=\"string\">\"y\"</span>)</span><br><span class=\"line\">        plt.title(<span class=\"string\">\"LOOCV损失\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    trainAndGetLoss()</span><br><span class=\"line\">    trainLOOCVAndGetLoss()</span><br><span class=\"line\">    plt.show()</span><br></pre></td></tr></table></figure>\n<p>## Next</p>\n<p>下一次是真正入门啦，将之前说过的贝叶斯定理应用于机器学习，和你分享如何使用朴素的贝叶斯方法来进行简单的分类工作，比如识别手写数字，新闻素材的主题分类。（具体是挖那个主题的坑，还不知道</p>\n","categories":["机器学习"],"tags":["机器学习"]},{"title":"最小二乘法的朴素实现","url":"https://suool.net/2018/06/24/Least-Squares/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"引言\">引言</h2>\n<p>最小二乘法（Least Squares Method, 简记为LS）的维基解释。</p>\n<blockquote>\n<p>最小二乘法（又称最小平方法）是一种数学优化技术。它通过最小化误差的平方和寻找数据的最佳函数匹配。利用最小二乘法可以简便地求得未知的数据，并使得这些求得的数据与实际数据之间误差的平方和为最小。 <sup id=\"fnref:1\"><a href=\"#fn:1\" rel=\"footnote\"><span class=\"hint--top-right hint--error hint--large\" data-aria-label=\"维基百科[最小二乘法](https://zh.wikipedia.org/wiki/%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98%E6%B3%95)\">[1]</span></a></sup></p>\n</blockquote>\n<p>如果大学的时候学过高等数学，或许你对这个名词就不会陌生，这是下册第九章第十节\u001d的内容。 <a id=\"more\"></a> 其表示法为</p>\n<p><span class=\"math display\">\\[\n\\min\\sum_in(y_m^{(i)}-y^{(i)})^2 \n\\]</span></p>\n<p>其中 <span class=\"math inline\">\\(y_m\\)</span> 表示我们拟合函数得到的拟合结果，<span class=\"math inline\">\\(y_i\\)</span> 表示真实值。</p>\n<p>    “最小二乘法”是最优化问题中建立经验公式的一种实现方法。了解它的原理，对于了解后面“Logistic回归”和“支持向量机的学习”都很有裨益。</p>\n<p>这次就是最小二乘法的朴素实现，即是不借助矩阵、向量等，纯粹借助数学标量推导完成。</p>\n<h2 id=\"起源背景\">起源背景</h2>\n<p>最小二乘法是在十九世纪的产生的，源于天文学和测地学上的应用需要。</p>\n<p>其中高斯使用的最小二乘法的方法发表于1809年他的著作《天体运动论》中，而法国科学家勒让德于1806年独立发现“最小二乘法”，但因不为时人所知而默默无闻。两人曾为谁最早创立最小二乘法原理发生争执。<sup id=\"fnref:1\"><a href=\"#fn:1\" rel=\"footnote\"><span class=\"hint--top-right hint--error hint--large\" data-aria-label=\"维基百科[最小二乘法](https://zh.wikipedia.org/wiki/%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98%E6%B3%95)\">[1]</span></a></sup></p>\n<p>1829年，高斯提供了最小二乘法的优化效果强于其他方法的证明，即高斯-马尔可夫定理。</p>\n<h2 id=\"使用及实现\">使用及实现</h2>\n<h3 id=\"问题引入\">问题引入</h3>\n<p>“最小二乘法”的核心就是保证所有数据偏差的平方和最小。</p>\n<p>首先有这样一组看起来比较杂乱的数据，这组数据是 1896 到 2008 年间部分年份的男子百米赛跑最佳成绩，其散点图效果如下： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/06/26/F8FC66C1-84BB-450C-BE96-8477C1C0C45F.png\" alt=\"散点图\"></p>\n<p>如何于混沌中找出规律，在杂乱中确定关系，往往是我们最关心的事情，那么对于上面这样一组数据，我们就尝试对它进行建模拟合。</p>\n<p>最简单的拟合是线性建模的拟合，即假设存在最佳的线性关系 $y=f(x;w_0,w_1)=w_0+w_1x $ 可以拟合这组数据。</p>\n<h3 id=\"什么是最好\">什么是最好？</h3>\n<p>这里首先要解决的一个问题就是什么是“最佳”？或者如何衡量“最佳”？这里最佳显然是存在由一组<span class=\"math inline\">\\(w_0,w_1\\)</span>确定的直线，这条直线尽可能的与所有的数据点接近，那么衡量远近即距离的最佳方法显然使用平方差，则这里可以使用下面这样一个平方差函数表示( <span class=\"math inline\">\\(x_n\\)</span> 是年份，<span class=\"math inline\">\\(t_n\\)</span> 是比赛成绩)： <span class=\"math display\">\\[\n\\mathcal{L}_n =(t_n-f(x_n;w_0,w_1))^2 \n\\]</span></p>\n<p>这个表达式的值越小，则表示误差越小。</p>\n<p>这里用下面的公式表示 N 年的平均损失，最小二乘损失函数 <span class=\"math display\">\\[\n\\mathcal{L}= \\frac{1}{N} \\sum_{n=1}^{N} \\mathcal{L}_n(t_n,f(x_n;w_0,w_1 )) \n\\]</span></p>\n<p>这个值显然越小越好，而其最小的关键是寻找到最合适的<span class=\"math inline\">\\(w_0, w_1\\)</span>，这个数学表达式为</p>\n<p><span class=\"math display\">\\[\n\\mathop{\\arg\\;\\min}\\limits_{w_0, w_1} \\frac{1}{N} \\sum_{n=1}^{N} \\mathcal{L}_n(t_n,f(x_n;w_0,w_1 ))\n\\]</span></p>\n<p>此时将函数关系表示为 <span class=\"math display\">\\[\nf(x_n;w_0,w_1) = w_0 + w_1x\n\\]</span></p>\n<p>代入最小二乘损失函数，得到结果为：</p>\n<p><span class=\"math display\">\\[\n\\begin{align}\n\\mathcal{L} &amp;= \\frac{1}{N} \\sum_{n=1}^{N} \\mathcal{L}_n(t_n,f(x_n;w_0,w_1 )) \\\\\n&amp; = \\frac{1}{N} \\sum_{n=1}^{N}(w_1^2x_n^2 + 2w_1x_n(w_0-t_n)+w_0^2-2w_0t_n+t^2)\n\\end{align}\n\\]</span></p>\n<p>在上述函数 <span class=\"math inline\">\\(\\mathcal {L}\\)</span> 的最小值点处，其关于 <span class=\"math inline\">\\(w_0\\)</span> 和 <span class=\"math inline\">\\(w_1\\)</span> 的偏导数一定是 0。因此，对上函数式求偏导，使其等于 0 并对 <span class=\"math inline\">\\(w_0\\)</span> 和 <span class=\"math inline\">\\(w_1\\)</span> 求解，可以得到最小值。</p>\n<h3 id=\"化简结果\">化简结果</h3>\n<p>关于 <span class=\"math inline\">\\(w_0\\)</span> 和 <span class=\"math inline\">\\(w_1\\)</span> 的表示式分别为 <span class=\"math display\">\\[\n\\left\\{ \n\\begin{array}{c}\n\\hat{w_0} = \\overline {t} - w_1\\overline {x} \\\\ \n\\hat{w_1} = \\frac {\\overline {xt} - \\overline{x} \\overline{t}} {\\overline{x^2}-(\\overline{x})^2} \n\\end{array}\n\\right. \n\\]</span></p>\n<p>###代码实现 有了上述的表达式，直接使用代码计算得出的结果如下： <img src=\"https://suool-bolg.b0.upaiyun.com/2018/06/26/5C466B2C-2AF5-4469-A8F5-5325E8C7D2B5.png\" alt=\"线性建模结果\"></p>\n<p>代码实现如下：</p>\n<figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># -*- coding: utf-<span class=\"number\">8</span> -*</span><br><span class=\"line\">import matplotlib.pyplot as plt</span><br><span class=\"line\">import numpy as <span class=\"built_in\">np</span></span><br><span class=\"line\"></span><br><span class=\"line\">x_cord = []</span><br><span class=\"line\">y_cord = []</span><br><span class=\"line\">def drawScatterDiagram(fileName):</span><br><span class=\"line\">    fr=open(fileName)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> line <span class=\"keyword\">in</span> fr.readlines():</span><br><span class=\"line\">        lineArr=line.<span class=\"built_in\">split</span>(',')</span><br><span class=\"line\">        x_cord.<span class=\"built_in\">append</span>(<span class=\"built_in\">float</span>(lineArr[<span class=\"number\">0</span>]))</span><br><span class=\"line\">        y_cord.<span class=\"built_in\">append</span>(<span class=\"built_in\">float</span>(lineArr[<span class=\"number\">1</span>]))</span><br><span class=\"line\">    plt.scatter(x_cord,y_cord,s=<span class=\"number\">30</span>,c='red',marker='o', alpha=<span class=\"number\">0.7</span>)</span><br><span class=\"line\">    plt.<span class=\"built_in\">xlabel</span>(<span class=\"string\">\"year\"</span>)</span><br><span class=\"line\">    plt.<span class=\"built_in\">ylabel</span>(<span class=\"string\">\"time\"</span>)</span><br><span class=\"line\">    plt.<span class=\"built_in\">title</span>(<span class=\"string\">\"result of game\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">def linearCalculate():</span><br><span class=\"line\">    x = <span class=\"built_in\">np</span>.<span class=\"built_in\">array</span>(x_cord)</span><br><span class=\"line\">    y = <span class=\"built_in\">np</span>.<span class=\"built_in\">array</span>(y_cord)</span><br><span class=\"line\">    x_mean = <span class=\"built_in\">np</span>.<span class=\"built_in\">mean</span>(x_cord)</span><br><span class=\"line\">    y_mean = <span class=\"built_in\">np</span>.<span class=\"built_in\">mean</span>(y_cord)</span><br><span class=\"line\">    xy_mean = <span class=\"built_in\">np</span>.<span class=\"built_in\">mean</span>(x*y)</span><br><span class=\"line\">    x_square_mean = <span class=\"built_in\">np</span>.<span class=\"built_in\">mean</span>(x**<span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    w1 = (xy_mean-x_mean*y_mean)/(x_square_mean-x_mean**<span class=\"number\">2</span>)</span><br><span class=\"line\">    w0 = y_mean - w1*x_mean</span><br><span class=\"line\">    xasix = <span class=\"built_in\">np</span>.linspace(<span class=\"number\">1896</span>, <span class=\"number\">2008</span>, <span class=\"number\">112</span>)</span><br><span class=\"line\">    yasix = w1 * xasix + w0</span><br><span class=\"line\">    plt.plot(xasix,yasix, <span class=\"built_in\">label</span>='<span class=\"built_in\">linear</span> line')</span><br><span class=\"line\">    plt.<span class=\"built_in\">legend</span>(loc='upper right')</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == '__main__':</span><br><span class=\"line\">    drawScatterDiagram(<span class=\"string\">\"olympic100m.txt\"</span>)</span><br><span class=\"line\">    linearCalculate()</span><br><span class=\"line\">    plt.<span class=\"built_in\">show</span>()</span><br></pre></td></tr></table></figure>\n<h2 id=\"reference\">Reference</h2>\n<div id=\"footnotes\">\n<hr>\n<div id=\"footnotelist\">\n<ol style=\"list-style: none; padding-left: 0; margin-left: 40px\">\n<li id=\"fn:1\">\n<span style=\"display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px\">1.</span><span style=\"display: inline-block; vertical-align: top; margin-left: 10px;\">维基百科<a href=\"https://zh.wikipedia.org/wiki/%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98%E6%B3%95\" target=\"_blank\" rel=\"noopener\">最小二乘法</a><a href=\"#fnref:1\" rev=\"footnote\"> ↩</a></span>\n</li>\n</ol>\n</div>\n</div>\n","categories":["机器学习"],"tags":["机器学习"]},{"title":"信息论、贝叶斯及机器学习","url":"https://suool.net/2018/06/21/信息论和贝叶斯/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"引言\">引言</h2>\n<p>1956年，让机器来做聪明的事情的科学被称为“人工智能”。直到1997年，人类才创造出来\b能下象棋的电脑并打败了世界冠军。通过这样的一个例子及数字计算机的发展历史表明，感知其实是一个很难解决的问题。但是，我们的脑却能够很简单的解决这个问题，这是否意味着，数字计算机不是人脑的一个好隐喻？或者，我们需要为计算机的运行找新的运算方式？</p>\n<a id=\"more\"></a>\n<p>同时信息论的发展使得我们看到物理事件和电脉冲是如何转化为精神事件和讯息的。但是，在最初表达中存在一个根本的问题。一条信息中的信息量，或者更通俗的说，任何刺激中的信息量完全由那个刺激源来决定，这种界定信息的方法看上去很完美，实际上会产生自相矛盾的结果。</p>\n<p>比如在图像的处理中，图片是由像素点组成的，以此形成不同的颜色。比如看这样一张图片，它是一张简单的以白色为背景的黑色正方形的图片，这张图片中的哪些要素含有最多的信息？当我们的眼睛扫过一个颜色不变的区域的时候，\b因为没有任何的改变，就不会产生任何的惊奇感。而当我们眼睛扫到边缘的时候，颜色突然变化，我们就会感到“惊奇”。因此，根据信息论，图片的边缘所含的信息量是最大的，这和我们的直觉也确实是相符的，假如我们用轮廓来代替这个\b物体，换句话说，只留下有信息的边缘，我们仍然能够认出这个物体。</p>\n<figure>\n<img src=\"https://suool-bolg.b0.upaiyun.com/2018/06/21/06E79D3A-1211-4697-A3AF-B712D13C4EAE-1.png\" alt=\"轮廓信息\"><figcaption>轮廓信息</figcaption>\n</figure>\n<p>但是，这种表述实际上是自相矛盾的，按照这种界定，当我们用眼睛扫一幅图片的时候，我们预测不到接下来会发生什么，这样子的图片所含的信息量最多，完全由随机的点构成。比如电视机出现故障的时候出现的“雪花”屏幕，如果说这样子的图片含有最丰富的信息，恐怕你是不会同意的。 <img src=\"https://suool-bolg.b0.upaiyun.com/2018/06/21/BAD85663-52A5-47A4-BCAB-3FF1D50B4FA6-1.png\" alt=\"雪花\"></p>\n<p>出现这种矛盾的问题在于，信息论没有考虑到观看者本身，更根本的说，是没有考虑到观看者的先验知识和预期期望，这些不同会明显的影响我们对事物的感知。</p>\n<p>比如刚刚提到的黑色正方形，对于一些观看者来说，这就是一个黑色正方形，但是这个黑色正方形是俄罗斯绘画至上主义者的幻想、非具象艺术的首例，它是 Kazimir Malevich 于1913年展示的。这个例子里，知道“这是一件重要的艺术品”的先验知识，可以改变你对这个黑色正方形的感知，虽然它的信息量并无改变。 <img src=\"https://suool-bolg.b0.upaiyun.com/2018/06/21/A905B126-2523-491D-9574-1313E36D0557.png\" alt=\"Kazimir Malevich\"></p>\n<h2 id=\"thomas-bayes-牧师\">Thomas Bayes 牧师</h2>\n<p>那么如何修正信息论使它能够考虑到观察者的不同经历和期望呢？我们可以说一条讯息携带的信息量可以达到改变接受者对世界信念的程度。要知道讯息承载了多少信息量给接收者，我们就得在讯息到达之前了解接收者的信念，然后才能知道接受者在收到讯息之后的信念改变了多少。但是，能否测量出接受者前先前的信念和信念的变化呢？</p>\n<p>这个问题的答案就是每个学习过概率论和数理统计的人都知道的贝叶斯定理。</p>\n<p>提出贝叶斯定理的 Thomas Bayes 牧师不是一个墨守成规的人，他的一生（1702-1761）没有发表过一篇论文，但是他在1742年却成为了英国皇家学会的会员。直到去世后两年，他的经典论文才被发表，而后的一百多年来，他的经典论文依然为人遗忘而无人问津。直到20世纪20年代，他才声名鹊起。对于当时的英国皇家协会主席和统计学界的人看来，Bayes 是一个的的确确的伟人，而在统计学界之外，他毫无名气，而且那些了解贝叶斯统计的人也常常认为它缺少适当的客观性。</p>\n<p>然而，20世纪末至今，Thomas Bayes 成为了一个超级巨星。如今当你学习概率论或者想要入门人工智能，一个绕不过去的坎就是贝叶斯定理以及由此引发出的各种理论。</p>\n<p>贝叶斯定理火起来之后，也导致了统计学的贝叶斯学派和频率学派的不休的争论。理解这二者的区别，对于理解贝叶斯定理也有一定的帮助，这里就简单的说一下。</p>\n<h3 id=\"频率学派\">频率学派</h3>\n<p>频率学派认为，我们要观察的现象，其分布是确定的，是一直不变的，而我们所需要做的就是不断的做试验来接近它。因此对于频率学派来说，可以通过大量的独立重复实验，观察事件出现的频率来估计它出现的概率。针对模型<span class=\"math inline\">\\(P(x;θ)\\)</span>来说，频率学派认为模型的参数是存在且固定的，我们要做的就是求出让<span class=\"math inline\">\\(P(x;θ)\\)</span>值最大的参数<span class=\"math inline\">\\(θ\\)</span>（我们认为这样的参数更接近于客观存在的那个真实的参数），也就是通过不断的调整参数来使得通过该模型在该参数下我们所观察到的现象出现的概率最大。</p>\n<p>可以看出频率学派是针对似然来进行建模的，他更关心的的是似然<span class=\"math inline\">\\(P(x|θ)\\)</span>，也就是在怎样的参数<span class=\"math inline\">\\(θ\\)</span>下能使得我们所观察到的现象出现的概率最大。因此针对这样的关注重点，通常使用极大似然法来求解模型参数。 基于这种思想的方法，其缺点很明显，就是很容易过拟合，因为它的目标是尽最大努力来重现当前观察到的数据，这就是这种方法最大的问题所在。因此如何解决过拟合问题是基于频率思想方法必然要考虑的。通常我们会使用以下两种方法来缓解过拟合问题：（当然不限于此类问题的解决，很多其他的算法都可以用这些方法来解决 Over Fitting 的问题）</p>\n<ul>\n<li>使用 <span class=\"math inline\">\\(L1 \\;或\\; L2\\)</span> 正则化，即在目标函数中加入正则项（罚项）；</li>\n<li>使用交叉验证方法</li>\n</ul>\n<h3 id=\"贝叶斯学派\">贝叶斯学派</h3>\n<p>对于贝叶斯学派，它不再相信上帝的存在，即不再相信任何的事件发生的背后都拥有一个固定不变的分布，而更倾向于认为世界上所有的事情都是不确定的，而这种不确定性更多是由于观察者自身所储备的先验知识所带来的。因此对于贝叶斯学派，其通常会基于观察到的事件来假设一个先验分布<span class=\"math inline\">\\(P(y)\\)</span>，然后利用贝叶斯公式：</p>\n<p><span class=\"math display\">\\[P(y|x)= \\frac{P(x,y)}{p(x)} = \\frac {P(x|y)P(y)} {P(x)} = \\frac {P(x|y)P(y)} {\\sum_{y \\in Y} P(x|y)P(y)}\\]</span></p>\n<p>来求得后验分布。而后验分布我们又可以认为是在得到新的知识<span class=\"math inline\">\\(x\\)</span>后对先验分布的一个修正。因此对于贝叶斯学派，其认为对于事物的观察是一个不断学习不断修正的过程。</p>\n<p>这里站在脑科学的层面对上面的贝叶斯公式做一个解释，假定现象 <span class=\"math inline\">\\(y\\)</span> 是我们要了解的，观察资料 <span class=\"math inline\">\\(x\\)</span> 是关于 <span class=\"math inline\">\\(y\\)</span> 的证据，贝叶斯定理告诉我们，鉴于新证据 <span class=\"math inline\">\\(x\\)</span> ，我们应该更新多少关于 <span class=\"math inline\">\\(y\\)</span> 的知识。我们可以先不必担心这个等式的细节。重要的是，这个等式恰好是我们一直在寻找的关于信念的数学等式。在这里，表达信念的数学术语是概率。概率提供了我们对某事的信任尺度。当我们对于某件事是完全确定的时候（比如太阳从东方升起），概率就是 1，可以表示为 <span class=\"math inline\">\\(p(日出东方)=1\\)</span>。如果确定某件事不会发生，那么概率就是 0。但是，我们大部分的时候信念是不坚定的，处于 0 和 1 之间，比如 <span class=\"math inline\">\\(p(今天上班可能要迟到)=0.5\\)</span>，我得到了新的证据，那么这个处于中间的信念的概率就会不断地修正调整，比如上班之前，看了天气预报，等下要下大暴雨，那么这个信念可能就会发生显著地变化，当然有时候可能并不会发生什么变化。</p>\n<p>贝叶斯定理可以精确的说明在已知新证据 <span class=\"math inline\">\\(x\\)</span> 的情况下，我们应该改变多少关于 <span class=\"math inline\">\\(y\\)</span> 的信念，这个等式中，<span class=\"math inline\">\\(P(y)\\)</span> 是新证据 <span class=\"math inline\">\\(x\\)</span> 出现之前我对于 <span class=\"math inline\">\\(y\\)</span> 的先验信念。 <span class=\"math inline\">\\(P(x|y)\\)</span> 是在 <span class=\"math inline\">\\(y\\)</span> 确定的前提下，得到证据 <span class=\"math inline\">\\(x\\)</span> 的可能性。 <span class=\"math inline\">\\(P(y|x)\\)</span> 是在考虑新证据后我对于 <span class=\"math inline\">\\(y\\)</span> 的后验信念。</p>\n<h2 id=\"结语\">结语</h2>\n<p>而事实上，我们可以认为我们对世界的感知是一种与现实相符的幻觉。</p>\n<p>首先我们对于现实世界的感知的一切都来自于脑的反馈，而大脑是如何做出一个判断的呢？比如在你看到这篇文章的每个字，每个标点，每句话的时候，我们的大脑是如何做出判断的呢？</p>\n<p>显然，脑的判断来自于各个感官（眼睛、耳朵等）的感觉，综合各个感官所提供的证据 <span class=\"math inline\">\\(p(x|y)\\)</span>，我们的大脑会做出一个基于我们已有的先验知识的判断。</p>\n<p>当大脑的判断出现错误或者误差的时候，我们的大脑也会利用这些新的误差（新的证据）来更新我们对于世界的信念，并产生一个更好的信念 <span class=\"math inline\">\\(p(y|x)\\)</span>，一旦这种更新发生，我们的脑就对世界产生了一个新的信念，并通过感官察觉的活动模式进行新的预测。大脑每重复一次这样的过程，每循环一次，预测的误差就会减少一些，当误差变得足够小的时候，大脑就可以“知道”外在世界的东西到底是何物了，这在某程度上来说，这正是我们学习的过程。（而此时是否是真的知道呢？是否可以如这一节开头所说“我们对世界的感知是一种与现实相符的幻觉”？）。</p>\n<p>这样一个认知的过程，除了在学习新的信念（比如学习新语言或者技能）的时候，我们能深刻的体会到，大部分时候我们是几乎体验不到的，因为，处理平常判断的时候，大脑的运算速度非常之快，快到我们自以为判断客观世界的物体到底是何物是一件轻而易举的事情，但是我们的大脑却永远的陷入这种永无止境的贝叶斯预测和更新循环当中。</p>\n<p>所以，先验知识是非常重要的学习依据，当我们面对一个毫无先验知识的物体的时候，恐怕真的会像《West World》中的 host 那样脱口而出一句话：“It doesn’t look like anything to me”。</p>\n<p>而这种思维在机器学习领域的应用也非常广泛且效果显著。</p>\n<p>下一次，我将将贝叶斯定理应用于机器学习，和你分享如何使用朴素的贝叶斯方法来进行简单的分类工作，比如识别手写数字，新闻素材的主题分类。</p>\n<blockquote>\n<p>本文的大部分内容摘自<a href=\"https://book.douban.com/subject/10864488/\" target=\"_blank\" rel=\"noopener\">《心智的构建——脑如何创造我们的精神世界》</a><sup id=\"fnref:1\"><a href=\"#fn:1\" rel=\"footnote\"><span class=\"hint--top-right hint--error hint--large\" data-aria-label=\"Chris Frith . 心智的构建［M]. 华东师范大学出版社，2012-7.\">[1]</span></a></sup>一书，这是一本很久前读的书，最近学习机器学习的时候，觉得贝叶斯这一块有种似曾相识的熟悉（先验知识的“作祟”），仔细一想便想到这本书中谈到过，因此，重新翻出，形成本文，对于脑科学和认知科学感兴趣的同学推荐阅读一下，是一本不可多得的好书。</p>\n</blockquote>\n<p>##文献引用</p>\n<div id=\"footnotes\">\n<hr>\n<div id=\"footnotelist\">\n<ol style=\"list-style: none; padding-left: 0; margin-left: 40px\">\n<li id=\"fn:1\">\n<span style=\"display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px\">1.</span><span style=\"display: inline-block; vertical-align: top; margin-left: 10px;\">Chris Frith . 心智的构建［M]. 华东师范大学出版社，2012-7.<a href=\"#fnref:1\" rev=\"footnote\"> ↩</a></span>\n</li>\n</ol>\n</div>\n</div>\n","categories":["机器学习"],"tags":["机器学习"]},{"title":"矩阵论之线性空间和内积空间","url":"https://suool.net/2018/06/18/矩阵论之线性空间和内积空间/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"预备知识集合-映射-数域\">预备知识:集合, 映射, 数域</h2>\n<h3 id=\"集合\">集合</h3>\n<ul>\n<li>定义\n<ul>\n<li>集合: 由具有某种性质所确定的事物的总体. <a id=\"more\"></a></li>\n</ul></li>\n<li>表示法\n<ul>\n<li>列举法</li>\n<li>概括法</li>\n</ul></li>\n<li>其他概念\n<ul>\n<li>子集</li>\n<li>包含关系</li>\n<li>集合相等</li>\n<li>有限集</li>\n<li>无限集</li>\n<li>空集</li>\n</ul></li>\n<li>集合运算\n<ul>\n<li>并集 <span class=\"math display\">\\[\n  A \\cup B = \\{x\\mid x \\in A  \\text { 或 } x\\in B\\} \\tag{1}\n  \\]</span></li>\n<li>交集 <span class=\"math display\">\\[\n  A \\cap B = \\{ x \\mid x \\in A \\text { 且 } x \\in B \\} \\tag{2}\n  \\]</span></li>\n<li>二元关系\n<ul>\n<li>集合的 Descartes 积</li>\n<li><span class=\"math inline\">\\(A \\times B\\)</span> 的子集 R 是<span class=\"math inline\">\\(A \\times B\\)</span>中的一个二元关系</li>\n<li>等价关系</li>\n<li>等价类</li>\n<li>商集</li>\n<li>分类</li>\n</ul></li>\n</ul></li>\n</ul>\n<h3 id=\"映射\">映射</h3>\n<p>映射是函数概念的推广, 描述了两个集合的元素之间的关系</p>\n<ul>\n<li>基本概念\n<ul>\n<li>映射</li>\n<li>像</li>\n<li>原像</li>\n<li>定义域</li>\n<li>值域</li>\n<li>符号 <span class=\"math display\">\\[ f : A \\to B \\tag{3}\\]</span></li>\n<li>恒等映射/单位映射</li>\n<li>单映射</li>\n<li>满映射</li>\n<li>双映射</li>\n<li>映射相等</li>\n<li>映射的乘积\n<ul>\n<li>设 <span class=\"math inline\">\\(A, B, C\\)</span> 是三个非空集合,并设有两个映射 <span class=\"math inline\">\\(f_1: A \\to B\\)</span> , <span class=\"math inline\">\\(f_2: B \\to C\\)</span> , 由$f_1  f_2 $ 确定的 <span class=\"math inline\">\\(A\\)</span> 到 <span class=\"math inline\">\\(C\\)</span> 的映射 <span class=\"math inline\">\\(f_3: a \\to f_2(f_1(a)), a \\in A\\)</span> 成为映射$f_1  f_2 $ 的乘积, 记为 <span class=\"math inline\">\\(f_3 = f_2 \\cdot f_1\\)</span></li>\n<li>映射的乘积不具有交换律, 具有结合律</li>\n</ul></li>\n<li>逆映射 <span class=\"math inline\">\\(f^{-1}\\)</span>\n<ul>\n<li>可逆映射的逆映射唯一</li>\n<li>可逆映射的充要条件是一一映射</li>\n</ul></li>\n</ul>\n### 数域和代数运算\n<ul>\n<li>定义\n<ul>\n<li>设 <span class=\"math inline\">\\({\\displaystyle {\\mathcal {P}}}\\)</span> 是复数域 ${ } $ 的子集。若 <span class=\"math inline\">\\({\\displaystyle {\\mathcal {P}}}\\)</span> 中包含0与1，并且 <span class=\"math inline\">\\({\\displaystyle {\\mathcal {P}}}\\)</span> 中任两个数的和、差、乘积以及商（约定除数不为0）都仍在 <span class=\"math inline\">\\({\\displaystyle {\\mathcal {P}}}\\)</span> 中，就称 <span class=\"math inline\">\\({\\displaystyle {\\mathcal {P}}}\\)</span> 为一个数域</li>\n</ul></li>\n<li>代数运算</li>\n<li>二元运算</li>\n</ul></li>\n</ul>\n<h2 id=\"矩阵运算\">矩阵运算</h2>\n<h2 id=\"线性方程组\">线性方程组</h2>\n<h2 id=\"向量组的极大线性无关组和秩\">向量组的极大线性无关组和秩</h2>\n<h2 id=\"矩阵的秩及等价标准形\">矩阵的秩及等价标准形</h2>\n","categories":["数学"],"tags":["线性代数","矩阵论"]},{"title":"机器学习中的数学基础--线性代数","url":"https://suool.net/2018/06/18/机器学习中的数学基础-线性代数/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><blockquote>\n<p>换了个新的博客主题,开启新的学习主题.</p>\n</blockquote>\n<h1 id=\"线性代数\">线性代数</h1>\n<h2 id=\"标量向量矩阵和张量\">标量、向量、矩阵和张量</h2>\n<ul>\n<li><p>标量(scalar): 一个标量就是一个单独的数，它不同于线性代数中研 究的其他大部分对象(通常是多个数的数组)。 <a id=\"more\"></a></p></li>\n<li>向量(vector): 一个向量是一列数。这些数是有序排列的。通过次序中的索引，我们可以确定每个单独的数。</li>\n<li>矩阵(matrix): 矩阵是一个二维数组，其中的每一个元素被两个索引(而非一个)所确定。</li>\n<li><p>张量(tensor): 在某些情况下，我们会讨论坐标超过两维的数组。一般地，一个数组中的元素分布在若干维坐标的规则网格中，我们称之为张量。</p></li>\n</ul>\n<p><strong>转置(transpose)</strong>是矩阵的重要操作之一。矩阵的转置是以对角线为轴的镜像， 这条从左上角到右下角的对角线被称为 主对角线(main diagonal)。我们将矩阵 A 的转置表示为 <span class=\"math inline\">\\(A^T\\)</span>，定义如下</p>\n<p><span class=\"math display\">\\[(A^T)_{i,j} = A_{j,i} \\tag{1}\\]</span></p>\n<p>向量可以看作只有一列的矩阵。对应地，向量的转置可以看作是只有一行的矩阵。标量可以看作是只有一个元素的矩阵。</p>\n<p>只要矩阵的形状一样，我们可以把两个矩阵相加。两个矩阵相加是指对应位置的元素相加。</p>\n<p>标量和矩阵相乘，或是和矩阵相加时，我们只需将其与矩阵的每个元素相乘或相加。</p>\n<h2 id=\"矩阵和向量相乘\">矩阵和向量相乘</h2>\n<p>两个矩阵 <span class=\"math inline\">\\(\\bf A\\)</span> 和 $ _{i,j}$ 的步骤看作是 <span class=\"math inline\">\\(A\\)</span> 的第 <span class=\"math inline\">\\(i\\)</span> 行和 <span class=\"math inline\">\\(B\\)</span> 的第 <span class=\"math inline\">\\(j\\)</span> 列之间的点积。</p>\n<p>两个向量点积的结果是标量</p>\n<h2 id=\"单位矩阵和逆矩阵\">单位矩阵和逆矩阵</h2>\n<p>单位矩阵 (identity matrix) 矩阵逆 (matrix inversion)</p>\n<p>任意向量和单位矩阵相乘，都不会改变。</p>\n<p>单位矩阵的结构很简单:所有沿主对角线的元素都是 1，而所有其他位置的元素都是 0。如下所示。</p>\n<p><span class=\"math display\">\\[\n\\begin{bmatrix} \n1 &amp; 0 &amp; 0 \\\\ \n0 &amp; 1 &amp; 0 \\\\\n0 &amp; 0 &amp; 1 \\\\  \n\\end{bmatrix} \n\\tag{3}\n\\]</span></p>\n<p>矩阵 <span class=\"math inline\">\\(A\\)</span> 的矩阵逆(matrix inversion)记作 <span class=\"math inline\">\\(A^{−1}\\)</span>，其定义的矩阵满足如下条件 <span class=\"math display\">\\[A^{−1}A = I_n.\\tag{4}\\]</span></p>\n<p>一组向量的线性组合，是指每个向量乘以对应标量系数之后的和，即: <span class=\"math display\">\\[\n\\sum_{i} {c_iv^i}.\\tag{5}\n\\]</span></p>\n<p>一组向量的<strong>生成子空间(span)</strong>是原始向量线性组合后所能抵达的点的集合</p>\n<p>如果一组向量中的任意一个向量都不能表示成其他向量的线性组合，那么这组向量称为<strong>线性无关 (linearly independent</strong>)。</p>\n<p>一个列向量线性相关的方阵被称为<strong>奇异的(singular)</strong></p>\n<h2 id=\"范数\">范数</h2>\n<p>在机器学习中，我们经常使用被称为<strong>范数 (norm)</strong>的函数衡量向量大小。形式上，<span class=\"math inline\">\\(L^p\\)</span> 范数定义如下</p>\n<p><span class=\"math display\">\\[\n||x||_p=\n\\left(\n\\sum_{i}{|x_i|^p}\n\\right)^{\\frac{1}{p}}\n\\tag{6}\n\\]</span></p>\n<p>其中 $p R , p 1 $.</p>\n<p>范数(包括 <span class=\"math inline\">\\(L^p\\)</span> 范数)是将向量映射到非负值的函数。直观上来说，向量 <span class=\"math inline\">\\(x\\)</span> 的范数衡量从原点到点 <span class=\"math inline\">\\(x\\)</span> 的距离。</p>\n<p>当 <span class=\"math inline\">\\(p = 2\\)</span> 时，<span class=\"math inline\">\\(L^2\\)</span> 范数被称为<strong>欧几里得范数(Euclidean norm)</strong>。它表示从原点出发到向量 <span class=\"math inline\">\\(x\\)</span> 确定的点的欧几里得距离。<span class=\"math inline\">\\(L^2\\)</span> 范数在机器学习中出现地十分频繁，经常简化表示为 <span class=\"math inline\">\\(∥x∥\\)</span>，略去了下标 2。平方 <span class=\"math inline\">\\(L^2\\)</span> 范数也经常用来衡量向量的大小，可以简单地通过点积 <span class=\"math inline\">\\(x^⊤x\\)</span> 计算。</p>\n<p>平方 <span class=\"math inline\">\\(L^2\\)</span> 范数在数学和计算上都比 <span class=\"math inline\">\\(L^2\\)</span> 范数本身更方便。例如，平方 <span class=\"math inline\">\\(L^2\\)</span> 范数对 <span class=\"math inline\">\\(x\\)</span> 中每个元素的导数只取决于对应的元素，而 <span class=\"math inline\">\\(L^2\\)</span> 范数对每个元素的导数却和整个向量相关。但是在很多情况下，平方 <span class=\"math inline\">\\(L^2\\)</span> 范数也可能不受欢迎，因为它在原点附近增长 得十分缓慢。在某些机器学习应用中，区分恰好是零的元素和非零但值很小的元素 是很重要的。在这些情况下，我们转而使用在各个位置斜率相同，同时保持简单的数学形式的函数:<span class=\"math inline\">\\(L^1\\)</span> 范数. <span class=\"math inline\">\\(L^1\\)</span> 范数可以简化如下:</p>\n<p><span class=\"math display\">\\[\n||x||_1 = \\sum_i {|x_i|}\n\\tag{7}\n\\]</span></p>\n<p>当机器学习问题中零和非零元素之间的差异非常重要时，通常会使用 <span class=\"math inline\">\\(L^1\\)</span> 范数。每当 <span class=\"math inline\">\\(x\\)</span> 中某个元素从 0 增加 <span class=\"math inline\">\\(\\epsilon\\)</span>，对应的 L1 范数也会增加 <span class=\"math inline\">\\(\\epsilon\\)</span> 。</p>\n<p>另外一个经常在机器学习中出现的范数是 <span class=\"math inline\">\\(L^\\infty\\)</span> 范数，也被称为<strong>最大范数(max norm)</strong>。这个范数表示向量中具有最大幅值的元素的绝对值:</p>\n<p><span class=\"math display\">\\[\n||x||_\\infty = \\underset{i}{max}|x_i|\n\\tag{8}\n\\]</span></p>\n<p>有时候我们可能也希望衡量矩阵的大小。在深度学习中，最常见的做法是使用 <strong>Frobenius 范数(Frobenius norm)</strong>，</p>\n<p><span class=\"math display\">\\[\n||A||_F = \\sqrt {\\sum_{i,j}A^2_{i,j}}\n\\tag{9}\n\\]</span></p>\n<p>其类似于向量的 <span class=\"math inline\">\\(L^2\\)</span> 范数。 两个向量的<strong>点积(dot product)</strong>可以用范数来表示。具体地，</p>\n<p><span class=\"math display\">\\[\nx^Ty=||x||_2||y||_2\\cos\\theta  \\tag{10}\n\\]</span></p>\n<p>其中 <span class=\"math inline\">\\(θ\\)</span> 表示 <span class=\"math inline\">\\(x\\)</span> 和 <span class=\"math inline\">\\(y\\)</span> 之间的夹角。</p>\n<p>如果 <span class=\"math inline\">\\(x^⊤y = 0\\)</span>，那么向量 <span class=\"math inline\">\\(x\\)</span> 和向量 <span class=\"math inline\">\\(y\\)</span> 互相<strong>正交(orthogonal)</strong>。如果两个向量都有非零范数，那么这两个向量之间的夹角是 90 度。在 <span class=\"math inline\">\\(R^n\\)</span> 中，至多有 <span class=\"math inline\">\\(n\\)</span> 个范数非零向量互相正交。如果这些向量不仅互相正交，并且范数都为 1，那么我们称它们 是<strong>标准正交(orthonormal)</strong>。</p>\n<p><strong>正交矩阵(orthogonal matrix)</strong>是指行向量和列向量是分别标准正交的方阵,<span class=\"math inline\">\\(A^{−1} = A^⊤\\)</span></p>\n<h2 id=\"特征分解\">特征分解</h2>\n<p><strong>特征分解(eigendecomposition)</strong>是使用最广的矩阵分解之一，即我们将矩阵分解成一组<strong>特征向量</strong>和<strong>特征值</strong>。 方阵 A 的<strong>特征向量(eigenvector)</strong>是指与 A 相乘后相当于对该向量进行缩放的非零向量 v: <span class=\"math display\">\\[\nAv = \\lambda v\n\\tag{11}\n\\]</span> 标量 <span class=\"math inline\">\\(λ\\)</span> 被称为这个特征向量对应的<strong>特征值(eigenvalue)</strong></p>\n<p>A 的<strong>特征分解(eigendecomposition)</strong>可以记作</p>\n<p><span class=\"math display\">\\[\nA=Vdiag(\\lambda)V^{-1}\n\\tag{12}\n\\]</span></p>\n<p>所有特征值都是正数的矩阵被称为<strong>正定(positive definite)</strong>;所有特征值都是非负数的矩阵被称为<strong>半正定(positive semidefinite)</strong>。同样地，所有特征值都是负数的 矩阵被称为<strong>负定(negative definite)</strong>;所有特征值都是非正数的矩阵被称为<strong>半负定(negative semidefinite)</strong>。半正定矩阵受到关注是因为它们保证 <span class=\"math inline\">\\(∀x, x^⊤Ax ≥ 0\\)</span>。此外，正定矩阵还保证 <span class=\"math inline\">\\(x^⊤Ax = 0 ⇒ x = 0\\)</span>。</p>\n<h2 id=\"奇异值分解\">奇异值分解</h2>\n<p><strong>奇异值分解(singular value decomposition, SVD)</strong>，将矩阵分解为<strong>奇异向量(singular vector)</strong>和<strong>奇异值(singular value)</strong>。通过奇异值分解，我们会得到一些与特征分解相同类型的信息。每个实数矩阵都有一个奇异值分解，但不一定都有特征分解。例如，非方阵的矩阵没有特征分解，这时我们只能使用奇异值分解。</p>\n<p>分解表达式: <span class=\"math display\">\\[\nA = UDV^⊤. \\tag{13}\n\\]</span></p>\n<p>假设 <span class=\"math inline\">\\(A\\)</span> 是一个 <span class=\"math inline\">\\(m×n\\)</span> 的矩阵，那么 <span class=\"math inline\">\\(U\\)</span> 是一个 <span class=\"math inline\">\\(m×m\\)</span> 的矩阵，<span class=\"math inline\">\\(D\\)</span> 是一个 <span class=\"math inline\">\\(m×n\\)</span> 的矩阵，<span class=\"math inline\">\\(V\\)</span> 是一个 <span class=\"math inline\">\\(n × n\\)</span> 矩阵。 这些矩阵中的每一个经定义后都拥有特殊的结构。矩阵 <span class=\"math inline\">\\(U\\)</span> 和 <span class=\"math inline\">\\(V\\)</span> 都定义为正交矩阵，而矩阵 <span class=\"math inline\">\\(D\\)</span> 定义为对角矩阵。注意，矩阵 <span class=\"math inline\">\\(D\\)</span> 不一定是方阵。 对角矩阵 <span class=\"math inline\">\\(D\\)</span> 对角线上的元素被称为矩阵 <span class=\"math inline\">\\(A\\)</span> 的<strong>奇异值(singular value)</strong>。矩阵 <span class=\"math inline\">\\(U\\)</span> 的列向量被称为<strong>左奇异向量(left singular vector)</strong>，矩阵 <span class=\"math inline\">\\(V\\)</span> 的列向量被称<strong>右奇异向量(right singular vector)</strong>。 事实上，我们可以用与 <span class=\"math inline\">\\(A\\)</span> 相关的特征分解去解释 <span class=\"math inline\">\\(A\\)</span> 的奇异值分解。<span class=\"math inline\">\\(A\\)</span>的<strong>左奇异向量(left singular vector)</strong>是 <span class=\"math inline\">\\(AA^⊤\\)</span> 的特征向量。<span class=\"math inline\">\\(A\\)</span> 的<strong>右奇异向量(right singular vector)</strong>是 <span class=\"math inline\">\\(A^⊤A\\)</span> 的特征向量。A 的非零奇异值是 <span class=\"math inline\">\\(A^⊤A\\)</span> 特征值的平方根，同时也是 <span class=\"math inline\">\\(AA^⊤\\)</span> 特征值的平方根。</p>\n<h2 id=\"迹运算\">迹运算</h2>\n<p>迹运算返回的是矩阵对角元素的和: <span class=\"math display\">\\[\nTr(A)=\\sum_i {A_{i,i}}\n\\]</span></p>\n","categories":["机器学习"],"tags":["机器学习","线性代数"]},{"title":"树莓派折腾指南之将你树莓派变成智能家居中枢","url":"https://suool.net/2018/01/13/树莓派折腾指南之将你树莓派变成智能家居中枢/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h1 id=\"将你树莓派变成智能家居中枢\">将你树莓派变成智能家居中枢</h1>\n<p>树莓派由于本身足够的小巧且扩展性极高，所以它智能家居方面的应用具有天然的优势。对于喜欢折腾和 Geek 的人的而言，其扩展性具有无比的吸引力。 <a id=\"more\"></a></p>\n<p>这次我们就来尝试将树莓派变身为智能家居的管理中枢，将其桥接到苹果家的 Home 应用当中，使用 Siri 来控制所有的智能家居。</p>\n<p>由于 Apple 家认证的智能家居暂时承担不起，而刚好又可以使用树莓派加上 <code>HomeBridge</code> 相关的框架来将小米的智能家居产品加入 <code>HomeKit</code> 。</p>\n<p>我使用的是小米智能家居全家桶套装，极客学院送的2017年元旦讲师礼物，在此表示感谢！其包含内容产品主要有：多功能网关，人体传感器，智能插座，无线开关，门窗传感器。效果图如下： <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15158306050366.jpg\" alt=\"-w629\"></p>\n<figure>\n<img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15158306313468.jpg\" alt=\"-w451\"><figcaption>-w451</figcaption>\n</figure>\n<p>用习惯之后，不得不说确实很方便，特别是寒冷的冬天不用起床就能开关灯。</p>\n<p>下面就进入正题，如何将你的树莓派变身智能家居桥接中枢。</p>\n<h2 id=\"准备工作\">准备工作</h2>\n<h3 id=\"材料准备\">材料准备</h3>\n<p>硬件：</p>\n<ul>\n<li>Raspberry Pi</li>\n<li>小米智能家居产品</li>\n</ul>\n<p>软件： * <a href=\"https://github.com/nfarina/homebridge\" target=\"_blank\" rel=\"noopener\">HomeBridge</a> * <a href=\"https://github.com/YinHangCode/homebridge-mi-aqara\" target=\"_blank\" rel=\"noopener\">homebridge-mi-aqara</a></p>\n<h3 id=\"基本步骤\">基本步骤</h3>\n<ol type=\"1\">\n<li>硬件准备和连接</li>\n<li>软件环境和依赖安装</li>\n<li>安装运行 <code>Homebridge</code></li>\n<li>安装及配置 <code>homebridge-mi-aqara</code></li>\n<li>测试及后台运行</li>\n<li>其他</li>\n</ol>\n<h2 id=\"步骤一硬件准备和连接\">步骤一：硬件准备和连接</h2>\n<p>首先将你的<a href=\"https://www.jianshu.com/p/b62a8229a74c\" target=\"_blank\" rel=\"noopener\">树莓派安装好系统并配置好</a>，最好可以使用 SSR 全局代理可以科学上网，这样可以改善你的树莓派网络环境，一定程度加快安装过程。具体的方法参考<a href=\"https://www.jianshu.com/p/445256a2367b\" target=\"_blank\" rel=\"noopener\">之前的文章</a>。</p>\n<p>使用 SSH 远程连接你的树莓派：</p>\n<figure class=\"highlight julia\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh <span class=\"literal\">pi</span><span class=\"meta\">@raspberrypi</span>.<span class=\"keyword\">local</span></span><br></pre></td></tr></table></figure>\n<p>更新树莓派相关依赖环境</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-<span class=\"builtin-name\">get</span> update</span><br><span class=\"line\">sudo apt-<span class=\"builtin-name\">get</span> upgrade</span><br></pre></td></tr></table></figure>\n<p>完成之后进入下一步。</p>\n<h2 id=\"步骤二软件环境和依赖安装\">步骤二：软件环境和依赖安装</h2>\n<p>首先安装这两个库使用的都是 <code>Node</code> 环境的 <code>npm</code> 工具，因此要先安装 <code>Node</code>，命令如下：</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -sL http<span class=\"variable\">s:</span>//<span class=\"keyword\">deb</span>.nodesource.<span class=\"keyword\">com</span>/setup_8.<span class=\"keyword\">x</span> | sudo -E bash -</span><br><span class=\"line\">sudo apt-<span class=\"built_in\">get</span> install -<span class=\"keyword\">y</span> nodejs</span><br></pre></td></tr></table></figure>\n<p>其次需要安装 <code>avahi</code> 包</p>\n<figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-<span class=\"built_in\">get</span> install libavahi-compat-libdnssd-<span class=\"built_in\">dev</span></span><br></pre></td></tr></table></figure>\n<p>如果上述包安装出现错误，可以参考这里的<a href=\"https://stackoverflow.com/questions/26571326/how-do-i-resolve-the-following-packages-have-unmet-dependencies\" target=\"_blank\" rel=\"noopener\">解决方法</a></p>\n<p>尝试使用</p>\n<figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo aptitude <span class=\"keyword\">install</span> libavahi-compat-libdnssd-dev</span><br></pre></td></tr></table></figure>\n<p>命令安装依赖，可能需要将相关软件包降级就可以顺利安装了。</p>\n<h2 id=\"步骤三安装运行-homebridge\">步骤三：安装运行 Homebridge</h2>\n<p>这里具体的安装步骤可以直接去参考其 github 主页的 wiki 内容。简单的来说，步骤如下: 首先可以试一下使用如下命令安装：</p>\n<figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm <span class=\"keyword\">install</span> -g homebridge</span><br></pre></td></tr></table></figure>\n<p>如果上述命令安装过程出现了错误，那么可以尝试使用如下的命令：</p>\n<figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~</span><br><span class=\"line\">sudo npm install -g --unsafe-perm homebridge hap-nodejs node-gyp</span><br><span class=\"line\">cd /usr/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">node_modules</span>/<span class=\"title\">homebridge</span>/</span></span><br><span class=\"line\">sudo npm install --unsafe-perm bignum</span><br><span class=\"line\">cd /usr/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">node_modules</span>/<span class=\"title\">hap</span>-<span class=\"title\">nodejs</span>/<span class=\"title\">node_modules</span>/<span class=\"title\">mdns</span></span></span><br><span class=\"line\">sudo node-gyp BUILDTYPE=Release rebuild</span><br></pre></td></tr></table></figure>\n<p>上面的 <code>/usr/lib/</code> 目录，如果你不是使用的 <code>apt-get</code> 命令安装的 <code>Node</code>，需要换成 <code>/usr/local/lib/</code> 。 一定要严格安装上述命令的步骤来安装，该切换目录就切换目录。</p>\n<p>此时安装应该不会有什么问题了。</p>\n<h2 id=\"步骤四安装及配置-homebridge-mi-aqara\">步骤四：安装及配置 homebridge-mi-aqara</h2>\n<p>其项目主页是 <a href=\"https://github.com/YinHangCode/homebridge-mi-aqara\" target=\"_blank\" rel=\"noopener\">homebridge-mi-aqara</a>，可以在他的项目主页看到其支持的小米硬件，基本是非常全面的。</p>\n<p>安装命令如下：</p>\n<figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo npm <span class=\"keyword\">install</span> -g homebridge-mi-aqara</span><br></pre></td></tr></table></figure>\n<p>安装完成之后，需要对其进行基本的配置，从而能够将你的小米全家桶硬件加入到 <code>HomeBridge</code> 中。</p>\n<p>首先要获取的是 局域网通信协议密码 以及 网关的 <code>MAC</code> 地址。</p>\n<p>下载米家 APP，连接上你的智能网关以及其他小米智能家居硬件，打开米家 APP，选择你的多功能网关，点击 APP 右上角 <code>···</code> 符号，进入 <code>关于</code> 选项: <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15158331055340.jpg\"> <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15158331906989.jpg\"> 如上图所示，要不断的点击空白处，片刻后界面就会多了<code>局域网通信协议</code>还有<code>网关信息</code>等选项。 这时候，分别点选他们，记录你的网关的<code>局域网通信协议密码</code>以及<code>网关的MAC地址</code>，记得要开启局域网通信协议，记录下密码后，点击确定。网关的 MAC 地址位置如下： <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15158337428781.jpg\"></p>\n<p>上面的 <code>MAC</code> 地址去除冒号，全变成小写后记录下来，是一串12位的字符。局域网通信协议密码要保留大小写的记录下来。</p>\n<p>记录下上述两个地址之后，就可以开始在终端中配置 <code>HomeBridge</code> 的配置文件了。执行的命令如下：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir ~/<span class=\"selector-class\">.homebridge</span> </span><br><span class=\"line\">cd ~/<span class=\"selector-class\">.homebridge</span>      </span><br><span class=\"line\">sudo nano config.json</span><br></pre></td></tr></table></figure>\n<p>执行了上述 nano 命令之后，会创建一个配置的 <code>json</code> 文件，将以下内粘贴到终端编辑环境中</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"bridge\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"Homebridge\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"username\"</span>:<span class=\"string\">\"CC:22:3D:E3:CE:23\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"port\"</span>:<span class=\"number\">51826</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"pin\"</span>:<span class=\"string\">\"723-92-124\"</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">\"platforms\"</span>: [&#123;</span><br><span class=\"line\">        <span class=\"attr\">\"platform\"</span>: <span class=\"string\">\"MiAqaraPlatform\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"gateways\"</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">\"网关 mac 地址\"</span>: <span class=\"string\">\"局域网通信协议密码\"</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>将上述的两个参数替换成刚刚你记录下来的即可。其他参数说明： <code>name</code> iOS 的 <code>Homekit</code> 在添加配件的时候看到的名字 <code>username</code> 如果只是用 <code>Homebridge</code>，这里可以是任意一个类似 <code>MAC</code> 地址的字符串 <code>port</code> 随意，只要不被占用的端口 <code>pin</code> iOS 的 <code>Homekit</code> 在添加配件时需要的验证码</p>\n<p>使用 <code>Ctrl + o</code> 保存， <code>Ctrl + x</code> 退出。</p>\n<h2 id=\"步骤五测试及后台运行\">步骤五：测试及后台运行</h2>\n<p>在终端输入</p>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">homebridge -D</span></span><br></pre></td></tr></table></figure>\n<p>这时候，界面也会出现刚刚你自己填写的 PIN 码 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15158339825667.jpg\"></p>\n<p>进入你 iPhone 或者 iPad 的家庭APP，添加配件，扫码几乎不可能加入成功，直接选择输入 PIN 码，即是输入下方的 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15158342592263.jpg\"> 添加完成之后，你就会看到所有网关所附带的配件了，如我刚开始所配图的一般，不过此时按钮的名字可能是一串英文符号，你需要自己确定各个按钮的作用，给他们一个你想好的名字即可。</p>\n<p>但是上面这个只是在测试环境运行，如果断了 SSH，你手机或者 iPad 里面的所有设备都会处于无响应的状态，所以，我们还需要能够在后台运行的 <code>Homebridge</code>。</p>\n<p>借助 <code>screen</code> 工具即可实现这一需求，具体安装命令如下：</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-<span class=\"builtin-name\">get</span> install screen</span><br></pre></td></tr></table></figure>\n<p>安装完成之后，首先开一一个名字叫做 <code>home</code> 的窗口，具体的名字你可以随意选取，命令如下：</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">screen -S <span class=\"built_in\">home</span></span><br></pre></td></tr></table></figure>\n<p>然后所打开的 <code>screen</code> 进程中开启一个 <code>homebridge</code> 进程</p>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">homebridge -D</span></span><br></pre></td></tr></table></figure>\n<p>在 <code>screen</code> 里开启的 <code>homebridge</code> 不会随着 SSH 关闭而被关闭。使用 <code>Ctrl+A</code> 然后按 <code>d</code> 就可以跳出来了。</p>\n<p>具体关于 <code>screen</code> 命令的用法你可以查看这里的文章: <a href=\"https://www.ibm.com/developerworks/cn/linux/l-cn-screen/\" target=\"_blank\" rel=\"noopener\">linux 技巧：使用 screen 管理你的远程会话</a> 及 <a href=\"http://www.runoob.com/linux/linux-comm-screen.html\" target=\"_blank\" rel=\"noopener\">Linux screen命令</a>。</p>\n<h2 id=\"其他\">其他</h2>\n<p>完成上面的步骤，此时你只能在你的路由器所在的局域网内完成智能家居的控制，如果要在外网实现操作，及 home 的自动化操作，你需要一台 iPad 作为家居中枢，具体的参考 <a href=\"https://support.apple.com/zh-cn/HT207057\" target=\"_blank\" rel=\"noopener\">自动化和远程访问 HomeKit 配件</a></p>\n<p>上面就是一个利用树莓派实现让 Siri 帮你开关灯的过程，下一步可以使用 <code>HomeAssistant</code> 来实现更加智能化和扩展化的家居管理。</p>\n<p>更下一步的尝试可能会比较底层一些了： * 尝试一下扩展温湿度感应器模块 * 尝试使用 <code>GPIO</code> 控制 RGB 彩色 LED 灯 * 扩展摄像头模块，尝试一下人脸识别等基本的人工智能 * 扩展私有云存储及远程下载</p>\n","categories":["硬件"],"tags":["树莓派"]},{"title":"树莓派折腾指南之将你的树莓派变身 Google Home","url":"https://suool.net/2018/01/11/树莓派折腾指南之将你的树莓派变身-Google-Home/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h1 id=\"将你的树莓派变身-google-home\">将你的树莓派变身 Google Home</h1>\n<p>目前的智能化已经对人们的生活影响越来越深刻，从智能音箱鼻祖 Amazon Echo 发布之后，智能数字助理就进入了人们的生活当中，也成为人们生活的一部分，特别是其与智能家居配合之后，以前科幻电影中的场景，目前已经渐渐成为现实。 <a id=\"more\"></a></p>\n<p>当前国内的厂家也有发布类似的产品，比如小米的小爱同学，阿里的天猫精灵等智能助理产品，智能家居加上智能助理中枢，将是物联网真正进入人们平常生活的最深刻的体现。</p>\n<p>而且 Google 和 Amazon 都发布了自己语音助手的 SDK ，今天就来看一下如何接入 <code>Google Assistant SDK</code> ，来体验一下树莓派版本的 <code>Google Home</code> 。</p>\n<h2 id=\"准备工作\">准备工作</h2>\n<h3 id=\"材料准备\">材料准备</h3>\n<p>硬件：</p>\n<ul>\n<li>Raspberry Pi</li>\n<li>USB 麦克风或者免驱声卡搭配 3.5mm 接口麦克风</li>\n<li>3.5mm 接口的扬声器</li>\n</ul>\n<p>软件：</p>\n<ul>\n<li>Google 账户</li>\n<li>科学上网环境</li>\n</ul>\n<h3 id=\"基本步骤\">基本步骤</h3>\n<ol type=\"1\">\n<li>硬件准备和网络连接</li>\n<li>配置测试声音设备</li>\n<li>配置开发者项目及相关设置</li>\n<li>安装 SDK 和示例项目</li>\n<li>注册你的硬件设备</li>\n<li>运行示例代码</li>\n<li>其他</li>\n</ol>\n<h2 id=\"步骤一硬件准备和网络连接\">步骤一：硬件准备和网络连接</h2>\n<ol type=\"1\">\n<li>已经安装好系统并且搭建好科学上网环境的树莓派</li>\n<li><p>连接你的麦克风和扬声器到树莓派，麦克风你可以购买一个免驱声卡，连接你的 3.5 mm 麦克风，比如下面这样的，几块钱就能买到。树莓派有一个 3.5mm 的耳机插口，你的扬声器可以接入此接口。 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155927429534.jpg\"></p></li>\n<li>将你的树莓派连接网络</li>\n<li><p>ssh 远程连接你的树莓派</p></li>\n</ol>\n<h2 id=\"步骤二配置测试声音设备\">步骤二：配置测试声音设备</h2>\n<h3 id=\"第一步确认你的录音和播放设备正常工作\">第一步：确认你的录音和播放设备正常工作</h3>\n<ol type=\"1\">\n<li>在命令行输入以下命令，按下 <code>Ctrl+C</code> 来结束。</li>\n</ol>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">speaker-test -t wav</span></span><br></pre></td></tr></table></figure>\n<p>如果你没有听到任何声音，请检查你的扬声器和树莓派连接是否正常，或者扬声器是不是声音调的太小了。同时你可以通过输入以下命令 <figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo raspi-<span class=\"built_in\">config</span></span><br></pre></td></tr></table></figure></p>\n<p>选择 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155932467591.jpg\"> 然后选择 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155932800447.jpg\"> 将你的声音输出从耳机插口输出 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155933119751.jpg\"></p>\n<ol start=\"2\" type=\"1\">\n<li>录制一个简短的声音片段，如果你这时出现了问题，请转到下面的第二步。</li>\n</ol>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arecord <span class=\"attribute\">--format</span>=S16_LE <span class=\"attribute\">--duration</span>=5 <span class=\"attribute\">--rate</span>=16000 <span class=\"attribute\">--file-type</span>=raw out.raw</span><br></pre></td></tr></table></figure>\n<ol start=\"3\" type=\"1\">\n<li>播放刚刚录制的音频来检查录制效果。</li>\n</ol>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">aplay <span class=\"attribute\">--format</span>=S16_LE <span class=\"attribute\">--rate</span>=16000 out.raw</span><br></pre></td></tr></table></figure>\n<p>调整你的录制和播放设备，通过下面这个命令：</p>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">alsamixer</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155937585522.jpg\"></p>\n<p>如果你的录制和播放设备工作正常，那么这一步的声音设备的配置就完成了，如果你出现了错误，那么可以继续下面的步骤尝试修复问题。</p>\n<h3 id=\"第二步找到你的录制和播放设备\">第二步：找到你的录制和播放设备。</h3>\n<p>通过下面这个命令来显示你的声音捕捉设备列表，找到你的麦克风，并记录下设备卡号和设备号。 <figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">arecord -l</span></span><br></pre></td></tr></table></figure></p>\n<p><img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155941154890.jpg\" alt=\"录音设备\"> 如上图所示的 <code>card num</code> 是1，<code>device num</code> 为 0。</p>\n<p>通过下面这个命令来显示你的声音播放设备列表，记录下你的 3.5 mm 接口的设备卡号和设备号，3.5mm 设备的特征是带有 <code>Analog</code> 或者 <code>bcm2835 ALSA</code> (不是 bcm2835 IEC958/HDMI) 字段。</p>\n<figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">aplay -l</span></span><br></pre></td></tr></table></figure>\n<figure>\n<img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155944050157.jpg\" alt=\"播放设备\"><figcaption>播放设备</figcaption>\n</figure>\n<h3 id=\"第三步\">第三步</h3>\n<p>在你的 /home/pi 目录下创建一个名为 .asoundrc 文件，可以直接输入</p>\n<figure class=\"highlight jboss-cli\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">cd</span> ~</span><br><span class=\"line\">sudo nano <span class=\"string\">.asoundrc</span></span><br></pre></td></tr></table></figure>\n<p>粘贴以下内容到你的终端编辑器内：</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pcm.!default &#123;</span><br><span class=\"line\"> <span class=\"built_in\"> type </span>asym</span><br><span class=\"line\">  capture.pcm <span class=\"string\">\"mic\"</span></span><br><span class=\"line\">  playback.pcm <span class=\"string\">\"speaker\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">pcm.mic &#123;</span><br><span class=\"line\"> <span class=\"built_in\"> type </span>plug</span><br><span class=\"line\">  slave &#123;</span><br><span class=\"line\">    pcm <span class=\"string\">\"hw:&lt;card number&gt;,&lt;device number&gt;\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">pcm.speaker &#123;</span><br><span class=\"line\"> <span class=\"built_in\"> type </span>plug</span><br><span class=\"line\">  slave &#123;</span><br><span class=\"line\">    pcm <span class=\"string\">\"hw:&lt;card number&gt;,&lt;device number&gt;\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>其中的两处 <code>&lt;card number&gt;,&lt;device number&gt;</code> ，分别是刚刚让你记录的麦克风和扬声器的设备卡号和设备号，比如刚刚我展示的图片，我的是内容是 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155947400239.jpg\"></p>\n<p>如果你有一个 HDMI 的声音输出并且连接了耳机接口，那么请按照刚刚上面 <code>sudo raspi-config</code> 的设置将你的声音输出强制从耳机接口输出。</p>\n<p>然后重复步骤一看看是不是依然存在问题，如果依然存在问题，可以尝试更换你的声音录制和播放设备。</p>\n<h2 id=\"步骤三配置开发者项目及相关设置\">步骤三：配置开发者项目及相关设置</h2>\n<p>Google 的开发者项目允许你的设备能够访问 <code>Google Assistant API</code>，为了能够访问这个 API，需要进行以下的配置工作。 首先，进入 Google 的 Cloud Platform Console，在你的<a href=\"https://console.cloud.google.com/project\" target=\"_blank\" rel=\"noopener\">项目页面</a>，创建一个项目或者选一个已经存在的项目。 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155950828092.jpg\"></p>\n<p>然后允许你刚刚所选的项目使用 <code>Google Assistant API</code>，点击以下链接<a href=\"https://console.developers.google.com/apis/api/embeddedassistant.googleapis.com/overview\" target=\"_blank\" rel=\"noopener\">开通 Google Assistant API</a> 点击启用即可。 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155953311656.jpg\"></p>\n<p>然后通过下面的步骤创建一个客户端认证 ID 凭证： 1. <a href=\"https://console.developers.google.com/apis/credentials/oauthclient\" target=\"_blank\" rel=\"noopener\">创建客户端 ID</a> <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155954695217.jpg\"> 2. 输入产品名称及其他可选信息，点击保存即可。 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155955232716.jpg\" alt=\"输入名称\"> 3. 应用类型选择其他，并输入一个名称。 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155956528728.jpg\" alt=\"类型\"> 4. 点击创建后弹出一个提醒的窗口，这里可以直接点击确定关闭它。 5. 此时出现这样的界面： <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155957656082.jpg\" alt=\"列表\"> 点在下载图标，下载这个 json 文件。名字类似与<code>client_secret_client-id.json</code></p>\n<p>最后上面下载的文件必须放到 pi 用户的 Downloads 目录下面以授权使 <code>Google Assistant SDK</code> 示例项目正常使用，不要重命名这个文件。 可以通过以下方法来将刚刚下载的文件传到 Downloads 目录。 1. 在你的电脑新打开一个终端，<strong>不要 ssh 连接 pi</strong>，输入以下命令：</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp <span class=\"regexp\">~/Downloads/</span>client_secret_具体你的文件名.json pi<span class=\"meta\">@raspberry</span>-pi-ip-<span class=\"string\">address:</span><span class=\"regexp\">/home/</span>pi/</span><br></pre></td></tr></table></figure>\n<p>然后输入密码。 2. 如果你是 Windows，你可以使用 FileZilla 等 ftp 工具，如下: <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155961850035.jpg\"> 打开 Downloads 目录，将你的文件拖入即可。 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155962460662.jpg\"></p>\n<p>为了使用 Google Assistant 你必须要共享一些活动数据给 Google，授予 <code>Google Assistant</code> 一定的权限，否则你运行项目的时候，她会一直跟你说，她需要权限才能跟你说话。 打开<a href=\"https://myaccount.google.com/activitycontrols\" target=\"_blank\" rel=\"noopener\">活动控制页面</a> <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155964264654.jpg\"> <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155964345681.jpg\"> <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155964424810.jpg\"></p>\n<h2 id=\"步骤四安装-sdk-和示例项目\">步骤四：安装 SDK 和示例项目</h2>\n<p>Google 推荐在 Python 的虚拟环境运行该项目，避免对系统环境造成影响，具体运行以下命令：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get <span class=\"keyword\">update</span></span><br><span class=\"line\">sudo apt-<span class=\"keyword\">get</span> <span class=\"keyword\">install</span> python3-dev python3-venv </span><br><span class=\"line\">python3 -m venv env</span><br><span class=\"line\">env/<span class=\"keyword\">bin</span>/python -m pip <span class=\"keyword\">install</span> <span class=\"comment\">--upgrade pip setuptools</span></span><br><span class=\"line\"><span class=\"keyword\">source</span> env/<span class=\"keyword\">bin</span>/<span class=\"keyword\">activate</span></span><br></pre></td></tr></table></figure>\n<p>上面的最后一条命令是激活虚拟环境，然后安装依赖软件包：</p>\n<figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-<span class=\"built_in\">get</span> install portaudio19-<span class=\"built_in\">dev</span> libffi-<span class=\"built_in\">dev</span> libssl-<span class=\"built_in\">dev</span></span><br></pre></td></tr></table></figure>\n<p>使用 pip 来安装最新版本的依赖包：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python -m pip <span class=\"keyword\">install</span> <span class=\"comment\">--upgrade google-assistant-library</span></span><br><span class=\"line\">python -m pip <span class=\"keyword\">install</span> <span class=\"comment\">--upgrade google-assistant-sdk[samples]</span></span><br></pre></td></tr></table></figure>\n<p>生成授权资格 首先安装及升级授权工具 <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python -m pip <span class=\"keyword\">install</span> <span class=\"comment\">--upgrade google-auth-oauthlib[tool]</span></span><br></pre></td></tr></table></figure></p>\n<p>然后在命令行输入一下命令</p>\n<figure class=\"highlight jboss-cli\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">google-oauthlib-tool <span class=\"params\">--scope</span> https:<span class=\"string\">//www.googleapis.com/auth/assistant-sdk-prototype</span> \\</span><br><span class=\"line\">          <span class=\"params\">--save</span> <span class=\"params\">--headless</span> <span class=\"params\">--client-secrets</span> <span class=\"string\">/home/pi/Downloads/client_secret_</span>你的文件名<span class=\"string\">.json</span></span><br></pre></td></tr></table></figure>\n<p>然后你应该会在命令行中看到一个网址 <code>Please visit this URL to authorize this application: https://...</code></p>\n<p>将这个网址完整的 copy 到浏览器中，登陆你的 Google 账号，然后点击授权允许，你会在浏览器中看到一行代码，类似<code>4/XXXX</code>，将这行代码 copy 到命令行<code>Enter the authorization code:</code>的后面 如果授权成功，那么你会在类似下面的响应。 <code>credentials saved: /path/to/.config/google-oauthlib-tool/credentials.json</code></p>\n<h2 id=\"步骤五注册你的硬件设备\">步骤五：注册你的硬件设备</h2>\n<p>使用 Google 的注册工具，首先设备名最好是数字和字母的组合，首字段必须是数字或字母。 使用下面的命令格式注册：</p>\n<figure class=\"highlight brainfuck\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">googlesamples</span><span class=\"literal\">-</span><span class=\"comment\">assistant</span><span class=\"literal\">-</span><span class=\"comment\">devicetool</span> <span class=\"comment\">register</span><span class=\"literal\">-</span><span class=\"comment\">model</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">manufacturer</span> <span class=\"comment\">生产者</span> <span class=\"comment\">\\</span></span><br><span class=\"line\"><span class=\"comment\"></span>          <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">product</span><span class=\"literal\">-</span><span class=\"comment\">name</span> <span class=\"comment\">产品名</span> <span class=\"title\">[</span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">description</span> <span class=\"comment\">my</span><span class=\"literal\">-</span><span class=\"comment\">product</span><span class=\"literal\">-</span><span class=\"comment\">description</span><span class=\"title\">]</span> <span class=\"comment\">\\</span></span><br><span class=\"line\"><span class=\"comment\"></span>          <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">type</span> <span class=\"comment\">device</span><span class=\"literal\">-</span><span class=\"comment\">type</span> <span class=\"title\">[</span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">trait</span> <span class=\"comment\">支持的特性</span><span class=\"title\">]</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">model</span> <span class=\"comment\">我的设备</span></span><br></pre></td></tr></table></figure>\n<p>上面的我的设备这个必须是一个唯一的名字，所以你可以使用你的项目 ID 作为前缀，下面的是 Google 的一个示例命令：</p>\n<figure class=\"highlight dsconfig\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">googlesamples-assistant-</span><span class=\"string\">devicetool </span><span class=\"string\">register-model </span><span class=\"built_in\">--manufacturer</span> <span class=\"string\">\"Assistant SDK developer\"</span> \\</span><br><span class=\"line\">          <span class=\"built_in\">--product-name</span> <span class=\"string\">\"Assistant SDK light\"</span> <span class=\"built_in\">--type</span> <span class=\"string\">LIGHT </span><span class=\"built_in\">--model</span> <span class=\"string\">my-model</span></span><br></pre></td></tr></table></figure>\n<p>然后使用以下命令向服务器查询你刚刚创建的设备：</p>\n<figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">googlesamples-assistant-devicetool <span class=\"keyword\">get</span> <span class=\"comment\">--model my-model</span></span><br></pre></td></tr></table></figure>\n<p>比如下面 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15155975614463.jpg\"></p>\n<h2 id=\"步骤六运行示例代码\">步骤六：运行示例代码</h2>\n<p>现在你就可以准备运行示例项目来和你的树莓派对话了，首先运行下面的命令：</p>\n<figure class=\"highlight brainfuck\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">googlesamples</span><span class=\"literal\">-</span><span class=\"comment\">assistant</span><span class=\"literal\">-</span><span class=\"comment\">hotword</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">project_id</span> <span class=\"comment\">你的项目</span> <span class=\"comment\">iD</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">device_model_id</span>  <span class=\"comment\">上一步创建的设备</span></span><br></pre></td></tr></table></figure>\n<p>然后对着你的麦克风可以说话询问了，注意要是英文。激活的关键词是 <code>Ok Google</code> 或 <code>Hey Google</code>，你可以在终端中看到对话开始和结束的提示。</p>\n<p>可以试着问问她你所在的城市的天气，让她唱首歌，让她叫你起床等等。</p>\n<h2 id=\"步骤七-其他\">步骤七： 其他</h2>\n<p>你还可以增加一个 LED 灯来为你的对话添加一些特性，通过 LED 灯提示对话开始等，也可以扩展这个项目及你的树莓派。具体的可以参考<a href=\"https://developers.google.com/assistant/sdk/guides/library/python/extend/install-hardware\" target=\"_blank\" rel=\"noopener\">扩展 Google Assistant</a>。</p>\n<p>以上就是变身 Google Home 的基本过程，下一步，我将我的树莓派变身成为智能家居中枢，让 Siri 为我开关灯！</p>\n","categories":["硬件"],"tags":["树莓派"]},{"title":"树莓派折腾指南之使用 SSR 实现科学上网","url":"https://suool.net/2018/01/09/树莓派折腾指南之使用-SSR-实现科学上网/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h1 id=\"树莓派折腾指南之使用-ssr-实现科学上网\">树莓派折腾指南之使用 SSR 实现科学上网</h1>\n<h2 id=\"预备工作\">预备工作</h2>\n<p>首先确定你的 SSR 混淆加密方法，如果是 salsa20 或 chacha20 或 chacha20-ietf 就需要编译安装 libsodium 这个库。 其 github 地址是 <a href=\"https://github.com/jedisct1/libsodium/\" target=\"_blank\" rel=\"noopener\">libsodium</a> ，编译安装的步骤如下：</p>\n<a id=\"more\"></a>\n<p>首先安装 build-essential 软件包，其作用是提供编译程序必须软件包的列表信息，也即是，编译程序有了这个软件包它才能确定头文件在哪，才知道库函数在哪，还会下载依赖的软件包，最后才组成一个开发环境。 安装命令是：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install build-essential</span><br></pre></td></tr></table></figure>\n<p>安装完成后，就是下载编译 libsodium 库了，首先你要去它的<a href=\"https://github.com/jedisct1/libsodium/releases\" target=\"_blank\" rel=\"noopener\">发布页</a>，确定当前最新的发布版本，替代我下面的当前的 VERSION 。主要命令如下：</p>\n<p>打开终端，首先定义两个变量，在命令行中输入：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">VERSION='1.0.15'</span><br><span class=\"line\">CPUNUM=`cat /proc/cpuinfo | grep 'processor' | wc -l`</span><br></pre></td></tr></table></figure>\n<p>然后回到当前根目录，下载及解压源码包：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~</span><br><span class=\"line\">wget -c \"https://github.com/jedisct1/libsodium/releases/download/$&#123;VERSION&#125;/libsodium-$&#123;VERSION&#125;.tar.gz\"  # 慢慢等</span><br><span class=\"line\">tar xzf libsodium-$&#123;VERSION&#125;.tar.gz</span><br></pre></td></tr></table></figure>\n<p>目录压栈，并进行编译安装，</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pushd libsodium-$&#123;VERSION&#125;</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make -j$&#123;CPUNUM&#125;</span><br><span class=\"line\">sudo make install</span><br><span class=\"line\">sudo ldconfig</span><br></pre></td></tr></table></figure>\n<p>出栈目录，并删除编译目录。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">popd</span><br><span class=\"line\">rm -rf libsodium-$&#123;VERSION&#125;*</span><br></pre></td></tr></table></figure>\n<p>关于 pushd，popd 等目录操作命令，具体可以参见 <a href=\"http://www.361way.com/pushd/1118.html\" target=\"_blank\" rel=\"noopener\">方便的目录切换——dirs、pushd、popd命令</a>。</p>\n<h2 id=\"编译-ssr-及基本配置\">编译 SSR 及基本配置</h2>\n<p>SSR 当前的 Python 版本的项目地址是 <a href=\"https://github.com/shadowsocksr-backup/shadowsocksr\" target=\"_blank\" rel=\"noopener\">shadowsocksr</a> 。</p>\n<p>首先安装 m2crypto，git，supervisor 等相关依赖软件包：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install m2crypto git supervisor libevent-dev</span><br></pre></td></tr></table></figure>\n<p>下载编译如下命令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone -b manyuser https://github.com/shadowsocksr-backup/shadowsocksr</span><br><span class=\"line\">cd ~/shadowsocksr</span><br><span class=\"line\">bash initcfg.sh</span><br></pre></td></tr></table></figure>\n<p>等待完成之后，编辑配置文件，在命令行输入：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo nano user-config.json</span><br></pre></td></tr></table></figure>\n<p>具体参数的意义及作用，参照 <a href=\"https://github.com/ssrbackup/shadowsocks-rss/wiki/config.json\" target=\"_blank\" rel=\"noopener\">config.json</a> 。</p>\n<p>local_address 和 local_port 不需要修改，其余的按照 Wiki 修改，基本上配置好： <figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server 填服务器地址</span><br><span class=\"line\">server_port 填服务器端口</span><br><span class=\"line\">password 密码</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">method</span> 加密方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">obfs</span> 混淆插件</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">protocol</span> 协议插件</span></span><br></pre></td></tr></table></figure></p>\n<p>等关键参数，具体看你的 SSR 服务端的设置。</p>\n<p>编辑好后，运行一下命令测试一下是否能运行</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python shadowsocks/local.py</span><br></pre></td></tr></table></figure>\n<p>没报错的话 Ctrl+C 结束继续下一步，如果有报错继续改配置文件。</p>\n<h2 id=\"协议转换代理\">协议转换代理</h2>\n<p>因为 SS 系的协议走的是 Socks5 协议，对于 Terminal 的 get,wget 等走 Http 协议的地方是无能为力的，所以需要转换成 Http 代理。 此时可以选择使用 <a href=\"https://github.com/darkk/redsocks\" target=\"_blank\" rel=\"noopener\">redsocks</a> 来实现。</p>\n<p>下载编译的命令如下:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~</span><br><span class=\"line\">git clone https://github.com/darkk/redsocks</span><br><span class=\"line\">pushd redsocks</span><br><span class=\"line\">make</span><br><span class=\"line\">cp redsocks.conf.example redsocks.conf</span><br><span class=\"line\">sed -i \"s/ip = example.org/ip = 127.0.0.1/\" redsocks.conf</span><br><span class=\"line\">popd</span><br></pre></td></tr></table></figure>\n<h2 id=\"ssr-开机自启\">SSR 开机自启</h2>\n<p>首先新建一个用户专门用来运行 SSR 和 redsocks 的账号：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo useradd -M -s /sbin/nologin ss</span><br></pre></td></tr></table></figure>\n<p>然后使用 supervisor 守护进程和开机自启，直接将下面的命令全部粘贴进入命令行回车即可。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo bash -c \"cat &gt; /etc/supervisor/conf.d/ss.conf\" &lt;&lt;EOF</span><br><span class=\"line\">[program:ss]</span><br><span class=\"line\">directory = /home/pi/shadowsocksr/shadowsocks</span><br><span class=\"line\">command = python /home/pi/shadowsocksr/shadowsocks/local.py</span><br><span class=\"line\">autostart = true</span><br><span class=\"line\">autorestart = true</span><br><span class=\"line\">startsecs = 10</span><br><span class=\"line\">startretries = 36</span><br><span class=\"line\">user = ss</span><br><span class=\"line\">redirect_stderr = true</span><br><span class=\"line\">stdout_logfile = /dev/null</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">sudo bash -c \"cat &gt; /etc/supervisor/conf.d/redsocks.conf\" &lt;&lt;EOF</span><br><span class=\"line\">[program:redsocks]</span><br><span class=\"line\">directory = /home/pi/redsocks</span><br><span class=\"line\">command = /home/pi/redsocks/redsocks -c /home/pi/redsocks/redsocks.conf</span><br><span class=\"line\">autostart = true</span><br><span class=\"line\">autorestart = true</span><br><span class=\"line\">startsecs = 10</span><br><span class=\"line\">startretries = 36</span><br><span class=\"line\">user = ss</span><br><span class=\"line\">redirect_stderr = true</span><br><span class=\"line\">stdout_logfile = /dev/null</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">sudo supervisorctl update</span><br></pre></td></tr></table></figure>\n<p>上面的配置把 log 全部扔掉了，如果有需要的可以自己改 stdout_logfile 项。</p>\n<h2 id=\"设置-iptables-实现-nat-转发\">设置 iptables 实现 nat 转发</h2>\n<p>主要步骤如下， 首先创建一个叫 REDSOCKS 的链</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo iptables -t nat -N REDSOCKS</span><br></pre></td></tr></table></figure>\n<p>然后进行基本的规则定制，首先忽略服务器的地址，下面的 server_ip 填服务器 ip 或域名，这里和 SSR 配置文件里的 server 值要一样</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo iptables -t nat -A REDSOCKS -d server_ip -j RETURN</span><br></pre></td></tr></table></figure>\n<p>然后忽略本地地址</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo iptables -t nat -A REDSOCKS -d 0.0.0.0/8 -j RETURN</span><br><span class=\"line\">sudo iptables -t nat -A REDSOCKS -d 10.0.0.0/8 -j RETURN</span><br><span class=\"line\">sudo iptables -t nat -A REDSOCKS -d 127.0.0.0/8 -j RETURN</span><br><span class=\"line\">sudo iptables -t nat -A REDSOCKS -d 169.254.0.0/16 -j RETURN</span><br><span class=\"line\">sudo iptables -t nat -A REDSOCKS -d 172.16.0.0/12 -j RETURN</span><br><span class=\"line\">sudo iptables -t nat -A REDSOCKS -d 192.168.0.0/16 -j RETURN</span><br><span class=\"line\">sudo iptables -t nat -A REDSOCKS -d 224.0.0.0/4 -j RETURN</span><br><span class=\"line\">sudo iptables -t nat -A REDSOCKS -d 240.0.0.0/4 -j RETURN</span><br></pre></td></tr></table></figure>\n<p>除了除上面之外的所有流量都转发到 socks 的本地端口：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo iptables -t nat -A REDSOCKS -p tcp -j REDIRECT --to-ports 12345</span><br></pre></td></tr></table></figure>\n<p>之后应用上面的规则,将 OUTPUT 出去的 tcp 流量全部经过 REDSOCKS 链</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo iptables -t nat -A OUTPUT -p tcp -j REDSOCKS</span><br></pre></td></tr></table></figure>\n<p>保存规则</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo bash -c \"iptables-save &gt; /etc/iptables.up.rules\"</span><br></pre></td></tr></table></figure>\n<h2 id=\"开机自动加载规则\">开机自动加载规则</h2>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo bash -c \"cat &gt; /etc/network/if-pre-up.d/iptables\" &lt;&lt;EOF</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">/sbin/iptables-restore &lt; /etc/iptables.up.rules</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n<p>添加执行权限</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod +x /etc/network/if-pre-up.d/iptables</span><br></pre></td></tr></table></figure>\n<p>使用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl myip.ipip.net</span><br></pre></td></tr></table></figure>\n<p>可以查看当前的ip，如果是你的服务器 IP 就表示可以了。 比如： <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15154976353553.jpg\"></p>\n<h2 id=\"关闭全局代理\">关闭全局代理</h2>\n<p>执行下面的命令</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 下面的server_ip填服务器ip或域名，和上面添加的值要一样</span></span><br><span class=\"line\">sudo iptables -t<span class=\"built_in\"> nat </span>-D REDSOCKS -d server_ip -j RETURN</span><br><span class=\"line\">sudo iptables -t<span class=\"built_in\"> nat </span>-D REDSOCKS -d 0.0.0.0/8 -j RETURN</span><br><span class=\"line\">sudo iptables -t<span class=\"built_in\"> nat </span>-D REDSOCKS -d 10.0.0.0/8 -j RETURN</span><br><span class=\"line\">sudo iptables -t<span class=\"built_in\"> nat </span>-D REDSOCKS -d 127.0.0.0/8 -j RETURN</span><br><span class=\"line\">sudo iptables -t<span class=\"built_in\"> nat </span>-D REDSOCKS -d 169.254.0.0/16 -j RETURN</span><br><span class=\"line\">sudo iptables -t<span class=\"built_in\"> nat </span>-D REDSOCKS -d 172.16.0.0/12 -j RETURN</span><br><span class=\"line\">sudo iptables -t<span class=\"built_in\"> nat </span>-D REDSOCKS -d 192.168.0.0/16 -j RETURN</span><br><span class=\"line\">sudo iptables -t<span class=\"built_in\"> nat </span>-D REDSOCKS -d 224.0.0.0/4 -j RETURN</span><br><span class=\"line\">sudo iptables -t<span class=\"built_in\"> nat </span>-D REDSOCKS -d 240.0.0.0/4 -j RETURN</span><br><span class=\"line\">sudo iptables -t<span class=\"built_in\"> nat </span>-D REDSOCKS -p tcp -j REDIRECT --to-ports 12345</span><br><span class=\"line\">sudo iptables -t<span class=\"built_in\"> nat </span>-D OUTPUT -p tcp -j REDSOCKS</span><br></pre></td></tr></table></figure>\n<h2 id=\"其他\">其他</h2>\n<p>更多关 iptables 的学习可以去 <a href=\"https://lesca.me/archives/iptables-nat-mangle-clear-rules.html\" target=\"_blank\" rel=\"noopener\">iptables应用：NAT、数据报处理、清空iptables规则</a></p>\n<h1 id=\"next\">NEXT</h1>\n<ol type=\"1\">\n<li>实现了科学上网之后，下一步就可以 Google Assistant 的安装和试用，把你的树莓派变身成为一个 Google Home</li>\n<li>接入 HomeKit，连入小米家具全家桶，让树莓派变身成为你的智能家居中枢。</li>\n</ol>\n","categories":["硬件"],"tags":["树莓派"]},{"title":"树莓派折腾指南之系统安装及设备点亮","url":"https://suool.net/2018/01/07/树莓派折腾指南之系统安装及设备点亮/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h1 id=\"树莓派折腾指南之系统安装及设备点亮\">树莓派折腾指南之系统安装及设备点亮</h1>\n<p>树莓派的系统安装方法有两种，一种是完全无头安装即不用网线，不用连接屏幕完成系统安装及设备正常点亮；一种是官方所提供的方式使用<code>NOOBS</code>辅助来安装。</p>\n<p>在我看来，直接无头安装是最快捷的，不需要额外的设备，不需要额外的系统，不需要那么多操作，也减少了出错的可能。所以，这里推荐大家直接使用屋无头安装的方式。 <a id=\"more\"></a></p>\n<h2 id=\"无头安装速成指南\">无头安装速成指南</h2>\n<p>所谓速成，是因为在30分钟以内你就能进入到自己的树莓派中一探其中的究竟了。</p>\n<h2 id=\"准备工作\">准备工作</h2>\n<p>所需设备及材料： 1. 树莓派 2. SD 卡（起码 8G 以上）</p>\n<p>当然还有计算机，以及一台正常工作的路由器。</p>\n<h2 id=\"系统安装\">系统安装</h2>\n<p>首先在你的计算机上前往官网选择需要下载的树莓派官方支持系统：<code>RASPBIAN</code> （当然还有一系列其他类型的系统也可在官网找到）。</p>\n<p>官方系统的下载地址是 <a href=\"https://www.raspberrypi.org/downloads/raspbian/\" target=\"_blank\" rel=\"noopener\">RASPBIAN</a> ,官方提供两种系统版本，一是 WITH DESKTOP 即配置了桌面 GUI 环境的操作系统，另一个是 LITE 版本无桌面的最小版本。</p>\n<p>目前的系统版本及相关内容如下： <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15153326797958.jpg\"></p>\n<p>这里可以根据你的需要选择，如果是新手，推荐选择桌面版本。</p>\n<p>下载好系统包之后，下一步就是将系统烧录进入 SD 卡内，可以选择使用官方推荐的系统烧录工具 <a href=\"https://etcher.io/\" target=\"_blank\" rel=\"noopener\">Etcher</a> ，点击上链接进入官网下载对应系统的版本即可，我这里使用的是 Mac 所以下载的 macOS 版本，下载完成之后安装并启动 Etcher。</p>\n<p>Etcher 的使用基本是傻瓜式的，如其在官网的动图所示，首先选择你刚刚下载的系统包，然后将你 SD 卡插入 USB 读卡器中，并将读卡器接入电脑，点击 <code>Select drive</code> 选择你插入的 USB 设备，点击 <code>Flash</code> 即进入烧录系统的过程了。 这个过程快慢取决于烧录速度，静静等待它烧录完成就行了。</p>\n<p><img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15153330485682.jpg\"></p>\n<p>烧录完成之后，仅仅是完成了系统安装的第一步。</p>\n<h2 id=\"启动系统前的基本配置\">启动系统前的基本配置</h2>\n<p>在烧录完成之后，需要重新挂载刚刚携带 SD 卡的 USB 设备，打开其中的 <code>boot</code> 分区（文件夹），做以下三步操作</p>\n<ol type=\"1\">\n<li>打开 <code>boot</code> 文件夹内 <code>config.txt</code> 文件，如果是桌面版本需要将 <code>#hdmi_safe=1</code> 取消注释，即去掉前面的 <code>#</code></li>\n<li>在 <code>config.txt</code> 同级目录下使用任一文本编辑器(UTF-8编码）新建一个名字是 <code>ssh</code> 的空白文件，无文件后缀名</li>\n<li>在 <code>config.txt</code> 同级目录下新建一个名为 <code>wpa_supplicant.conf</code> 的文件，内容如下：</li>\n</ol>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">country</span>=GB</span><br><span class=\"line\"><span class=\"attribute\">ctrl_interface</span>=DIR=/var/run/wpa_supplicant <span class=\"attribute\">GROUP</span>=netdev</span><br><span class=\"line\"><span class=\"attribute\">update_config</span>=1</span><br><span class=\"line\">network=&#123;</span><br><span class=\"line\">    <span class=\"attribute\">ssid</span>=<span class=\"string\">\"你的Wifi名称，最好不含中文\"</span></span><br><span class=\"line\">    <span class=\"attribute\">psk</span>=<span class=\"string\">\"你的Wifi密码\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>以上三步缺一不可。第一步是为了保证以后使用 HDMI 接入屏幕的时候有视频信号，第二步是为了能够使用 <code>ssh</code> 登录你的树莓派，第三步则保证你的树莓派一开机能够自动连接上你的路由器。</p>\n<p>现在就完成了系统安装，选择弹出你的 sd 卡设备，将其插入到树莓派中。</p>\n<p>系统启动后，上述刚刚新建的这两个文件都会被删除。如果你改了 Wifi 密码，还可以再做一次。</p>\n<h2 id=\"启动树莓派并ssh远程登录系统\">启动树莓派并SSH远程登录系统</h2>\n<p>将 SD 卡插入到树莓派后，将树莓派接通电源等待它自动开机，这里你可以使用 HDMI 线连接显示器以查看其启动结果，当然如果你有自信可以完全不用连接上显示器，直接使用 <code>ssh</code> 登录到树莓派内。</p>\n<p>那么如何确定树莓派是否连接上了路由器呢？可以根据其是否在路由器内分配了 IP 地址来确定，这里有两种方法： 1. 直接进入到路由器的管理中心，比如使用浏览器打开 <code>http://192.168.1.1</code> ，查看已连接的设备中是否有一个名为 <code>raspberrypi</code> 的设备，查看其分配的路由器 IP 地址 如下图： <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15153343484307.jpg\"> 2. 如果你的计算机是 <code>*nix</code> 设备，在终端使用 <code>arp -a</code> 命令，查看当前的路由中所有已连接的 IP 地址 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15153344267473.jpg\"></p>\n<p>找到了 IP 地址之后就可以使用 ssh 登陆到树莓派了，在 Mac 中使用终端即可，其步骤如下图 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15153347383609.jpg\"> 注意用户名是 <code>pi</code>，点击连接即可，这里可能需要你添加 key 到本地 <code>know_host</code> 中，输入 <code>yes</code> 即可。Windows 可以使用 <code>putty</code>，具体的操作这里不再赘述。</p>\n<p><strong>默认的 <code>pi</code> 用户的密码是 <code>raspberry</code>。</strong></p>\n<p>当然对于 macOS 或 linux 还有一种更加直接方便的 <code>ssh</code> 登陆方式，不需要 IP 地址，直接等树莓派通电启动之后，在终端内输入 <code>ssh pi@raspberrypi.local</code> 即可。 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15153349649992.jpg\"></p>\n<p>如果出现上界面即表示树莓派已经成功启动系统了。</p>\n<h2 id=\"使用-vnc-远程登录\">使用 VNC 远程登录</h2>\n<p>如果你安装的是带桌面版本的树莓派，可以使用 VNC 远程登录桌面环境而不必需要额外的 HDMI 设备线连接屏幕、额外的键鼠连接树莓派。</p>\n<p>如何使用 VNC 呢？</p>\n<p>首先在 ssh 登陆进入树莓派之后，先对系统进行基本的配置，第一个就是换源，因为国内网络环境导致从官方的地址来安装和更新软件及系统速度可能会非常慢，这里讲软件源换成国内的镜像源，比如阿里云的，其步骤如下：</p>\n<p>在 ssh 终端中输入 <code>sudo nano /etc/apt/sources.list</code> 可以直接删除原有的内容，也可以在前面加上 # 将其注释掉，然后在下面加入两行。 <figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deb <span class=\"symbol\">http:</span>/<span class=\"regexp\">/mirrors.aliyun.com/raspbian</span><span class=\"regexp\">/raspbian/</span> stretch main non-free contrib rpi</span><br><span class=\"line\">deb-src <span class=\"symbol\">http:</span>/<span class=\"regexp\">/mirrors.aliyun.com/raspbian</span><span class=\"regexp\">/raspbian/</span> stretch main non-free contrib rpi</span><br></pre></td></tr></table></figure></p>\n<p>然后输入 <code>sudo apt-get update</code> 更新软件索引清单， 输入 <code>sudo apt-get upgrade</code> 更新相关软件依赖。</p>\n<p>完成之后输入 <code>sudo apt-get install tightvncserver</code> 为树莓派安装 VNC 服务，安装完成之后输入 <code>tightvncserver</code>，这里会需要你输入 VNC 连接密码，确定输入即可，启动 VNC 服务。</p>\n<p>Mac 中，在文件夹 <code>Finder</code> 的菜单中，打开前往下的连接服务器，然后输入 <code>vnc://树莓派IP地址:5901</code> ,其中5901是默认的端口。 <img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/15153356804072.jpg\"> 点击连接，输入你刚刚确定的密码，即可完成连接，看到你的树莓派桌面环境。</p>\n<p>好了，这就是系统安装的基本过程，下一步是更深入的折腾的过程。</p>\n<ol type=\"1\">\n<li>使用 <code>SSR</code> 全局代理，让树莓派自由访问网络。</li>\n<li>使用树莓派接入 <code>Google Assistant</code>，实现一个树莓派版的 <code>Google Home</code>。</li>\n<li>使用树莓派接入有线音箱，将其变成无线音箱。</li>\n<li>将树莓派安装 <code>Homebridge</code>，使你的 iPhone 连接你的智能设备。</li>\n</ol>\n","categories":["硬件"],"tags":["树莓派"]},{"title":"云南五天四晚游","url":"https://suool.net/2016/12/28/云南五天四晚游/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h2 id=\"一些基本原则\">一些基本原则：</h2>\n<ol type=\"1\">\n<li><em>一定要防晒，不要问我为什么。</em></li>\n<li><em>不推荐在古城买东西，不管是丽江古城，还是束河古镇，还是大理古城，里面东西不保证真假，而且价格虚高。</em></li>\n<li><em>需要买东西可以直接去当地的超市或者批发市场，买东西都要杀价，觉得贵的直接对半砍价。</em></li>\n<li><em>当地的昼夜温差很大，白天可以穿少点，晚上回来晚的话一定要带多点衣服，不然要冻成狗。</em></li>\n<li><em>出行可以选择滴滴打车</em></li>\n</ol>\n<a id=\"more\"></a>\n<h2 id=\"液体随身乘机\">液体随身(乘机)</h2>\n<ol type=\"1\">\n<li>爽肤水</li>\n<li>防晒霜</li>\n<li>柔肤水</li>\n<li>护手霜</li>\n<li>隔离霜</li>\n<li>遮瑕霜</li>\n<li>洗面奶</li>\n<li>面霜</li>\n<li>洗头水</li>\n<li>沐浴露</li>\n<li>精华液</li>\n<li>身体乳</li>\n<li>卸妆水</li>\n</ol>\n<p>PS： 坐飞机的话，注意每种不能带超过一百毫升，最好买分装瓶，我们买的是四合一那种的，买四个（16小瓶）就足够了，以后还能循环利用，并且这个要放在外面，乘飞机的时候拿出来安检。</p>\n<h2 id=\"行程\">行程</h2>\n<p>初步规划7号下午下班后出发去广州, 在广州机场附近休息一下, 在12号凌晨4:00左右赶往机场候机. 计划于12号从丽江机场返回广州.</p>\n<p>中间的行程：</p>\n<ul>\n<li><em>8号安排</em></li>\n</ul>\n<p><code>早上9:30</code>飞机抵达到达丽江，预估10:30到达古城，去宾馆休息整顿之后。 下午和晚上可以逛一下古城及周边地区。 晚上<code>住在丽江</code></p>\n<p>PS：束河古镇，从北门进入不需要门票</p>\n<p>PPS： 丽江古城，晚上去比较好，而且晚上七点之后去不再需要门票。</p>\n<hr>\n<ul>\n<li><em>9号安排</em></li>\n</ul>\n<p><code>早上9点</code>出发去玉龙雪山<code>(一小时车程)</code> <code>上午10点到下午4点</code>游玩玉龙雪山。 <code>下午5点</code>回程丽江。 <code>晚上7点</code>出发去丽江火车站 <code>晚上8点</code>坐火车出发去大理<code>(两个小时车程)</code> <code>晚上10点</code>到大理 晚上<code>住在大理</code></p>\n<p>PS：强烈推荐直接<em>报纯玩的一日团</em>（我们包的一个人580，相对于自己组织和购买门票等费用没差多少），包车来回，提供羽绒服和氧气，中午还有顿本地农家饭，我们体验的感觉很不错。不建议自己坐大巴或者其他包车方式。</p>\n<p>PPS：关于登玉龙雪山 1. <em>氧气：</em>上雪山一定要备好氧气，学会如何使用氧气，有高原反应不能硬撑的，最好出发前几日就吃红景天，出发前一晚一定要休息好。 2. <em>药物：</em>最好备用感冒药、头痛药、止吐药如维生素B6，不然到时一旦高原反应，又吐有头痛，没有药会很难受。 3. <em>食物：</em>最好带点高热量的食物，比如巧克力，带点热水。 4. <em>莫急：</em>登山的时候千万不能过赶，高原氧气本来就稀薄，一旦运动过赶，会严重的缺氧头晕。</p>\n<hr>\n<ul>\n<li><em>10号安排</em></li>\n</ul>\n<p>10号一天在洱海游玩（洱海周边） 晚上<code>住在大理</code></p>\n<p>PS：推荐租小电驴，一天60块钱，可以骑车绕着环海西线或者东线转，去喜洲和海舌公园看日落与洱海的黄昏，非常值得一看。但是记得穿多点衣服，晚上的洱海旁边会非常非常非常的冷，海风也非常非常非常的大。如果条件允许，直接租一个小电车也是很不错的选择，不过预算可能需要多一点。</p>\n<p>PPS：推荐住洱海边的民宿，大理古城附近的青旅和客栈都是酒店那个样子，不如直接去 Airbnb 上找靠海边的民宿是最好的，一晚上100块左右。民宿非常有当地特色而且安静。</p>\n<hr>\n<ul>\n<li><em>11号安排</em></li>\n</ul>\n<p>离开洱海。 第一个推荐去的地方是<code>崇圣寺</code>，电视剧中经常出现的<code>大理国</code>很多镜头都是在这里，<code>三塔映月</code>及最大的佛教寺庙——<em>佛都</em>。 门票可以自己美团上定优惠票一个人88，官方价要121。 其次古城可以晚上去看，主要是买买买了。</p>\n<p>晚上<code>住在大理古城附近</code></p>\n<hr>\n<ul>\n<li><em>12号安排</em></li>\n</ul>\n<p><code>早上9:00</code>坐火车出发去丽江<code>(三个小时车程)</code> <code>下午1:00</code>拉市海游玩 <code>晚上9:00</code>到机场候机 <code>晚上11:10</code>飞机回广州</p>\n<p>PS：游玩拉市海可以直接报团，也可以自己找个车来回，自己去的时候选线路之后记得砍价，而且冬季的话，玩那个线路都没什么差别...山上差不多都没什么东西，就骑马转一圈。砍价的空间非常的大....</p>\n<p>PPS：买拉市海的票记得要求他包括划船的费用，去拉市海划船，看海鸟很不错。</p>\n<p>PPPS: 可以试一下那边的高山茶，很不错，买的时候也要杀价。对半砍都可以。</p>\n","categories":[],"tags":[]},{"title":"iOS 引导图组件使用文档","url":"https://suool.net/2016/12/05/iOS-引导图组件使用文档/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h1 id=\"ios-引导图组件使用文档\">iOS 引导图组件使用文档</h1>\n<h2 id=\"说明\">说明</h2>\n<h3 id=\"实际效果\">实际效果</h3>\n<ul>\n<li>引导图实际显示效果截图如下: <a id=\"more\"></a></li>\n</ul>\n<figure>\n<img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/2016120576244Simulator%20Screen%20Shot%20Dec%205,%202016,%209.43.40%20AM.png\" alt=\"引导图示例.png\"><figcaption>引导图示例.png</figcaption>\n</figure>\n<ul>\n<li>引导图的动态显示效果如下视频： <a href=\"https://appetize.io/embed/29xabc89e2u0j8uh3y0dkkk0yg?device=iphone5s&amp;scale=75&amp;orientation=portrait&amp;osVersion=9.3\" target=\"_blank\" rel=\"noopener\">引导图 Live Video</a></li>\n</ul>\n<h3 id=\"使用场景\">使用场景</h3>\n<p>当 APP 第一次安装启动或者大版本更新第一次启动的时候，运营有新的引导图介绍 APP 的重点功能或更新的，需要使用引导图完成。</p>\n<h3 id=\"基本介绍\">基本介绍</h3>\n<p>本引导图组件基于 <a href=\"https://github.com/squarezw/ZWIntroductionViewController\" target=\"_blank\" rel=\"noopener\">ZWIntroductionViewController</a>修改。</p>\n<p>只要设置引导图组件的 cover images ，初始化后将其加入到APPDelegate 的window即可， 对 APP 侵入性小，使用灵活。</p>\n<h2 id=\"使用文档\">使用文档</h2>\n<ul>\n<li>首先是滑动的需求： 在组件的<code>ZWIntroductionViewController</code>类中的<code>- (void)scrollViewDidScroll:(UIScrollView *)scrollView</code>方法中几行关键代码：</li>\n</ul>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 当滑动到最后一个的时候,禁止左滑动,只能通过点击按钮来去除引导图</span></span><br><span class=\"line\"><span class=\"built_in\">CGFloat</span> x = (_pageControl.numberOfPages<span class=\"number\">-1</span>) * YYScreenSize().width;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (scrollView.contentOffset.x&gt;x) &#123;</span><br><span class=\"line\">    [scrollView setContentOffset:<span class=\"built_in\">CGPointMake</span>(x, scrollView.contentOffset.y) animated:<span class=\"literal\">NO</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 第一个的时候不能右滑动</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (scrollView.contentOffset.x&lt;=<span class=\"number\">0.0</span>) &#123;</span><br><span class=\"line\">    [scrollView setContentOffset:<span class=\"built_in\">CGPointMake</span>(<span class=\"number\">0.0</span>, scrollView.contentOffset.y) animated:<span class=\"literal\">NO</span>];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>以上的代码是控制在引导图第一页的时候不能向右滑动，在最后一页的时候不能通过继续左滑结束引导，只能通过点击按钮进入 APP 中。 （如果没有以上需求，将代码注释即可。） * 其次是指示器颜色和进入按钮的需求： 如果对于<code>pageControl</code>的指示器颜色有特殊的需求，比如需要指示器的颜色及进入 APP 的按钮样式，需要修改<code>ZWIntroductionViewController</code>类中的<code>- (void)viewDidLoad</code>方法，指示器颜色修改具体的代码如下：</p>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">self</span>.pageControl.pageIndicatorTintColor = [<span class=\"built_in\">UIColor</span> grayColor];</span><br><span class=\"line\"><span class=\"keyword\">self</span>.pageControl.currentPageIndicatorTintColor = GlobalColor;</span><br></pre></td></tr></table></figure>\n<p>按钮相关的修改如下：</p>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"keyword\">self</span>.enterButton setTitle:<span class=\"built_in\">NSLocalizedString</span>(<span class=\"string\">@\"立即体验\"</span>, <span class=\"literal\">nil</span>) forState:<span class=\"built_in\">UIControlStateNormal</span>];</span><br><span class=\"line\">[<span class=\"keyword\">self</span>.enterButton setTitleColor:GlobalColor forState:<span class=\"built_in\">UIControlStateNormal</span>];</span><br><span class=\"line\"><span class=\"keyword\">self</span>.enterButton.layer.borderWidth = <span class=\"number\">1.0</span>;</span><br><span class=\"line\"><span class=\"keyword\">self</span>.enterButton.layer.cornerRadius = <span class=\"number\">20.0</span>;</span><br><span class=\"line\"><span class=\"keyword\">self</span>.enterButton.layer.borderColor = GlobalColor.CGColor;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>最后是使用的规范： 下面是一个使用示例：</li>\n</ul>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- (<span class=\"keyword\">void</span>)isFirstLaunch&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(![[<span class=\"built_in\">NSUserDefaults</span> standardUserDefaults] boolForKey:<span class=\"string\">@\"firstStart_V2\"</span>])&#123;</span><br><span class=\"line\">\t\t  <span class=\"comment\">// 如果是第一次启动，设置对应的版本标示</span></span><br><span class=\"line\">        [[LSUserDefaults sharedInstance]setNewVeisonCode:<span class=\"string\">@\"1\"</span>];</span><br><span class=\"line\">        [[<span class=\"built_in\">NSUserDefaults</span> standardUserDefaults] setBool:<span class=\"literal\">YES</span> forKey:<span class=\"string\">@\"firstStart_V2\"</span>];</span><br><span class=\"line\">\t\t  <span class=\"comment\">// 设置引导图的图片</span></span><br><span class=\"line\">        <span class=\"built_in\">NSArray</span> *coverImageNames = @[<span class=\"string\">@\"leadPage_1\"</span>, <span class=\"string\">@\"leadPage_2\"</span>, <span class=\"string\">@\"leadPage_3\"</span>,<span class=\"string\">@\"leadPage_4\"</span>];</span><br><span class=\"line\">\t\t  <span class=\"comment\">// 初始化引导图组件</span></span><br><span class=\"line\">        <span class=\"keyword\">self</span>.introductionView = [[ZWIntroductionViewController alloc] initWithCoverImageNames:coverImageNames backgroundImageNames:<span class=\"literal\">nil</span>];</span><br><span class=\"line\">\t\t  <span class=\"comment\">// 添加组件</span></span><br><span class=\"line\">        [<span class=\"keyword\">self</span>.window addSubview:<span class=\"keyword\">self</span>.introductionView.view];</span><br><span class=\"line\">        __<span class=\"keyword\">weak</span> AppDelegate *weakSelf = <span class=\"keyword\">self</span>;</span><br><span class=\"line\">\t\t  <span class=\"comment\">// 引导完成后的回调</span></span><br><span class=\"line\">        <span class=\"keyword\">self</span>.introductionView.didSelectedEnter = ^() &#123;</span><br><span class=\"line\">            [weakSelf.introductionView.view removeFromSuperview];</span><br><span class=\"line\">            weakSelf.introductionView = <span class=\"literal\">nil</span>;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>整个使用的过程如上代码所示。</p>\n<p><em>以上就是引导图组件的文档说明</em></p>\n","categories":["技术"],"tags":["iOS","组件文档"]},{"title":"iOS网络层说明","url":"https://suool.net/2016/11/30/iOS网络层说明/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h1 id=\"ios-网络层文档\">iOS 网络层文档</h1>\n<h2 id=\"说明\">说明</h2>\n<p>iOS 的网络层使用 <a href=\"https://github.com/yuantiku/YTKNetwork\" target=\"_blank\" rel=\"noopener\">YTKNetwork</a>作为网络层底层架构，在 <a href=\"https://github.com/yuantiku/YTKNetwork\" target=\"_blank\" rel=\"noopener\">YTKNetwork</a>的<code>YTKRequest</code>类和具体的业务请求层之间架设了一个中间业务类<code>LSBaseRequest</code>，所有具体的 API 请求都继承于此类。 <a id=\"more\"></a></p>\n<p>关于 <a href=\"https://github.com/yuantiku/YTKNetwork\" target=\"_blank\" rel=\"noopener\">YTKNetwork</a> &gt; YTKNetwork主要用于请求的发送及回调处理，YTKNetwork 的基本的思想是把每一个网络请求封装成对象。使用 YTKNetwork，每一个请求都需要继承 YTKRequest 类，通过覆盖父类的一些方法来构造指定的网络请求。</p>\n<p>这里为了避免我们具体业务类的相关回调逻辑与 YTKNetwork 耦合过高，所以封装了<code>LSBaseRequest</code>来处理请求回调的公共逻辑。</p>\n<p>下面来一一说明。</p>\n<h2 id=\"lsbaserequest-类的设计\">LSBaseRequest 类的设计</h2>\n<figure>\n<img src=\"http://7xjsv3.com1.z0.glb.clouddn.com/2016113096998iOS%20Network.png\" alt=\"iOS Network.png\"><figcaption>iOS Network.png</figcaption>\n</figure>\n<p>继承关系及中间层的 <code>BaseRequest</code> 的设计如上图所示。</p>\n<h3 id=\"基本的原理和字段说明\">基本的原理和字段说明：</h3>\n<p>首先一个请求的回调都是直接一个 JSON 的字符串，网络层的底层可以将这个字符串转化为<code>NSDictionary</code>类型的数据，这个是请求回调的第一次处理得到的数据。处理的具体过程如下：</p>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 此处是在网络请求完成的回调方法内拿到responseString的回调字符串的处理</span></span><br><span class=\"line\"><span class=\"built_in\">NSData</span> *data = [<span class=\"keyword\">self</span>.responseString dataUsingEncoding:<span class=\"built_in\">NSUTF8StringEncoding</span>];</span><br><span class=\"line\"><span class=\"keyword\">if</span> (data) &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">NSMutableDictionary</span> *dictionary = [<span class=\"built_in\">NSJSONSerialization</span> JSONObjectWithData:data options:<span class=\"built_in\">NSJSONReadingMutableContainers</span> error:<span class=\"literal\">nil</span>];</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">  DDLogError(<span class=\"string\">@\"返回内容为空.\"</span>);</span><br><span class=\"line\">  <span class=\"comment\">// ... </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>所以，如果 API 的请求没有特殊的要求，可能直接拿到这个 <code>data</code>数据来提供给 ViewController 使用。</p>\n<p>但是，一般的请求并不会简单的直接要求<code>NSMutableDictionary</code>的 <code>data</code>数据，ViewController 希望能够直接拿到其需要的数据类型。而展示数据一般也只需要两种类型，分别是展示一个列表数据和展示一个实体模型的数据。所以业务请求 API 能够自己处理回调数据的“深加工”是View 和 ViewController希望看到的。因此，这里直接给 <code>BaseRequest</code>添加了两个属性，分别是泛型的回调列表数据和泛型的实体模型数据，而<code>NSDictionary</code>类型的<code>resultDic</code>属性是第一次处理的结果。</p>\n<p>根据以上的需求，具体的业务请求的 API 都会具有三种附加的状态属性，分别是该请求是否需要登录，该请求是否需要一个列表的回调数据，该请求是否需要一个实体模型的回调数据。在初始化具体的 API 请求的时候就会对这三个属性进行初始化。</p>\n<p>具体的对应数属性是：</p>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@property</span> (<span class=\"keyword\">nonatomic</span>, <span class=\"keyword\">assign</span>) <span class=\"built_in\">BOOL</span> isLogin;  <span class=\"comment\">// 是否需登录</span></span><br><span class=\"line\"><span class=\"keyword\">@property</span> (<span class=\"keyword\">nonatomic</span>, <span class=\"keyword\">assign</span>) <span class=\"built_in\">BOOL</span> isRetAry; <span class=\"comment\">// 是否需要返回数组</span></span><br><span class=\"line\"><span class=\"keyword\">@property</span> (<span class=\"keyword\">nonatomic</span>, <span class=\"keyword\">assign</span>) <span class=\"built_in\">BOOL</span> isRetObj; <span class=\"comment\">// 是否需要返回实体 model</span></span><br></pre></td></tr></table></figure>\n<p>所以<code>BaseRequest</code>的对外暴露的方法也只有三个，此处甚至可以减少到两个，即是所有的 API 请求自己处理自己的初始化，而不是像上面的使用中间类的初始化方法。</p>\n<p>而 API 的初始化方法中，需要传入该 API 请求需要的参数及其相关的状态属性。请求参数会根据请求的登录状态属性来决定是否添加<code>AccessToken 参数</code>。</p>\n<p>在具体的发送 API 请求的时候，会根据以上三个状态属性来确定如何发送请求，具体的处理逻辑如下：</p>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- (<span class=\"keyword\">void</span>)startRequest&#123;</span><br><span class=\"line\">    sendCount ++; <span class=\"comment\">// 请求重发的次数</span></span><br><span class=\"line\">    <span class=\"built_in\">BOOL</span> isOnline = [[LSUserDefaults sharedInstance] isOnLine];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (_isLogin &amp;&amp; isOnline) &#123;  <span class=\"comment\">// 需要登录且目前用户已经登录</span></span><br><span class=\"line\">        [<span class=\"keyword\">self</span> start];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(_isLogin &amp;&amp; !isOnline) &#123; <span class=\"comment\">// 需要登录但目前用户并没有登录</span></span><br><span class=\"line\">        <span class=\"keyword\">self</span>.failure(@&#123;<span class=\"string\">@\"code\"</span> : NoLogin&#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!_isLogin) &#123;         <span class=\"comment\">// 不需要登录，直接登录</span></span><br><span class=\"line\">        [<span class=\"keyword\">self</span> start];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>请求完成之后的公共逻辑处理在<code>requestCompleteFilter</code>和<code>requestFailedFilter</code>回调方法中实现，这两个回调方法是 YTKNetwork 中暴露出来给请求结果回调处理使用的。</p>\n<p>而一旦请求发送成功，获得回调数据之后，回调数据统一处理逻辑会根据 API 初始化携带的状态来加工回调数据，具体如下：</p>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- (<span class=\"keyword\">void</span>)requestCompleteFilter&#123;</span><br><span class=\"line\">    <span class=\"built_in\">NSData</span> *data = [<span class=\"keyword\">self</span>.responseString dataUsingEncoding:<span class=\"built_in\">NSUTF8StringEncoding</span>];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data) &#123;</span><br><span class=\"line\">\t\t  <span class=\"comment\">// 初次加工数据</span></span><br><span class=\"line\">        <span class=\"built_in\">NSMutableDictionary</span> *dictionary = [<span class=\"built_in\">NSJSONSerialization</span> JSONObjectWithData:data options:<span class=\"built_in\">NSJSONReadingMutableContainers</span> error:<span class=\"literal\">nil</span>];</span><br><span class=\"line\">        <span class=\"built_in\">NSEnumerator</span> *enumerator = [dictionary keyEnumerator];</span><br><span class=\"line\">        <span class=\"built_in\">NSString</span> *key = <span class=\"string\">@\"code\"</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> code = [dictionary[key] intValue];</span><br><span class=\"line\">        <span class=\"built_in\">BOOL</span> isExist = <span class=\"literal\">NO</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> ((key = [enumerator nextObject])) &#123;</span><br><span class=\"line\">            isExist = <span class=\"literal\">YES</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isExist) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">switch</span> (code) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">200</span>:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (_isRetAry) &#123; <span class=\"comment\">// 如果要求返回的是数组，则在具体的 API 中再次深加工数据，并将加工之后的数据回调</span></span><br><span class=\"line\">                        <span class=\"keyword\">self</span>.successArray(<span class=\"keyword\">self</span>.resultData);</span><br><span class=\"line\">                    &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(_isRetObj) <span class=\"comment\">// 如果要求返回的是实体，则在具体的 API 中再次深加工数据，并将加工之后的数据回调</span></span><br><span class=\"line\">                        <span class=\"keyword\">self</span>.successObject(<span class=\"keyword\">self</span>.model);</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> <span class=\"comment\">// 如果要求返回没有额外的要求，则在数据回调中直接将初加工数据回调</span></span><br><span class=\"line\">                        <span class=\"keyword\">self</span>.success(dictionary);</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t\t\t  <span class=\"comment\">// 请求成功但是获取的不是预期的成功数据</span></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">801</span>:&#123;</span><br><span class=\"line\">                    <span class=\"comment\">// 访问令牌失效，重新获取</span></span><br><span class=\"line\">                    [<span class=\"keyword\">self</span> requestTokenWithRetArray:_isRetAry retObj:_isRetObj];</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">802</span>:</span><br><span class=\"line\">                    [[PMStore store] removeUserDataAndLogOff];</span><br><span class=\"line\">                    <span class=\"keyword\">self</span>.failure(dictionary);</span><br><span class=\"line\">\t\t\t\t  <span class=\"comment\">// 其他情况</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">self</span>.failure(@&#123;<span class=\"string\">@\"msg\"</span> : <span class=\"string\">@\"服务暂时不可用，请稍后重试\"</span>&#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t  <span class=\"comment\">// 请求成功但是没有获取到数据</span></span><br><span class=\"line\">        DDLogWarn(<span class=\"string\">@\"self.success(nil)\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">self</span>.failure(@&#123;<span class=\"string\">@\"msg\"</span> : <span class=\"string\">@\"服务暂时不可用，请稍后重试\"</span>&#125;);;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>具体的深加工过程，在具体的 API 类中再做介绍。</p>\n<p>请求发送失败的公共处理逻辑：</p>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- (<span class=\"keyword\">void</span>)requestFailedFilter &#123;</span><br><span class=\"line\">    <span class=\"built_in\">NSData</span> *data = [<span class=\"keyword\">self</span>.responseString dataUsingEncoding:<span class=\"built_in\">NSUTF8StringEncoding</span>];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">NSMutableDictionary</span> *dictionary = [<span class=\"built_in\">NSJSONSerialization</span> JSONObjectWithData:data options:<span class=\"built_in\">NSJSONReadingMutableContainers</span> error:<span class=\"literal\">nil</span>];</span><br><span class=\"line\">        <span class=\"keyword\">self</span>.failure(dictionary);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        DDLogError(<span class=\"string\">@\"返回内容为空.\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">self</span>.failure(@&#123;<span class=\"string\">@\"msg\"</span> : <span class=\"string\">@\"服务暂时不可用，请稍后重试\"</span>&#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>此处在请求成功发送并获取回调之后，会出现一种特殊的情况（上面 Code 为801 的情况）：如果该请求需要登录状态，即是会携带<code>AccessToken</code>来发送请求，但是请求的结果是服务端提示<code>AccessToken</code>过期，此时不能立即回调该结果给 API 的调用者，而是要发送一个<code>LSServerTokenAPI</code>请求来尝试跟服务端请求换取新的<code>AccessToken</code>，如果服务端成功的返回了新的<code>AccessToken</code>，则应该让该请求重新携带新的<code>AccessToken</code>重发请求数据。如果没有获取到新的<code>AccessToken</code>，则此时应该失败回调给调用者，告诉调用者该用户已经掉线，需要重新登录才能继续请求。 此处的具体处理逻辑代码如下：</p>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- (<span class=\"keyword\">void</span>)requestTokenWithRetArray:(<span class=\"built_in\">BOOL</span>)isAry retObj:(<span class=\"built_in\">BOOL</span>)isObj&#123;</span><br><span class=\"line\">    <span class=\"built_in\">NSMutableDictionary</span> *requrestDic = [<span class=\"built_in\">NSMutableDictionary</span> dictionaryWithDictionary:<span class=\"keyword\">self</span>.requestArgument];</span><br><span class=\"line\">    <span class=\"comment\">// accessToken 过期</span></span><br><span class=\"line\">    LSServerTokenAPI *accessAPI = [[LSServerTokenAPI alloc]init];</span><br><span class=\"line\">    [accessAPI startWithCompletionBlockWithSuccess:^(YTKBaseRequest *request) &#123;   <span class=\"comment\">// 此处是直接使用的 YTKRequest 的回调方法</span></span><br><span class=\"line\">        <span class=\"comment\">// you can use self here, retain cycle won't happen</span></span><br><span class=\"line\">        <span class=\"built_in\">NSLog</span>(<span class=\"string\">@\"succeed\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">NSData</span> *data = [request.responseString dataUsingEncoding:<span class=\"built_in\">NSUTF8StringEncoding</span>];</span><br><span class=\"line\">        <span class=\"built_in\">NSMutableDictionary</span> *dictionary = [<span class=\"built_in\">NSJSONSerialization</span> JSONObjectWithData:data options:<span class=\"built_in\">NSJSONReadingMutableContainers</span> error:<span class=\"literal\">nil</span>];</span><br><span class=\"line\">        <span class=\"built_in\">NSDictionary</span> *dic = (<span class=\"built_in\">NSDictionary</span> *)dictionary[<span class=\"string\">@\"data\"</span>][<span class=\"string\">@\"result\"</span>];</span><br><span class=\"line\">        HNUserModel *user = [HNUserModel mj_objectWithKeyValues:dic];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (user.accessToken) &#123;   <span class=\"comment\">// 如果换取到新的 Token</span></span><br><span class=\"line\">            [[PMStore store]saveDataWithUserInfo:user];</span><br><span class=\"line\">            requrestDic[<span class=\"string\">@\"accessToken\"</span>] = user.accessToken;</span><br><span class=\"line\">            <span class=\"keyword\">self</span>.baseRequestArgument = requrestDic;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (sendCount &gt; <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">self</span>.failure(@&#123;<span class=\"string\">@\"msg\"</span> : <span class=\"string\">@\"重发系统错误，请稍后重试\"</span>&#125;);  <span class=\"comment\">// 重发最多三次，多余三次的直接回调失败</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">               [<span class=\"keyword\">self</span> startRequest];  <span class=\"comment\">// 重发该请求</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            [[PMStore store] removeUserDataAndLogOff];</span><br><span class=\"line\">            <span class=\"keyword\">self</span>.failure(@&#123;<span class=\"string\">@\"code\"</span> : NoLogin&#125;);  <span class=\"comment\">// 没有获取到新的 Token，回调数据登录失效</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; failure:^(YTKBaseRequest *request) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// you can use self here, retain cycle won't happen</span></span><br><span class=\"line\">        <span class=\"built_in\">NSLog</span>(<span class=\"string\">@\"failed\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">NSData</span> *data = [request.responseString dataUsingEncoding:<span class=\"built_in\">NSUTF8StringEncoding</span>];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (data) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">NSMutableDictionary</span> *dictionary = [<span class=\"built_in\">NSJSONSerialization</span> JSONObjectWithData:data options:<span class=\"built_in\">NSJSONReadingMutableContainers</span> error:<span class=\"literal\">nil</span>];</span><br><span class=\"line\">            DDLogError(<span class=\"string\">@\"发送请求更新 accessToken 失败，返回内容：\\n%@\"</span>,dictionary);</span><br><span class=\"line\">            <span class=\"keyword\">self</span>.failure(dictionary);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">self</span>.failure(@&#123;<span class=\"string\">@\"msg\"</span> : <span class=\"string\">@\"刷新 Token 系统错误，请稍后重试\"</span>&#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这里需要注意的是为了避免无限的循环调用，<code>LSServerTokenAPI</code>本身不是<code>LSBaseRequest</code>类型的，而是和<code>LSBaseRequest</code>一样都是直接继承自<code>YTKRequest</code>的，因此此处的<code>LSServerTokenAPI</code>请求的回调不会再次经过<code>LSBaseRequest</code> 在<code>requestCompleteFilter</code>和<code>requestFailedFilter</code>回调方法中的公共逻辑，而是直接调用的<code>startWithCompletionBlockWithSuccess:(YTKRequestCompletionBlock)success failure:(YTKRequestCompletionBlock)failure</code>方法处理数据回调数据。</p>\n<h2 id=\"operationapi-类的设计\">operationAPI 类的设计</h2>\n<p>具体的业务类非常的简单，因此非常多的回调处理逻辑都在<code>LSBaseRequest</code>内部完成处理了。 如果需要创建一个新的业务请求 API，只要创建一个继承自<code>LSBaseRequest</code>的 API 类，在类的头文件声明中，除特殊情况外，不需要做任何的处理，比如一个典型的请求个人信息的 API 接口声明如下：</p>\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">@interface</span> <span class=\"attribute\">HNUserInfoAPI </span>: LSBaseRequest</span><br><span class=\"line\"><span class=\"comment\">// 此处一般不需要声明任何额外的属性和方法</span></span><br><span class=\"line\"><span class=\"variable\">@end</span></span><br></pre></td></tr></table></figure>\n<p>而具体业务的 API 实现，也只需要配置该 API 的 URL，API 的请求方式即可。 ### 额外的数据逻辑处理需求 如果该 API 请求对于回调数据有特殊的加工需求：</p>\n<ul>\n<li>需要一个列表数据，则会增加下面这些处理逻辑，实现<code>LSBaseRequest</code>的<code>resultData</code>的获取方法 ，比如请求交易记录的 API ：</li>\n</ul>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 此处是实现LSBaseRequest的属性</span></span><br><span class=\"line\">- (<span class=\"built_in\">NSArray</span> *)resultData&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> [<span class=\"keyword\">self</span> handleData:<span class=\"keyword\">self</span>.resultDic];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 对请求的回调数据进行深加工，JSON 转列表</span></span><br><span class=\"line\">- (<span class=\"built_in\">NSArray</span> *)handleData:(<span class=\"built_in\">NSDictionary</span> *)dictionary&#123;</span><br><span class=\"line\">    <span class=\"built_in\">NSMutableArray</span> *resultArray = [<span class=\"built_in\">NSMutableArray</span> new];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ([dictionary count]) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">NSDictionary</span> *resultDic = (<span class=\"built_in\">NSDictionary</span> *)[[dictionary objectForKey:<span class=\"string\">@\"data\"</span>] objectForKey:<span class=\"string\">@\"result\"</span>];</span><br><span class=\"line\">        [resultArray addObjectsFromArray:[HNTradeRecordModel mj_objectArrayWithKeyValuesArray:resultDic]];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> resultArray;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>需要一个模型数据，则会增加下面这些处理逻辑， 实现<code>LSBaseRequest</code>的<code>model</code>的获取方法 ，比如请求个人信息的 API ：</li>\n</ul>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- (id)model&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> [self <span class=\"string\">handleData:</span>self.resultDic];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 对请求的数据进行深加工，JSON 转模型</span></span><br><span class=\"line\">- (HNUserModel *)<span class=\"string\">handleData:</span>(NSDictionary *)dictionary&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ([dictionary count]) &#123;</span><br><span class=\"line\">        [[PMStore store]<span class=\"string\">handleUserDictionary:</span>dictionary <span class=\"string\">resiterJpush:</span>NO];</span><br><span class=\"line\">        NSDictionary *dic = [[dictionary <span class=\"string\">objectForKey:</span>@<span class=\"string\">\"data\"</span>] <span class=\"string\">objectForKey:</span>@<span class=\"string\">\"result\"</span>];</span><br><span class=\"line\">        HNUserModel *model = [HNUserModel <span class=\"string\">mj_objectWithKeyValues:</span>dic];</span><br><span class=\"line\">        <span class=\"keyword\">return</span> model;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> NULL;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>如果没有额外的数据需求，则上面这些逻辑都不需要。</li>\n</ul>\n<h2 id=\"具体业务流程说明\">具体业务流程说明：</h2>\n<p>如果需要新增一个新的业务请求类： 1. 新建一个新的基于<code>LSBaseRequest</code>类 2. 完成 API 类的基本配置，包括 URL 和请求方式的配置 3. 如果 该 API 类有更多的数据处理需求，按照上面所写的方式来处理</p>\n<p>在 ViewController 或者 View 中初始化 API，一个实例如下：</p>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- (<span class=\"keyword\">void</span>)loadDataFromService&#123;</span><br><span class=\"line\">    <span class=\"comment\">// API 请求的参数</span></span><br><span class=\"line\">    <span class=\"built_in\">NSMutableDictionary</span> *dic = [[<span class=\"built_in\">NSMutableDictionary</span> alloc]initWithDictionary:@&#123;<span class=\"string\">@\"offset\"</span>:<span class=\"keyword\">self</span>.offset,</span><br><span class=\"line\">                                                                                <span class=\"string\">@\"limit\"</span>:<span class=\"string\">@\"10\"</span>&#125;];</span><br><span class=\"line\">\t  <span class=\"comment\">// 初始化 API 请求，传入需要的参数及状态信息</span></span><br><span class=\"line\">    HNInquiryListAPI *request = [[HNInquiryListAPI alloc]initWithArgumentValueDictionary:dic isLogin:<span class=\"literal\">YES</span> isRetAry:<span class=\"literal\">YES</span> isRetObj:<span class=\"literal\">NO</span>];</span><br><span class=\"line\">    [request setSuccessArray:^(<span class=\"built_in\">NSArray</span> *resultData) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 初始化的要求 API 能够对回调数据进行深加工——返回列表，所以这里直接设置列表的 block 回调处理逻辑。</span></span><br><span class=\"line\">    &#125;];</span><br><span class=\"line\">    [request setFailure:^(<span class=\"built_in\">NSDictionary</span> *dictionary) &#123;</span><br><span class=\"line\">\t\t  <span class=\"comment\">// 请求失败的回调</span></span><br><span class=\"line\">    &#125;];</span><br><span class=\"line\">    [request startRequest];  <span class=\"comment\">// 发送请求</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>以上就是完整的网络层架构的说明及具体业务处理的流程。</p>\n<h2 id=\"其他说明图片及文件上传请求\">其他说明——图片及文件上传请求</h2>\n<p>上传图片的 API 不同于其他的业务处理 API，它不需要处理一堆的业务逻辑，而且目前也不需要登录等状态，因此网络层将上传图片的 API 直接独立了出来，直接继承与<code>YTKRequest</code>。目前的图片 API 如下，已经封装完成，图片微服务不做大的重构，此 API 也不需要做修改：</p>\n<p>声明：</p>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#import <span class=\"meta-string\">&lt;YTKRequest.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">@interface</span> <span class=\"title\">HNUploadImageApi</span> : <span class=\"title\">YTKRequest</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">- (<span class=\"keyword\">id</span>)initWithImage:(<span class=\"built_in\">NSArray</span> *)image;  <span class=\"comment\">// 需要上传的图片文件数组</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@property</span> (<span class=\"keyword\">nonatomic</span>, <span class=\"keyword\">strong</span>) <span class=\"keyword\">id</span> baseRequestArgument;  <span class=\"comment\">// 请求的参数</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@end</span></span><br></pre></td></tr></table></figure>\n<p>实现部分</p>\n<figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#import <span class=\"meta-string\">\"HNUploadImageApi.h\"</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">@implementation</span> <span class=\"title\">HNUploadImageApi</span></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">NSArray</span> *_image;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">- (<span class=\"keyword\">id</span>)initWithImage:(<span class=\"built_in\">NSArray</span> *)image &#123;</span><br><span class=\"line\">    <span class=\"keyword\">self</span> = [<span class=\"keyword\">super</span> init];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">self</span>) &#123;</span><br><span class=\"line\">        _image = image;  <span class=\"comment\">// 初始化图片数组的属性</span></span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">self</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">- (YTKRequestMethod)requestMethod &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> YTKRequestMethodPOST;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 构建请求参数</span></span><br><span class=\"line\">- (<span class=\"keyword\">void</span>)setBaseRequestArgument:(<span class=\"keyword\">id</span>)baseRequestArgument&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (baseRequestArgument) &#123;</span><br><span class=\"line\">        _baseRequestArgument = baseRequestArgument;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">- (<span class=\"keyword\">id</span>)requestArgument &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (_baseRequestArgument) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> _baseRequestArgument;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">nil</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">- (<span class=\"built_in\">NSString</span> *)requestUrl &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UploadImageAPI;  <span class=\"comment\">// 上传 URL 地址</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 请求的 body 的构造</span></span><br><span class=\"line\">- (AFConstructingBlock)constructingBodyBlock &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ^(<span class=\"keyword\">id</span>&lt;AFMultipartFormData&gt; formData) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i &lt; _image.count; i++)&#123;</span><br><span class=\"line\">            <span class=\"built_in\">NSData</span> *data = <span class=\"built_in\">UIImageJPEGRepresentation</span>(_image[i], <span class=\"number\">0.5</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ((<span class=\"keyword\">float</span>)data.length/<span class=\"number\">1024</span> &gt; <span class=\"number\">1000</span>) &#123;</span><br><span class=\"line\">                data = <span class=\"built_in\">UIImageJPEGRepresentation</span>(_image[i], <span class=\"number\">1024</span>*<span class=\"number\">1000.0</span>/(<span class=\"keyword\">float</span>)data.length);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">NSString</span> *name = [<span class=\"built_in\">NSString</span> stringWithFormat:<span class=\"string\">@\"image%d.png\"</span>,i];</span><br><span class=\"line\">            <span class=\"built_in\">NSString</span> *type = <span class=\"string\">@\"image/jpeg\"</span>;</span><br><span class=\"line\">            [formData appendPartWithFileData:data name:<span class=\"string\">@\"image\"</span> fileName:name mimeType:type];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@end</span></span><br></pre></td></tr></table></figure>\n<p>具体构建及发送请求的流程如下，以上传头像为例：</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HNUploadImageApi *api = [[HNUploadImageApi alloc] <span class=\"string\">initWithImage:</span>@[scaleImage]]; <span class=\"comment\">// 初始化请求，并传递需要上传的图片数组</span></span><br><span class=\"line\">api.baseRequestArgument = @&#123;@<span class=\"string\">\"type\"</span>:@<span class=\"string\">\"0\"</span>&#125;;   <span class=\"comment\">// 构造请求的参数</span></span><br><span class=\"line\">[api <span class=\"string\">startWithCompletionBlockWithSuccess:</span>^(YTKBaseRequest *request)&#123;</span><br><span class=\"line\">    NSData *data = [request.responseString <span class=\"string\">dataUsingEncoding:</span>NSUTF8StringEncoding];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data) &#123;</span><br><span class=\"line\">        NSMutableDictionary *dic = [NSJSONSerialization <span class=\"string\">JSONObjectWithData:</span>data <span class=\"string\">options:</span>NSJSONReadingMutableContainers <span class=\"string\">error:</span>nil];</span><br><span class=\"line\">\t\t  <span class=\"comment\">// 初次处理上传成功后的数据回调</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; <span class=\"string\">failure:</span>^(YTKBaseRequest *request)&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 上传失败后是回调</span></span><br><span class=\"line\">&#125;];</span><br></pre></td></tr></table></figure>\n","categories":["技术"],"tags":["iOS","组件文档"]},{"title":"无题","url":"https://suool.net/2016/10/27/无题/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><p>不知道到底该取什么样的题目了, 就像打的标签一样, 想写的东西有点多, 取什么名字都有点不合适.</p>\n<p>马克思说,人和动物的根本区别在于能够制造和利用工具. 确实是这样, 但是真正使得人类进步的却应该是mistake, 是不断的犯错, 不断的改正和积累, 才能不断的进化, 才成为人. <a id=\"more\"></a></p>\n<h2 id=\"关于循环\">关于循环</h2>\n<p>可能是工作的原因, 对于无限循环这样的事情是有些恐惧的, 无限循环意味着你所做的的东西不能正常的结束, 同时对我而言陷入到无限的循环当中是一件非常恐怖的事情, 你无法决定自己什么时候能够真正走到正确的道路上, 也不知道何时能够选择正确的方向.</p>\n<p>但是另一方面, 几年前读到的一本书, 里面说到这样的一段话: &gt; 我们都在for循环，区别在于你是什么情况下break;的。有的人退出阈值高，这是能坚持的一类人，有的人退出阈值低，这类人很可能遇到一些障碍就退出了。过早退出的原因往往在于对于未来的不确定性，对于投资时间最终无法收到回报的恐惧，感受到的困难越大，这种恐惧越大，因为越大的困难往往暗示着这个任务需要投资的时间越大。所以其实我们都是直觉经济学家，当我们说“畏难”的时候，其实我们畏惧的不是困难本身，而是困难所暗示的时间经济学意义。</p>\n<blockquote>\n<p>模仿高德纳先生的名言：过早退出是一切失败的根源。</p>\n</blockquote>\n<p>所以, 关于循环的思考到这里就出现了一些问题.</p>\n<p>显然, 我需要纠正我对于循环的态度, 我得承认我现在对循环的态度和选择是错误的, 害怕循环其实根本上来说是自己不够自信, 不相信自己能够掌控循环的节奏和走向.</p>\n<p>同时, 需要结合的一点是, 所有的事情都是和人关联在一起的. 所有的事情也不是孤立存在的, 都是有关联的.</p>\n<p>所以, 对待事情的态度其实就对人的态度, 当选择解决问题的方式的时候, 要先思考一下这个问题对应的人是谁, 对应的位置在哪里, 对应的态度应该是什么, 最终的方式也就确定了.</p>\n<p>而所谓循环也只是上面&quot;事情&quot;的一种特殊情况, 既然选择了这样的位置, 就要用对应的态度去面对, 不要急于顺着自己一时的反应的走, 要真正的成长就要真正的去思考.</p>\n<h2 id=\"关于希望\">关于希望</h2>\n<p>总是不断的有新的希望产生和旧的希望破灭, 也总有一些希望成为了现实, 这样才能不断向前走.</p>\n<p>所谓的希望也都是面向未来的, 每个希望都是自己对未来的路的一种认识. 所以, 我说生活中充满了失望和绝望也挺好的, 起码可以消除很多自己给自己的不必要的期望和羁绊, 让脚下的路更加真实, 也让自己对未来的认识更加清晰.</p>\n<p>所以, 希望本来就是一个不确定的事情, 没有成为现实也是一个完全可以理解的事情, 生活就是这样的残酷, 不能拿着自己的标准去要求所有人都按照你的方式来.</p>\n<p>只需要记住, 概率上的事情, 失败是很显然和正常的.</p>\n<p>只能说, 很可惜, 自己欠缺了一些思考, 没有能够选择一个正确的方式去面对, 徒劳后悔也是没用的事情.</p>\n<p>不能说&quot;如果&quot;, 生活是不存在如果的. 做错了一件事就是做错了, 是不能抱着&quot;挽回&quot;这样的期望的, 这样的期望是妄想.</p>\n<p>这个时候唯一的能抱有的希望也稚只能是, 希望生活再给你一次机会, 自己能够选择一个&quot;正确而合适&quot;的方式解决问题, 这也是人一直会变的原因, 也是使人进步的原因.</p>\n<p>所以, 用发展的眼光看未来, 用不断变化的观念去看待一个人.</p>\n<h2 id=\"关于未来\">关于未来</h2>\n<p>多读书, 多思考.</p>\n<p>不要急于做决定, 不要急于判断一个人, 一件事情.</p>\n<p>要知道生活是没有&quot;如果&quot;的, 那么急做什么呢.</p>\n<p>未来还是有很多希望的.</p>\n","categories":["思考"],"tags":["希望","未来","循环"]},{"title":"踏过所有的过往","url":"https://suool.net/2016/10/02/踏过所有的过往/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><p>睡到凌晨被噩梦惊醒。 <a id=\"more\"></a></p>\n<p>这些日子又何曾不像处在梦魇，只是自己不愿醒来，不想对过去说再见。一直想着如果有假如那又会是怎样的一副光景，不敢去接受其实只有自己停留在过去的事实。所谓贱人就是矫情，没想过只要自己用心改变，未来不需要假如也能很好，何苦一直留恋从前呢？</p>\n<p>是啊，何苦一直留恋从前，何苦为难自己也为难别人呢？应该只是觉得还有一丝希望还有一点机会就不想放弃。</p>\n<p>一丝希望可以让你丢掉所有的尊严和骄傲，让你恨不得把自己埋在地底下去。一丝希望也能抵挡住无限的伤害。</p>\n<p>但是，其实也只是一丝希望而已，总有耗尽的一天，总有被现实击穿的一天，没了就永远没了。</p>\n<p>连这些都没了，还想要停留在过去吗？</p>\n<p>是时候say goodbye了。</p>\n<p>总要向前看，不然谁愿意跟着一个人停留在过去，谁想带着一个不敢相信未来的人闯荡呢？</p>\n<p>或许生活总能继续，但是生命中总能感觉到死的诱惑。</p>\n<p>我想彻底抹除出现在我身上的你的痕迹了。我的未来不会再有从前那个我，我也不会遇见曾经那个你。</p>\n<p>嗯，噩梦也挺好的，起码让人不继续活在梦里。</p>\n<p>这些日子，我丧失对生活的希望，怀疑自己的人生。不止一次的想着即使现在死掉和以后死掉没有什么区别。</p>\n<p>这些都拜你所赐。</p>\n<p>我应该永远都不会理解你的想法了，我想我该醒过来了，再不醒过来，恐怕我真的要死在这梦里，死在过去了。</p>\n<p>你确实很坏。</p>\n<p>我要踏过这所有的绝望和过往，我要走了。</p>\n","categories":["思考"],"tags":["希望"]},{"title":"无题","url":"https://suool.net/2016/08/17/hello-world/","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><p>Welcome to <a href=\"http://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"http://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"http://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h1 id=\"假如\">假如</h1>\n<p>如果时光倒流，我能做什么？</p>\n<p>这一辈子就这么长, 怎么过完全看你的选择了. <a id=\"more\"></a></p>\n<ul>\n<li>2016-8-18</li>\n</ul>\n<p>最近愈发的感觉到绝望和无助, 感觉自己所想的很多东西都是自己的妄想. 连白日梦都算不得.</p>\n<ul>\n<li>2016-9-5</li>\n</ul>\n<p>感觉没必要存在这样一个博客, 对于表达自己已经彻底的失去了兴趣.</p>\n<p>当前这个环境, 大家不会关注别人真正需要什么, 也对你在思考什么不感兴趣. 我们都是这个社会创造出来的程式罢了, 按照一些约定俗成的规则去行事, 按照所谓的主流来制定自己存在的逻辑.</p>\n<p>所以, 表达自己什么的, 没有必要, 不想过多的去争辩什么了, 没意思.</p>\n<p>就这样吧.</p>\n<ul>\n<li>2016-9-11</li>\n</ul>\n<p>心情低落到了极点, 也悲观到极点.</p>\n<p>我现在深深的感觉到自己的幼稚和孩子气, 一直都想要找个人来依靠. 这就是我的心理吧.</p>\n<p>凡人皆有一死, 纵然多活几十年, 无甚成就, 又有什么意思呢?</p>\n<p>其实不是我对未来绝望, 而是我对自己绝望, 过了这么多年, 我依然是如此怯懦的本性.</p>\n<p>性格真是一个难以改变的东西, 你能挣脱性格的限制, 那么是不是也挣脱了命运的掌控呢?</p>\n<p>这些想法以及现在这些日子总是让我不经意的想起高中那段阴暗的人生.</p>\n<ul>\n<li>2016-9-25</li>\n</ul>\n<p>昨天为了看程璧的演唱会回了广州.</p>\n<p>感觉程璧的现场真的很让人享受, 差不多是按着一曲中文一曲日语歌的节奏, 偶尔还会朗读几首小诗.</p>\n<p>嗯, 感觉女孩子读诗的样子真的是美极了.</p>\n<p>整个演唱会感觉很棒, 下次有机会肯定还要听.</p>\n<p>而且一定要去次好妹妹的.</p>\n<p>今天回到了学校, 借了行志的饭卡混进了图书馆, 写了一天代码......</p>\n<p>中午还和一个老朋友弘毅一起吃了饭, 聊了很多东西.</p>\n<p>图书馆真是一个学习的好地方啊, 可惜来的机会太少了.</p>\n<p>以后有机会一定要常回来~</p>\n","categories":["思考"],"tags":["杂感"]},{"title":"404","url":"https://suool.net/404.html","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\">\n<!DOCTYPE HTML>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.8.0\">\n  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n  <meta name=\"robots\" content=\"all\">\n  <meta name=\"robots\" content=\"index,follow\">\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"https://qzone.qq.com/gy/404/style/404style.css\"><!-- hexo-inject:begin --><!-- hexo-inject:end -->\n</head>\n<body>\n  <!-- hexo-inject:begin --><!-- hexo-inject:end --><script type=\"text/plain\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\" homepageurl=\"/\" homepagename=\"回到我的主页\">\n  </script>\n  <script src=\"https://qzone.qq.com/gy/404/data.js\" charset=\"utf-8\"></script>\n  <script src=\"https://qzone.qq.com/gy/404/page.js\" charset=\"utf-8\"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->\n</body>\n</html>","categories":[],"tags":[]},{"title":"","url":"https://suool.net/Drcom-WEB.html","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><!DOCTYPE HTML>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.8.0\">\n<!-- hexo-inject:begin --><!-- hexo-inject:end --><title>广财Dr.com登录</title>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\">\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<meta name=\"keywords\" content=\"Login form web template, Sign up Web Templates, Flat Web Templates, Login signup Responsive web template, Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design\">\n<style type=\"text/css\">\n  /*--\nCSS Author URL: http://w3layouts.com\nLicense: Creative Commons Attribution 3.0 Unported\nLicense URL: http://creativecommons.org/licenses/by/3.0/\n--*/\nhtml,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,dl,dt,dd,ol,nav ul,nav li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}\narticle, aside, details, figcaption, figure,footer, header, hgroup, menu, nav, section {display: block;}\nol,ul{list-style:none;margin:0;padding:0;}\nblockquote,q{quotes:none;}\nblockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}\ntable{border-collapse:collapse;border-spacing:0;}\n/* start editing from here */\na{text-decoration:none;}\n.txt-rt{text-align:right;}/* text align right */\n.txt-lt{text-align:left;}/* text align left */\n.txt-center{text-align:center;}/* text align center */\n.float-rt{float:right;}/* float right */\n.float-lt{float:left;}/* float left */\n.clear{clear:both;}/* clear float */\n.pos-relative{position:relative;}/* Position Relative */\n.pos-absolute{position:absolute;}/* Position Absolute */\n.vertical-base{ vertical-align:baseline;}/* vertical align baseline */\n.vertical-top{  vertical-align:top;}/* vertical align top */\n.underline{ padding-bottom:5px; border-bottom: 1px solid #eee; margin:0 0 20px 0;}/* Add 5px bottom padding and a underline */\nnav.vertical ul li{ display:block;}/* vertical menu */\nnav.horizontal ul li{ display: inline-block;}/* horizontal menu */\nimg{max-width:100%;}\n/*end reset*/\n/*--header start here--*/\nbody {\n  background:  #8E8E8E;\n  background-size: cover;\n  padding: 80px 0px 70px 0px;\n  font-family: 'Roboto', sans-serif;\n  font-size: 100%;\n}\n.login{\n  width: 40%;\n  background: #fff;\n  margin: 0 auto;\n  padding: 10px;\n}\n.login-main {\n  border: 2px solid #7397D1;\n\n}\n.login-top {\n  padding: 45px 0px;\n  text-align: center;\n  position: relative;\n}\n.login-top h1 {\n  font-size: 26px;\n  font-weight: 500;\n  color: #37588B;\n  margin: 10px 0px 35px 0px;\n}\nspan.anc-color {\n  color: #8E8E8E;\n  font-weight: 300;\n}\n.login-top ul {\n   margin: 27px 0px 20px 0px;\n}\n.login-top ul li{\n  display:inline-block;\n}\n.login-top ul li a {\n  background:  #8E8E8E;\n  width: 35px;\n  height: 34px;\n  display: block;\n  margin: 0px 13px 0px 0px;\n}\n.login-top ul li a.fa {\n  background-position: 0px -35px;\n}\n.login-top ul li a.tw {\n  background-position: -35px -35px;\n}\n.login-top ul li a.g {\n   background-position: -72px -35px;\n}\n.login-top ul li a.fa:hover{\n background-position: 0px 0px;\n  transition: 0.5s all;\n -webkit-transition: 0.5s all;\n -moz-transition:  0.5s all;\n -o-transition:  0.5s all;\n}\n.login-top ul li a.tw:hover{\n  background-position: -35px 0px;\n  transition: 0.5s all;\n -webkit-transition: 0.5s all;\n -moz-transition:  0.5s all;\n -o-transition:  0.5s all;\n}\n.login-top ul li a.g:hover{\n  background-position: -72px 0px;\n  transition: 0.5s all;\n -webkit-transition: 0.5s all;\n -moz-transition:  0.5s all;\n -o-transition:  0.5s all;\n}\n.login-top h2 {\n  font-size: 19px;\n  font-weight: 400;\n  color: #8E8E8E;\n  position:relative;\n}\n.login-top h2:after {\n  width: 135px;\n  height: 1px;\n  background: #8e8e8e;\n  position: absolute;\n  top: 50%;\n  right: 20%;\n  content:'';\n}\n.login-top h2:before {\n  width: 135px;\n  height: 1px;\n  background: #8e8e8e;\n  position: absolute;\n  top: 50%;\n  left: 21%;\n  content:'';\n}\n.login-top h3 {\n  font-size: 19px;\n  font-weight: 400;\n  color: #8E8E8E;\n  margin: 0px 0px 16px 0px;\n   position: relative;\n}\n.login-top h3:before{\n  width: 135px;\n  height: 1px;\n  background: #8e8e8e;\n  position: absolute;\n  top: 50%;\n  left: 21%;\n  content:'';\n}\n.login-top h3:after {\n  width: 135px;\n  height: 1px;\n  background: #8e8e8e;\n  position: absolute;\n  top: 50%;\n  right: 20%;\n  content:'';\n}\n.login-top input[type=\"text\"] :-webkit-input-placeholder {\n  color:#9F8D78;\n}\n.login-top input[type=\"text\"] {\n  font-size: 15px;\n  font-weight: 400;\n  color: #000;\n  padding: 15px 10px 15px 33px;\n  width: 55%;\n  display: block;\n  border: 1px solid #8b8b8b;\n  outline:none;\n  margin: 30px auto 20px;\n  -webkit-appearance: none;\n}\n.login-top input[type=\"password\"]{\n\n  font-size: 15px;\n  font-weight: 400;\n  color: #000;\n  padding: 15px 10px 15px 33px;\n  width: 55%;\n  display: block;\n  border: 1px solid #8b8b8b;\n  margin: 0 auto;\n  outline:none;\n  -webkit-appearance: none;\n}\n.login-bottom {\n  width: 62%;\n  margin: 25px auto;\n}\n.login-check {\n  float: left;\n}\n.login-para {\n  float: right;\n}\n.login-top input[type=\"checkbox\"] {\n  display: none;\n}\n.login-top.checkbox input {\n  position: absolute;\n  left: -9999px;\n}\n.login-top.checkbox i {\n  border-color: #fff;\n  transition: border-color 0.3s;\n  -o-transition: border-color 0.3s;\n  -ms-transition: border-color 0.3s;\n  -moz-transition: border-color 0.3s;\n  -webkit-transition: border-color 0.3s;\n}\n.login-top.checkbox i:hover {\n  border-color:red;\n}\n.login-top  i:before {\n  background-color: #2da5da;\n}\n.login-top  .rating label {\n  color: #ccc;\n  transition: color 0.3s;\n  -o-transition: color 0.3s;\n  -ms-transition: color 0.3s;\n  -moz-transition: color 0.3s;\n  -webkit-transition: color 0.3s;\n}\n.login-top .checkbox input + i:after {\n  position: absolute;\n  opacity: 0;\n  transition: opacity 0.1s;\n  -o-transition: opacity 0.1s;\n  -ms-transition: opacity 0.1s;\n  -moz-transition: opacity 0.1s;\n  -webkit-transition: opacity 0.1s;\n}\n.login-top .checkbox input + i:after {\n\n  top: 0px;\n  left: 0px;\n  width: 15px;\n  height: 15px;\n}\n.login-top .checkbox {\n  padding: 8px 0px 0px 22px;\n  font-size: 15px;\n   font-weight: 400;\n  line-height: 5px;\n  color: #333;\n  cursor: pointer;\n  position: relative;\n  display: block;\n  float: left;\n}\n.login-top .checkbox:hover {\n  text-decoration: none;\n}\n.login-top  .checkbox i {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  display: block;\n  width: 15px;\n  height: 15px;\n  outline: none;\n  border: 1px solid #5e5b5b;\n}\n.login-top  .checkbox input + i:after {\n  position: absolute;\n  opacity: 0;\n  transition: opacity 0.1s;\n  -o-transition: opacity 0.1s;\n  -ms-transition: opacity 0.1s;\n  -moz-transition: opacity 0.1s;\n  -webkit-transition: opacity 0.1s;\n}\n.login-top .checkbox input + i:after {\n  color: #2da5da;\n}\n.login-top.checkbox input:checked + i,\n.login-top . input:checked + i {\n  border-color: #2da5da;\n}\n.login-top .rating input:checked ~ label {\n  color: #2da5da;\n}\n\n.login-top .checkbox input:checked + i:after {\n  opacity: 1;\n}\n.login-top input[type=\"submit\"] {\n  background: #37588B;\n  color: #FFF;\n  border:none;\n  font-size: 23px;\n  font-weight: 400;\n  padding: 10px 0px;\n  width: 62%;\n  cursor: pointer;\n  outline: none;\n}\n.login-top input[type=\"submit\"]:hover{\n  background:#777;\n  transition: 0.5s all;\n  -webkit-transition: 0.5s all;\n  -moz-transition: 0.5s all;\n  -o-transition: 0.5s all;\n}\n.login-top h4 {\n  font-size: 19px;\n  font-weight: 400;\n  color: #bababa;\n  margin: 15px 0px 16px 0px;\n}\n.login-top h4 a{\n  font-size: 19px;\n  font-weight: 400;\n  color: #969696;\n  text-decoration: underline;\n}\n.login-top h4 a:hover{\n  color: #37588B;\n  transition: 0.5s all;\n  -webkit-transition: 0.5s all;\n  -moz-transition: 0.5s all;\n  -o-transition: 0.5s all;\n}\n.login-top p a {\n  font-size: 15px;\n  font-weight: 400;\n  color: #8e8e8e;\n}\n.login-top p a:hover{\n  color:#000;\n  transition: 0.5s all;\n  -webkit-transition: 0.5s all;\n  -moz-transition: 0.5s all;\n  -o-transition: 0.5s all;\n}\n.copyright p {\n  font-size: 16px;\n  font-weight: 400;\n  color: #fff;\n  text-align: center;\n  padding: 100px 0px 0px 0px;\n}\n.copyright p a{\n  font-size: 16px;\n  font-weight: 400;\n  color: #37588B;\n}\n.copyright p a:hover{\n  color: #fff;\n  transition: 0.5s all;\n  -webkit-transition: 0.5s all;\n  -moz-transition: 0.5s all;\n  -o-transition: 0.5s all;\n}\n</style><!-- hexo-inject:begin --><!-- hexo-inject:end -->\n</head>\n<body>\n\n<!-- hexo-inject:begin --><!-- hexo-inject:end --><!--header start here-->\n <form action=\"http://58.62.247.115/\" method=\"post\" enctype=\"application/x-www-form-urlencoded\" id=\"form1\" name=\"form1\">\n\t<div class=\"login\">\n<!-- 输入框的Name等属性不要改 !-->\n\t\t <div class=\"login-main\">\n\t\t \t\t<div class=\"login-top\">\n\t\t \t\t\t<h1>DR.COM</h1>\n          <div>\n            <p id=\"hideText\" style=\"display:none;\">仅电信号可用，可以一号多人登陆，如果不点退出则重启后依旧可上网 </p>\n          </div>\n\t\t \t\t\t<input type=\"text\" placeholder=\"学号\" name=\"DDDDD\" value=\"\" id=\"DDDDD\">\n\t\t \t\t\t<input type=\"password\" name=\"upass\" placeholder=\"密码\" value=\"\" id=\"upass\">\n\t\t \t\t\t\t<input type=\"hidden\" name=\"0MKKey\" value=\"%B5%C7%C2%BC+Login\" id=\"0MKKey\">\n          <div class=\"login-bottom\">\n\t\t\t \t\t\t<div class=\"clear\"> </div>\n\t\t \t\t\t</div>\n\n          <input type=\"submit\" action=\"http://58.62.247.115/\" value=\"登陆\" method=\"post\" name=\"Submit\">\n\t\t \t\t\t</div></div></div></form>\n          <div style=\"height:5px\">\n\n          </div>\n\t\t \t\t\t<form action=\"http://58.62.247.115/F.htm\" method=\"get\" enctype=\"application/x-www-form-urlencoded\" id=\"form2\" name=\"form2\">\n            \t<input type=\"submit\" action=\"http://58.62.247.115/F.htm\" value=\"退出\" method=\"post\" name=\"Submit2\">\n\t\t \t\t\t</form>\n\t\t \t\t\n        <a href=\"#\" onclick=\"return click_help('hideText')\">&nbsp;Help</a>\n\n\t\t \t\n  \n<!--header end here-->\n<script language=\"javascript\" type=\"text/javascript\">\n        function click_help(divDisplay){\n            if(document.getElementById(divDisplay).style.display != \"block\")  {\n                document.getElementById(divDisplay).style.display = \"block\";\n            }\n            else  {\n                document.getElementById(divDisplay).style.display = \"none\";\n            }\n        }\n</script>\n<!-- 2015-10-12 GDUFE XINXI STUDENT!--><!-- hexo-inject:begin --><!-- hexo-inject:end -->\n</body>\n</html>\n","categories":[],"tags":[]},{"title":"关于我","url":"https://suool.net/about/index.html","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><p>写博客数年了, 博客也被自己格式化数次, 所以很多历史文章都没有了.</p>\n<p>目前全职工作是 iOS 开发工程师, 阴差阳错干了这行, 是我万万没想到的.</p>\n<p>年龄越大, 想法越少, 对于生活妥协的越来越多, 对于理想越来越没有理想.</p>\n<p>为了明天而活着.</p>\n","categories":[],"tags":[]},{"title":"categories","url":"https://suool.net/categories/index.html","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\">\n","categories":[],"tags":[]},{"title":"tags","url":"https://suool.net/tags/index.html","content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\">\n","categories":[],"tags":[]}]